fad70e19315f51973ed0458c20a03104
"use strict";

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

var pathModule = require('path');
var isWindows = process.platform === 'win32';
var fs = require('fs');

// JavaScript implementation of realpath, ported from node pre-v6

var DEBUG = process.env.NODE_DEBUG && /fs/.test(process.env.NODE_DEBUG);
function rethrow() {
  // Only enable in debug mode. A backtrace uses ~1000 bytes of heap space and
  // is fairly slow to generate.
  var callback;
  if (DEBUG) {
    var backtrace = new Error();
    callback = debugCallback;
  } else callback = missingCallback;
  return callback;
  function debugCallback(err) {
    if (err) {
      backtrace.message = err.message;
      err = backtrace;
      missingCallback(err);
    }
  }
  function missingCallback(err) {
    if (err) {
      if (process.throwDeprecation) throw err; // Forgot a callback but don't know where? Use NODE_DEBUG=fs
      else if (!process.noDeprecation) {
        var msg = 'fs: missing callback ' + (err.stack || err.message);
        if (process.traceDeprecation) console.trace(msg);else console.error(msg);
      }
    }
  }
}
function maybeCallback(cb) {
  return typeof cb === 'function' ? cb : rethrow();
}
var normalize = pathModule.normalize;

// Regexp that finds the next partion of a (partial) path
// result is [base_with_slash, base], e.g. ['somedir/', 'somedir']
if (isWindows) {
  var nextPartRe = /(.*?)(?:[\/\\]+|$)/g;
} else {
  var nextPartRe = /(.*?)(?:[\/]+|$)/g;
}

// Regex to find the device root, including trailing slash. E.g. 'c:\\'.
if (isWindows) {
  var splitRootRe = /^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;
} else {
  var splitRootRe = /^[\/]*/;
}
exports.realpathSync = function realpathSync(p, cache) {
  // make p is absolute
  p = pathModule.resolve(p);
  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {
    return cache[p];
  }
  var original = p,
    seenLinks = {},
    knownHard = {};

  // current character position in p
  var pos;
  // the partial path so far, including a trailing slash if any
  var current;
  // the partial path without a trailing slash (except when pointing at a root)
  var base;
  // the partial path scanned in the previous round, with slash
  var previous;
  start();
  function start() {
    // Skip over roots
    var m = splitRootRe.exec(p);
    pos = m[0].length;
    current = m[0];
    base = m[0];
    previous = '';

    // On windows, check that the root exists. On unix there is no need.
    if (isWindows && !knownHard[base]) {
      fs.lstatSync(base);
      knownHard[base] = true;
    }
  }

  // walk down the path, swapping out linked pathparts for their real
  // values
  // NB: p.length changes.
  while (pos < p.length) {
    // find the next part
    nextPartRe.lastIndex = pos;
    var result = nextPartRe.exec(p);
    previous = current;
    current += result[0];
    base = previous + result[1];
    pos = nextPartRe.lastIndex;

    // continue if not a symlink
    if (knownHard[base] || cache && cache[base] === base) {
      continue;
    }
    var resolvedLink;
    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {
      // some known symbolic link.  no need to stat again.
      resolvedLink = cache[base];
    } else {
      var stat = fs.lstatSync(base);
      if (!stat.isSymbolicLink()) {
        knownHard[base] = true;
        if (cache) cache[base] = base;
        continue;
      }

      // read the link if it wasn't read before
      // dev/ino always return 0 on windows, so skip the check.
      var linkTarget = null;
      if (!isWindows) {
        var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);
        if (seenLinks.hasOwnProperty(id)) {
          linkTarget = seenLinks[id];
        }
      }
      if (linkTarget === null) {
        fs.statSync(base);
        linkTarget = fs.readlinkSync(base);
      }
      resolvedLink = pathModule.resolve(previous, linkTarget);
      // track this, if given a cache.
      if (cache) cache[base] = resolvedLink;
      if (!isWindows) seenLinks[id] = linkTarget;
    }

    // resolve the link, then start over
    p = pathModule.resolve(resolvedLink, p.slice(pos));
    start();
  }
  if (cache) cache[original] = p;
  return p;
};
exports.realpath = function realpath(p, cache, cb) {
  if (typeof cb !== 'function') {
    cb = maybeCallback(cache);
    cache = null;
  }

  // make p is absolute
  p = pathModule.resolve(p);
  if (cache && Object.prototype.hasOwnProperty.call(cache, p)) {
    return process.nextTick(cb.bind(null, null, cache[p]));
  }
  var original = p,
    seenLinks = {},
    knownHard = {};

  // current character position in p
  var pos;
  // the partial path so far, including a trailing slash if any
  var current;
  // the partial path without a trailing slash (except when pointing at a root)
  var base;
  // the partial path scanned in the previous round, with slash
  var previous;
  start();
  function start() {
    // Skip over roots
    var m = splitRootRe.exec(p);
    pos = m[0].length;
    current = m[0];
    base = m[0];
    previous = '';

    // On windows, check that the root exists. On unix there is no need.
    if (isWindows && !knownHard[base]) {
      fs.lstat(base, function (err) {
        if (err) return cb(err);
        knownHard[base] = true;
        LOOP();
      });
    } else {
      process.nextTick(LOOP);
    }
  }

  // walk down the path, swapping out linked pathparts for their real
  // values
  function LOOP() {
    // stop if scanned past end of path
    if (pos >= p.length) {
      if (cache) cache[original] = p;
      return cb(null, p);
    }

    // find the next part
    nextPartRe.lastIndex = pos;
    var result = nextPartRe.exec(p);
    previous = current;
    current += result[0];
    base = previous + result[1];
    pos = nextPartRe.lastIndex;

    // continue if not a symlink
    if (knownHard[base] || cache && cache[base] === base) {
      return process.nextTick(LOOP);
    }
    if (cache && Object.prototype.hasOwnProperty.call(cache, base)) {
      // known symbolic link.  no need to stat again.
      return gotResolvedLink(cache[base]);
    }
    return fs.lstat(base, gotStat);
  }
  function gotStat(err, stat) {
    if (err) return cb(err);

    // if not a symlink, skip to the next path part
    if (!stat.isSymbolicLink()) {
      knownHard[base] = true;
      if (cache) cache[base] = base;
      return process.nextTick(LOOP);
    }

    // stat & read the link if not read before
    // call gotTarget as soon as the link target is known
    // dev/ino always return 0 on windows, so skip the check.
    if (!isWindows) {
      var id = stat.dev.toString(32) + ':' + stat.ino.toString(32);
      if (seenLinks.hasOwnProperty(id)) {
        return gotTarget(null, seenLinks[id], base);
      }
    }
    fs.stat(base, function (err) {
      if (err) return cb(err);
      fs.readlink(base, function (err, target) {
        if (!isWindows) seenLinks[id] = target;
        gotTarget(err, target);
      });
    });
  }
  function gotTarget(err, target, base) {
    if (err) return cb(err);
    var resolvedLink = pathModule.resolve(previous, target);
    if (cache) cache[base] = resolvedLink;
    gotResolvedLink(resolvedLink);
  }
  function gotResolvedLink(resolvedLink) {
    // resolve the link, then start over
    p = pathModule.resolve(resolvedLink, p.slice(pos));
    start();
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXRoTW9kdWxlIiwicmVxdWlyZSIsImlzV2luZG93cyIsInByb2Nlc3MiLCJwbGF0Zm9ybSIsImZzIiwiREVCVUciLCJlbnYiLCJOT0RFX0RFQlVHIiwidGVzdCIsInJldGhyb3ciLCJjYWxsYmFjayIsImJhY2t0cmFjZSIsIkVycm9yIiwiZGVidWdDYWxsYmFjayIsIm1pc3NpbmdDYWxsYmFjayIsImVyciIsIm1lc3NhZ2UiLCJ0aHJvd0RlcHJlY2F0aW9uIiwibm9EZXByZWNhdGlvbiIsIm1zZyIsInN0YWNrIiwidHJhY2VEZXByZWNhdGlvbiIsImNvbnNvbGUiLCJ0cmFjZSIsImVycm9yIiwibWF5YmVDYWxsYmFjayIsImNiIiwibm9ybWFsaXplIiwibmV4dFBhcnRSZSIsInNwbGl0Um9vdFJlIiwiZXhwb3J0cyIsInJlYWxwYXRoU3luYyIsInAiLCJjYWNoZSIsInJlc29sdmUiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJvcmlnaW5hbCIsInNlZW5MaW5rcyIsImtub3duSGFyZCIsInBvcyIsImN1cnJlbnQiLCJiYXNlIiwicHJldmlvdXMiLCJzdGFydCIsIm0iLCJleGVjIiwibGVuZ3RoIiwibHN0YXRTeW5jIiwibGFzdEluZGV4IiwicmVzdWx0IiwicmVzb2x2ZWRMaW5rIiwic3RhdCIsImlzU3ltYm9saWNMaW5rIiwibGlua1RhcmdldCIsImlkIiwiZGV2IiwidG9TdHJpbmciLCJpbm8iLCJzdGF0U3luYyIsInJlYWRsaW5rU3luYyIsInNsaWNlIiwicmVhbHBhdGgiLCJuZXh0VGljayIsImJpbmQiLCJsc3RhdCIsIkxPT1AiLCJnb3RSZXNvbHZlZExpbmsiLCJnb3RTdGF0IiwiZ290VGFyZ2V0IiwicmVhZGxpbmsiLCJ0YXJnZXQiXSwic291cmNlcyI6WyJvbGQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbnZhciBwYXRoTW9kdWxlID0gcmVxdWlyZSgncGF0aCcpO1xudmFyIGlzV2luZG93cyA9IHByb2Nlc3MucGxhdGZvcm0gPT09ICd3aW4zMic7XG52YXIgZnMgPSByZXF1aXJlKCdmcycpO1xuXG4vLyBKYXZhU2NyaXB0IGltcGxlbWVudGF0aW9uIG9mIHJlYWxwYXRoLCBwb3J0ZWQgZnJvbSBub2RlIHByZS12NlxuXG52YXIgREVCVUcgPSBwcm9jZXNzLmVudi5OT0RFX0RFQlVHICYmIC9mcy8udGVzdChwcm9jZXNzLmVudi5OT0RFX0RFQlVHKTtcblxuZnVuY3Rpb24gcmV0aHJvdygpIHtcbiAgLy8gT25seSBlbmFibGUgaW4gZGVidWcgbW9kZS4gQSBiYWNrdHJhY2UgdXNlcyB+MTAwMCBieXRlcyBvZiBoZWFwIHNwYWNlIGFuZFxuICAvLyBpcyBmYWlybHkgc2xvdyB0byBnZW5lcmF0ZS5cbiAgdmFyIGNhbGxiYWNrO1xuICBpZiAoREVCVUcpIHtcbiAgICB2YXIgYmFja3RyYWNlID0gbmV3IEVycm9yO1xuICAgIGNhbGxiYWNrID0gZGVidWdDYWxsYmFjaztcbiAgfSBlbHNlXG4gICAgY2FsbGJhY2sgPSBtaXNzaW5nQ2FsbGJhY2s7XG5cbiAgcmV0dXJuIGNhbGxiYWNrO1xuXG4gIGZ1bmN0aW9uIGRlYnVnQ2FsbGJhY2soZXJyKSB7XG4gICAgaWYgKGVycikge1xuICAgICAgYmFja3RyYWNlLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcbiAgICAgIGVyciA9IGJhY2t0cmFjZTtcbiAgICAgIG1pc3NpbmdDYWxsYmFjayhlcnIpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1pc3NpbmdDYWxsYmFjayhlcnIpIHtcbiAgICBpZiAoZXJyKSB7XG4gICAgICBpZiAocHJvY2Vzcy50aHJvd0RlcHJlY2F0aW9uKVxuICAgICAgICB0aHJvdyBlcnI7ICAvLyBGb3Jnb3QgYSBjYWxsYmFjayBidXQgZG9uJ3Qga25vdyB3aGVyZT8gVXNlIE5PREVfREVCVUc9ZnNcbiAgICAgIGVsc2UgaWYgKCFwcm9jZXNzLm5vRGVwcmVjYXRpb24pIHtcbiAgICAgICAgdmFyIG1zZyA9ICdmczogbWlzc2luZyBjYWxsYmFjayAnICsgKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIGlmIChwcm9jZXNzLnRyYWNlRGVwcmVjYXRpb24pXG4gICAgICAgICAgY29uc29sZS50cmFjZShtc2cpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBtYXliZUNhbGxiYWNrKGNiKSB7XG4gIHJldHVybiB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IHJldGhyb3coKTtcbn1cblxudmFyIG5vcm1hbGl6ZSA9IHBhdGhNb2R1bGUubm9ybWFsaXplO1xuXG4vLyBSZWdleHAgdGhhdCBmaW5kcyB0aGUgbmV4dCBwYXJ0aW9uIG9mIGEgKHBhcnRpYWwpIHBhdGhcbi8vIHJlc3VsdCBpcyBbYmFzZV93aXRoX3NsYXNoLCBiYXNlXSwgZS5nLiBbJ3NvbWVkaXIvJywgJ3NvbWVkaXInXVxuaWYgKGlzV2luZG93cykge1xuICB2YXIgbmV4dFBhcnRSZSA9IC8oLio/KSg/OltcXC9cXFxcXSt8JCkvZztcbn0gZWxzZSB7XG4gIHZhciBuZXh0UGFydFJlID0gLyguKj8pKD86W1xcL10rfCQpL2c7XG59XG5cbi8vIFJlZ2V4IHRvIGZpbmQgdGhlIGRldmljZSByb290LCBpbmNsdWRpbmcgdHJhaWxpbmcgc2xhc2guIEUuZy4gJ2M6XFxcXCcuXG5pZiAoaXNXaW5kb3dzKSB7XG4gIHZhciBzcGxpdFJvb3RSZSA9IC9eKD86W2EtekEtWl06fFtcXFxcXFwvXXsyfVteXFxcXFxcL10rW1xcXFxcXC9dW15cXFxcXFwvXSspP1tcXFxcXFwvXSovO1xufSBlbHNlIHtcbiAgdmFyIHNwbGl0Um9vdFJlID0gL15bXFwvXSovO1xufVxuXG5leHBvcnRzLnJlYWxwYXRoU3luYyA9IGZ1bmN0aW9uIHJlYWxwYXRoU3luYyhwLCBjYWNoZSkge1xuICAvLyBtYWtlIHAgaXMgYWJzb2x1dGVcbiAgcCA9IHBhdGhNb2R1bGUucmVzb2x2ZShwKTtcblxuICBpZiAoY2FjaGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBwKSkge1xuICAgIHJldHVybiBjYWNoZVtwXTtcbiAgfVxuXG4gIHZhciBvcmlnaW5hbCA9IHAsXG4gICAgICBzZWVuTGlua3MgPSB7fSxcbiAgICAgIGtub3duSGFyZCA9IHt9O1xuXG4gIC8vIGN1cnJlbnQgY2hhcmFjdGVyIHBvc2l0aW9uIGluIHBcbiAgdmFyIHBvcztcbiAgLy8gdGhlIHBhcnRpYWwgcGF0aCBzbyBmYXIsIGluY2x1ZGluZyBhIHRyYWlsaW5nIHNsYXNoIGlmIGFueVxuICB2YXIgY3VycmVudDtcbiAgLy8gdGhlIHBhcnRpYWwgcGF0aCB3aXRob3V0IGEgdHJhaWxpbmcgc2xhc2ggKGV4Y2VwdCB3aGVuIHBvaW50aW5nIGF0IGEgcm9vdClcbiAgdmFyIGJhc2U7XG4gIC8vIHRoZSBwYXJ0aWFsIHBhdGggc2Nhbm5lZCBpbiB0aGUgcHJldmlvdXMgcm91bmQsIHdpdGggc2xhc2hcbiAgdmFyIHByZXZpb3VzO1xuXG4gIHN0YXJ0KCk7XG5cbiAgZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgLy8gU2tpcCBvdmVyIHJvb3RzXG4gICAgdmFyIG0gPSBzcGxpdFJvb3RSZS5leGVjKHApO1xuICAgIHBvcyA9IG1bMF0ubGVuZ3RoO1xuICAgIGN1cnJlbnQgPSBtWzBdO1xuICAgIGJhc2UgPSBtWzBdO1xuICAgIHByZXZpb3VzID0gJyc7XG5cbiAgICAvLyBPbiB3aW5kb3dzLCBjaGVjayB0aGF0IHRoZSByb290IGV4aXN0cy4gT24gdW5peCB0aGVyZSBpcyBubyBuZWVkLlxuICAgIGlmIChpc1dpbmRvd3MgJiYgIWtub3duSGFyZFtiYXNlXSkge1xuICAgICAgZnMubHN0YXRTeW5jKGJhc2UpO1xuICAgICAga25vd25IYXJkW2Jhc2VdID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyB3YWxrIGRvd24gdGhlIHBhdGgsIHN3YXBwaW5nIG91dCBsaW5rZWQgcGF0aHBhcnRzIGZvciB0aGVpciByZWFsXG4gIC8vIHZhbHVlc1xuICAvLyBOQjogcC5sZW5ndGggY2hhbmdlcy5cbiAgd2hpbGUgKHBvcyA8IHAubGVuZ3RoKSB7XG4gICAgLy8gZmluZCB0aGUgbmV4dCBwYXJ0XG4gICAgbmV4dFBhcnRSZS5sYXN0SW5kZXggPSBwb3M7XG4gICAgdmFyIHJlc3VsdCA9IG5leHRQYXJ0UmUuZXhlYyhwKTtcbiAgICBwcmV2aW91cyA9IGN1cnJlbnQ7XG4gICAgY3VycmVudCArPSByZXN1bHRbMF07XG4gICAgYmFzZSA9IHByZXZpb3VzICsgcmVzdWx0WzFdO1xuICAgIHBvcyA9IG5leHRQYXJ0UmUubGFzdEluZGV4O1xuXG4gICAgLy8gY29udGludWUgaWYgbm90IGEgc3ltbGlua1xuICAgIGlmIChrbm93bkhhcmRbYmFzZV0gfHwgKGNhY2hlICYmIGNhY2hlW2Jhc2VdID09PSBiYXNlKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIHJlc29sdmVkTGluaztcbiAgICBpZiAoY2FjaGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBiYXNlKSkge1xuICAgICAgLy8gc29tZSBrbm93biBzeW1ib2xpYyBsaW5rLiAgbm8gbmVlZCB0byBzdGF0IGFnYWluLlxuICAgICAgcmVzb2x2ZWRMaW5rID0gY2FjaGVbYmFzZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzdGF0ID0gZnMubHN0YXRTeW5jKGJhc2UpO1xuICAgICAgaWYgKCFzdGF0LmlzU3ltYm9saWNMaW5rKCkpIHtcbiAgICAgICAga25vd25IYXJkW2Jhc2VdID0gdHJ1ZTtcbiAgICAgICAgaWYgKGNhY2hlKSBjYWNoZVtiYXNlXSA9IGJhc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyByZWFkIHRoZSBsaW5rIGlmIGl0IHdhc24ndCByZWFkIGJlZm9yZVxuICAgICAgLy8gZGV2L2lubyBhbHdheXMgcmV0dXJuIDAgb24gd2luZG93cywgc28gc2tpcCB0aGUgY2hlY2suXG4gICAgICB2YXIgbGlua1RhcmdldCA9IG51bGw7XG4gICAgICBpZiAoIWlzV2luZG93cykge1xuICAgICAgICB2YXIgaWQgPSBzdGF0LmRldi50b1N0cmluZygzMikgKyAnOicgKyBzdGF0Lmluby50b1N0cmluZygzMik7XG4gICAgICAgIGlmIChzZWVuTGlua3MuaGFzT3duUHJvcGVydHkoaWQpKSB7XG4gICAgICAgICAgbGlua1RhcmdldCA9IHNlZW5MaW5rc1tpZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChsaW5rVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICAgIGZzLnN0YXRTeW5jKGJhc2UpO1xuICAgICAgICBsaW5rVGFyZ2V0ID0gZnMucmVhZGxpbmtTeW5jKGJhc2UpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZWRMaW5rID0gcGF0aE1vZHVsZS5yZXNvbHZlKHByZXZpb3VzLCBsaW5rVGFyZ2V0KTtcbiAgICAgIC8vIHRyYWNrIHRoaXMsIGlmIGdpdmVuIGEgY2FjaGUuXG4gICAgICBpZiAoY2FjaGUpIGNhY2hlW2Jhc2VdID0gcmVzb2x2ZWRMaW5rO1xuICAgICAgaWYgKCFpc1dpbmRvd3MpIHNlZW5MaW5rc1tpZF0gPSBsaW5rVGFyZ2V0O1xuICAgIH1cblxuICAgIC8vIHJlc29sdmUgdGhlIGxpbmssIHRoZW4gc3RhcnQgb3ZlclxuICAgIHAgPSBwYXRoTW9kdWxlLnJlc29sdmUocmVzb2x2ZWRMaW5rLCBwLnNsaWNlKHBvcykpO1xuICAgIHN0YXJ0KCk7XG4gIH1cblxuICBpZiAoY2FjaGUpIGNhY2hlW29yaWdpbmFsXSA9IHA7XG5cbiAgcmV0dXJuIHA7XG59O1xuXG5cbmV4cG9ydHMucmVhbHBhdGggPSBmdW5jdGlvbiByZWFscGF0aChwLCBjYWNoZSwgY2IpIHtcbiAgaWYgKHR5cGVvZiBjYiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIGNiID0gbWF5YmVDYWxsYmFjayhjYWNoZSk7XG4gICAgY2FjaGUgPSBudWxsO1xuICB9XG5cbiAgLy8gbWFrZSBwIGlzIGFic29sdXRlXG4gIHAgPSBwYXRoTW9kdWxlLnJlc29sdmUocCk7XG5cbiAgaWYgKGNhY2hlICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChjYWNoZSwgcCkpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhjYi5iaW5kKG51bGwsIG51bGwsIGNhY2hlW3BdKSk7XG4gIH1cblxuICB2YXIgb3JpZ2luYWwgPSBwLFxuICAgICAgc2VlbkxpbmtzID0ge30sXG4gICAgICBrbm93bkhhcmQgPSB7fTtcblxuICAvLyBjdXJyZW50IGNoYXJhY3RlciBwb3NpdGlvbiBpbiBwXG4gIHZhciBwb3M7XG4gIC8vIHRoZSBwYXJ0aWFsIHBhdGggc28gZmFyLCBpbmNsdWRpbmcgYSB0cmFpbGluZyBzbGFzaCBpZiBhbnlcbiAgdmFyIGN1cnJlbnQ7XG4gIC8vIHRoZSBwYXJ0aWFsIHBhdGggd2l0aG91dCBhIHRyYWlsaW5nIHNsYXNoIChleGNlcHQgd2hlbiBwb2ludGluZyBhdCBhIHJvb3QpXG4gIHZhciBiYXNlO1xuICAvLyB0aGUgcGFydGlhbCBwYXRoIHNjYW5uZWQgaW4gdGhlIHByZXZpb3VzIHJvdW5kLCB3aXRoIHNsYXNoXG4gIHZhciBwcmV2aW91cztcblxuICBzdGFydCgpO1xuXG4gIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIC8vIFNraXAgb3ZlciByb290c1xuICAgIHZhciBtID0gc3BsaXRSb290UmUuZXhlYyhwKTtcbiAgICBwb3MgPSBtWzBdLmxlbmd0aDtcbiAgICBjdXJyZW50ID0gbVswXTtcbiAgICBiYXNlID0gbVswXTtcbiAgICBwcmV2aW91cyA9ICcnO1xuXG4gICAgLy8gT24gd2luZG93cywgY2hlY2sgdGhhdCB0aGUgcm9vdCBleGlzdHMuIE9uIHVuaXggdGhlcmUgaXMgbm8gbmVlZC5cbiAgICBpZiAoaXNXaW5kb3dzICYmICFrbm93bkhhcmRbYmFzZV0pIHtcbiAgICAgIGZzLmxzdGF0KGJhc2UsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcbiAgICAgICAga25vd25IYXJkW2Jhc2VdID0gdHJ1ZTtcbiAgICAgICAgTE9PUCgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MubmV4dFRpY2soTE9PUCk7XG4gICAgfVxuICB9XG5cbiAgLy8gd2FsayBkb3duIHRoZSBwYXRoLCBzd2FwcGluZyBvdXQgbGlua2VkIHBhdGhwYXJ0cyBmb3IgdGhlaXIgcmVhbFxuICAvLyB2YWx1ZXNcbiAgZnVuY3Rpb24gTE9PUCgpIHtcbiAgICAvLyBzdG9wIGlmIHNjYW5uZWQgcGFzdCBlbmQgb2YgcGF0aFxuICAgIGlmIChwb3MgPj0gcC5sZW5ndGgpIHtcbiAgICAgIGlmIChjYWNoZSkgY2FjaGVbb3JpZ2luYWxdID0gcDtcbiAgICAgIHJldHVybiBjYihudWxsLCBwKTtcbiAgICB9XG5cbiAgICAvLyBmaW5kIHRoZSBuZXh0IHBhcnRcbiAgICBuZXh0UGFydFJlLmxhc3RJbmRleCA9IHBvcztcbiAgICB2YXIgcmVzdWx0ID0gbmV4dFBhcnRSZS5leGVjKHApO1xuICAgIHByZXZpb3VzID0gY3VycmVudDtcbiAgICBjdXJyZW50ICs9IHJlc3VsdFswXTtcbiAgICBiYXNlID0gcHJldmlvdXMgKyByZXN1bHRbMV07XG4gICAgcG9zID0gbmV4dFBhcnRSZS5sYXN0SW5kZXg7XG5cbiAgICAvLyBjb250aW51ZSBpZiBub3QgYSBzeW1saW5rXG4gICAgaWYgKGtub3duSGFyZFtiYXNlXSB8fCAoY2FjaGUgJiYgY2FjaGVbYmFzZV0gPT09IGJhc2UpKSB7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhMT09QKTtcbiAgICB9XG5cbiAgICBpZiAoY2FjaGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNhY2hlLCBiYXNlKSkge1xuICAgICAgLy8ga25vd24gc3ltYm9saWMgbGluay4gIG5vIG5lZWQgdG8gc3RhdCBhZ2Fpbi5cbiAgICAgIHJldHVybiBnb3RSZXNvbHZlZExpbmsoY2FjaGVbYmFzZV0pO1xuICAgIH1cblxuICAgIHJldHVybiBmcy5sc3RhdChiYXNlLCBnb3RTdGF0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvdFN0YXQoZXJyLCBzdGF0KSB7XG4gICAgaWYgKGVycikgcmV0dXJuIGNiKGVycik7XG5cbiAgICAvLyBpZiBub3QgYSBzeW1saW5rLCBza2lwIHRvIHRoZSBuZXh0IHBhdGggcGFydFxuICAgIGlmICghc3RhdC5pc1N5bWJvbGljTGluaygpKSB7XG4gICAgICBrbm93bkhhcmRbYmFzZV0gPSB0cnVlO1xuICAgICAgaWYgKGNhY2hlKSBjYWNoZVtiYXNlXSA9IGJhc2U7XG4gICAgICByZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhMT09QKTtcbiAgICB9XG5cbiAgICAvLyBzdGF0ICYgcmVhZCB0aGUgbGluayBpZiBub3QgcmVhZCBiZWZvcmVcbiAgICAvLyBjYWxsIGdvdFRhcmdldCBhcyBzb29uIGFzIHRoZSBsaW5rIHRhcmdldCBpcyBrbm93blxuICAgIC8vIGRldi9pbm8gYWx3YXlzIHJldHVybiAwIG9uIHdpbmRvd3MsIHNvIHNraXAgdGhlIGNoZWNrLlxuICAgIGlmICghaXNXaW5kb3dzKSB7XG4gICAgICB2YXIgaWQgPSBzdGF0LmRldi50b1N0cmluZygzMikgKyAnOicgKyBzdGF0Lmluby50b1N0cmluZygzMik7XG4gICAgICBpZiAoc2VlbkxpbmtzLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgICByZXR1cm4gZ290VGFyZ2V0KG51bGwsIHNlZW5MaW5rc1tpZF0sIGJhc2UpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcy5zdGF0KGJhc2UsIGZ1bmN0aW9uKGVycikge1xuICAgICAgaWYgKGVycikgcmV0dXJuIGNiKGVycik7XG5cbiAgICAgIGZzLnJlYWRsaW5rKGJhc2UsIGZ1bmN0aW9uKGVyciwgdGFyZ2V0KSB7XG4gICAgICAgIGlmICghaXNXaW5kb3dzKSBzZWVuTGlua3NbaWRdID0gdGFyZ2V0O1xuICAgICAgICBnb3RUYXJnZXQoZXJyLCB0YXJnZXQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnb3RUYXJnZXQoZXJyLCB0YXJnZXQsIGJhc2UpIHtcbiAgICBpZiAoZXJyKSByZXR1cm4gY2IoZXJyKTtcblxuICAgIHZhciByZXNvbHZlZExpbmsgPSBwYXRoTW9kdWxlLnJlc29sdmUocHJldmlvdXMsIHRhcmdldCk7XG4gICAgaWYgKGNhY2hlKSBjYWNoZVtiYXNlXSA9IHJlc29sdmVkTGluaztcbiAgICBnb3RSZXNvbHZlZExpbmsocmVzb2x2ZWRMaW5rKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdvdFJlc29sdmVkTGluayhyZXNvbHZlZExpbmspIHtcbiAgICAvLyByZXNvbHZlIHRoZSBsaW5rLCB0aGVuIHN0YXJ0IG92ZXJcbiAgICBwID0gcGF0aE1vZHVsZS5yZXNvbHZlKHJlc29sdmVkTGluaywgcC5zbGljZShwb3MpKTtcbiAgICBzdGFydCgpO1xuICB9XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQ2hDLElBQUlDLFNBQVMsR0FBR0MsT0FB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