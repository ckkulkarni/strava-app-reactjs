7b18afa8bc5204165e109e3d06241044
"use strict";

/*!
Copyright 2019 Ron Buckton

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
/*
 require('foo').implementation or require('foo/implementation') is a spec-compliant JS function,
 that will depend on a receiver (a “this” value) as the spec requires.
 */
const config = require("./config");
const nativeExec = require("./native");
const regexp_tree_1 = require("regexp-tree");
const weakMeasurementRegExp = new WeakMap();
function exec(string) {
  return config.mode === "spec-compliant" ? execSpecCompliant(this, string) : execLazy(this, string);
}
function execLazy(regexp, string) {
  const index = regexp.lastIndex;
  const result = nativeExec.call(regexp, string);
  if (result === null) return null;
  // For performance reasons, we defer computing the indices until later. This isn't spec compliant,
  // but once we compute the indices we convert the result to a data-property.
  let indicesArray;
  Object.defineProperty(result, "indices", {
    enumerable: true,
    configurable: true,
    get() {
      if (indicesArray === undefined) {
        const {
          measurementRegExp,
          groupInfos
        } = getMeasurementRegExp(regexp);
        measurementRegExp.lastIndex = index;
        const measuredResult = nativeExec.call(measurementRegExp, string);
        if (measuredResult === null) throw new TypeError();
        makeDataProperty(result, "indices", indicesArray = makeIndicesArray(measuredResult, groupInfos));
      }
      return indicesArray;
    },
    set(value) {
      makeDataProperty(result, "indices", value);
    }
  });
  return result;
}
function execSpecCompliant(regexp, string) {
  const {
    measurementRegExp,
    groupInfos
  } = getMeasurementRegExp(regexp);
  measurementRegExp.lastIndex = regexp.lastIndex;
  const measuredResult = nativeExec.call(measurementRegExp, string);
  if (measuredResult === null) return null;
  regexp.lastIndex = measurementRegExp.lastIndex;
  const result = [];
  makeDataProperty(result, 0, measuredResult[0]);
  for (const groupInfo of groupInfos) {
    makeDataProperty(result, groupInfo.oldGroupNumber, measuredResult[groupInfo.newGroupNumber]);
  }
  makeDataProperty(result, "index", measuredResult.index);
  makeDataProperty(result, "input", measuredResult.input);
  makeDataProperty(result, "groups", measuredResult.groups);
  makeDataProperty(result, "indices", makeIndicesArray(measuredResult, groupInfos));
  return result;
}
function getMeasurementRegExp(regexp) {
  let transformed = weakMeasurementRegExp.get(regexp);
  if (!transformed) {
    transformed = transformMeasurementGroups(regexp_tree_1.parse(`/${regexp.source}/${regexp.flags}`));
    weakMeasurementRegExp.set(regexp, transformed);
  }
  const groupInfos = transformed.getExtra();
  const measurementRegExp = transformed.toRegExp();
  return {
    measurementRegExp,
    groupInfos
  };
}
function makeIndicesArray(measuredResult, groupInfos) {
  const matchStart = measuredResult.index;
  const matchEnd = matchStart + measuredResult[0].length;
  const hasGroups = !!measuredResult.groups;
  const indicesArray = [];
  const groups = hasGroups ? Object.create(null) : undefined;
  makeDataProperty(indicesArray, 0, [matchStart, matchEnd]);
  for (const groupInfo of groupInfos) {
    let indices;
    if (measuredResult[groupInfo.newGroupNumber] !== undefined) {
      let startIndex = matchStart;
      if (groupInfo.measurementGroups) {
        for (const measurementGroup of groupInfo.measurementGroups) {
          startIndex += measuredResult[measurementGroup].length;
        }
      }
      const endIndex = startIndex + measuredResult[groupInfo.newGroupNumber].length;
      indices = [startIndex, endIndex];
    }
    makeDataProperty(indicesArray, groupInfo.oldGroupNumber, indices);
    if (groups && groupInfo.groupName !== undefined) {
      makeDataProperty(groups, groupInfo.groupName, indices);
    }
  }
  makeDataProperty(indicesArray, "groups", groups);
  return indicesArray;
}
function makeDataProperty(result, key, value) {
  const existingDesc = Object.getOwnPropertyDescriptor(result, key);
  if (existingDesc ? existingDesc.configurable : Object.isExtensible(result)) {
    const newDesc = {
      enumerable: existingDesc ? existingDesc.enumerable : true,
      configurable: existingDesc ? existingDesc.configurable : true,
      writable: true,
      value
    };
    Object.defineProperty(result, key, newDesc);
  }
}
let groupRenumbers;
let hasBackreferences = false;
let nodesContainingCapturingGroup = new Set();
let containsCapturingGroupStack = [];
let containsCapturingGroup = false;
let nextNewGroupNumber = 1;
let measurementGroupStack = [];
let measurementGroupsForGroup = new Map();
let newGroupNumberForGroup = new Map();
const handlers = {
  init() {
    hasBackreferences = false;
    nodesContainingCapturingGroup.clear();
    containsCapturingGroupStack.length = 0;
    containsCapturingGroup = false;
    nextNewGroupNumber = 1;
    measurementGroupStack.length = 0;
    measurementGroupsForGroup.clear();
    newGroupNumberForGroup.clear();
    groupRenumbers = [];
  },
  RegExp(path) {
    regexp_tree_1.traverse(path.node, visitor);
    if (nodesContainingCapturingGroup.size > 0) {
      regexp_tree_1.transform(path.node, builder);
      regexp_tree_1.transform(path.node, groupRenumberer);
      if (hasBackreferences) {
        regexp_tree_1.transform(path.node, backreferenceRenumberer);
      }
    }
    return false;
  }
};
const nodeCallbacks = {
  pre(path) {
    containsCapturingGroupStack.push(containsCapturingGroup);
    containsCapturingGroup = path.node.type === "Group" && path.node.capturing;
  },
  post(path) {
    if (containsCapturingGroup) {
      nodesContainingCapturingGroup.add(path.node);
    }
    containsCapturingGroup = containsCapturingGroupStack.pop() || containsCapturingGroup;
  }
};
const visitor = {
  Alternative: nodeCallbacks,
  Disjunction: nodeCallbacks,
  Assertion: nodeCallbacks,
  Group: nodeCallbacks,
  Repetition: nodeCallbacks,
  Backreference(path) {
    hasBackreferences = true;
  }
};
const builder = {
  Alternative(path) {
    if (nodesContainingCapturingGroup.has(path.node)) {
      // aa(b)c       -> (aa)(b)c
      // aa(b)c(d)    -> (aa)(b)(c)(d)
      // aa(b)+c(d)   -> (aa)((b)+)(c)(d);
      let lastMeasurementIndex = 0;
      let pendingTerms = [];
      const measurementGroups = [];
      const terms = [];
      for (let i = 0; i < path.node.expressions.length; i++) {
        const term = path.node.expressions[i];
        if (nodesContainingCapturingGroup.has(term)) {
          if (i > lastMeasurementIndex) {
            const measurementGroup = {
              type: "Group",
              capturing: true,
              number: -1,
              expression: pendingTerms.length > 1 ? {
                type: "Alternative",
                expressions: pendingTerms
              } : pendingTerms.length === 1 ? pendingTerms[0] : null
            };
            terms.push(measurementGroup);
            measurementGroups.push(measurementGroup);
            lastMeasurementIndex = i;
            pendingTerms = [];
          }
          measurementGroupStack.push(measurementGroups);
          regexp_tree_1.transform(term, builder);
          measurementGroupStack.pop();
          pendingTerms.push(term);
          continue;
        }
        pendingTerms.push(term);
      }
      path.update({
        expressions: terms.concat(pendingTerms)
      });
    }
    return false;
  },
  Group(path) {
    if (!path.node.capturing) return;
    measurementGroupsForGroup.set(path.node, getMeasurementGroups());
  }
};
const groupRenumberer = {
  Group(path) {
    if (!groupRenumbers) throw new Error("Not initialized.");
    if (!path.node.capturing) return;
    const oldGroupNumber = path.node.number;
    const newGroupNumber = nextNewGroupNumber++;
    const measurementGroups = measurementGroupsForGroup.get(path.node);
    if (oldGroupNumber !== -1) {
      groupRenumbers.push({
        oldGroupNumber,
        newGroupNumber,
        measurementGroups: measurementGroups && measurementGroups.map(group => group.number),
        groupName: path.node.name
      });
      newGroupNumberForGroup.set(oldGroupNumber, newGroupNumber);
    }
    path.update({
      number: newGroupNumber
    });
  }
};
const backreferenceRenumberer = {
  Backreference(path) {
    const newGroupNumber = newGroupNumberForGroup.get(path.node.number);
    if (newGroupNumber) {
      if (path.node.kind === "number") {
        path.update({
          number: newGroupNumber,
          reference: newGroupNumber
        });
      } else {
        path.update({
          number: newGroupNumber
        });
      }
    }
  }
};
function getMeasurementGroups() {
  const measurementGroups = [];
  for (const array of measurementGroupStack) {
    for (const item of array) {
      measurementGroups.push(item);
    }
  }
  return measurementGroups;
}
function transformMeasurementGroups(ast) {
  const result = regexp_tree_1.transform(ast, handlers);
  return new regexp_tree_1.TransformResult(result.getAST(), groupRenumbers);
}
module.exports = exec;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJyZXF1aXJlIiwibmF0aXZlRXhlYyIsInJlZ2V4cF90cmVlXzEiLCJ3ZWFrTWVhc3VyZW1lbnRSZWdFeHAiLCJXZWFrTWFwIiwiZXhlYyIsInN0cmluZyIsIm1vZGUiLCJleGVjU3BlY0NvbXBsaWFudCIsImV4ZWNMYXp5IiwicmVnZXhwIiwiaW5kZXgiLCJsYXN0SW5kZXgiLCJyZXN1bHQiLCJjYWxsIiwiaW5kaWNlc0FycmF5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiZ2V0IiwidW5kZWZpbmVkIiwibWVhc3VyZW1lbnRSZWdFeHAiLCJncm91cEluZm9zIiwiZ2V0TWVhc3VyZW1lbnRSZWdFeHAiLCJtZWFzdXJlZFJlc3VsdCIsIlR5cGVFcnJvciIsIm1ha2VEYXRhUHJvcGVydHkiLCJtYWtlSW5kaWNlc0FycmF5Iiwic2V0IiwidmFsdWUiLCJncm91cEluZm8iLCJvbGRHcm91cE51bWJlciIsIm5ld0dyb3VwTnVtYmVyIiwiaW5wdXQiLCJncm91cHMiLCJ0cmFuc2Zvcm1lZCIsInRyYW5zZm9ybU1lYXN1cmVtZW50R3JvdXBzIiwicGFyc2UiLCJzb3VyY2UiLCJmbGFncyIsImdldEV4dHJhIiwidG9SZWdFeHAiLCJtYXRjaFN0YXJ0IiwibWF0Y2hFbmQiLCJsZW5ndGgiLCJoYXNHcm91cHMiLCJjcmVhdGUiLCJpbmRpY2VzIiwic3RhcnRJbmRleCIsIm1lYXN1cmVtZW50R3JvdXBzIiwibWVhc3VyZW1lbnRHcm91cCIsImVuZEluZGV4IiwiZ3JvdXBOYW1lIiwia2V5IiwiZXhpc3RpbmdEZXNjIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiaXNFeHRlbnNpYmxlIiwibmV3RGVzYyIsIndyaXRhYmxlIiwiZ3JvdXBSZW51bWJlcnMiLCJoYXNCYWNrcmVmZXJlbmNlcyIsIm5vZGVzQ29udGFpbmluZ0NhcHR1cmluZ0dyb3VwIiwiU2V0IiwiY29udGFpbnNDYXB0dXJpbmdHcm91cFN0YWNrIiwiY29udGFpbnNDYXB0dXJpbmdHcm91cCIsIm5leHROZXdHcm91cE51bWJlciIsIm1lYXN1cmVtZW50R3JvdXBTdGFjayIsIm1lYXN1cmVtZW50R3JvdXBzRm9yR3JvdXAiLCJNYXAiLCJuZXdHcm91cE51bWJlckZvckdyb3VwIiwiaGFuZGxlcnMiLCJpbml0IiwiY2xlYXIiLCJSZWdFeHAiLCJwYXRoIiwidHJhdmVyc2UiLCJub2RlIiwidmlzaXRvciIsInNpemUiLCJ0cmFuc2Zvcm0iLCJidWlsZGVyIiwiZ3JvdXBSZW51bWJlcmVyIiwiYmFja3JlZmVyZW5jZVJlbnVtYmVyZXIiLCJub2RlQ2FsbGJhY2tzIiwicHJlIiwicHVzaCIsInR5cGUiLCJjYXB0dXJpbmciLCJwb3N0IiwiYWRkIiwicG9wIiwiQWx0ZXJuYXRpdmUiLCJEaXNqdW5jdGlvbiIsIkFzc2VydGlvbiIsIkdyb3VwIiwiUmVwZXRpdGlvbiIsIkJhY2tyZWZlcmVuY2UiLCJoYXMiLCJsYXN0TWVhc3VyZW1lbnRJbmRleCIsInBlbmRpbmdUZXJtcyIsInRlcm1zIiwiaSIsImV4cHJlc3Npb25zIiwidGVybSIsIm51bWJlciIsImV4cHJlc3Npb24iLCJ1cGRhdGUiLCJjb25jYXQiLCJnZXRNZWFzdXJlbWVudEdyb3VwcyIsIkVycm9yIiwibWFwIiwiZ3JvdXAiLCJuYW1lIiwia2luZCIsInJlZmVyZW5jZSIsImFycmF5IiwiaXRlbSIsImFzdCIsIlRyYW5zZm9ybVJlc3VsdCIsImdldEFTVCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJpbXBsZW1lbnRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcclxuQ29weXJpZ2h0IDIwMTkgUm9uIEJ1Y2t0b25cclxuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcblxyXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiovXHJcblxyXG4vKlxyXG4gcmVxdWlyZSgnZm9vJykuaW1wbGVtZW50YXRpb24gb3IgcmVxdWlyZSgnZm9vL2ltcGxlbWVudGF0aW9uJykgaXMgYSBzcGVjLWNvbXBsaWFudCBKUyBmdW5jdGlvbixcclxuIHRoYXQgd2lsbCBkZXBlbmQgb24gYSByZWNlaXZlciAoYSDigJx0aGlz4oCdIHZhbHVlKSBhcyB0aGUgc3BlYyByZXF1aXJlcy5cclxuICovXHJcblxyXG5pbXBvcnQgY29uZmlnID0gcmVxdWlyZShcIi4vY29uZmlnXCIpO1xyXG5pbXBvcnQgbmF0aXZlRXhlYyA9IHJlcXVpcmUoXCIuL25hdGl2ZVwiKTtcclxuaW1wb3J0IHsgUmVnRXhwRXhlY0FycmF5LCBSZWdFeHBFeGVjSW5kaWNlc0FycmF5IH0gZnJvbSBcIi4vdHlwZXNcIjtcclxuaW1wb3J0IHtcclxuICAgIEFzdE5vZGUsXHJcbiAgICBBc3RSZWdFeHAsXHJcbiAgICBDYXB0dXJpbmdHcm91cCxcclxuICAgIEV4cHJlc3Npb25cclxufSBmcm9tIFwicmVnZXhwLXRyZWUvYXN0XCI7XHJcbmltcG9ydCB7XHJcbiAgICBwYXJzZSxcclxuICAgIHRyYW5zZm9ybSxcclxuICAgIFRyYW5zZm9ybVJlc3VsdCxcclxuICAgIFRyYW5zZm9ybUhhbmRsZXJzLFxyXG4gICAgdHJhdmVyc2UsXHJcbiAgICBUcmF2ZXJzYWxDYWxsYmFja3MsXHJcbiAgICBUcmF2ZXJzYWxIYW5kbGVyc1xyXG59IGZyb20gXCJyZWdleHAtdHJlZVwiO1xyXG5cclxuY29uc3Qgd2Vha01lYXN1cmVtZW50UmVnRXhwID0gbmV3IFdlYWtNYXA8UmVnRXhwLCBUcmFuc2Zvcm1SZXN1bHQ8QXN0UmVnRXhwLCByZWFkb25seSBHcm91cEluZm9bXT4+KCk7XHJcblxyXG5mdW5jdGlvbiBleGVjKHRoaXM6IFJlZ0V4cCwgc3RyaW5nOiBzdHJpbmcpOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsIHtcclxuICAgIHJldHVybiBjb25maWcubW9kZSA9PT0gXCJzcGVjLWNvbXBsaWFudFwiXHJcbiAgICAgICAgPyBleGVjU3BlY0NvbXBsaWFudCh0aGlzLCBzdHJpbmcpXHJcbiAgICAgICAgOiBleGVjTGF6eSh0aGlzLCBzdHJpbmcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleGVjTGF6eShyZWdleHA6IFJlZ0V4cCwgc3RyaW5nOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGluZGV4ID0gcmVnZXhwLmxhc3RJbmRleDtcclxuICAgIGNvbnN0IHJlc3VsdCA9IG5hdGl2ZUV4ZWMuY2FsbChyZWdleHAsIHN0cmluZyk7XHJcbiAgICBpZiAocmVzdWx0ID09PSBudWxsKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAvLyBGb3IgcGVyZm9ybWFuY2UgcmVhc29ucywgd2UgZGVmZXIgY29tcHV0aW5nIHRoZSBpbmRpY2VzIHVudGlsIGxhdGVyLiBUaGlzIGlzbid0IHNwZWMgY29tcGxpYW50LFxyXG4gICAgLy8gYnV0IG9uY2Ugd2UgY29tcHV0ZSB0aGUgaW5kaWNlcyB3ZSBjb252ZXJ0IHRoZSByZXN1bHQgdG8gYSBkYXRhLXByb3BlcnR5LlxyXG4gICAgbGV0IGluZGljZXNBcnJheTogUmVnRXhwRXhlY0luZGljZXNBcnJheSB8IHVuZGVmaW5lZDtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXN1bHQsIFwiaW5kaWNlc1wiLCB7XHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgZ2V0KCkge1xyXG4gICAgICAgICAgICBpZiAoaW5kaWNlc0FycmF5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgbWVhc3VyZW1lbnRSZWdFeHAsIGdyb3VwSW5mb3MgfSA9IGdldE1lYXN1cmVtZW50UmVnRXhwKHJlZ2V4cCk7XHJcbiAgICAgICAgICAgICAgICBtZWFzdXJlbWVudFJlZ0V4cC5sYXN0SW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lYXN1cmVkUmVzdWx0ID0gbmF0aXZlRXhlYy5jYWxsKG1lYXN1cmVtZW50UmVnRXhwLCBzdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lYXN1cmVkUmVzdWx0ID09PSBudWxsKSB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcbiAgICAgICAgICAgICAgICBtYWtlRGF0YVByb3BlcnR5KHJlc3VsdCwgXCJpbmRpY2VzXCIsIGluZGljZXNBcnJheSA9IG1ha2VJbmRpY2VzQXJyYXkobWVhc3VyZWRSZXN1bHQsIGdyb3VwSW5mb3MpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaW5kaWNlc0FycmF5O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0KHZhbHVlKSB7XHJcbiAgICAgICAgICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCBcImluZGljZXNcIiwgdmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gZXhlY1NwZWNDb21wbGlhbnQocmVnZXhwOiBSZWdFeHAsIHN0cmluZzogc3RyaW5nKSB7XHJcbiAgICBjb25zdCB7IG1lYXN1cmVtZW50UmVnRXhwLCBncm91cEluZm9zIH0gPSBnZXRNZWFzdXJlbWVudFJlZ0V4cChyZWdleHApO1xyXG4gICAgbWVhc3VyZW1lbnRSZWdFeHAubGFzdEluZGV4ID0gcmVnZXhwLmxhc3RJbmRleDtcclxuXHJcbiAgICBjb25zdCBtZWFzdXJlZFJlc3VsdCA9IG5hdGl2ZUV4ZWMuY2FsbChtZWFzdXJlbWVudFJlZ0V4cCwgc3RyaW5nKTtcclxuICAgIGlmIChtZWFzdXJlZFJlc3VsdCA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgcmVnZXhwLmxhc3RJbmRleCA9IG1lYXN1cmVtZW50UmVnRXhwLmxhc3RJbmRleDtcclxuXHJcbiAgICBjb25zdCByZXN1bHQgPSBbXSBhcyB1bmtub3duIGFzIFJlZ0V4cEV4ZWNBcnJheTtcclxuICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCAwLCBtZWFzdXJlZFJlc3VsdFswXSk7XHJcblxyXG4gICAgZm9yIChjb25zdCBncm91cEluZm8gb2YgZ3JvdXBJbmZvcykge1xyXG4gICAgICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCBncm91cEluZm8ub2xkR3JvdXBOdW1iZXIsIG1lYXN1cmVkUmVzdWx0W2dyb3VwSW5mby5uZXdHcm91cE51bWJlcl0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCBcImluZGV4XCIsIG1lYXN1cmVkUmVzdWx0LmluZGV4KTtcclxuICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCBcImlucHV0XCIsIG1lYXN1cmVkUmVzdWx0LmlucHV0KTtcclxuICAgIG1ha2VEYXRhUHJvcGVydHkocmVzdWx0LCBcImdyb3Vwc1wiLCBtZWFzdXJlZFJlc3VsdC5ncm91cHMpO1xyXG4gICAgbWFrZURhdGFQcm9wZXJ0eShyZXN1bHQsIFwiaW5kaWNlc1wiLCBtYWtlSW5kaWNlc0FycmF5KG1lYXN1cmVkUmVzdWx0LCBncm91cEluZm9zKSk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNZWFzdXJlbWVudFJlZ0V4cChyZWdleHA6IFJlZ0V4cCkge1xyXG4gICAgbGV0IHRyYW5zZm9ybWVkID0gd2Vha01lYXN1cmVtZW50UmVnRXhwLmdldChyZWdleHApO1xyXG4gICAgaWYgKCF0cmFuc2Zvcm1lZCkge1xyXG4gICAgICAgIHRyYW5zZm9ybWVkID0gdHJhbnNmb3JtTWVhc3VyZW1lbnRHcm91cHMocGFyc2UoYC8ke3JlZ2V4cC5zb3VyY2V9LyR7cmVnZXhwLmZsYWdzfWApKTtcclxuICAgICAgICB3ZWFrTWVhc3VyZW1lbnRSZWdFeHAuc2V0KHJlZ2V4cCwgdHJhbnNmb3JtZWQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ3JvdXBJbmZvcyA9IHRyYW5zZm9ybWVkLmdldEV4dHJhKCk7XHJcbiAgICBjb25zdCBtZWFzdXJlbWVudFJlZ0V4cCA9IHRyYW5zZm9ybWVkLnRvUmVnRXhwKCk7XHJcbiAgICByZXR1cm4geyBtZWFzdXJlbWVudFJlZ0V4cCwgZ3JvdXBJbmZvcyB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlSW5kaWNlc0FycmF5KG1lYXN1cmVkUmVzdWx0OiBSZWdFeHBFeGVjQXJyYXksIGdyb3VwSW5mb3M6IHJlYWRvbmx5IEdyb3VwSW5mb1tdKSB7XHJcbiAgICBjb25zdCBtYXRjaFN0YXJ0ID0gbWVhc3VyZWRSZXN1bHQuaW5kZXg7XHJcbiAgICBjb25zdCBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyBtZWFzdXJlZFJlc3VsdFswXS5sZW5ndGg7XHJcbiAgICBjb25zdCBoYXNHcm91cHMgPSAhIW1lYXN1cmVkUmVzdWx0Lmdyb3VwcztcclxuICAgIGNvbnN0IGluZGljZXNBcnJheSA9IFtdIGFzIFJlZ0V4cEV4ZWNJbmRpY2VzQXJyYXk7XHJcbiAgICBjb25zdCBncm91cHM6IFJlY29yZDxzdHJpbmcsIFtudW1iZXIsIG51bWJlcl0+IHwgdW5kZWZpbmVkID0gaGFzR3JvdXBzID8gT2JqZWN0LmNyZWF0ZShudWxsKSA6IHVuZGVmaW5lZDtcclxuICAgIG1ha2VEYXRhUHJvcGVydHkoaW5kaWNlc0FycmF5LCAwLCBbbWF0Y2hTdGFydCwgbWF0Y2hFbmRdKTtcclxuXHJcbiAgICBmb3IgKGNvbnN0IGdyb3VwSW5mbyBvZiBncm91cEluZm9zKSB7XHJcbiAgICAgICAgbGV0IGluZGljZXM6IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKG1lYXN1cmVkUmVzdWx0W2dyb3VwSW5mby5uZXdHcm91cE51bWJlcl0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IG1hdGNoU3RhcnQ7XHJcbiAgICAgICAgICAgIGlmIChncm91cEluZm8ubWVhc3VyZW1lbnRHcm91cHMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWVhc3VyZW1lbnRHcm91cCBvZiBncm91cEluZm8ubWVhc3VyZW1lbnRHcm91cHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFydEluZGV4ICs9IG1lYXN1cmVkUmVzdWx0W21lYXN1cmVtZW50R3JvdXBdLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgbWVhc3VyZWRSZXN1bHRbZ3JvdXBJbmZvLm5ld0dyb3VwTnVtYmVyXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGluZGljZXMgPSBbc3RhcnRJbmRleCwgZW5kSW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtYWtlRGF0YVByb3BlcnR5KGluZGljZXNBcnJheSwgZ3JvdXBJbmZvLm9sZEdyb3VwTnVtYmVyLCBpbmRpY2VzISk7XHJcbiAgICAgICAgaWYgKGdyb3VwcyAmJiBncm91cEluZm8uZ3JvdXBOYW1lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbWFrZURhdGFQcm9wZXJ0eShncm91cHMsIGdyb3VwSW5mby5ncm91cE5hbWUsIGluZGljZXMhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbWFrZURhdGFQcm9wZXJ0eShpbmRpY2VzQXJyYXksIFwiZ3JvdXBzXCIsIGdyb3Vwcyk7XHJcbiAgICByZXR1cm4gaW5kaWNlc0FycmF5O1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlRGF0YVByb3BlcnR5PFQsIEsgZXh0ZW5kcyBrZXlvZiBUPihyZXN1bHQ6IFQsIGtleTogSywgdmFsdWU6IFRbS10pIHtcclxuICAgIGNvbnN0IGV4aXN0aW5nRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IocmVzdWx0LCBrZXkpO1xyXG4gICAgaWYgKGV4aXN0aW5nRGVzYyA/IGV4aXN0aW5nRGVzYy5jb25maWd1cmFibGUgOiBPYmplY3QuaXNFeHRlbnNpYmxlKHJlc3VsdCkpIHtcclxuICAgICAgICBjb25zdCBuZXdEZXNjID0ge1xyXG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBleGlzdGluZ0Rlc2MgPyBleGlzdGluZ0Rlc2MuZW51bWVyYWJsZSA6IHRydWUsXHJcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogZXhpc3RpbmdEZXNjID8gZXhpc3RpbmdEZXNjLmNvbmZpZ3VyYWJsZSA6IHRydWUsXHJcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3VsdCwga2V5LCBuZXdEZXNjKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIEdyb3VwSW5mbyB7XHJcbiAgICByZWFkb25seSBvbGRHcm91cE51bWJlcjogbnVtYmVyO1xyXG4gICAgcmVhZG9ubHkgbmV3R3JvdXBOdW1iZXI6IG51bWJlcjtcclxuICAgIHJlYWRvbmx5IG1lYXN1cmVtZW50R3JvdXBzOiBSZWFkb25seUFycmF5PG51bWJlcj4gfCB1bmRlZmluZWQ7XHJcbiAgICByZWFkb25seSBncm91cE5hbWU/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmxldCBncm91cFJlbnVtYmVyczogR3JvdXBJbmZvW10gfCB1bmRlZmluZWQ7XHJcbmxldCBoYXNCYWNrcmVmZXJlbmNlcyA9IGZhbHNlO1xyXG5sZXQgbm9kZXNDb250YWluaW5nQ2FwdHVyaW5nR3JvdXAgPSBuZXcgU2V0PEFzdE5vZGU+KCk7XHJcbmxldCBjb250YWluc0NhcHR1cmluZ0dyb3VwU3RhY2s6IGJvb2xlYW5bXSA9IFtdO1xyXG5sZXQgY29udGFpbnNDYXB0dXJpbmdHcm91cCA9IGZhbHNlO1xyXG5sZXQgbmV4dE5ld0dyb3VwTnVtYmVyID0gMTtcclxubGV0IG1lYXN1cmVtZW50R3JvdXBTdGFjazogQ2FwdHVyaW5nR3JvdXBbXVtdID0gW107XHJcbmxldCBtZWFzdXJlbWVudEdyb3Vwc0Zvckdyb3VwID0gbmV3IE1hcDxDYXB0dXJpbmdHcm91cCwgQ2FwdHVyaW5nR3JvdXBbXT4oKTtcclxubGV0IG5ld0dyb3VwTnVtYmVyRm9yR3JvdXAgPSBuZXcgTWFwPG51bWJlciwgbnVtYmVyPigpO1xyXG5cclxuY29uc3QgaGFuZGxlcnM6IFRyYW5zZm9ybUhhbmRsZXJzPEFzdFJlZ0V4cD4gPSB7XHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIGhhc0JhY2tyZWZlcmVuY2VzID0gZmFsc2U7XHJcbiAgICAgICAgbm9kZXNDb250YWluaW5nQ2FwdHVyaW5nR3JvdXAuY2xlYXIoKTtcclxuICAgICAgICBjb250YWluc0NhcHR1cmluZ0dyb3VwU3RhY2subGVuZ3RoID0gMDtcclxuICAgICAgICBjb250YWluc0NhcHR1cmluZ0dyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgbmV4dE5ld0dyb3VwTnVtYmVyID0gMTtcclxuICAgICAgICBtZWFzdXJlbWVudEdyb3VwU3RhY2subGVuZ3RoID0gMDtcclxuICAgICAgICBtZWFzdXJlbWVudEdyb3Vwc0Zvckdyb3VwLmNsZWFyKCk7XHJcbiAgICAgICAgbmV3R3JvdXBOdW1iZXJGb3JHcm91cC5jbGVhcigpO1xyXG4gICAgICAgIGdyb3VwUmVudW1iZXJzID0gW107XHJcbiAgICB9LFxyXG4gICAgUmVnRXhwKHBhdGgpIHtcclxuICAgICAgICB0cmF2ZXJzZShwYXRoLm5vZGUsIHZpc2l0b3IpO1xyXG4gICAgICAgIGlmIChub2Rlc0NvbnRhaW5pbmdDYXB0dXJpbmdHcm91cC5zaXplID4gMCkge1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0ocGF0aC5ub2RlLCBidWlsZGVyKTtcclxuICAgICAgICAgICAgdHJhbnNmb3JtKHBhdGgubm9kZSwgZ3JvdXBSZW51bWJlcmVyKTtcclxuICAgICAgICAgICAgaWYgKGhhc0JhY2tyZWZlcmVuY2VzKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ocGF0aC5ub2RlLCBiYWNrcmVmZXJlbmNlUmVudW1iZXJlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3Qgbm9kZUNhbGxiYWNrczogVHJhdmVyc2FsQ2FsbGJhY2tzID0ge1xyXG4gICAgcHJlKHBhdGgpIHtcclxuICAgICAgICBjb250YWluc0NhcHR1cmluZ0dyb3VwU3RhY2sucHVzaChjb250YWluc0NhcHR1cmluZ0dyb3VwKTtcclxuICAgICAgICBjb250YWluc0NhcHR1cmluZ0dyb3VwID0gcGF0aC5ub2RlLnR5cGUgPT09IFwiR3JvdXBcIiAmJiBwYXRoLm5vZGUuY2FwdHVyaW5nO1xyXG4gICAgfSxcclxuICAgIHBvc3QocGF0aCkge1xyXG4gICAgICAgIGlmIChjb250YWluc0NhcHR1cmluZ0dyb3VwKSB7XHJcbiAgICAgICAgICAgIG5vZGVzQ29udGFpbmluZ0NhcHR1cmluZ0dyb3VwLmFkZChwYXRoLm5vZGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb250YWluc0NhcHR1cmluZ0dyb3VwID0gY29udGFpbnNDYXB0dXJpbmdHcm91cFN0YWNrLnBvcCgpIHx8IGNvbnRhaW5zQ2FwdHVyaW5nR3JvdXA7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCB2aXNpdG9yOiBUcmF2ZXJzYWxIYW5kbGVycyA9IHtcclxuICAgIEFsdGVybmF0aXZlOiBub2RlQ2FsbGJhY2tzLFxyXG4gICAgRGlzanVuY3Rpb246IG5vZGVDYWxsYmFja3MsXHJcbiAgICBBc3NlcnRpb246IG5vZGVDYWxsYmFja3MsXHJcbiAgICBHcm91cDogbm9kZUNhbGxiYWNrcyxcclxuICAgIFJlcGV0aXRpb246IG5vZGVDYWxsYmFja3MsXHJcbiAgICBCYWNrcmVmZXJlbmNlKHBhdGgpIHsgaGFzQmFja3JlZmVyZW5jZXMgPSB0cnVlOyB9XHJcbn07XHJcblxyXG5jb25zdCBidWlsZGVyOiBUcmFuc2Zvcm1IYW5kbGVycyA9IHtcclxuICAgIEFsdGVybmF0aXZlKHBhdGgpIHtcclxuICAgICAgICBpZiAobm9kZXNDb250YWluaW5nQ2FwdHVyaW5nR3JvdXAuaGFzKHBhdGgubm9kZSkpIHtcclxuICAgICAgICAgICAgLy8gYWEoYiljICAgICAgIC0+IChhYSkoYiljXHJcbiAgICAgICAgICAgIC8vIGFhKGIpYyhkKSAgICAtPiAoYWEpKGIpKGMpKGQpXHJcbiAgICAgICAgICAgIC8vIGFhKGIpK2MoZCkgICAtPiAoYWEpKChiKSspKGMpKGQpO1xyXG4gICAgICAgICAgICBsZXQgbGFzdE1lYXN1cmVtZW50SW5kZXggPSAwO1xyXG4gICAgICAgICAgICBsZXQgcGVuZGluZ1Rlcm1zOiBFeHByZXNzaW9uW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRHcm91cHM6IENhcHR1cmluZ0dyb3VwW10gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgdGVybXM6IEV4cHJlc3Npb25bXSA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubm9kZS5leHByZXNzaW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVybSA9IHBhdGgubm9kZS5leHByZXNzaW9uc1tpXTtcclxuICAgICAgICAgICAgICAgIGlmIChub2Rlc0NvbnRhaW5pbmdDYXB0dXJpbmdHcm91cC5oYXModGVybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IGxhc3RNZWFzdXJlbWVudEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lYXN1cmVtZW50R3JvdXA6IENhcHR1cmluZ0dyb3VwID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHcm91cFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FwdHVyaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiAtMSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cHJlc3Npb246XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1Rlcm1zLmxlbmd0aCA+IDEgPyB7IHR5cGU6IFwiQWx0ZXJuYXRpdmVcIiwgZXhwcmVzc2lvbnM6IHBlbmRpbmdUZXJtcyB9IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nVGVybXMubGVuZ3RoID09PSAxID8gcGVuZGluZ1Rlcm1zWzBdIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlcm1zLnB1c2gobWVhc3VyZW1lbnRHcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50R3JvdXBzLnB1c2gobWVhc3VyZW1lbnRHcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RNZWFzdXJlbWVudEluZGV4ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1Rlcm1zID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIG1lYXN1cmVtZW50R3JvdXBTdGFjay5wdXNoKG1lYXN1cmVtZW50R3JvdXBzKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0odGVybSwgYnVpbGRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVhc3VyZW1lbnRHcm91cFN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdUZXJtcy5wdXNoKHRlcm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHBlbmRpbmdUZXJtcy5wdXNoKHRlcm0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhdGgudXBkYXRlKHsgZXhwcmVzc2lvbnM6IHRlcm1zLmNvbmNhdChwZW5kaW5nVGVybXMpIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgR3JvdXAocGF0aCkge1xyXG4gICAgICAgIGlmICghcGF0aC5ub2RlLmNhcHR1cmluZykgcmV0dXJuO1xyXG4gICAgICAgIG1lYXN1cmVtZW50R3JvdXBzRm9yR3JvdXAuc2V0KHBhdGgubm9kZSwgZ2V0TWVhc3VyZW1lbnRHcm91cHMoKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBncm91cFJlbnVtYmVyZXI6IFRyYW5zZm9ybUhhbmRsZXJzID0ge1xyXG4gICAgR3JvdXAocGF0aCkge1xyXG4gICAgICAgIGlmICghZ3JvdXBSZW51bWJlcnMpIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbml0aWFsaXplZC5cIik7XHJcbiAgICAgICAgaWYgKCFwYXRoLm5vZGUuY2FwdHVyaW5nKSByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgb2xkR3JvdXBOdW1iZXIgPSBwYXRoLm5vZGUubnVtYmVyO1xyXG4gICAgICAgIGNvbnN0IG5ld0dyb3VwTnVtYmVyID0gbmV4dE5ld0dyb3VwTnVtYmVyKys7XHJcbiAgICAgICAgY29uc3QgbWVhc3VyZW1lbnRHcm91cHMgPSBtZWFzdXJlbWVudEdyb3Vwc0Zvckdyb3VwLmdldChwYXRoLm5vZGUpO1xyXG4gICAgICAgIGlmIChvbGRHcm91cE51bWJlciAhPT0gLTEpIHtcclxuICAgICAgICAgICAgZ3JvdXBSZW51bWJlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBvbGRHcm91cE51bWJlcixcclxuICAgICAgICAgICAgICAgIG5ld0dyb3VwTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgbWVhc3VyZW1lbnRHcm91cHM6IG1lYXN1cmVtZW50R3JvdXBzICYmIG1lYXN1cmVtZW50R3JvdXBzLm1hcChncm91cCA9PiBncm91cC5udW1iZXIpLFxyXG4gICAgICAgICAgICAgICAgZ3JvdXBOYW1lOiBwYXRoLm5vZGUubmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3R3JvdXBOdW1iZXJGb3JHcm91cC5zZXQob2xkR3JvdXBOdW1iZXIsIG5ld0dyb3VwTnVtYmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcGF0aC51cGRhdGUoeyBudW1iZXI6IG5ld0dyb3VwTnVtYmVyIH0pO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgYmFja3JlZmVyZW5jZVJlbnVtYmVyZXI6IFRyYW5zZm9ybUhhbmRsZXJzID0ge1xyXG4gICAgQmFja3JlZmVyZW5jZShwYXRoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3R3JvdXBOdW1iZXIgPSBuZXdHcm91cE51bWJlckZvckdyb3VwLmdldChwYXRoLm5vZGUubnVtYmVyKTtcclxuICAgICAgICBpZiAobmV3R3JvdXBOdW1iZXIpIHtcclxuICAgICAgICAgICAgaWYgKHBhdGgubm9kZS5raW5kID09PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoLnVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyOiBuZXdHcm91cE51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IG5ld0dyb3VwTnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBhdGgudXBkYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG5ld0dyb3VwTnVtYmVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldE1lYXN1cmVtZW50R3JvdXBzKCkge1xyXG4gICAgY29uc3QgbWVhc3VyZW1lbnRHcm91cHM6IENhcHR1cmluZ0dyb3VwW10gPSBbXTtcclxuICAgIGZvciAoY29uc3QgYXJyYXkgb2YgbWVhc3VyZW1lbnRHcm91cFN0YWNrKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICAgIG1lYXN1cmVtZW50R3JvdXBzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG1lYXN1cmVtZW50R3JvdXBzO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zvcm1NZWFzdXJlbWVudEdyb3Vwcyhhc3Q6IEFzdFJlZ0V4cCkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdHJhbnNmb3JtKGFzdCwgaGFuZGxlcnMpO1xyXG4gICAgcmV0dXJuIG5ldyBUcmFuc2Zvcm1SZXN1bHQocmVzdWx0LmdldEFTVCgpLCBncm91cFJlbnVtYmVycyBhcyByZWFkb25seSBHcm91cEluZm9bXSk7XHJcbn1cclxuXHJcbmV4cG9ydCA9IGV4ZWM7Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFnQkE7Ozs7QUFLQSxNQUFBQSxNQUFB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