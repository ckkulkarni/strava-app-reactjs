eb1d284dcf7fb7750cee71385003061a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
const multimaps_1 = require("@teppeis/multimaps");
class Query {
  constructor() {
    this.sources = [];
    this.sourceByUri = new Map();
    this.gherkinDocuments = [];
    this.pickles = [];
    this.locationByAstNodeId = new Map();
    this.gherkinStepByAstNodeId = new Map();
    this.pickleIdsMapByUri = new Map();
    this.pickleIdsByAstNodeId = new Map();
    this.pickleStepIdsByAstNodeId = new Map();
    // AST nodes
    this.featureByUriLine = new Map();
    this.backgroundByUriLine = new Map();
    this.ruleByUriLine = new Map();
    this.scenarioByUriLine = new Map();
    this.examplesByUriLine = new Map();
    this.stepByUriLine = new Map();
  }
  /**
   * Gets the location (line and column) of an AST node.
   * @param astNodeId
   */
  getLocation(astNodeId) {
    return this.locationByAstNodeId.get(astNodeId);
  }
  getSources() {
    return this.sources;
  }
  getGherkinDocuments() {
    return this.gherkinDocuments;
  }
  getPickles() {
    return this.pickles;
  }
  getSource(uri) {
    return this.sourceByUri.get(uri);
  }
  getFeature(uri, line) {
    return getAstNode(this.featureByUriLine, uri, line);
  }
  getBackground(uri, line) {
    return getAstNode(this.backgroundByUriLine, uri, line);
  }
  getRule(uri, line) {
    return getAstNode(this.ruleByUriLine, uri, line);
  }
  getScenario(uri, line) {
    return getAstNode(this.scenarioByUriLine, uri, line);
  }
  getExamples(uri, line) {
    return getAstNode(this.examplesByUriLine, uri, line);
  }
  getStep(uri, line) {
    return getAstNode(this.stepByUriLine, uri, line);
  }
  /**
   * Gets all the pickle IDs
   * @param uri - the URI of the document
   * @param astNodeId - optionally restrict results to a particular AST node
   */
  getPickleIds(uri, astNodeId) {
    const pickleIdsByAstNodeId = this.pickleIdsMapByUri.get(uri);
    if (!pickleIdsByAstNodeId) {
      throw new Error(`No pickleIds for uri=${uri}`);
    }
    return astNodeId === undefined ? Array.from(new Set(pickleIdsByAstNodeId.values())) : pickleIdsByAstNodeId.get(astNodeId);
  }
  getPickleStepIds(astNodeId) {
    return this.pickleStepIdsByAstNodeId.get(astNodeId) || [];
  }
  update(message) {
    if (message.source) {
      this.sources.push(message.source);
      this.sourceByUri.set(message.source.uri, message.source);
    }
    if (message.gherkinDocument) {
      this.gherkinDocuments.push(message.gherkinDocument);
      if (message.gherkinDocument.feature) {
        this.updateGherkinFeature(message.gherkinDocument.uri, message.gherkinDocument.feature);
      }
    }
    if (message.pickle) {
      const pickle = message.pickle;
      this.updatePickle(pickle);
    }
    return this;
  }
  updateGherkinFeature(uri, feature) {
    setAstNode(this.featureByUriLine, uri, feature);
    this.pickleIdsMapByUri.set(uri, new multimaps_1.ArrayMultimap());
    for (const featureChild of feature.children) {
      if (featureChild.background) {
        this.updateGherkinBackground(uri, featureChild.background);
      }
      if (featureChild.scenario) {
        this.updateGherkinScenario(uri, featureChild.scenario);
      }
      if (featureChild.rule) {
        this.updateGherkinRule(uri, featureChild.rule);
      }
    }
  }
  updateGherkinBackground(uri, background) {
    setAstNode(this.backgroundByUriLine, uri, background);
    for (const step of background.steps) {
      this.updateGherkinStep(uri, step);
    }
  }
  updateGherkinRule(uri, rule) {
    setAstNode(this.ruleByUriLine, uri, rule);
    for (const ruleChild of rule.children) {
      if (ruleChild.background) {
        this.updateGherkinBackground(uri, ruleChild.background);
      }
      if (ruleChild.scenario) {
        this.updateGherkinScenario(uri, ruleChild.scenario);
      }
    }
  }
  updateGherkinScenario(uri, scenario) {
    setAstNode(this.scenarioByUriLine, uri, scenario);
    this.locationByAstNodeId.set(scenario.id, scenario.location);
    for (const step of scenario.steps) {
      this.updateGherkinStep(uri, step);
    }
    for (const examples of scenario.examples) {
      this.updateGherkinExamples(uri, examples);
    }
  }
  updateGherkinExamples(uri, examples) {
    setAstNode(this.examplesByUriLine, uri, examples);
    for (const tableRow of examples.tableBody || []) {
      this.locationByAstNodeId.set(tableRow.id, tableRow.location);
    }
  }
  updateGherkinStep(uri, step) {
    setAstNode(this.stepByUriLine, uri, step);
    this.locationByAstNodeId.set(step.id, step.location);
    this.gherkinStepByAstNodeId.set(step.id, step);
  }
  updatePickle(pickle) {
    const pickleIdsByLineNumber = this.pickleIdsMapByUri.get(pickle.uri);
    for (const astNodeId of pickle.astNodeIds) {
      pickleIdsByLineNumber.put(astNodeId, pickle.id);
    }
    this.updatePickleSteps(pickle);
    this.pickles.push(pickle);
    for (const astNodeId of pickle.astNodeIds) {
      if (!this.pickleIdsByAstNodeId.has(astNodeId)) {
        this.pickleIdsByAstNodeId.set(astNodeId, []);
      }
      this.pickleIdsByAstNodeId.get(astNodeId).push(pickle.id);
    }
  }
  updatePickleSteps(pickle) {
    const pickleSteps = pickle.steps;
    for (const pickleStep of pickleSteps) {
      for (const astNodeId of pickleStep.astNodeIds) {
        if (!this.pickleStepIdsByAstNodeId.has(astNodeId)) {
          this.pickleStepIdsByAstNodeId.set(astNodeId, []);
        }
        this.pickleStepIdsByAstNodeId.get(astNodeId).push(pickleStep.id);
      }
    }
  }
}
exports.default = Query;
function setAstNode(map, uri, astNode) {
  const line = astNode.location.line;
  const uriLine = [uri, line].join(':');
  map.set(uriLine, astNode);
}
function getAstNode(map, uri, line) {
  const uriLine = [uri, line].join(':');
  return map.get(uriLine);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0aW1hcHNfMSIsInJlcXVpcmUiLCJRdWVyeSIsImNvbnN0cnVjdG9yIiwic291cmNlcyIsInNvdXJjZUJ5VXJpIiwiTWFwIiwiZ2hlcmtpbkRvY3VtZW50cyIsInBpY2tsZXMiLCJsb2NhdGlvbkJ5QXN0Tm9kZUlkIiwiZ2hlcmtpblN0ZXBCeUFzdE5vZGVJZCIsInBpY2tsZUlkc01hcEJ5VXJpIiwicGlja2xlSWRzQnlBc3ROb2RlSWQiLCJwaWNrbGVTdGVwSWRzQnlBc3ROb2RlSWQiLCJmZWF0dXJlQnlVcmlMaW5lIiwiYmFja2dyb3VuZEJ5VXJpTGluZSIsInJ1bGVCeVVyaUxpbmUiLCJzY2VuYXJpb0J5VXJpTGluZSIsImV4YW1wbGVzQnlVcmlMaW5lIiwic3RlcEJ5VXJpTGluZSIsImdldExvY2F0aW9uIiwiYXN0Tm9kZUlkIiwiZ2V0IiwiZ2V0U291cmNlcyIsImdldEdoZXJraW5Eb2N1bWVudHMiLCJnZXRQaWNrbGVzIiwiZ2V0U291cmNlIiwidXJpIiwiZ2V0RmVhdHVyZSIsImxpbmUiLCJnZXRBc3ROb2RlIiwiZ2V0QmFja2dyb3VuZCIsImdldFJ1bGUiLCJnZXRTY2VuYXJpbyIsImdldEV4YW1wbGVzIiwiZ2V0U3RlcCIsImdldFBpY2tsZUlkcyIsIkVycm9yIiwidW5kZWZpbmVkIiwiQXJyYXkiLCJmcm9tIiwiU2V0IiwidmFsdWVzIiwiZ2V0UGlja2xlU3RlcElkcyIsInVwZGF0ZSIsIm1lc3NhZ2UiLCJzb3VyY2UiLCJwdXNoIiwic2V0IiwiZ2hlcmtpbkRvY3VtZW50IiwiZmVhdHVyZSIsInVwZGF0ZUdoZXJraW5GZWF0dXJlIiwicGlja2xlIiwidXBkYXRlUGlja2xlIiwic2V0QXN0Tm9kZSIsIkFycmF5TXVsdGltYXAiLCJmZWF0dXJlQ2hpbGQiLCJjaGlsZHJlbiIsImJhY2tncm91bmQiLCJ1cGRhdGVHaGVya2luQmFja2dyb3VuZCIsInNjZW5hcmlvIiwidXBkYXRlR2hlcmtpblNjZW5hcmlvIiwicnVsZSIsInVwZGF0ZUdoZXJraW5SdWxlIiwic3RlcCIsInN0ZXBzIiwidXBkYXRlR2hlcmtpblN0ZXAiLCJydWxlQ2hpbGQiLCJpZCIsImxvY2F0aW9uIiwiZXhhbXBsZXMiLCJ1cGRhdGVHaGVya2luRXhhbXBsZXMiLCJ0YWJsZVJvdyIsInRhYmxlQm9keSIsInBpY2tsZUlkc0J5TGluZU51bWJlciIsImFzdE5vZGVJZHMiLCJwdXQiLCJ1cGRhdGVQaWNrbGVTdGVwcyIsImhhcyIsInBpY2tsZVN0ZXBzIiwicGlja2xlU3RlcCIsImV4cG9ydHMiLCJkZWZhdWx0IiwibWFwIiwiYXN0Tm9kZSIsInVyaUxpbmUiLCJqb2luIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL1F1ZXJ5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG1lc3NhZ2VzIGZyb20gJ0BjdWN1bWJlci9tZXNzYWdlcydcbmltcG9ydCB7IEFycmF5TXVsdGltYXAgfSBmcm9tICdAdGVwcGVpcy9tdWx0aW1hcHMnXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1ZXJ5IHtcbiAgcHJpdmF0ZSByZWFkb25seSBzb3VyY2VzOiBtZXNzYWdlcy5Tb3VyY2VbXSA9IFtdXG4gIHByaXZhdGUgcmVhZG9ubHkgc291cmNlQnlVcmkgPSBuZXcgTWFwPHN0cmluZywgbWVzc2FnZXMuU291cmNlPigpXG4gIHByaXZhdGUgcmVhZG9ubHkgZ2hlcmtpbkRvY3VtZW50czogbWVzc2FnZXMuR2hlcmtpbkRvY3VtZW50W10gPSBbXVxuICBwcml2YXRlIHJlYWRvbmx5IHBpY2tsZXM6IG1lc3NhZ2VzLlBpY2tsZVtdID0gW11cbiAgcHJpdmF0ZSByZWFkb25seSBsb2NhdGlvbkJ5QXN0Tm9kZUlkID0gbmV3IE1hcDxzdHJpbmcsIG1lc3NhZ2VzLkxvY2F0aW9uPigpXG4gIHByaXZhdGUgcmVhZG9ubHkgZ2hlcmtpblN0ZXBCeUFzdE5vZGVJZCA9IG5ldyBNYXA8c3RyaW5nLCBtZXNzYWdlcy5TdGVwPigpXG4gIHByaXZhdGUgcmVhZG9ubHkgcGlja2xlSWRzTWFwQnlVcmkgPSBuZXcgTWFwPHN0cmluZywgQXJyYXlNdWx0aW1hcDxzdHJpbmcsIHN0cmluZz4+KClcbiAgcHJpdmF0ZSByZWFkb25seSBwaWNrbGVJZHNCeUFzdE5vZGVJZCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKVxuICBwcml2YXRlIHJlYWRvbmx5IHBpY2tsZVN0ZXBJZHNCeUFzdE5vZGVJZCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXT4oKVxuICAvLyBBU1Qgbm9kZXNcbiAgcHJpdmF0ZSByZWFkb25seSBmZWF0dXJlQnlVcmlMaW5lID0gbmV3IE1hcDxzdHJpbmcsIG1lc3NhZ2VzLkZlYXR1cmU+KClcbiAgcHJpdmF0ZSByZWFkb25seSBiYWNrZ3JvdW5kQnlVcmlMaW5lID0gbmV3IE1hcDxzdHJpbmcsIG1lc3NhZ2VzLkJhY2tncm91bmQ+KClcbiAgcHJpdmF0ZSByZWFkb25seSBydWxlQnlVcmlMaW5lID0gbmV3IE1hcDxzdHJpbmcsIG1lc3NhZ2VzLlJ1bGU+KClcbiAgcHJpdmF0ZSByZWFkb25seSBzY2VuYXJpb0J5VXJpTGluZSA9IG5ldyBNYXA8c3RyaW5nLCBtZXNzYWdlcy5TY2VuYXJpbz4oKVxuICBwcml2YXRlIHJlYWRvbmx5IGV4YW1wbGVzQnlVcmlMaW5lID0gbmV3IE1hcDxzdHJpbmcsIG1lc3NhZ2VzLkV4YW1wbGVzPigpXG4gIHByaXZhdGUgcmVhZG9ubHkgc3RlcEJ5VXJpTGluZSA9IG5ldyBNYXA8c3RyaW5nLCBtZXNzYWdlcy5TdGVwPigpXG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGxvY2F0aW9uIChsaW5lIGFuZCBjb2x1bW4pIG9mIGFuIEFTVCBub2RlLlxuICAgKiBAcGFyYW0gYXN0Tm9kZUlkXG4gICAqL1xuICBwdWJsaWMgZ2V0TG9jYXRpb24oYXN0Tm9kZUlkOiBzdHJpbmcpOiBtZXNzYWdlcy5Mb2NhdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMubG9jYXRpb25CeUFzdE5vZGVJZC5nZXQoYXN0Tm9kZUlkKVxuICB9XG5cbiAgcHVibGljIGdldFNvdXJjZXMoKTogcmVhZG9ubHkgbWVzc2FnZXMuU291cmNlW10ge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXNcbiAgfVxuXG4gIHB1YmxpYyBnZXRHaGVya2luRG9jdW1lbnRzKCk6IHJlYWRvbmx5IG1lc3NhZ2VzLkdoZXJraW5Eb2N1bWVudFtdIHtcbiAgICByZXR1cm4gdGhpcy5naGVya2luRG9jdW1lbnRzXG4gIH1cblxuICBwdWJsaWMgZ2V0UGlja2xlcygpOiByZWFkb25seSBtZXNzYWdlcy5QaWNrbGVbXSB7XG4gICAgcmV0dXJuIHRoaXMucGlja2xlc1xuICB9XG5cbiAgcHVibGljIGdldFNvdXJjZSh1cmk6IHN0cmluZyk6IG1lc3NhZ2VzLlNvdXJjZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlQnlVcmkuZ2V0KHVyaSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRGZWF0dXJlKHVyaTogc3RyaW5nLCBsaW5lOiBudW1iZXIpOiBtZXNzYWdlcy5GZWF0dXJlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0QXN0Tm9kZSh0aGlzLmZlYXR1cmVCeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRCYWNrZ3JvdW5kKHVyaTogc3RyaW5nLCBsaW5lOiBudW1iZXIpOiBtZXNzYWdlcy5CYWNrZ3JvdW5kIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0QXN0Tm9kZSh0aGlzLmJhY2tncm91bmRCeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRSdWxlKHVyaTogc3RyaW5nLCBsaW5lOiBudW1iZXIpOiBtZXNzYWdlcy5SdWxlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0QXN0Tm9kZSh0aGlzLnJ1bGVCeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRTY2VuYXJpbyh1cmk6IHN0cmluZywgbGluZTogbnVtYmVyKTogbWVzc2FnZXMuU2NlbmFyaW8gfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBnZXRBc3ROb2RlKHRoaXMuc2NlbmFyaW9CeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRFeGFtcGxlcyh1cmk6IHN0cmluZywgbGluZTogbnVtYmVyKTogbWVzc2FnZXMuRXhhbXBsZXMgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiBnZXRBc3ROb2RlKHRoaXMuZXhhbXBsZXNCeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGVwKHVyaTogc3RyaW5nLCBsaW5lOiBudW1iZXIpOiBtZXNzYWdlcy5TdGVwIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gZ2V0QXN0Tm9kZSh0aGlzLnN0ZXBCeVVyaUxpbmUsIHVyaSwgbGluZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFsbCB0aGUgcGlja2xlIElEc1xuICAgKiBAcGFyYW0gdXJpIC0gdGhlIFVSSSBvZiB0aGUgZG9jdW1lbnRcbiAgICogQHBhcmFtIGFzdE5vZGVJZCAtIG9wdGlvbmFsbHkgcmVzdHJpY3QgcmVzdWx0cyB0byBhIHBhcnRpY3VsYXIgQVNUIG5vZGVcbiAgICovXG4gIHB1YmxpYyBnZXRQaWNrbGVJZHModXJpOiBzdHJpbmcsIGFzdE5vZGVJZD86IHN0cmluZyk6IHJlYWRvbmx5IHN0cmluZ1tdIHtcbiAgICBjb25zdCBwaWNrbGVJZHNCeUFzdE5vZGVJZCA9IHRoaXMucGlja2xlSWRzTWFwQnlVcmkuZ2V0KHVyaSlcbiAgICBpZiAoIXBpY2tsZUlkc0J5QXN0Tm9kZUlkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHBpY2tsZUlkcyBmb3IgdXJpPSR7dXJpfWApXG4gICAgfVxuICAgIHJldHVybiBhc3ROb2RlSWQgPT09IHVuZGVmaW5lZFxuICAgICAgPyBBcnJheS5mcm9tKG5ldyBTZXQocGlja2xlSWRzQnlBc3ROb2RlSWQudmFsdWVzKCkpKVxuICAgICAgOiBwaWNrbGVJZHNCeUFzdE5vZGVJZC5nZXQoYXN0Tm9kZUlkKVxuICB9XG5cbiAgcHVibGljIGdldFBpY2tsZVN0ZXBJZHMoYXN0Tm9kZUlkOiBzdHJpbmcpOiByZWFkb25seSBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIHRoaXMucGlja2xlU3RlcElkc0J5QXN0Tm9kZUlkLmdldChhc3ROb2RlSWQpIHx8IFtdXG4gIH1cblxuICBwdWJsaWMgdXBkYXRlKG1lc3NhZ2U6IG1lc3NhZ2VzLkVudmVsb3BlKTogUXVlcnkge1xuICAgIGlmIChtZXNzYWdlLnNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2VzLnB1c2gobWVzc2FnZS5zb3VyY2UpXG4gICAgICB0aGlzLnNvdXJjZUJ5VXJpLnNldChtZXNzYWdlLnNvdXJjZS51cmksIG1lc3NhZ2Uuc291cmNlKVxuICAgIH1cblxuICAgIGlmIChtZXNzYWdlLmdoZXJraW5Eb2N1bWVudCkge1xuICAgICAgdGhpcy5naGVya2luRG9jdW1lbnRzLnB1c2gobWVzc2FnZS5naGVya2luRG9jdW1lbnQpXG5cbiAgICAgIGlmIChtZXNzYWdlLmdoZXJraW5Eb2N1bWVudC5mZWF0dXJlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlR2hlcmtpbkZlYXR1cmUobWVzc2FnZS5naGVya2luRG9jdW1lbnQudXJpLCBtZXNzYWdlLmdoZXJraW5Eb2N1bWVudC5mZWF0dXJlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtZXNzYWdlLnBpY2tsZSkge1xuICAgICAgY29uc3QgcGlja2xlID0gbWVzc2FnZS5waWNrbGVcbiAgICAgIHRoaXMudXBkYXRlUGlja2xlKHBpY2tsZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHaGVya2luRmVhdHVyZSh1cmk6IHN0cmluZywgZmVhdHVyZTogbWVzc2FnZXMuRmVhdHVyZSkge1xuICAgIHNldEFzdE5vZGUodGhpcy5mZWF0dXJlQnlVcmlMaW5lLCB1cmksIGZlYXR1cmUpXG4gICAgdGhpcy5waWNrbGVJZHNNYXBCeVVyaS5zZXQodXJpLCBuZXcgQXJyYXlNdWx0aW1hcDxzdHJpbmcsIHN0cmluZz4oKSlcblxuICAgIGZvciAoY29uc3QgZmVhdHVyZUNoaWxkIG9mIGZlYXR1cmUuY2hpbGRyZW4pIHtcbiAgICAgIGlmIChmZWF0dXJlQ2hpbGQuYmFja2dyb3VuZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUdoZXJraW5CYWNrZ3JvdW5kKHVyaSwgZmVhdHVyZUNoaWxkLmJhY2tncm91bmQpXG4gICAgICB9XG5cbiAgICAgIGlmIChmZWF0dXJlQ2hpbGQuc2NlbmFyaW8pIHtcbiAgICAgICAgdGhpcy51cGRhdGVHaGVya2luU2NlbmFyaW8odXJpLCBmZWF0dXJlQ2hpbGQuc2NlbmFyaW8pXG4gICAgICB9XG5cbiAgICAgIGlmIChmZWF0dXJlQ2hpbGQucnVsZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUdoZXJraW5SdWxlKHVyaSwgZmVhdHVyZUNoaWxkLnJ1bGUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHaGVya2luQmFja2dyb3VuZCh1cmk6IHN0cmluZywgYmFja2dyb3VuZDogbWVzc2FnZXMuQmFja2dyb3VuZCkge1xuICAgIHNldEFzdE5vZGUodGhpcy5iYWNrZ3JvdW5kQnlVcmlMaW5lLCB1cmksIGJhY2tncm91bmQpXG4gICAgZm9yIChjb25zdCBzdGVwIG9mIGJhY2tncm91bmQuc3RlcHMpIHtcbiAgICAgIHRoaXMudXBkYXRlR2hlcmtpblN0ZXAodXJpLCBzdGVwKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlR2hlcmtpblJ1bGUodXJpOiBzdHJpbmcsIHJ1bGU6IG1lc3NhZ2VzLlJ1bGUpIHtcbiAgICBzZXRBc3ROb2RlKHRoaXMucnVsZUJ5VXJpTGluZSwgdXJpLCBydWxlKVxuICAgIGZvciAoY29uc3QgcnVsZUNoaWxkIG9mIHJ1bGUuY2hpbGRyZW4pIHtcbiAgICAgIGlmIChydWxlQ2hpbGQuYmFja2dyb3VuZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUdoZXJraW5CYWNrZ3JvdW5kKHVyaSwgcnVsZUNoaWxkLmJhY2tncm91bmQpXG4gICAgICB9XG5cbiAgICAgIGlmIChydWxlQ2hpbGQuc2NlbmFyaW8pIHtcbiAgICAgICAgdGhpcy51cGRhdGVHaGVya2luU2NlbmFyaW8odXJpLCBydWxlQ2hpbGQuc2NlbmFyaW8pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHaGVya2luU2NlbmFyaW8odXJpOiBzdHJpbmcsIHNjZW5hcmlvOiBtZXNzYWdlcy5TY2VuYXJpbykge1xuICAgIHNldEFzdE5vZGUodGhpcy5zY2VuYXJpb0J5VXJpTGluZSwgdXJpLCBzY2VuYXJpbylcbiAgICB0aGlzLmxvY2F0aW9uQnlBc3ROb2RlSWQuc2V0KHNjZW5hcmlvLmlkLCBzY2VuYXJpby5sb2NhdGlvbilcbiAgICBmb3IgKGNvbnN0IHN0ZXAgb2Ygc2NlbmFyaW8uc3RlcHMpIHtcbiAgICAgIHRoaXMudXBkYXRlR2hlcmtpblN0ZXAodXJpLCBzdGVwKVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgZXhhbXBsZXMgb2Ygc2NlbmFyaW8uZXhhbXBsZXMpIHtcbiAgICAgIHRoaXMudXBkYXRlR2hlcmtpbkV4YW1wbGVzKHVyaSwgZXhhbXBsZXMpXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHaGVya2luRXhhbXBsZXModXJpOiBzdHJpbmcsIGV4YW1wbGVzOiBtZXNzYWdlcy5FeGFtcGxlcykge1xuICAgIHNldEFzdE5vZGUodGhpcy5leGFtcGxlc0J5VXJpTGluZSwgdXJpLCBleGFtcGxlcylcbiAgICBmb3IgKGNvbnN0IHRhYmxlUm93IG9mIGV4YW1wbGVzLnRhYmxlQm9keSB8fCBbXSkge1xuICAgICAgdGhpcy5sb2NhdGlvbkJ5QXN0Tm9kZUlkLnNldCh0YWJsZVJvdy5pZCwgdGFibGVSb3cubG9jYXRpb24pXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVHaGVya2luU3RlcCh1cmk6IHN0cmluZywgc3RlcDogbWVzc2FnZXMuU3RlcCkge1xuICAgIHNldEFzdE5vZGUodGhpcy5zdGVwQnlVcmlMaW5lLCB1cmksIHN0ZXApXG4gICAgdGhpcy5sb2NhdGlvbkJ5QXN0Tm9kZUlkLnNldChzdGVwLmlkLCBzdGVwLmxvY2F0aW9uKVxuICAgIHRoaXMuZ2hlcmtpblN0ZXBCeUFzdE5vZGVJZC5zZXQoc3RlcC5pZCwgc3RlcClcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGlja2xlKHBpY2tsZTogbWVzc2FnZXMuUGlja2xlKSB7XG4gICAgY29uc3QgcGlja2xlSWRzQnlMaW5lTnVtYmVyID0gdGhpcy5waWNrbGVJZHNNYXBCeVVyaS5nZXQocGlja2xlLnVyaSlcblxuICAgIGZvciAoY29uc3QgYXN0Tm9kZUlkIG9mIHBpY2tsZS5hc3ROb2RlSWRzKSB7XG4gICAgICBwaWNrbGVJZHNCeUxpbmVOdW1iZXIucHV0KGFzdE5vZGVJZCwgcGlja2xlLmlkKVxuICAgIH1cbiAgICB0aGlzLnVwZGF0ZVBpY2tsZVN0ZXBzKHBpY2tsZSlcbiAgICB0aGlzLnBpY2tsZXMucHVzaChwaWNrbGUpXG5cbiAgICBmb3IgKGNvbnN0IGFzdE5vZGVJZCBvZiBwaWNrbGUuYXN0Tm9kZUlkcykge1xuICAgICAgaWYgKCF0aGlzLnBpY2tsZUlkc0J5QXN0Tm9kZUlkLmhhcyhhc3ROb2RlSWQpKSB7XG4gICAgICAgIHRoaXMucGlja2xlSWRzQnlBc3ROb2RlSWQuc2V0KGFzdE5vZGVJZCwgW10pXG4gICAgICB9XG4gICAgICB0aGlzLnBpY2tsZUlkc0J5QXN0Tm9kZUlkLmdldChhc3ROb2RlSWQpLnB1c2gocGlja2xlLmlkKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlUGlja2xlU3RlcHMocGlja2xlOiBtZXNzYWdlcy5QaWNrbGUpIHtcbiAgICBjb25zdCBwaWNrbGVTdGVwcyA9IHBpY2tsZS5zdGVwc1xuICAgIGZvciAoY29uc3QgcGlja2xlU3RlcCBvZiBwaWNrbGVTdGVwcykge1xuICAgICAgZm9yIChjb25zdCBhc3ROb2RlSWQgb2YgcGlja2xlU3RlcC5hc3ROb2RlSWRzKSB7XG4gICAgICAgIGlmICghdGhpcy5waWNrbGVTdGVwSWRzQnlBc3ROb2RlSWQuaGFzKGFzdE5vZGVJZCkpIHtcbiAgICAgICAgICB0aGlzLnBpY2tsZVN0ZXBJZHNCeUFzdE5vZGVJZC5zZXQoYXN0Tm9kZUlkLCBbXSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBpY2tsZVN0ZXBJZHNCeUFzdE5vZGVJZC5nZXQoYXN0Tm9kZUlkKS5wdXNoKHBpY2tsZVN0ZXAuaWQpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbnR5cGUgSGFzTG9jYXRpb24gPSB7XG4gIGxvY2F0aW9uOiBtZXNzYWdlcy5Mb2NhdGlvblxufVxuXG5mdW5jdGlvbiBzZXRBc3ROb2RlPEFzdE5vZGUgZXh0ZW5kcyBIYXNMb2NhdGlvbj4oXG4gIG1hcDogTWFwPHN0cmluZywgQXN0Tm9kZT4sXG4gIHVyaTogc3RyaW5nLFxuICBhc3ROb2RlOiBBc3ROb2RlXG4pIHtcbiAgY29uc3QgbGluZSA9IGFzdE5vZGUubG9jYXRpb24ubGluZVxuICBjb25zdCB1cmlMaW5lID0gW3VyaSwgbGluZV0uam9pbignOicpXG4gIG1hcC5zZXQodXJpTGluZSwgYXN0Tm9kZSlcbn1cblxuZnVuY3Rpb24gZ2V0QXN0Tm9kZTxBc3ROb2RlPihcbiAgbWFwOiBNYXA8c3RyaW5nLCBBc3ROb2RlPixcbiAgdXJpOiBzdHJpbmcsXG4gIGxpbmU6IG51bWJlclxuKTogQXN0Tm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHVyaUxpbmUgPSBbdXJpLCBsaW5lXS5qb2luKCc6JylcbiAgcmV0dXJuIG1hcC5nZXQodXJpTGluZSlcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDQSxNQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFFQSxNQUFxQkMsS0FBSztFQUExQkMsWUFBQTtJQUNtQixLQUFBQyxPQUFPLEdBQXNCLEVBQUU7SUFDL0IsS0FBQUMsV0FBVyxHQUFHLElBQUlDLEdBQUcsRUFBMkI7SUFDaEQsS0FBQUMsZ0JBQWdCLEdBQStCLEVBQUU7SUFDakQsS0FBQUMsT0FBTyxHQUFzQixFQUFFO0lBQy9CLEtB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