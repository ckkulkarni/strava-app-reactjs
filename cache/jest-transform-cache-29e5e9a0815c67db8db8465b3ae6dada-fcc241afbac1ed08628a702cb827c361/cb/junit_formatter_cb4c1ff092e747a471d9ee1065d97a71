cf580c61ca89b1a66d2840a2a4a45847
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
const xmlbuilder_1 = __importDefault(require("xmlbuilder"));
const _1 = __importDefault(require("./"));
const messages_1 = require("@cucumber/messages");
const value_checker_1 = require("../value_checker");
const gherkin_document_parser_1 = require("./helpers/gherkin_document_parser");
const pickle_parser_1 = require("./helpers/pickle_parser");
class JunitFormatter extends _1.default {
  constructor(options) {
    super(options);
    this.names = {};
    options.eventBroadcaster.on('envelope', envelope => {
      if ((0, value_checker_1.doesHaveValue)(envelope.testRunFinished)) {
        this.onTestRunFinished();
      }
    });
  }
  getTestCases() {
    return this.eventDataCollector.getTestCaseAttempts().filter(attempt => !attempt.willBeRetried);
  }
  getTestSteps(testCaseAttempt, gherkinStepMap, pickleStepMap) {
    return testCaseAttempt.testCase.testSteps.map(testStep => {
      const isBeforeHook = !(0, value_checker_1.doesHaveValue)(testStep.pickleStepId);
      return this.getTestStep({
        isBeforeHook,
        gherkinStepMap,
        pickleStepMap,
        testStep,
        testStepAttachments: testCaseAttempt.stepAttachments[testStep.id],
        testStepResult: testCaseAttempt.stepResults[testStep.id]
      });
    });
  }
  getTestStep({
    isBeforeHook,
    gherkinStepMap,
    pickleStepMap,
    testStep,
    testStepAttachments,
    testStepResult
  }) {
    const data = {};
    if (testStep.pickleStepId) {
      const pickleStep = pickleStepMap[testStep.pickleStepId];
      data.keyword = (0, pickle_parser_1.getStepKeyword)({
        pickleStep,
        gherkinStepMap
      });
      data.line = gherkinStepMap[pickleStep.astNodeIds[0]].location.line;
      data.name = pickleStep.text;
    } else {
      data.keyword = isBeforeHook ? 'Before' : 'After';
      data.hidden = true;
    }
    data.result = testStepResult;
    data.time = testStepResult.duration ? this.durationToSeconds(testStepResult.duration) : 0;
    data.attachments = testStepAttachments;
    return data;
  }
  getTestCaseResult(steps) {
    const {
      status,
      message,
      exception
    } = (0, messages_1.getWorstTestStepResult)(steps.map(step => step.result));
    return {
      status,
      failure: message || exception ? {
        type: exception === null || exception === void 0 ? void 0 : exception.type,
        message: exception === null || exception === void 0 ? void 0 : exception.message,
        detail: message
      } : undefined
    };
  }
  durationToSeconds(duration) {
    const NANOS_IN_SECOND = 1000000000;
    return (duration.seconds * NANOS_IN_SECOND + duration.nanos) / NANOS_IN_SECOND;
  }
  nameOrDefault(name, fallbackSuffix) {
    if (!name) {
      return `(unnamed ${fallbackSuffix})`;
    }
    return name;
  }
  getTestCaseName(feature, rule, pickle) {
    const featureName = this.nameOrDefault(feature.name, 'feature');
    const pickleName = this.nameOrDefault(pickle.name, 'scenario');
    const testCaseName = rule ? this.nameOrDefault(rule.name, 'rule') + ': ' + pickleName : pickleName;
    if (!this.names[featureName]) {
      this.names[featureName] = [];
    }
    let index = 0;
    while (this.names[featureName].includes(index > 0 ? `${testCaseName} [${index}]` : testCaseName)) {
      index++;
    }
    const name = index > 0 ? `${testCaseName} [${index}]` : testCaseName;
    this.names[featureName].push(name);
    return name;
  }
  formatTestSteps(steps) {
    return steps.filter(step => !step.hidden).map(step => {
      const statusText = step.result.status.toLowerCase();
      const maxLength = 80 - statusText.length - 3;
      const stepText = `${step.keyword}${step.name}`.padEnd(maxLength, '.').substring(0, maxLength);
      return `${stepText}...${statusText}`;
    }).join('\n');
  }
  onTestRunFinished() {
    const testCases = this.getTestCases();
    const tests = testCases.map(testCaseAttempt => {
      const {
        gherkinDocument,
        pickle
      } = testCaseAttempt;
      const {
        feature
      } = gherkinDocument;
      const gherkinExampleRuleMap = (0, gherkin_document_parser_1.getGherkinExampleRuleMap)(gherkinDocument);
      const rule = gherkinExampleRuleMap[pickle.astNodeIds[0]];
      const gherkinStepMap = (0, gherkin_document_parser_1.getGherkinStepMap)(gherkinDocument);
      const pickleStepMap = (0, pickle_parser_1.getPickleStepMap)(pickle);
      const steps = this.getTestSteps(testCaseAttempt, gherkinStepMap, pickleStepMap);
      const stepDuration = steps.reduce((total, step) => total + (step.time || 0), 0);
      return {
        classname: this.nameOrDefault(feature.name, 'feature'),
        name: this.getTestCaseName(feature, rule, pickle),
        time: stepDuration,
        result: this.getTestCaseResult(steps),
        systemOutput: this.formatTestSteps(steps),
        steps
      };
    });
    const passed = tests.filter(item => item.result.status === messages_1.TestStepResultStatus.PASSED).length;
    const skipped = tests.filter(item => item.result.status === messages_1.TestStepResultStatus.SKIPPED).length;
    const failures = tests.length - passed - skipped;
    const testSuite = {
      name: 'cucumber-js',
      tests,
      failures,
      skipped,
      time: tests.reduce((total, test) => total + test.time, 0)
    };
    this.log(this.buildXmlReport(testSuite));
  }
  buildXmlReport(testSuite) {
    const xmlReport = xmlbuilder_1.default.create('testsuite', {
      invalidCharReplacement: ''
    }).att('failures', testSuite.failures).att('skipped', testSuite.skipped).att('name', testSuite.name).att('time', testSuite.time).att('tests', testSuite.tests.length);
    testSuite.tests.forEach(test => {
      var _a, _b, _c;
      const xmlTestCase = xmlReport.ele('testcase', {
        classname: test.classname,
        name: test.name,
        time: test.time
      });
      if (test.result.status === messages_1.TestStepResultStatus.SKIPPED) {
        xmlTestCase.ele('skipped');
      } else if (test.result.status !== messages_1.TestStepResultStatus.PASSED) {
        const xmlFailure = xmlTestCase.ele('failure', {
          type: (_a = test.result.failure) === null || _a === void 0 ? void 0 : _a.type,
          message: (_b = test.result.failure) === null || _b === void 0 ? void 0 : _b.message
        });
        if ((_c = test.result) === null || _c === void 0 ? void 0 : _c.failure) {
          xmlFailure.cdata(test.result.failure.detail);
        }
      }
      xmlTestCase.ele('system-out', {}).cdata(test.systemOutput);
    });
    return xmlReport.end({
      pretty: true
    });
  }
}
exports.default = JunitFormatter;
JunitFormatter.documentation = 'Outputs JUnit report';
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ4bWxidWlsZGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiXzEiLCJtZXNzYWdlc18xIiwidmFsdWVfY2hlY2tlcl8xIiwiZ2hlcmtpbl9kb2N1bWVudF9wYXJzZXJfMSIsInBpY2tsZV9wYXJzZXJfMSIsIkp1bml0Rm9ybWF0dGVyIiwiZGVmYXVsdCIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsIm5hbWVzIiwiZXZlbnRCcm9hZGNhc3RlciIsIm9uIiwiZW52ZWxvcGUiLCJkb2VzSGF2ZVZhbHVlIiwidGVzdFJ1bkZpbmlzaGVkIiwib25UZXN0UnVuRmluaXNoZWQiLCJnZXRUZXN0Q2FzZXMiLCJldmVudERhdGFDb2xsZWN0b3IiLCJnZXRUZXN0Q2FzZUF0dGVtcHRzIiwiZmlsdGVyIiwiYXR0ZW1wdCIsIndpbGxCZVJldHJpZWQiLCJnZXRUZXN0U3RlcHMiLCJ0ZXN0Q2FzZUF0dGVtcHQiLCJnaGVya2luU3RlcE1hcCIsInBpY2tsZVN0ZXBNYXAiLCJ0ZXN0Q2FzZSIsInRlc3RTdGVwcyIsIm1hcCIsInRlc3RTdGVwIiwiaXNCZWZvcmVIb29rIiwicGlja2xlU3RlcElkIiwiZ2V0VGVzdFN0ZXAiLCJ0ZXN0U3RlcEF0dGFjaG1lbnRzIiwic3RlcEF0dGFjaG1lbnRzIiwiaWQiLCJ0ZXN0U3RlcFJlc3VsdCIsInN0ZXBSZXN1bHRzIiwiZGF0YSIsInBpY2tsZVN0ZXAiLCJrZXl3b3JkIiwiZ2V0U3RlcEtleXdvcmQiLCJsaW5lIiwiYXN0Tm9kZUlkcyIsImxvY2F0aW9uIiwibmFtZSIsInRleHQiLCJoaWRkZW4iLCJyZXN1bHQiLCJ0aW1lIiwiZHVyYXRpb24iLCJkdXJhdGlvblRvU2Vjb25kcyIsImF0dGFjaG1lbnRzIiwiZ2V0VGVzdENhc2VSZXN1bHQiLCJzdGVwcyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJleGNlcHRpb24iLCJnZXRXb3JzdFRlc3RTdGVwUmVzdWx0Iiwic3RlcCIsImZhaWx1cmUiLCJ0eXBlIiwiZGV0YWlsIiwidW5kZWZpbmVkIiwiTkFOT1NfSU5fU0VDT05EIiwic2Vjb25kcyIsIm5hbm9zIiwibmFtZU9yRGVmYXVsdCIsImZhbGxiYWNrU3VmZml4IiwiZ2V0VGVzdENhc2VOYW1lIiwiZmVhdHVyZSIsInJ1bGUiLCJwaWNrbGUiLCJmZWF0dXJlTmFtZSIsInBpY2tsZU5hbWUiLCJ0ZXN0Q2FzZU5hbWUiLCJpbmRleCIsImluY2x1ZGVzIiwicHVzaCIsImZvcm1hdFRlc3RTdGVwcyIsInN0YXR1c1RleHQiLCJ0b0xvd2VyQ2FzZSIsIm1heExlbmd0aCIsImxlbmd0aCIsInN0ZXBUZXh0IiwicGFkRW5kIiwic3Vic3RyaW5nIiwiam9pbiIsInRlc3RDYXNlcyIsInRlc3RzIiwiZ2hlcmtpbkRvY3VtZW50IiwiZ2hlcmtpbkV4YW1wbGVSdWxlTWFwIiwiZ2V0R2hlcmtpbkV4YW1wbGVSdWxlTWFwIiwiZ2V0R2hlcmtpblN0ZXBNYXAiLCJnZXRQaWNrbGVTdGVwTWFwIiwic3RlcER1cmF0aW9uIiwicmVkdWNlIiwidG90YWwiLCJjbGFzc25hbWUiLCJzeXN0ZW1PdXRwdXQiLCJwYXNzZWQiLCJpdGVtIiwiVGVzdFN0ZXBSZXN1bHRTdGF0dXMiLCJQQVNTRUQiLCJza2lwcGVkIiwiU0tJUFBFRCIsImZhaWx1cmVzIiwidGVzdFN1aXRlIiwidGVzdCIsImxvZyIsImJ1aWxkWG1sUmVwb3J0IiwieG1sUmVwb3J0IiwiY3JlYXRlIiwiaW52YWxpZENoYXJSZXBsYWNlbWVudCIsImF0dCIsImZvckVhY2giLCJ4bWxUZXN0Q2FzZSIsImVsZSIsInhtbEZhaWx1cmUiLCJfYSIsIl9iIiwiX2MiLCJjZGF0YSIsImVuZCIsInByZXR0eSIsImV4cG9ydHMiLCJkb2N1bWVudGF0aW9uIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Zvcm1hdHRlci9qdW5pdF9mb3JtYXR0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHhtbGJ1aWxkZXIgZnJvbSAneG1sYnVpbGRlcidcbmltcG9ydCBGb3JtYXR0ZXIsIHsgSUZvcm1hdHRlck9wdGlvbnMgfSBmcm9tICcuLydcbmltcG9ydCAqIGFzIG1lc3NhZ2VzIGZyb20gJ0BjdWN1bWJlci9tZXNzYWdlcydcbmltcG9ydCB7XG4gIEF0dGFjaG1lbnQsXG4gIER1cmF0aW9uLFxuICBGZWF0dXJlLFxuICBnZXRXb3JzdFRlc3RTdGVwUmVzdWx0LFxuICBQaWNrbGUsXG4gIFJ1bGUsXG4gIFRlc3RTdGVwUmVzdWx0LFxuICBUZXN0U3RlcFJlc3VsdFN0YXR1cyxcbn0gZnJvbSAnQGN1Y3VtYmVyL21lc3NhZ2VzJ1xuaW1wb3J0IHsgSVRlc3RDYXNlQXR0ZW1wdCB9IGZyb20gJy4vaGVscGVycy9ldmVudF9kYXRhX2NvbGxlY3RvcidcbmltcG9ydCB7IGRvZXNIYXZlVmFsdWUgfSBmcm9tICcuLi92YWx1ZV9jaGVja2VyJ1xuaW1wb3J0IHtcbiAgZ2V0R2hlcmtpbkV4YW1wbGVSdWxlTWFwLFxuICBnZXRHaGVya2luU3RlcE1hcCxcbn0gZnJvbSAnLi9oZWxwZXJzL2doZXJraW5fZG9jdW1lbnRfcGFyc2VyJ1xuaW1wb3J0IHsgZ2V0UGlja2xlU3RlcE1hcCwgZ2V0U3RlcEtleXdvcmQgfSBmcm9tICcuL2hlbHBlcnMvcGlja2xlX3BhcnNlcidcblxuaW50ZXJmYWNlIElKVW5pdFRlc3RTdWl0ZSB7XG4gIG5hbWU6IHN0cmluZ1xuICBmYWlsdXJlczogbnVtYmVyXG4gIHNraXBwZWQ6IG51bWJlclxuICB0aW1lOiBudW1iZXJcbiAgdGVzdHM6IElKVW5pdFRlc3RDYXNlW11cbn1cblxuaW50ZXJmYWNlIElKVW5pdFRlc3RDYXNlIHtcbiAgY2xhc3NuYW1lOiBzdHJpbmdcbiAgbmFtZTogc3RyaW5nXG4gIHRpbWU6IG51bWJlclxuICByZXN1bHQ6IElKVW5pdFRlc3RDYXNlUmVzdWx0XG4gIHN5c3RlbU91dHB1dDogc3RyaW5nXG4gIHN0ZXBzOiBJSlVuaXRUZXN0U3RlcFtdXG59XG5cbmludGVyZmFjZSBJSlVuaXRUZXN0Q2FzZUZhaWx1cmUge1xuICB0eXBlOiBzdHJpbmdcbiAgbWVzc2FnZT86IHN0cmluZ1xuICBkZXRhaWw6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSUpVbml0VGVzdENhc2VSZXN1bHQge1xuICBzdGF0dXM6IFRlc3RTdGVwUmVzdWx0U3RhdHVzXG4gIGZhaWx1cmU/OiBJSlVuaXRUZXN0Q2FzZUZhaWx1cmVcbn1cblxuaW50ZXJmYWNlIElKVW5pdFRlc3RTdGVwIHtcbiAgYXR0YWNobWVudHM6IEF0dGFjaG1lbnRbXVxuICBoaWRkZW46IGJvb2xlYW5cbiAga2V5d29yZDogc3RyaW5nXG4gIGxpbmU6IG51bWJlclxuICBuYW1lPzogc3RyaW5nXG4gIHJlc3VsdDogVGVzdFN0ZXBSZXN1bHRcbiAgdGltZTogbnVtYmVyXG59XG5cbmludGVyZmFjZSBJQnVpbGRKVW5pdFRlc3RTdGVwT3B0aW9ucyB7XG4gIGlzQmVmb3JlSG9vazogYm9vbGVhblxuICBnaGVya2luU3RlcE1hcDogUmVjb3JkPHN0cmluZywgbWVzc2FnZXMuU3RlcD5cbiAgcGlja2xlU3RlcE1hcDogUmVjb3JkPHN0cmluZywgbWVzc2FnZXMuUGlja2xlU3RlcD5cbiAgdGVzdFN0ZXA6IG1lc3NhZ2VzLlRlc3RTdGVwXG4gIHRlc3RTdGVwQXR0YWNobWVudHM6IG1lc3NhZ2VzLkF0dGFjaG1lbnRbXVxuICB0ZXN0U3RlcFJlc3VsdDogbWVzc2FnZXMuVGVzdFN0ZXBSZXN1bHRcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSnVuaXRGb3JtYXR0ZXIgZXh0ZW5kcyBGb3JtYXR0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IG5hbWVzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmdbXT4gPSB7fVxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGRvY3VtZW50YXRpb246IHN0cmluZyA9ICdPdXRwdXRzIEpVbml0IHJlcG9ydCdcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRm9ybWF0dGVyT3B0aW9ucykge1xuICAgIHN1cGVyKG9wdGlvbnMpXG4gICAgb3B0aW9ucy5ldmVudEJyb2FkY2FzdGVyLm9uKCdlbnZlbG9wZScsIChlbnZlbG9wZTogbWVzc2FnZXMuRW52ZWxvcGUpID0+IHtcbiAgICAgIGlmIChkb2VzSGF2ZVZhbHVlKGVudmVsb3BlLnRlc3RSdW5GaW5pc2hlZCkpIHtcbiAgICAgICAgdGhpcy5vblRlc3RSdW5GaW5pc2hlZCgpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVzdENhc2VzKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50RGF0YUNvbGxlY3RvclxuICAgICAgLmdldFRlc3RDYXNlQXR0ZW1wdHMoKVxuICAgICAgLmZpbHRlcigoYXR0ZW1wdCkgPT4gIWF0dGVtcHQud2lsbEJlUmV0cmllZClcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VGVzdFN0ZXBzKFxuICAgIHRlc3RDYXNlQXR0ZW1wdDogSVRlc3RDYXNlQXR0ZW1wdCxcbiAgICBnaGVya2luU3RlcE1hcDogUmVjb3JkPHN0cmluZywgbWVzc2FnZXMuU3RlcD4sXG4gICAgcGlja2xlU3RlcE1hcDogUmVjb3JkPHN0cmluZywgbWVzc2FnZXMuUGlja2xlU3RlcD5cbiAgKSB7XG4gICAgcmV0dXJuIHRlc3RDYXNlQXR0ZW1wdC50ZXN0Q2FzZS50ZXN0U3RlcHMubWFwKCh0ZXN0U3RlcCkgPT4ge1xuICAgICAgY29uc3QgaXNCZWZvcmVIb29rID0gIWRvZXNIYXZlVmFsdWUodGVzdFN0ZXAucGlja2xlU3RlcElkKVxuICAgICAgcmV0dXJuIHRoaXMuZ2V0VGVzdFN0ZXAoe1xuICAgICAgICBpc0JlZm9yZUhvb2ssXG4gICAgICAgIGdoZXJraW5TdGVwTWFwLFxuICAgICAgICBwaWNrbGVTdGVwTWFwLFxuICAgICAgICB0ZXN0U3RlcCxcbiAgICAgICAgdGVzdFN0ZXBBdHRhY2htZW50czogdGVzdENhc2VBdHRlbXB0LnN0ZXBBdHRhY2htZW50c1t0ZXN0U3RlcC5pZF0sXG4gICAgICAgIHRlc3RTdGVwUmVzdWx0OiB0ZXN0Q2FzZUF0dGVtcHQuc3RlcFJlc3VsdHNbdGVzdFN0ZXAuaWRdLFxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUZXN0U3RlcCh7XG4gICAgaXNCZWZvcmVIb29rLFxuICAgIGdoZXJraW5TdGVwTWFwLFxuICAgIHBpY2tsZVN0ZXBNYXAsXG4gICAgdGVzdFN0ZXAsXG4gICAgdGVzdFN0ZXBBdHRhY2htZW50cyxcbiAgICB0ZXN0U3RlcFJlc3VsdCxcbiAgfTogSUJ1aWxkSlVuaXRUZXN0U3RlcE9wdGlvbnMpOiBJSlVuaXRUZXN0U3RlcCB7XG4gICAgY29uc3QgZGF0YTogUGFydGlhbDxJSlVuaXRUZXN0U3RlcD4gPSB7fVxuICAgIGlmICh0ZXN0U3RlcC5waWNrbGVTdGVwSWQpIHtcbiAgICAgIGNvbnN0IHBpY2tsZVN0ZXAgPSBwaWNrbGVTdGVwTWFwW3Rlc3RTdGVwLnBpY2tsZVN0ZXBJZF1cbiAgICAgIGRhdGEua2V5d29yZCA9IGdldFN0ZXBLZXl3b3JkKHsgcGlja2xlU3RlcCwgZ2hlcmtpblN0ZXBNYXAgfSlcbiAgICAgIGRhdGEubGluZSA9IGdoZXJraW5TdGVwTWFwW3BpY2tsZVN0ZXAuYXN0Tm9kZUlkc1swXV0ubG9jYXRpb24ubGluZVxuICAgICAgZGF0YS5uYW1lID0gcGlja2xlU3RlcC50ZXh0XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEua2V5d29yZCA9IGlzQmVmb3JlSG9vayA/ICdCZWZvcmUnIDogJ0FmdGVyJ1xuICAgICAgZGF0YS5oaWRkZW4gPSB0cnVlXG4gICAgfVxuICAgIGRhdGEucmVzdWx0ID0gdGVzdFN0ZXBSZXN1bHRcbiAgICBkYXRhLnRpbWUgPSB0ZXN0U3RlcFJlc3VsdC5kdXJhdGlvblxuICAgICAgPyB0aGlzLmR1cmF0aW9uVG9TZWNvbmRzKHRlc3RTdGVwUmVzdWx0LmR1cmF0aW9uKVxuICAgICAgOiAwXG4gICAgZGF0YS5hdHRhY2htZW50cyA9IHRlc3RTdGVwQXR0YWNobWVudHNcbiAgICByZXR1cm4gZGF0YSBhcyBJSlVuaXRUZXN0U3RlcFxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUZXN0Q2FzZVJlc3VsdChzdGVwczogSUpVbml0VGVzdFN0ZXBbXSk6IElKVW5pdFRlc3RDYXNlUmVzdWx0IHtcbiAgICBjb25zdCB7IHN0YXR1cywgbWVzc2FnZSwgZXhjZXB0aW9uIH0gPSBnZXRXb3JzdFRlc3RTdGVwUmVzdWx0KFxuICAgICAgc3RlcHMubWFwKChzdGVwKSA9PiBzdGVwLnJlc3VsdClcbiAgICApXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXR1cyxcbiAgICAgIGZhaWx1cmU6XG4gICAgICAgIG1lc3NhZ2UgfHwgZXhjZXB0aW9uXG4gICAgICAgICAgPyB7XG4gICAgICAgICAgICAgIHR5cGU6IGV4Y2VwdGlvbj8udHlwZSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogZXhjZXB0aW9uPy5tZXNzYWdlLFxuICAgICAgICAgICAgICBkZXRhaWw6IG1lc3NhZ2UsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBkdXJhdGlvblRvU2Vjb25kcyhkdXJhdGlvbjogRHVyYXRpb24pOiBudW1iZXIge1xuICAgIGNvbnN0IE5BTk9TX0lOX1NFQ09ORCA9IDFfMDAwXzAwMF8wMDBcbiAgICByZXR1cm4gKFxuICAgICAgKGR1cmF0aW9uLnNlY29uZHMgKiBOQU5PU19JTl9TRUNPTkQgKyBkdXJhdGlvbi5uYW5vcykgLyBOQU5PU19JTl9TRUNPTkRcbiAgICApXG4gIH1cblxuICBwcml2YXRlIG5hbWVPckRlZmF1bHQobmFtZTogc3RyaW5nLCBmYWxsYmFja1N1ZmZpeDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIW5hbWUpIHtcbiAgICAgIHJldHVybiBgKHVubmFtZWQgJHtmYWxsYmFja1N1ZmZpeH0pYFxuICAgIH1cbiAgICByZXR1cm4gbmFtZVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRUZXN0Q2FzZU5hbWUoXG4gICAgZmVhdHVyZTogRmVhdHVyZSxcbiAgICBydWxlOiBSdWxlIHwgdW5kZWZpbmVkLFxuICAgIHBpY2tsZTogUGlja2xlXG4gICkge1xuICAgIGNvbnN0IGZlYXR1cmVOYW1lID0gdGhpcy5uYW1lT3JEZWZhdWx0KGZlYXR1cmUubmFtZSwgJ2ZlYXR1cmUnKVxuICAgIGNvbnN0IHBpY2tsZU5hbWUgPSB0aGlzLm5hbWVPckRlZmF1bHQocGlja2xlLm5hbWUsICdzY2VuYXJpbycpXG4gICAgY29uc3QgdGVzdENhc2VOYW1lID0gcnVsZVxuICAgICAgPyB0aGlzLm5hbWVPckRlZmF1bHQocnVsZS5uYW1lLCAncnVsZScpICsgJzogJyArIHBpY2tsZU5hbWVcbiAgICAgIDogcGlja2xlTmFtZVxuICAgIGlmICghdGhpcy5uYW1lc1tmZWF0dXJlTmFtZV0pIHtcbiAgICAgIHRoaXMubmFtZXNbZmVhdHVyZU5hbWVdID0gW11cbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIHdoaWxlIChcbiAgICAgIHRoaXMubmFtZXNbZmVhdHVyZU5hbWVdLmluY2x1ZGVzKFxuICAgICAgICBpbmRleCA+IDAgPyBgJHt0ZXN0Q2FzZU5hbWV9IFske2luZGV4fV1gIDogdGVzdENhc2VOYW1lXG4gICAgICApXG4gICAgKSB7XG4gICAgICBpbmRleCsrXG4gICAgfVxuICAgIGNvbnN0IG5hbWUgPSBpbmRleCA+IDAgPyBgJHt0ZXN0Q2FzZU5hbWV9IFske2luZGV4fV1gIDogdGVzdENhc2VOYW1lXG4gICAgdGhpcy5uYW1lc1tmZWF0dXJlTmFtZV0ucHVzaChuYW1lKVxuICAgIHJldHVybiBuYW1lXG4gIH1cblxuICBwcml2YXRlIGZvcm1hdFRlc3RTdGVwcyhzdGVwczogSUpVbml0VGVzdFN0ZXBbXSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ZXBzXG4gICAgICAuZmlsdGVyKChzdGVwKSA9PiAhc3RlcC5oaWRkZW4pXG4gICAgICAubWFwKChzdGVwKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBzdGVwLnJlc3VsdC5zdGF0dXMudG9Mb3dlckNhc2UoKVxuICAgICAgICBjb25zdCBtYXhMZW5ndGggPSA4MCAtIHN0YXR1c1RleHQubGVuZ3RoIC0gM1xuICAgICAgICBjb25zdCBzdGVwVGV4dCA9IGAke3N0ZXAua2V5d29yZH0ke3N0ZXAubmFtZX1gXG4gICAgICAgICAgLnBhZEVuZChtYXhMZW5ndGgsICcuJylcbiAgICAgICAgICAuc3Vic3RyaW5nKDAsIG1heExlbmd0aClcbiAgICAgICAgcmV0dXJuIGAke3N0ZXBUZXh0fS4uLiR7c3RhdHVzVGV4dH1gXG4gICAgICB9KVxuICAgICAgLmpvaW4oJ1xcbicpXG4gIH1cblxuICBwcml2YXRlIG9uVGVzdFJ1bkZpbmlzaGVkKCk6IHZvaWQge1xuICAgIGNvbnN0IHRlc3RDYXNlcyA9IHRoaXMuZ2V0VGVzdENhc2VzKClcblxuICAgIGNvbnN0IHRlc3RzID0gdGVzdENhc2VzLm1hcDxJSlVuaXRUZXN0Q2FzZT4oXG4gICAgICAodGVzdENhc2VBdHRlbXB0OiBJVGVzdENhc2VBdHRlbXB0KSA9PiB7XG4gICAgICAgIGNvbnN0IHsgZ2hlcmtpbkRvY3VtZW50LCBwaWNrbGUgfSA9IHRlc3RDYXNlQXR0ZW1wdFxuICAgICAgICBjb25zdCB7IGZlYXR1cmUgfSA9IGdoZXJraW5Eb2N1bWVudFxuICAgICAgICBjb25zdCBnaGVya2luRXhhbXBsZVJ1bGVNYXAgPSBnZXRHaGVya2luRXhhbXBsZVJ1bGVNYXAoZ2hlcmtpbkRvY3VtZW50KVxuICAgICAgICBjb25zdCBydWxlID0gZ2hlcmtpbkV4YW1wbGVSdWxlTWFwW3BpY2tsZS5hc3ROb2RlSWRzWzBdXVxuICAgICAgICBjb25zdCBnaGVya2luU3RlcE1hcCA9IGdldEdoZXJraW5TdGVwTWFwKGdoZXJraW5Eb2N1bWVudClcbiAgICAgICAgY29uc3QgcGlja2xlU3RlcE1hcCA9IGdldFBpY2tsZVN0ZXBNYXAocGlja2xlKVxuXG4gICAgICAgIGNvbnN0IHN0ZXBzID0gdGhpcy5nZXRUZXN0U3RlcHMoXG4gICAgICAgICAgdGVzdENhc2VBdHRlbXB0LFxuICAgICAgICAgIGdoZXJraW5TdGVwTWFwLFxuICAgICAgICAgIHBpY2tsZVN0ZXBNYXBcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBzdGVwRHVyYXRpb24gPSBzdGVwcy5yZWR1Y2UoXG4gICAgICAgICAgKHRvdGFsLCBzdGVwKSA9PiB0b3RhbCArIChzdGVwLnRpbWUgfHwgMCksXG4gICAgICAgICAgMFxuICAgICAgICApXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjbGFzc25hbWU6IHRoaXMubmFtZU9yRGVmYXVsdChmZWF0dXJlLm5hbWUsICdmZWF0dXJlJyksXG4gICAgICAgICAgbmFtZTogdGhpcy5nZXRUZXN0Q2FzZU5hbWUoZmVhdHVyZSwgcnVsZSwgcGlja2xlKSxcbiAgICAgICAgICB0aW1lOiBzdGVwRHVyYXRpb24sXG4gICAgICAgICAgcmVzdWx0OiB0aGlzLmdldFRlc3RDYXNlUmVzdWx0KHN0ZXBzKSxcbiAgICAgICAgICBzeXN0ZW1PdXRwdXQ6IHRoaXMuZm9ybWF0VGVzdFN0ZXBzKHN0ZXBzKSxcbiAgICAgICAgICBzdGVwcyxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIClcblxuICAgIGNvbnN0IHBhc3NlZCA9IHRlc3RzLmZpbHRlcihcbiAgICAgIChpdGVtKSA9PiBpdGVtLnJlc3VsdC5zdGF0dXMgPT09IFRlc3RTdGVwUmVzdWx0U3RhdHVzLlBBU1NFRFxuICAgICkubGVuZ3RoXG4gICAgY29uc3Qgc2tpcHBlZCA9IHRlc3RzLmZpbHRlcihcbiAgICAgIChpdGVtKSA9PiBpdGVtLnJlc3VsdC5zdGF0dXMgPT09IFRlc3RTdGVwUmVzdWx0U3RhdHVzLlNLSVBQRURcbiAgICApLmxlbmd0aFxuICAgIGNvbnN0IGZhaWx1cmVzID0gdGVzdHMubGVuZ3RoIC0gcGFzc2VkIC0gc2tpcHBlZFxuXG4gICAgY29uc3QgdGVzdFN1aXRlOiBJSlVuaXRUZXN0U3VpdGUgPSB7XG4gICAgICBuYW1lOiAnY3VjdW1iZXItanMnLFxuICAgICAgdGVzdHMsXG4gICAgICBmYWlsdXJlcyxcbiAgICAgIHNraXBwZWQsXG4gICAgICB0aW1lOiB0ZXN0cy5yZWR1Y2UoKHRvdGFsLCB0ZXN0KSA9PiB0b3RhbCArIHRlc3QudGltZSwgMCksXG4gICAgfVxuXG4gICAgdGhpcy5sb2codGhpcy5idWlsZFhtbFJlcG9ydCh0ZXN0U3VpdGUpKVxuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFhtbFJlcG9ydCh0ZXN0U3VpdGU6IElKVW5pdFRlc3RTdWl0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgeG1sUmVwb3J0ID0geG1sYnVpbGRlclxuICAgICAgLmNyZWF0ZSgndGVzdHN1aXRlJywgeyBpbnZhbGlkQ2hhclJlcGxhY2VtZW50OiAnJyB9KVxuICAgICAgLmF0dCgnZmFpbHVyZXMnLCB0ZXN0U3VpdGUuZmFpbHVyZXMpXG4gICAgICAuYXR0KCdza2lwcGVkJywgdGVzdFN1aXRlLnNraXBwZWQpXG4gICAgICAuYXR0KCduYW1lJywgdGVzdFN1aXRlLm5hbWUpXG4gICAgICAuYXR0KCd0aW1lJywgdGVzdFN1aXRlLnRpbWUpXG4gICAgICAuYXR0KCd0ZXN0cycsIHRlc3RTdWl0ZS50ZXN0cy5sZW5ndGgpXG4gICAgdGVzdFN1aXRlLnRlc3RzLmZvckVhY2goKHRlc3QpID0+IHtcbiAgICAgIGNvbnN0IHhtbFRlc3RDYXNlID0geG1sUmVwb3J0LmVsZSgndGVzdGNhc2UnLCB7XG4gICAgICAgIGNsYXNzbmFtZTogdGVzdC5jbGFzc25hbWUsXG4gICAgICAgIG5hbWU6IHRlc3QubmFtZSxcbiAgICAgICAgdGltZTogdGVzdC50aW1lLFxuICAgICAgfSlcbiAgICAgIGlmICh0ZXN0LnJlc3VsdC5zdGF0dXMgPT09IFRlc3RTdGVwUmVzdWx0U3RhdHVzLlNLSVBQRUQpIHtcbiAgICAgICAgeG1sVGVzdENhc2UuZWxlKCdza2lwcGVkJylcbiAgICAgIH0gZWxzZSBpZiAodGVzdC5yZXN1bHQuc3RhdHVzICE9PSBUZXN0U3RlcFJlc3VsdFN0YXR1cy5QQVNTRUQpIHtcbiAgICAgICAgY29uc3QgeG1sRmFpbHVyZSA9IHhtbFRlc3RDYXNlLmVsZSgnZmFpbHVyZScsIHtcbiAgICAgICAgICB0eXBlOiB0ZXN0LnJlc3VsdC5mYWlsdXJlPy50eXBlLFxuICAgICAgICAgIG1lc3NhZ2U6IHRlc3QucmVzdWx0LmZhaWx1cmU/Lm1lc3NhZ2UsXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0ZXN0LnJlc3VsdD8uZmFpbHVyZSkge1xuICAgICAgICAgIHhtbEZhaWx1cmUuY2RhdGEodGVzdC5yZXN1bHQuZmFpbHVyZS5kZXRhaWwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHhtbFRlc3RDYXNlLmVsZSgnc3lzdGVtLW91dCcsIHt9KS5jZGF0YSh0ZXN0LnN5c3RlbU91dHB1dClcbiAgICB9KVxuXG4gICAgcmV0dXJuIHhtbFJlcG9ydC5lbmQoeyBwcmV0dHk6IHRydWUgfSlcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsWUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxFQUFBLEdBQUFGLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQUFFLFVBQUEsR0FBQUYsT0FBQTtBQVdBLE1BQUFHLGVBQUEsR0FBQUgsT0FBQTtBQUNBLE1BQUFJLHlCQUFBLEdBQUFKLE9BQUE7QUFJQSxNQUFBSyxlQUFBLEdBQUFMLE9BQUE7QUFpREEsTUFBcUJNLGNBQWUsU0FBUUwsRUFBQSxDQUFBTSxPQUFTO0VBSW5EQyxZQUFZQyxPQUEwQjtJQUNwQyxLQUFLLENBQUNBLE9BQU8sQ0FBQztJQUpDLEtBQUFDLEtBQUssR0FBNkIsRUFBRTtJQUtuREQsT0FBTyxDQUFDRSxnQkFBZ0IsQ0FBQ0MsRUFBRSxDQUFDLFVBQVUsRUFBR0MsUUFBMkIsSUFBSTtNQUN0RSxJQUFJLElBQUFWLGVBQUEsQ0FBQVcsYUFBYSxFQUFDRCxRQUFRLENBQUNFLGVBQWUsQ0FBQyxFQUFFO1FBQzNDLElBQUksQ0FBQ0MsaUJBQWlCLEVBQUU7O0lBRTVCLENBQUMsQ0FBQztFQUNKO0VBRVFDLFlBQVlBLENBQUE7SUFDbEIsT0FBTyxJQUFJLENBQUNDLGtCQUFrQixDQUMzQkMsbUJBQW1CLEVBQUUsQ0FDckJD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