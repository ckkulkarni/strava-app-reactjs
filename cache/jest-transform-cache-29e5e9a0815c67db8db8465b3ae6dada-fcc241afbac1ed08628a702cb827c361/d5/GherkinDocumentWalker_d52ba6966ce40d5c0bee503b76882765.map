{"version":3,"names":["defaultFilters","acceptScenario","acceptStep","acceptBackground","acceptRule","acceptFeature","exports","rejectAllFilters","defaultHandlers","handleStep","handleScenario","handleBackground","handleRule","handleFeature","GherkinDocumentWalker","constructor","filters","handlers","Object","assign","walkGherkinDocument","gherkinDocument","feature","walkFeature","comments","uri","keptChildren","walkFeatureChildren","children","backgroundKept","find","child","background","copyFeature","map","copyBackground","scenario","copyScenario","rule","copyRule","filterFeatureChildren","location","language","keyword","name","description","tags","copyTags","tag","id","copyChildren","scenariosKeptById","Map","filter","ruleKeptById","push","scenarioCopy","get","ruleCopy","childrenCopy","backgroundCopy","walkBackground","walkScenario","walkRule","walkRuleChildren","scenariosKept","length","filterRuleChildren","childrenKept","scenariosKeptIds","includes","steps","walkAllSteps","step","copyStep","examples","walkStep","keywordType","text","dataTable","docString","default"],"sources":["../../src/GherkinDocumentWalker.ts"],"sourcesContent":["// This file is DEPRECATED - use ./walkGherkinDocument instead\nimport * as messages from '@cucumber/messages'\n\nexport interface IFilters {\n  acceptScenario?: (scenario: messages.Scenario) => boolean\n  acceptStep?: (step: messages.Step) => boolean\n  acceptBackground?: (background: messages.Background) => boolean\n  acceptRule?: (rule: messages.Rule) => boolean\n  acceptFeature?: (feature: messages.Feature) => boolean\n}\n\nexport interface IHandlers {\n  handleStep?: (step: messages.Step) => void\n  handleScenario?: (scenario: messages.Scenario) => void\n  handleBackground?: (background: messages.Background) => void\n  handleRule?: (rule: messages.Rule) => void\n  handleFeature?: (feature: messages.Feature) => void\n}\n\nconst defaultFilters: IFilters = {\n  acceptScenario: () => true,\n  acceptStep: () => true,\n  acceptBackground: () => true,\n  acceptRule: () => true,\n  acceptFeature: () => true,\n}\n\nexport const rejectAllFilters: IFilters = {\n  acceptScenario: () => false,\n  acceptStep: () => false,\n  acceptBackground: () => false,\n  acceptRule: () => false,\n  acceptFeature: () => false,\n}\n\nconst defaultHandlers: IHandlers = {\n  handleStep: () => null,\n  handleScenario: () => null,\n  handleBackground: () => null,\n  handleRule: () => null,\n  handleFeature: () => null,\n}\n\nexport default class GherkinDocumentWalker {\n  private readonly filters: IFilters\n  private readonly handlers: IHandlers\n\n  constructor(filters?: IFilters, handlers?: IHandlers) {\n    this.filters = { ...defaultFilters, ...filters }\n    this.handlers = { ...defaultHandlers, ...handlers }\n  }\n\n  public walkGherkinDocument(\n    gherkinDocument: messages.GherkinDocument\n  ): messages.GherkinDocument | null {\n    if (!gherkinDocument.feature) {\n      return null\n    }\n\n    const feature = this.walkFeature(gherkinDocument.feature)\n\n    if (!feature) {\n      return null\n    }\n\n    return {\n      feature,\n      comments: gherkinDocument.comments,\n      uri: gherkinDocument.uri,\n    }\n  }\n\n  protected walkFeature(feature: messages.Feature): messages.Feature {\n    const keptChildren = this.walkFeatureChildren(feature.children)\n\n    this.handlers.handleFeature(feature)\n\n    const backgroundKept = keptChildren.find((child) => child.background)\n\n    if (this.filters.acceptFeature(feature) || backgroundKept) {\n      return this.copyFeature(\n        feature,\n        feature.children.map((child) => {\n          if (child.background) {\n            return {\n              background: this.copyBackground(child.background),\n            }\n          }\n          if (child.scenario) {\n            return {\n              scenario: this.copyScenario(child.scenario),\n            }\n          }\n          if (child.rule) {\n            return {\n              rule: this.copyRule(child.rule, child.rule.children),\n            }\n          }\n        })\n      )\n    }\n\n    if (keptChildren.find((child) => child !== null)) {\n      return this.copyFeature(feature, keptChildren)\n    }\n  }\n\n  private copyFeature(\n    feature: messages.Feature,\n    children: messages.FeatureChild[]\n  ): messages.Feature {\n    return {\n      children: this.filterFeatureChildren(feature, children),\n      location: feature.location,\n      language: feature.language,\n      keyword: feature.keyword,\n      name: feature.name,\n      description: feature.description,\n      tags: this.copyTags(feature.tags),\n    }\n  }\n\n  private copyTags(tags: readonly messages.Tag[]): messages.Tag[] {\n    return tags.map((tag) => ({\n      name: tag.name,\n      id: tag.id,\n      location: tag.location,\n    }))\n  }\n\n  private filterFeatureChildren(\n    feature: messages.Feature,\n    children: messages.FeatureChild[]\n  ): messages.FeatureChild[] {\n    const copyChildren: messages.FeatureChild[] = []\n\n    const scenariosKeptById = new Map(\n      children.filter((child) => child.scenario).map((child) => [child.scenario.id, child])\n    )\n\n    const ruleKeptById = new Map(\n      children.filter((child) => child.rule).map((child) => [child.rule.id, child])\n    )\n\n    for (const child of feature.children) {\n      if (child.background) {\n        copyChildren.push({\n          background: this.copyBackground(child.background),\n        })\n      }\n\n      if (child.scenario) {\n        const scenarioCopy = scenariosKeptById.get(child.scenario.id)\n        if (scenarioCopy) {\n          copyChildren.push(scenarioCopy)\n        }\n      }\n\n      if (child.rule) {\n        const ruleCopy = ruleKeptById.get(child.rule.id)\n        if (ruleCopy) {\n          copyChildren.push(ruleCopy)\n        }\n      }\n    }\n    return copyChildren\n  }\n\n  private walkFeatureChildren(children: readonly messages.FeatureChild[]): messages.FeatureChild[] {\n    const childrenCopy: messages.FeatureChild[] = []\n\n    for (const child of children) {\n      let backgroundCopy: messages.Background = null\n      let scenarioCopy: messages.Scenario = null\n      let ruleCopy: messages.Rule = null\n\n      if (child.background) {\n        backgroundCopy = this.walkBackground(child.background)\n      }\n      if (child.scenario) {\n        scenarioCopy = this.walkScenario(child.scenario)\n      }\n      if (child.rule) {\n        ruleCopy = this.walkRule(child.rule)\n      }\n\n      if (backgroundCopy || scenarioCopy || ruleCopy) {\n        childrenCopy.push({\n          background: backgroundCopy,\n          scenario: scenarioCopy,\n          rule: ruleCopy,\n        })\n      }\n    }\n\n    return childrenCopy\n  }\n\n  protected walkRule(rule: messages.Rule): messages.Rule {\n    const children = this.walkRuleChildren(rule.children)\n\n    this.handlers.handleRule(rule)\n\n    const backgroundKept = children.find((child) => child !== null && child.background !== null)\n    const scenariosKept = children.filter((child) => child !== null && child.scenario !== null)\n\n    if (this.filters.acceptRule(rule) || backgroundKept) {\n      return this.copyRule(rule, rule.children)\n    }\n    if (scenariosKept.length > 0) {\n      return this.copyRule(rule, scenariosKept)\n    }\n  }\n\n  private copyRule(rule: messages.Rule, children: readonly messages.RuleChild[]): messages.Rule {\n    return {\n      id: rule.id,\n      name: rule.name,\n      description: rule.description,\n      location: rule.location,\n      keyword: rule.keyword,\n      children: this.filterRuleChildren(rule.children, children),\n      tags: this.copyTags(rule.tags),\n    }\n  }\n\n  private filterRuleChildren(\n    children: readonly messages.RuleChild[],\n    childrenKept: readonly messages.RuleChild[]\n  ): messages.RuleChild[] {\n    const childrenCopy: messages.RuleChild[] = []\n    const scenariosKeptIds = childrenKept\n      .filter((child) => child.scenario)\n      .map((child) => child.scenario.id)\n\n    for (const child of children) {\n      if (child.background) {\n        childrenCopy.push({\n          background: this.copyBackground(child.background),\n        })\n      }\n      if (child.scenario && scenariosKeptIds.includes(child.scenario.id)) {\n        childrenCopy.push({\n          scenario: this.copyScenario(child.scenario),\n        })\n      }\n    }\n\n    return childrenCopy\n  }\n\n  private walkRuleChildren(children: readonly messages.RuleChild[]): messages.RuleChild[] {\n    const childrenCopy: messages.RuleChild[] = []\n\n    for (const child of children) {\n      if (child.background) {\n        childrenCopy.push({\n          background: this.walkBackground(child.background),\n        })\n      }\n      if (child.scenario) {\n        childrenCopy.push({\n          scenario: this.walkScenario(child.scenario),\n        })\n      }\n    }\n    return childrenCopy\n  }\n\n  protected walkBackground(background: messages.Background): messages.Background {\n    const steps = this.walkAllSteps(background.steps)\n    this.handlers.handleBackground(background)\n\n    if (this.filters.acceptBackground(background) || steps.find((step) => step !== null)) {\n      return this.copyBackground(background)\n    }\n  }\n\n  private copyBackground(background: messages.Background): messages.Background {\n    return {\n      id: background.id,\n      name: background.name,\n      location: background.location,\n      keyword: background.keyword,\n      steps: background.steps.map((step) => this.copyStep(step)),\n      description: background.description,\n    }\n  }\n\n  protected walkScenario(scenario: messages.Scenario): messages.Scenario {\n    const steps = this.walkAllSteps(scenario.steps)\n    this.handlers.handleScenario(scenario)\n\n    if (this.filters.acceptScenario(scenario) || steps.find((step) => step !== null)) {\n      return this.copyScenario(scenario)\n    }\n  }\n\n  private copyScenario(scenario: messages.Scenario): messages.Scenario {\n    return {\n      id: scenario.id,\n      name: scenario.name,\n      description: scenario.description,\n      location: scenario.location,\n      keyword: scenario.keyword,\n      examples: scenario.examples,\n      steps: scenario.steps.map((step) => this.copyStep(step)),\n      tags: this.copyTags(scenario.tags),\n    }\n  }\n\n  protected walkAllSteps(steps: readonly messages.Step[]): messages.Step[] {\n    return steps.map((step) => this.walkStep(step))\n  }\n\n  protected walkStep(step: messages.Step): messages.Step {\n    this.handlers.handleStep(step)\n    if (!this.filters.acceptStep(step)) {\n      return null\n    }\n    return this.copyStep(step)\n  }\n\n  private copyStep(step: messages.Step): messages.Step {\n    return {\n      id: step.id,\n      keyword: step.keyword,\n      keywordType: step.keywordType,\n      location: step.location,\n      text: step.text,\n      dataTable: step.dataTable,\n      docString: step.docString,\n    }\n  }\n}\n"],"mappings":"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"}