26100cb80c41399074bbd4637f0e20f0
"use strict";

/**
 * Helpers.
 */

var s = 1000;
var m = s * 60;
var h = m * 60;
var d = h * 24;
var w = d * 7;
var y = d * 365.25;

/**
 * Parse or format the given `val`.
 *
 * Options:
 *
 *  - `long` verbose formatting [false]
 *
 * @param {String|Number} val
 * @param {Object} [options]
 * @throws {Error} throw an error if val is not a non-empty string or a number
 * @return {String|Number}
 * @api public
 */

module.exports = function (val, options) {
  options = options || {};
  var type = typeof val;
  if (type === 'string' && val.length > 0) {
    return parse(val);
  } else if (type === 'number' && isFinite(val)) {
    return options.long ? fmtLong(val) : fmtShort(val);
  }
  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val));
};

/**
 * Parse the given `str` and return milliseconds.
 *
 * @param {String} str
 * @return {Number}
 * @api private
 */

function parse(str) {
  str = String(str);
  if (str.length > 100) {
    return;
  }
  var match = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(str);
  if (!match) {
    return;
  }
  var n = parseFloat(match[1]);
  var type = (match[2] || 'ms').toLowerCase();
  switch (type) {
    case 'years':
    case 'year':
    case 'yrs':
    case 'yr':
    case 'y':
      return n * y;
    case 'weeks':
    case 'week':
    case 'w':
      return n * w;
    case 'days':
    case 'day':
    case 'd':
      return n * d;
    case 'hours':
    case 'hour':
    case 'hrs':
    case 'hr':
    case 'h':
      return n * h;
    case 'minutes':
    case 'minute':
    case 'mins':
    case 'min':
    case 'm':
      return n * m;
    case 'seconds':
    case 'second':
    case 'secs':
    case 'sec':
    case 's':
      return n * s;
    case 'milliseconds':
    case 'millisecond':
    case 'msecs':
    case 'msec':
    case 'ms':
      return n;
    default:
      return undefined;
  }
}

/**
 * Short format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtShort(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return Math.round(ms / d) + 'd';
  }
  if (msAbs >= h) {
    return Math.round(ms / h) + 'h';
  }
  if (msAbs >= m) {
    return Math.round(ms / m) + 'm';
  }
  if (msAbs >= s) {
    return Math.round(ms / s) + 's';
  }
  return ms + 'ms';
}

/**
 * Long format for `ms`.
 *
 * @param {Number} ms
 * @return {String}
 * @api private
 */

function fmtLong(ms) {
  var msAbs = Math.abs(ms);
  if (msAbs >= d) {
    return plural(ms, msAbs, d, 'day');
  }
  if (msAbs >= h) {
    return plural(ms, msAbs, h, 'hour');
  }
  if (msAbs >= m) {
    return plural(ms, msAbs, m, 'minute');
  }
  if (msAbs >= s) {
    return plural(ms, msAbs, s, 'second');
  }
  return ms + ' ms';
}

/**
 * Pluralization helper.
 */

function plural(ms, msAbs, n, name) {
  var isPlural = msAbs >= n * 1.5;
  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzIiwibSIsImgiLCJkIiwidyIsInkiLCJtb2R1bGUiLCJleHBvcnRzIiwidmFsIiwib3B0aW9ucyIsInR5cGUiLCJsZW5ndGgiLCJwYXJzZSIsImlzRmluaXRlIiwibG9uZyIsImZtdExvbmciLCJmbXRTaG9ydCIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsInN0ciIsIlN0cmluZyIsIm1hdGNoIiwiZXhlYyIsIm4iLCJwYXJzZUZsb2F0IiwidG9Mb3dlckNhc2UiLCJ1bmRlZmluZWQiLCJtcyIsIm1zQWJzIiwiTWF0aCIsImFicyIsInJvdW5kIiwicGx1cmFsIiwibmFtZSIsImlzUGx1cmFsIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIZWxwZXJzLlxuICovXG5cbnZhciBzID0gMTAwMDtcbnZhciBtID0gcyAqIDYwO1xudmFyIGggPSBtICogNjA7XG52YXIgZCA9IGggKiAyNDtcbnZhciB3ID0gZCAqIDc7XG52YXIgeSA9IGQgKiAzNjUuMjU7XG5cbi8qKlxuICogUGFyc2Ugb3IgZm9ybWF0IHRoZSBnaXZlbiBgdmFsYC5cbiAqXG4gKiBPcHRpb25zOlxuICpcbiAqICAtIGBsb25nYCB2ZXJib3NlIGZvcm1hdHRpbmcgW2ZhbHNlXVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfE51bWJlcn0gdmFsXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKiBAdGhyb3dzIHtFcnJvcn0gdGhyb3cgYW4gZXJyb3IgaWYgdmFsIGlzIG5vdCBhIG5vbi1lbXB0eSBzdHJpbmcgb3IgYSBudW1iZXJcbiAqIEByZXR1cm4ge1N0cmluZ3xOdW1iZXJ9XG4gKiBAYXBpIHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWw7XG4gIGlmICh0eXBlID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwYXJzZSh2YWwpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInICYmIGlzRmluaXRlKHZhbCkpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5sb25nID8gZm10TG9uZyh2YWwpIDogZm10U2hvcnQodmFsKTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgJ3ZhbCBpcyBub3QgYSBub24tZW1wdHkgc3RyaW5nIG9yIGEgdmFsaWQgbnVtYmVyLiB2YWw9JyArXG4gICAgICBKU09OLnN0cmluZ2lmeSh2YWwpXG4gICk7XG59O1xuXG4vKipcbiAqIFBhcnNlIHRoZSBnaXZlbiBgc3RyYCBhbmQgcmV0dXJuIG1pbGxpc2Vjb25kcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiBAYXBpIHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBwYXJzZShzdHIpIHtcbiAgc3RyID0gU3RyaW5nKHN0cik7XG4gIGlmIChzdHIubGVuZ3RoID4gMTAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBtYXRjaCA9IC9eKC0/KD86XFxkKyk/XFwuP1xcZCspICoobWlsbGlzZWNvbmRzP3xtc2Vjcz98bXN8c2Vjb25kcz98c2Vjcz98c3xtaW51dGVzP3xtaW5zP3xtfGhvdXJzP3xocnM/fGh8ZGF5cz98ZHx3ZWVrcz98d3x5ZWFycz98eXJzP3x5KT8kL2kuZXhlYyhcbiAgICBzdHJcbiAgKTtcbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbiA9IHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICB2YXIgdHlwZSA9IChtYXRjaFsyXSB8fCAnbXMnKS50b0xvd2VyQ2FzZSgpO1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICd5ZWFycyc6XG4gICAgY2FzZSAneWVhcic6XG4gICAgY2FzZSAneXJzJzpcbiAgICBjYXNlICd5cic6XG4gICAgY2FzZSAneSc6XG4gICAgICByZXR1cm4gbiAqIHk7XG4gICAgY2FzZSAnd2Vla3MnOlxuICAgIGNhc2UgJ3dlZWsnOlxuICAgIGNhc2UgJ3cnOlxuICAgICAgcmV0dXJuIG4gKiB3O1xuICAgIGNhc2UgJ2RheXMnOlxuICAgIGNhc2UgJ2RheSc6XG4gICAgY2FzZSAnZCc6XG4gICAgICByZXR1cm4gbiAqIGQ7XG4gICAgY2FzZSAnaG91cnMnOlxuICAgIGNhc2UgJ2hvdXInOlxuICAgIGNhc2UgJ2hycyc6XG4gICAgY2FzZSAnaHInOlxuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG4gKiBoO1xuICAgIGNhc2UgJ21pbnV0ZXMnOlxuICAgIGNhc2UgJ21pbnV0ZSc6XG4gICAgY2FzZSAnbWlucyc6XG4gICAgY2FzZSAnbWluJzpcbiAgICBjYXNlICdtJzpcbiAgICAgIHJldHVybiBuICogbTtcbiAgICBjYXNlICdzZWNvbmRzJzpcbiAgICBjYXNlICdzZWNvbmQnOlxuICAgIGNhc2UgJ3NlY3MnOlxuICAgIGNhc2UgJ3NlYyc6XG4gICAgY2FzZSAncyc6XG4gICAgICByZXR1cm4gbiAqIHM7XG4gICAgY2FzZSAnbWlsbGlzZWNvbmRzJzpcbiAgICBjYXNlICdtaWxsaXNlY29uZCc6XG4gICAgY2FzZSAnbXNlY3MnOlxuICAgIGNhc2UgJ21zZWMnOlxuICAgIGNhc2UgJ21zJzpcbiAgICAgIHJldHVybiBuO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogU2hvcnQgZm9ybWF0IGZvciBgbXNgLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBtc1xuICogQHJldHVybiB7U3RyaW5nfVxuICogQGFwaSBwcml2YXRlXG4gKi9cblxuZnVuY3Rpb24gZm10U2hvcnQobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gZCkgKyAnZCc7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChtcyAvIGgpICsgJ2gnO1xuICB9XG4gIGlmIChtc0FicyA+PSBtKSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBtKSArICdtJztcbiAgfVxuICBpZiAobXNBYnMgPj0gcykge1xuICAgIHJldHVybiBNYXRoLnJvdW5kKG1zIC8gcykgKyAncyc7XG4gIH1cbiAgcmV0dXJuIG1zICsgJ21zJztcbn1cblxuLyoqXG4gKiBMb25nIGZvcm1hdCBmb3IgYG1zYC5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbXNcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBhcGkgcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIGZtdExvbmcobXMpIHtcbiAgdmFyIG1zQWJzID0gTWF0aC5hYnMobXMpO1xuICBpZiAobXNBYnMgPj0gZCkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBkLCAnZGF5Jyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IGgpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgaCwgJ2hvdXInKTtcbiAgfVxuICBpZiAobXNBYnMgPj0gbSkge1xuICAgIHJldHVybiBwbHVyYWwobXMsIG1zQWJzLCBtLCAnbWludXRlJyk7XG4gIH1cbiAgaWYgKG1zQWJzID49IHMpIHtcbiAgICByZXR1cm4gcGx1cmFsKG1zLCBtc0FicywgcywgJ3NlY29uZCcpO1xuICB9XG4gIHJldHVybiBtcyArICcgbXMnO1xufVxuXG4vKipcbiAqIFBsdXJhbGl6YXRpb24gaGVscGVyLlxuICovXG5cbmZ1bmN0aW9uIHBsdXJhbChtcywgbXNBYnMsIG4sIG5hbWUpIHtcbiAgdmFyIGlzUGx1cmFsID0gbXNBYnMgPj0gbiAqIDEuNTtcbiAgcmV0dXJuIE1hdGgucm91bmQobXMgLyBuKSArICcgJyArIG5hbWUgKyAoaXNQbHVyYWwgPyAncycgOiAnJyk7XG59XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBOztBQUVBLElBQUlBLENBQUMsR0FBRyxJQUFJO0FBQ1os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