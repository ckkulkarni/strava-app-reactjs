{"version":3,"names":["ClassTransformer_1","require","TransformPlainToInstance","classType","params","target","propertyKey","descriptor","classTransformer","ClassTransformer","originalMethod","value","args","result","apply","isPromise","then","data","plainToInstance","exports"],"sources":["../../../src/decorators/transform-plain-to-instance.decorator.ts"],"sourcesContent":["import { ClassTransformer } from '../ClassTransformer';\nimport { ClassTransformOptions, ClassConstructor } from '../interfaces';\n\n/**\n * Return the class instance only with the exposed properties.\n *\n * Can be applied to functions and getters/setters only.\n */\nexport function TransformPlainToInstance(\n  classType: ClassConstructor<any>,\n  params?: ClassTransformOptions\n): MethodDecorator {\n  return function (target: Record<string, any>, propertyKey: string | Symbol, descriptor: PropertyDescriptor): void {\n    const classTransformer: ClassTransformer = new ClassTransformer();\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function (...args: any[]): Record<string, any> {\n      const result: any = originalMethod.apply(this, args);\n      const isPromise =\n        !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';\n      return isPromise\n        ? result.then((data: any) => classTransformer.plainToInstance(classType, data, params))\n        : classTransformer.plainToInstance(classType, result, params);\n    };\n  };\n}\n"],"mappings":";;;;;;AAAA,MAAAA,kBAAA,GAAAC,OAAA;AAGA;;;;;AAKA,SAAgBC,wBAAwBA,CACtCC,SAAgC,EAChCC,MAA8B;EAE9B,OAAO,UAAUC,MAA2B,EAAEC,WAA4B,EAAEC,UAA8B;IACxG,MAAMC,gBAAgB,GAAqB,IAAIR,kBAAA,CAAAS,gBAAgB,EAAE;IACjE,MAAMC,cAAc,GAAGH,UAAU,CAACI,KAAK;IAEvCJ,UAAU,CAACI,KAAK,GAAG,UAAU,GAAGC,IAAW;MACzC,MAAMC,MAAM,GAAQH,cAAc,CAACI,KAAK,CAAC,IAAI,EAAEF,IAAI,CAAC;MACpD,MAAMG,SAAS,GACb,CAAC,CAACF,MAAM,KAAK,OAAOA,MAAM,KAAK,QAAQ,IAAI,OAAOA,MAAM,KAAK,UAAU,CAAC,IAAI,OAAOA,MAAM,CAACG,IAAI,KAAK,UAAU;MAC/G,OAAOD,SAAS,GACZF,MAAM,CAACG,IAAI,CAAEC,IAAS,IAAKT,gBAAgB,CAACU,eAAe,CAACf,SAAS,EAAEc,IAAI,EAAEb,MAAM,CAAC,CAAC,GACrFI,gBAAgB,CAACU,eAAe,CAACf,SAAS,EAAEU,MAAM,EAAET,MAAM,CAAC;IACjE,CAAC;EACH,CAAC;AACH;AAjBAe,OAAA,CAAAjB,wBAAA,GAAAA,wBAAA"}