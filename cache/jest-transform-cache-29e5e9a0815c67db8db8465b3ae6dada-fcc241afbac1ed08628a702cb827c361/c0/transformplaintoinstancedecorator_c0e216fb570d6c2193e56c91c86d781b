8ebe6650426d9cbbe32fd2961a692ddc
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TransformPlainToInstance = void 0;
const ClassTransformer_1 = require("../ClassTransformer");
/**
 * Return the class instance only with the exposed properties.
 *
 * Can be applied to functions and getters/setters only.
 */
function TransformPlainToInstance(classType, params) {
  return function (target, propertyKey, descriptor) {
    const classTransformer = new ClassTransformer_1.ClassTransformer();
    const originalMethod = descriptor.value;
    descriptor.value = function (...args) {
      const result = originalMethod.apply(this, args);
      const isPromise = !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';
      return isPromise ? result.then(data => classTransformer.plainToInstance(classType, data, params)) : classTransformer.plainToInstance(classType, result, params);
    };
  };
}
exports.TransformPlainToInstance = TransformPlainToInstance;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbGFzc1RyYW5zZm9ybWVyXzEiLCJyZXF1aXJlIiwiVHJhbnNmb3JtUGxhaW5Ub0luc3RhbmNlIiwiY2xhc3NUeXBlIiwicGFyYW1zIiwidGFyZ2V0IiwicHJvcGVydHlLZXkiLCJkZXNjcmlwdG9yIiwiY2xhc3NUcmFuc2Zvcm1lciIsIkNsYXNzVHJhbnNmb3JtZXIiLCJvcmlnaW5hbE1ldGhvZCIsInZhbHVlIiwiYXJncyIsInJlc3VsdCIsImFwcGx5IiwiaXNQcm9taXNlIiwidGhlbiIsImRhdGEiLCJwbGFpblRvSW5zdGFuY2UiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2RlY29yYXRvcnMvdHJhbnNmb3JtLXBsYWluLXRvLWluc3RhbmNlLmRlY29yYXRvci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGFzc1RyYW5zZm9ybWVyIH0gZnJvbSAnLi4vQ2xhc3NUcmFuc2Zvcm1lcic7XG5pbXBvcnQgeyBDbGFzc1RyYW5zZm9ybU9wdGlvbnMsIENsYXNzQ29uc3RydWN0b3IgfSBmcm9tICcuLi9pbnRlcmZhY2VzJztcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGNsYXNzIGluc3RhbmNlIG9ubHkgd2l0aCB0aGUgZXhwb3NlZCBwcm9wZXJ0aWVzLlxuICpcbiAqIENhbiBiZSBhcHBsaWVkIHRvIGZ1bmN0aW9ucyBhbmQgZ2V0dGVycy9zZXR0ZXJzIG9ubHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBUcmFuc2Zvcm1QbGFpblRvSW5zdGFuY2UoXG4gIGNsYXNzVHlwZTogQ2xhc3NDb25zdHJ1Y3Rvcjxhbnk+LFxuICBwYXJhbXM/OiBDbGFzc1RyYW5zZm9ybU9wdGlvbnNcbik6IE1ldGhvZERlY29yYXRvciB7XG4gIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LCBwcm9wZXJ0eUtleTogc3RyaW5nIHwgU3ltYm9sLCBkZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IpOiB2b2lkIHtcbiAgICBjb25zdCBjbGFzc1RyYW5zZm9ybWVyOiBDbGFzc1RyYW5zZm9ybWVyID0gbmV3IENsYXNzVHJhbnNmb3JtZXIoKTtcbiAgICBjb25zdCBvcmlnaW5hbE1ldGhvZCA9IGRlc2NyaXB0b3IudmFsdWU7XG5cbiAgICBkZXNjcmlwdG9yLnZhbHVlID0gZnVuY3Rpb24gKC4uLmFyZ3M6IGFueVtdKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICBjb25zdCByZXN1bHQ6IGFueSA9IG9yaWdpbmFsTWV0aG9kLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgY29uc3QgaXNQcm9taXNlID1cbiAgICAgICAgISFyZXN1bHQgJiYgKHR5cGVvZiByZXN1bHQgPT09ICdvYmplY3QnIHx8IHR5cGVvZiByZXN1bHQgPT09ICdmdW5jdGlvbicpICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbiAgICAgIHJldHVybiBpc1Byb21pc2VcbiAgICAgICAgPyByZXN1bHQudGhlbigoZGF0YTogYW55KSA9PiBjbGFzc1RyYW5zZm9ybWVyLnBsYWluVG9JbnN0YW5jZShjbGFzc1R5cGUsIGRhdGEsIHBhcmFtcykpXG4gICAgICAgIDogY2xhc3NUcmFuc2Zvcm1lci5wbGFpblRvSW5zdGFuY2UoY2xhc3NUeXBlLCByZXN1bHQsIHBhcmFtcyk7XG4gICAgfTtcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBQUEsa0JBQUEsR0FBQUMsT0FBQTtBQUdBOzs7OztBQUtBLFNBQWdCQyx3QkFBd0JBLENBQ3RDQyxTQUFnQyxFQUNoQ0MsTUFBOEI7RUFFOUIsT0FBTyxVQUFVQyxNQUEyQixFQUFFQyxXQUE0QixFQUFFQyxVQUE4QjtJQUN4RyxNQUFNQyxnQkFBZ0IsR0FBcUIsSUFBSVIsa0JBQUEsQ0FBQVMsZ0JBQWdCLEVBQUU7SUFDakUsTUFBTUMsY0FBYyxHQUFHSCxVQUFVLENBQUNJLEtBQUs7SUFFdkNKLFVBQVUsQ0FBQ0ksS0FBSyxHQUFHLFVBQVUsR0FBR0MsSUFBVztNQUN6QyxNQUFNQyxNQUFNLEdBQVFILGNBQWMsQ0FBQ0ksS0FBSyxDQUFDLElBQUksRUFBRUYsSUFBSSxDQUFDO01BQ3BELE1BQU1HLFNBQVMsR0FDYixDQUFDLENBQUNGLE1BQU0sS0FBSyxPQUFPQSxNQUFNLEtBQUssUUFBUSxJQUFJLE9BQU9BLE1BQU0sS0FBSyxVQUFVLENBQUMsSUFBSSxPQUFPQSxNQUFNLENBQUNHLElBQUksS0FBSyxVQUFVO01BQy9HLE9BQU9ELFNBQVMsR0FDWkYsTUFBTSxDQUFDRyxJQUFJLENBQUVDLElBQVMsSUFBS1QsZ0JBQWdCLENBQUNVLGVBQWUsQ0FBQ2YsU0FBUyxFQUFFYyxJQUFJLEVBQUViLE1BQU0sQ0FBQyxDQUFDLEdBQ3JGSSxnQkFBZ0IsQ0FBQ1UsZUFBZSxDQUFDZixTQUFTLEVBQUVVLE1BQU0sRUFBRVQsTUFBTSxDQUFDO0lBQ2pFLENBQUM7RUFDSCxDQUFDO0FBQ0g7QUFqQkFlLE9BQUEsQ0FBQWpCLHdCQUFBLEdBQUFBLHdCQUFBIn0=