9abbb50a6e89436e3c1dbb192ff8ee5e
'use strict';

var createNode = require('../../doc/createNode.js');
var Node = require('../../nodes/Node.js');
var YAMLSeq = require('../../nodes/YAMLSeq.js');
function createSeq(schema, obj, ctx) {
  const {
    replacer
  } = ctx;
  const seq = new YAMLSeq.YAMLSeq(schema);
  if (obj && Symbol.iterator in Object(obj)) {
    let i = 0;
    for (let it of obj) {
      if (typeof replacer === 'function') {
        const key = obj instanceof Set ? it : String(i++);
        it = replacer.call(obj, key, it);
      }
      seq.items.push(createNode.createNode(it, undefined, ctx));
    }
  }
  return seq;
}
const seq = {
  collection: 'seq',
  createNode: createSeq,
  default: true,
  nodeClass: YAMLSeq.YAMLSeq,
  tag: 'tag:yaml.org,2002:seq',
  resolve(seq, onError) {
    if (!Node.isSeq(seq)) onError('Expected a sequence for this tag');
    return seq;
  }
};
exports.seq = seq;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVOb2RlIiwicmVxdWlyZSIsIk5vZGUiLCJZQU1MU2VxIiwiY3JlYXRlU2VxIiwic2NoZW1hIiwib2JqIiwiY3R4IiwicmVwbGFjZXIiLCJzZXEiLCJTeW1ib2wiLCJpdGVyYXRvciIsIk9iamVjdCIsImkiLCJpdCIsImtleSIsIlNldCIsIlN0cmluZyIsImNhbGwiLCJpdGVtcyIsInB1c2giLCJ1bmRlZmluZWQiLCJjb2xsZWN0aW9uIiwiZGVmYXVsdCIsIm5vZGVDbGFzcyIsInRhZyIsInJlc29sdmUiLCJvbkVycm9yIiwiaXNTZXEiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsic2VxLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZU5vZGUgPSByZXF1aXJlKCcuLi8uLi9kb2MvY3JlYXRlTm9kZS5qcycpO1xudmFyIE5vZGUgPSByZXF1aXJlKCcuLi8uLi9ub2Rlcy9Ob2RlLmpzJyk7XG52YXIgWUFNTFNlcSA9IHJlcXVpcmUoJy4uLy4uL25vZGVzL1lBTUxTZXEuanMnKTtcblxuZnVuY3Rpb24gY3JlYXRlU2VxKHNjaGVtYSwgb2JqLCBjdHgpIHtcbiAgICBjb25zdCB7IHJlcGxhY2VyIH0gPSBjdHg7XG4gICAgY29uc3Qgc2VxID0gbmV3IFlBTUxTZXEuWUFNTFNlcShzY2hlbWEpO1xuICAgIGlmIChvYmogJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChvYmopKSB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChsZXQgaXQgb2Ygb2JqKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gb2JqIGluc3RhbmNlb2YgU2V0ID8gaXQgOiBTdHJpbmcoaSsrKTtcbiAgICAgICAgICAgICAgICBpdCA9IHJlcGxhY2VyLmNhbGwob2JqLCBrZXksIGl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcS5pdGVtcy5wdXNoKGNyZWF0ZU5vZGUuY3JlYXRlTm9kZShpdCwgdW5kZWZpbmVkLCBjdHgpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2VxO1xufVxuY29uc3Qgc2VxID0ge1xuICAgIGNvbGxlY3Rpb246ICdzZXEnLFxuICAgIGNyZWF0ZU5vZGU6IGNyZWF0ZVNlcSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIG5vZGVDbGFzczogWUFNTFNlcS5ZQU1MU2VxLFxuICAgIHRhZzogJ3RhZzp5YW1sLm9yZywyMDAyOnNlcScsXG4gICAgcmVzb2x2ZShzZXEsIG9uRXJyb3IpIHtcbiAgICAgICAgaWYgKCFOb2RlLmlzU2VxKHNlcSkpXG4gICAgICAgICAgICBvbkVycm9yKCdFeHBlY3RlZCBhIHNlcXVlbmNlIGZvciB0aGlzIHRhZycpO1xuICAgICAgICByZXR1cm4gc2VxO1xuICAgIH1cbn07XG5cbmV4cG9ydHMuc2VxID0gc2VxO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLFVBQVUsR0FBR0MsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0FBQ25ELElBQUlDLElBQUksR0FBR0QsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQ3pDLElBQUlFLE9BQU8sR0FBR0YsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0FBRS9DLFNBQVNHLFNBQVNBLENBQUNDLE1BQU0sRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUU7RUFDakMsTUFBTTtJQUFFQztFQUFTLENBQUMsR0FBR0QsR0FBRztFQUN4QixNQUFNRSxHQUFHLEdBQUcsSUFBSU4sT0FBTyxDQUFDQSxPQUFPLENBQUNFLE1BQU0sQ0FBQztFQUN2QyxJQUFJQyxHQUFHLElBQUlJLE1BQU0sQ0FBQ0MsUUFBUSxJQUFJQyxNQUFNLENBQUNOLEdBQUcsQ0FBQyxFQUFFO0lBQ3ZDLElBQUlPLENBQUMsR0FBRyxDQUFDO0lBQ1QsS0FBSyxJQUFJQyxFQUFFLElBQUlSLEdBQUcsRUFBRTtNQUNoQixJQUFJLE9BQU9FLFFBQVEsS0FBSyxVQUFVLEVBQUU7UUFDaEMsTUFBTU8sR0FBRyxHQUFHVCxHQUFHLFlBQVlVLEdBQUcsR0FBR0YsRUFBRSxHQUFHRyxNQUFNLENBQUNKLENBQUMsRUFBRSxDQUFDO1FBQ2pEQyxFQUFFLEdBQUdOLFFBQVEsQ0FBQ1UsSUFBSSxDQUFDWixHQUFHLEVBQUVTLEdBQUcsRUFBRUQsRUFBRSxDQUFDO01BQ3BDO01BQ0FMLEdBQUcsQ0FBQ1UsS0FBSyxDQUFDQyxJQUFJLENBQUNwQixVQUFVLENBQUNBLFVBQVUsQ0FBQ2MsRUFBRSxFQUFFTyxTQUFTLEVBQUVkLEdBQUcsQ0FBQyxDQUFDO0lBQzdEO0VBQ0o7RUFDQSxPQUFPRSxHQUFHO0FBQ2Q7QUFDQSxNQUFNQSxHQUFHLEdBQUc7RUFDUmEsVUFBVSxFQUFFLEtBQUs7RUFDakJ0QixVQUFVLEVBQUVJLFNBQVM7RUFDckJtQixPQUFPLEVBQUUsSUFBSTtFQUNiQyxTQUFTLEVBQUVyQixPQUFPLENBQUNBLE9BQU87RUFDMUJzQixHQUFHLEVBQUUsdUJBQXVCO0VBQzVCQyxPQUFPQSxDQUFDakIsR0FBRyxFQUFFa0IsT0FBTyxFQUFFO0lBQ2xCLElBQUksQ0FBQ3pCLElBQUksQ0FBQzBCLEtBQUssQ0FBQ25CLEdBQUcsQ0FBQyxFQUNoQmtCLE9BQU8sQ0FBQyxrQ0FBa0MsQ0FBQztJQUMvQyxPQUFPbEIsR0FBRztFQUNkO0FBQ0osQ0FBQztBQUVEb0IsT0FBTyxDQUFDcEIsR0FBRyxHQUFHQSxHQUFHIn0=