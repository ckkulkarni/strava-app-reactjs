{"version":3,"names":["stringifyCollection","require","Collection","Node","Scalar","toJS","YAMLSeq","tagName","constructor","schema","SEQ","items","add","value","push","delete","key","idx","asItemIndex","del","splice","length","get","keepScalar","undefined","it","isScalar","has","set","Error","prev","isScalarValue","toJSON","_","ctx","seq","onCreate","i","item","String","toString","onComment","onChompKeep","JSON","stringify","blockItemPrefix","flowChars","start","end","itemIndent","indent","Number","isInteger","exports"],"sources":["YAMLSeq.js"],"sourcesContent":["'use strict';\n\nvar stringifyCollection = require('../stringify/stringifyCollection.js');\nvar Collection = require('./Collection.js');\nvar Node = require('./Node.js');\nvar Scalar = require('./Scalar.js');\nvar toJS = require('./toJS.js');\n\nclass YAMLSeq extends Collection.Collection {\n    static get tagName() {\n        return 'tag:yaml.org,2002:seq';\n    }\n    constructor(schema) {\n        super(Node.SEQ, schema);\n        this.items = [];\n    }\n    add(value) {\n        this.items.push(value);\n    }\n    /**\n     * Removes a value from the collection.\n     *\n     * `key` must contain a representation of an integer for this to succeed.\n     * It may be wrapped in a `Scalar`.\n     *\n     * @returns `true` if the item was found and removed.\n     */\n    delete(key) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            return false;\n        const del = this.items.splice(idx, 1);\n        return del.length > 0;\n    }\n    get(key, keepScalar) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            return undefined;\n        const it = this.items[idx];\n        return !keepScalar && Node.isScalar(it) ? it.value : it;\n    }\n    /**\n     * Checks if the collection includes a value with the key `key`.\n     *\n     * `key` must contain a representation of an integer for this to succeed.\n     * It may be wrapped in a `Scalar`.\n     */\n    has(key) {\n        const idx = asItemIndex(key);\n        return typeof idx === 'number' && idx < this.items.length;\n    }\n    /**\n     * Sets a value in this collection. For `!!set`, `value` needs to be a\n     * boolean to add/remove the item from the set.\n     *\n     * If `key` does not contain a representation of an integer, this will throw.\n     * It may be wrapped in a `Scalar`.\n     */\n    set(key, value) {\n        const idx = asItemIndex(key);\n        if (typeof idx !== 'number')\n            throw new Error(`Expected a valid index, not ${key}.`);\n        const prev = this.items[idx];\n        if (Node.isScalar(prev) && Scalar.isScalarValue(value))\n            prev.value = value;\n        else\n            this.items[idx] = value;\n    }\n    toJSON(_, ctx) {\n        const seq = [];\n        if (ctx?.onCreate)\n            ctx.onCreate(seq);\n        let i = 0;\n        for (const item of this.items)\n            seq.push(toJS.toJS(item, String(i++), ctx));\n        return seq;\n    }\n    toString(ctx, onComment, onChompKeep) {\n        if (!ctx)\n            return JSON.stringify(this);\n        return stringifyCollection.stringifyCollection(this, ctx, {\n            blockItemPrefix: '- ',\n            flowChars: { start: '[', end: ']' },\n            itemIndent: (ctx.indent || '') + '  ',\n            onChompKeep,\n            onComment\n        });\n    }\n}\nfunction asItemIndex(key) {\n    let idx = Node.isScalar(key) ? key.value : key;\n    if (idx && typeof idx === 'string')\n        idx = Number(idx);\n    return typeof idx === 'number' && Number.isInteger(idx) && idx >= 0\n        ? idx\n        : null;\n}\n\nexports.YAMLSeq = YAMLSeq;\n"],"mappings":"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"}