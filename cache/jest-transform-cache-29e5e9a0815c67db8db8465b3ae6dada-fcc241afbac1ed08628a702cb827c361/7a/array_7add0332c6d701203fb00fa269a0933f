a80f17cff758aef2a06b79b9990fe581
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.create = create;
exports.default = void 0;
var _isAbsent = _interopRequireDefault(require("./util/isAbsent"));
var _isSchema = _interopRequireDefault(require("./util/isSchema"));
var _printValue = _interopRequireDefault(require("./util/printValue"));
var _locale = require("./locale");
var _runTests = _interopRequireDefault(require("./util/runTests"));
var _ValidationError = _interopRequireDefault(require("./ValidationError"));
var _schema = _interopRequireDefault(require("./schema"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function _extends() {
  _extends = Object.assign || function (target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function create(type) {
  return new ArraySchema(type);
}
class ArraySchema extends _schema.default {
  constructor(type) {
    super({
      type: 'array'
    }); // `undefined` specifically means uninitialized, as opposed to
    // "no subtype"

    this.innerType = void 0;
    this.innerType = type;
    this.withMutation(() => {
      this.transform(function (values) {
        if (typeof values === 'string') try {
          values = JSON.parse(values);
        } catch (err) {
          values = null;
        }
        return this.isType(values) ? values : null;
      });
    });
  }
  _typeCheck(v) {
    return Array.isArray(v);
  }
  get _subType() {
    return this.innerType;
  }
  _cast(_value, _opts) {
    const value = super._cast(_value, _opts); //should ignore nulls here

    if (!this._typeCheck(value) || !this.innerType) return value;
    let isChanged = false;
    const castArray = value.map((v, idx) => {
      const castElement = this.innerType.cast(v, _extends({}, _opts, {
        path: `${_opts.path || ''}[${idx}]`
      }));
      if (castElement !== v) {
        isChanged = true;
      }
      return castElement;
    });
    return isChanged ? castArray : value;
  }
  _validate(_value, options = {}, callback) {
    var _options$abortEarly, _options$recursive;
    let errors = [];
    let sync = options.sync;
    let path = options.path;
    let innerType = this.innerType;
    let endEarly = (_options$abortEarly = options.abortEarly) != null ? _options$abortEarly : this.spec.abortEarly;
    let recursive = (_options$recursive = options.recursive) != null ? _options$recursive : this.spec.recursive;
    let originalValue = options.originalValue != null ? options.originalValue : _value;
    super._validate(_value, options, (err, value) => {
      if (err) {
        if (!_ValidationError.default.isError(err) || endEarly) {
          return void callback(err, value);
        }
        errors.push(err);
      }
      if (!recursive || !innerType || !this._typeCheck(value)) {
        callback(errors[0] || null, value);
        return;
      }
      originalValue = originalValue || value; // #950 Ensure that sparse array empty slots are validated

      let tests = new Array(value.length);
      for (let idx = 0; idx < value.length; idx++) {
        let item = value[idx];
        let path = `${options.path || ''}[${idx}]`; // object._validate note for isStrict explanation

        let innerOptions = _extends({}, options, {
          path,
          strict: true,
          parent: value,
          index: idx,
          originalValue: originalValue[idx]
        });
        tests[idx] = (_, cb) => innerType.validate(item, innerOptions, cb);
      }
      (0, _runTests.default)({
        sync,
        path,
        value,
        errors,
        endEarly,
        tests
      }, callback);
    });
  }
  clone(spec) {
    const next = super.clone(spec);
    next.innerType = this.innerType;
    return next;
  }
  concat(schema) {
    let next = super.concat(schema);
    next.innerType = this.innerType;
    if (schema.innerType) next.innerType = next.innerType ?
    // @ts-expect-error Lazy doesn't have concat()
    next.innerType.concat(schema.innerType) : schema.innerType;
    return next;
  }
  of(schema) {
    // FIXME: this should return a new instance of array without the default to be
    let next = this.clone();
    if (!(0, _isSchema.default)(schema)) throw new TypeError('`array.of()` sub-schema must be a valid yup schema not: ' + (0, _printValue.default)(schema)); // FIXME(ts):

    next.innerType = schema;
    return next;
  }
  length(length, message = _locale.array.length) {
    return this.test({
      message,
      name: 'length',
      exclusive: true,
      params: {
        length
      },
      test(value) {
        return (0, _isAbsent.default)(value) || value.length === this.resolve(length);
      }
    });
  }
  min(min, message) {
    message = message || _locale.array.min;
    return this.test({
      message,
      name: 'min',
      exclusive: true,
      params: {
        min
      },
      // FIXME(ts): Array<typeof T>
      test(value) {
        return (0, _isAbsent.default)(value) || value.length >= this.resolve(min);
      }
    });
  }
  max(max, message) {
    message = message || _locale.array.max;
    return this.test({
      message,
      name: 'max',
      exclusive: true,
      params: {
        max
      },
      test(value) {
        return (0, _isAbsent.default)(value) || value.length <= this.resolve(max);
      }
    });
  }
  ensure() {
    return this.default(() => []).transform((val, original) => {
      // We don't want to return `null` for nullable schema
      if (this._typeCheck(val)) return val;
      return original == null ? [] : [].concat(original);
    });
  }
  compact(rejector) {
    let reject = !rejector ? v => !!v : (v, i, a) => !rejector(v, i, a);
    return this.transform(values => values != null ? values.filter(reject) : values);
  }
  describe() {
    let base = super.describe();
    if (this.innerType) base.innerType = this.innerType.describe();
    return base;
  }
  nullable(isNullable = true) {
    return super.nullable(isNullable);
  }
  defined() {
    return super.defined();
  }
  required(msg) {
    return super.required(msg);
  }
}
exports.default = ArraySchema;
create.prototype = ArraySchema.prototype; //
// Interfaces
//
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImNyZWF0ZSIsImRlZmF1bHQiLCJfaXNBYnNlbnQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9pc1NjaGVtYSIsIl9wcmludFZhbHVlIiwiX2xvY2FsZSIsIl9ydW5UZXN0cyIsIl9WYWxpZGF0aW9uRXJyb3IiLCJfc2NoZW1hIiwib2JqIiwiX19lc01vZHVsZSIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwidHlwZSIsIkFycmF5U2NoZW1hIiwiY29uc3RydWN0b3IiLCJpbm5lclR5cGUiLCJ3aXRoTXV0YXRpb24iLCJ0cmFuc2Zvcm0iLCJ2YWx1ZXMiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJpc1R5cGUiLCJfdHlwZUNoZWNrIiwidiIsIkFycmF5IiwiaXNBcnJheSIsIl9zdWJUeXBlIiwiX2Nhc3QiLCJfdmFsdWUiLCJfb3B0cyIsImlzQ2hhbmdlZCIsImNhc3RBcnJheSIsIm1hcCIsImlkeCIsImNhc3RFbGVtZW50IiwiY2FzdCIsInBhdGgiLCJfdmFsaWRhdGUiLCJvcHRpb25zIiwiY2FsbGJhY2siLCJfb3B0aW9ucyRhYm9ydEVhcmx5IiwiX29wdGlvbnMkcmVjdXJzaXZlIiwiZXJyb3JzIiwic3luYyIsImVuZEVhcmx5IiwiYWJvcnRFYXJseSIsInNwZWMiLCJyZWN1cnNpdmUiLCJvcmlnaW5hbFZhbHVlIiwiaXNFcnJvciIsInB1c2giLCJ0ZXN0cyIsIml0ZW0iLCJpbm5lck9wdGlvbnMiLCJzdHJpY3QiLCJwYXJlbnQiLCJpbmRleCIsIl8iLCJjYiIsInZhbGlkYXRlIiwiY2xvbmUiLCJuZXh0IiwiY29uY2F0Iiwic2NoZW1hIiwib2YiLCJUeXBlRXJyb3IiLCJtZXNzYWdlIiwiYXJyYXkiLCJ0ZXN0IiwibmFtZSIsImV4Y2x1c2l2ZSIsInBhcmFtcyIsInJlc29sdmUiLCJtaW4iLCJtYXgiLCJlbnN1cmUiLCJ2YWwiLCJvcmlnaW5hbCIsImNvbXBhY3QiLCJyZWplY3RvciIsInJlamVjdCIsImEiLCJmaWx0ZXIiLCJkZXNjcmliZSIsImJhc2UiLCJudWxsYWJsZSIsImlzTnVsbGFibGUiLCJkZWZpbmVkIiwicmVxdWlyZWQiLCJtc2ciXSwic291cmNlcyI6WyJhcnJheS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY3JlYXRlID0gY3JlYXRlO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuXG52YXIgX2lzQWJzZW50ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi91dGlsL2lzQWJzZW50XCIpKTtcblxudmFyIF9pc1NjaGVtYSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXRpbC9pc1NjaGVtYVwiKSk7XG5cbnZhciBfcHJpbnRWYWx1ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vdXRpbC9wcmludFZhbHVlXCIpKTtcblxudmFyIF9sb2NhbGUgPSByZXF1aXJlKFwiLi9sb2NhbGVcIik7XG5cbnZhciBfcnVuVGVzdHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3V0aWwvcnVuVGVzdHNcIikpO1xuXG52YXIgX1ZhbGlkYXRpb25FcnJvciA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vVmFsaWRhdGlvbkVycm9yXCIpKTtcblxudmFyIF9zY2hlbWEgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3NjaGVtYVwiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIGNyZWF0ZSh0eXBlKSB7XG4gIHJldHVybiBuZXcgQXJyYXlTY2hlbWEodHlwZSk7XG59XG5cbmNsYXNzIEFycmF5U2NoZW1hIGV4dGVuZHMgX3NjaGVtYS5kZWZhdWx0IHtcbiAgY29uc3RydWN0b3IodHlwZSkge1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6ICdhcnJheSdcbiAgICB9KTsgLy8gYHVuZGVmaW5lZGAgc3BlY2lmaWNhbGx5IG1lYW5zIHVuaW5pdGlhbGl6ZWQsIGFzIG9wcG9zZWQgdG9cbiAgICAvLyBcIm5vIHN1YnR5cGVcIlxuXG4gICAgdGhpcy5pbm5lclR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5pbm5lclR5cGUgPSB0eXBlO1xuICAgIHRoaXMud2l0aE11dGF0aW9uKCgpID0+IHtcbiAgICAgIHRoaXMudHJhbnNmb3JtKGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXMgPT09ICdzdHJpbmcnKSB0cnkge1xuICAgICAgICAgIHZhbHVlcyA9IEpTT04ucGFyc2UodmFsdWVzKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdmFsdWVzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pc1R5cGUodmFsdWVzKSA/IHZhbHVlcyA6IG51bGw7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90eXBlQ2hlY2sodikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHYpO1xuICB9XG5cbiAgZ2V0IF9zdWJUeXBlKCkge1xuICAgIHJldHVybiB0aGlzLmlubmVyVHlwZTtcbiAgfVxuXG4gIF9jYXN0KF92YWx1ZSwgX29wdHMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHN1cGVyLl9jYXN0KF92YWx1ZSwgX29wdHMpOyAvL3Nob3VsZCBpZ25vcmUgbnVsbHMgaGVyZVxuXG5cbiAgICBpZiAoIXRoaXMuX3R5cGVDaGVjayh2YWx1ZSkgfHwgIXRoaXMuaW5uZXJUeXBlKSByZXR1cm4gdmFsdWU7XG4gICAgbGV0IGlzQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGNvbnN0IGNhc3RBcnJheSA9IHZhbHVlLm1hcCgodiwgaWR4KSA9PiB7XG4gICAgICBjb25zdCBjYXN0RWxlbWVudCA9IHRoaXMuaW5uZXJUeXBlLmNhc3QodiwgX2V4dGVuZHMoe30sIF9vcHRzLCB7XG4gICAgICAgIHBhdGg6IGAke19vcHRzLnBhdGggfHwgJyd9WyR7aWR4fV1gXG4gICAgICB9KSk7XG5cbiAgICAgIGlmIChjYXN0RWxlbWVudCAhPT0gdikge1xuICAgICAgICBpc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2FzdEVsZW1lbnQ7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzQ2hhbmdlZCA/IGNhc3RBcnJheSA6IHZhbHVlO1xuICB9XG5cbiAgX3ZhbGlkYXRlKF92YWx1ZSwgb3B0aW9ucyA9IHt9LCBjYWxsYmFjaykge1xuICAgIHZhciBfb3B0aW9ucyRhYm9ydEVhcmx5LCBfb3B0aW9ucyRyZWN1cnNpdmU7XG5cbiAgICBsZXQgZXJyb3JzID0gW107XG4gICAgbGV0IHN5bmMgPSBvcHRpb25zLnN5bmM7XG4gICAgbGV0IHBhdGggPSBvcHRpb25zLnBhdGg7XG4gICAgbGV0IGlubmVyVHlwZSA9IHRoaXMuaW5uZXJUeXBlO1xuICAgIGxldCBlbmRFYXJseSA9IChfb3B0aW9ucyRhYm9ydEVhcmx5ID0gb3B0aW9ucy5hYm9ydEVhcmx5KSAhPSBudWxsID8gX29wdGlvbnMkYWJvcnRFYXJseSA6IHRoaXMuc3BlYy5hYm9ydEVhcmx5O1xuICAgIGxldCByZWN1cnNpdmUgPSAoX29wdGlvbnMkcmVjdXJzaXZlID0gb3B0aW9ucy5yZWN1cnNpdmUpICE9IG51bGwgPyBfb3B0aW9ucyRyZWN1cnNpdmUgOiB0aGlzLnNwZWMucmVjdXJzaXZlO1xuICAgIGxldCBvcmlnaW5hbFZhbHVlID0gb3B0aW9ucy5vcmlnaW5hbFZhbHVlICE9IG51bGwgPyBvcHRpb25zLm9yaWdpbmFsVmFsdWUgOiBfdmFsdWU7XG5cbiAgICBzdXBlci5fdmFsaWRhdGUoX3ZhbHVlLCBvcHRpb25zLCAoZXJyLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBpZiAoIV9WYWxpZGF0aW9uRXJyb3IuZGVmYXVsdC5pc0Vycm9yKGVycikgfHwgZW5kRWFybHkpIHtcbiAgICAgICAgICByZXR1cm4gdm9pZCBjYWxsYmFjayhlcnIsIHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVycm9ycy5wdXNoKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmICghcmVjdXJzaXZlIHx8ICFpbm5lclR5cGUgfHwgIXRoaXMuX3R5cGVDaGVjayh2YWx1ZSkpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3JzWzBdIHx8IG51bGwsIHZhbHVlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5hbFZhbHVlID0gb3JpZ2luYWxWYWx1ZSB8fCB2YWx1ZTsgLy8gIzk1MCBFbnN1cmUgdGhhdCBzcGFyc2UgYXJyYXkgZW1wdHkgc2xvdHMgYXJlIHZhbGlkYXRlZFxuXG4gICAgICBsZXQgdGVzdHMgPSBuZXcgQXJyYXkodmFsdWUubGVuZ3RoKTtcblxuICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgdmFsdWUubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICBsZXQgaXRlbSA9IHZhbHVlW2lkeF07XG4gICAgICAgIGxldCBwYXRoID0gYCR7b3B0aW9ucy5wYXRoIHx8ICcnfVske2lkeH1dYDsgLy8gb2JqZWN0Ll92YWxpZGF0ZSBub3RlIGZvciBpc1N0cmljdCBleHBsYW5hdGlvblxuXG4gICAgICAgIGxldCBpbm5lck9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgb3B0aW9ucywge1xuICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgc3RyaWN0OiB0cnVlLFxuICAgICAgICAgIHBhcmVudDogdmFsdWUsXG4gICAgICAgICAgaW5kZXg6IGlkeCxcbiAgICAgICAgICBvcmlnaW5hbFZhbHVlOiBvcmlnaW5hbFZhbHVlW2lkeF1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdHNbaWR4XSA9IChfLCBjYikgPT4gaW5uZXJUeXBlLnZhbGlkYXRlKGl0ZW0sIGlubmVyT3B0aW9ucywgY2IpO1xuICAgICAgfVxuXG4gICAgICAoMCwgX3J1blRlc3RzLmRlZmF1bHQpKHtcbiAgICAgICAgc3luYyxcbiAgICAgICAgcGF0aCxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIGVycm9ycyxcbiAgICAgICAgZW5kRWFybHksXG4gICAgICAgIHRlc3RzXG4gICAgICB9LCBjYWxsYmFjayk7XG4gICAgfSk7XG4gIH1cblxuICBjbG9uZShzcGVjKSB7XG4gICAgY29uc3QgbmV4dCA9IHN1cGVyLmNsb25lKHNwZWMpO1xuICAgIG5leHQuaW5uZXJUeXBlID0gdGhpcy5pbm5lclR5cGU7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cblxuICBjb25jYXQoc2NoZW1hKSB7XG4gICAgbGV0IG5leHQgPSBzdXBlci5jb25jYXQoc2NoZW1hKTtcbiAgICBuZXh0LmlubmVyVHlwZSA9IHRoaXMuaW5uZXJUeXBlO1xuICAgIGlmIChzY2hlbWEuaW5uZXJUeXBlKSBuZXh0LmlubmVyVHlwZSA9IG5leHQuaW5uZXJUeXBlID8gLy8gQHRzLWV4cGVjdC1lcnJvciBMYXp5IGRvZXNuJ3QgaGF2ZSBjb25jYXQoKVxuICAgIG5leHQuaW5uZXJUeXBlLmNvbmNhdChzY2hlbWEuaW5uZXJUeXBlKSA6IHNjaGVtYS5pbm5lclR5cGU7XG4gICAgcmV0dXJuIG5leHQ7XG4gIH1cblxuICBvZihzY2hlbWEpIHtcbiAgICAvLyBGSVhNRTogdGhpcyBzaG91bGQgcmV0dXJuIGEgbmV3IGluc3RhbmNlIG9mIGFycmF5IHdpdGhvdXQgdGhlIGRlZmF1bHQgdG8gYmVcbiAgICBsZXQgbmV4dCA9IHRoaXMuY2xvbmUoKTtcbiAgICBpZiAoISgwLCBfaXNTY2hlbWEuZGVmYXVsdCkoc2NoZW1hKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignYGFycmF5Lm9mKClgIHN1Yi1zY2hlbWEgbXVzdCBiZSBhIHZhbGlkIHl1cCBzY2hlbWEgbm90OiAnICsgKDAsIF9wcmludFZhbHVlLmRlZmF1bHQpKHNjaGVtYSkpOyAvLyBGSVhNRSh0cyk6XG5cbiAgICBuZXh0LmlubmVyVHlwZSA9IHNjaGVtYTtcbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIGxlbmd0aChsZW5ndGgsIG1lc3NhZ2UgPSBfbG9jYWxlLmFycmF5Lmxlbmd0aCkge1xuICAgIHJldHVybiB0aGlzLnRlc3Qoe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIG5hbWU6ICdsZW5ndGgnLFxuICAgICAgZXhjbHVzaXZlOiB0cnVlLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGxlbmd0aFxuICAgICAgfSxcblxuICAgICAgdGVzdCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKDAsIF9pc0Fic2VudC5kZWZhdWx0KSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoID09PSB0aGlzLnJlc29sdmUobGVuZ3RoKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9XG5cbiAgbWluKG1pbiwgbWVzc2FnZSkge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IF9sb2NhbGUuYXJyYXkubWluO1xuICAgIHJldHVybiB0aGlzLnRlc3Qoe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIG5hbWU6ICdtaW4nLFxuICAgICAgZXhjbHVzaXZlOiB0cnVlLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIG1pblxuICAgICAgfSxcblxuICAgICAgLy8gRklYTUUodHMpOiBBcnJheTx0eXBlb2YgVD5cbiAgICAgIHRlc3QodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuICgwLCBfaXNBYnNlbnQuZGVmYXVsdCkodmFsdWUpIHx8IHZhbHVlLmxlbmd0aCA+PSB0aGlzLnJlc29sdmUobWluKTtcbiAgICAgIH1cblxuICAgIH0pO1xuICB9XG5cbiAgbWF4KG1heCwgbWVzc2FnZSkge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8IF9sb2NhbGUuYXJyYXkubWF4O1xuICAgIHJldHVybiB0aGlzLnRlc3Qoe1xuICAgICAgbWVzc2FnZSxcbiAgICAgIG5hbWU6ICdtYXgnLFxuICAgICAgZXhjbHVzaXZlOiB0cnVlLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIG1heFxuICAgICAgfSxcblxuICAgICAgdGVzdCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gKDAsIF9pc0Fic2VudC5kZWZhdWx0KSh2YWx1ZSkgfHwgdmFsdWUubGVuZ3RoIDw9IHRoaXMucmVzb2x2ZShtYXgpO1xuICAgICAgfVxuXG4gICAgfSk7XG4gIH1cblxuICBlbnN1cmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVmYXVsdCgoKSA9PiBbXSkudHJhbnNmb3JtKCh2YWwsIG9yaWdpbmFsKSA9PiB7XG4gICAgICAvLyBXZSBkb24ndCB3YW50IHRvIHJldHVybiBgbnVsbGAgZm9yIG51bGxhYmxlIHNjaGVtYVxuICAgICAgaWYgKHRoaXMuX3R5cGVDaGVjayh2YWwpKSByZXR1cm4gdmFsO1xuICAgICAgcmV0dXJuIG9yaWdpbmFsID09IG51bGwgPyBbXSA6IFtdLmNvbmNhdChvcmlnaW5hbCk7XG4gICAgfSk7XG4gIH1cblxuICBjb21wYWN0KHJlamVjdG9yKSB7XG4gICAgbGV0IHJlamVjdCA9ICFyZWplY3RvciA/IHYgPT4gISF2IDogKHYsIGksIGEpID0+ICFyZWplY3Rvcih2LCBpLCBhKTtcbiAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm0odmFsdWVzID0+IHZhbHVlcyAhPSBudWxsID8gdmFsdWVzLmZpbHRlcihyZWplY3QpIDogdmFsdWVzKTtcbiAgfVxuXG4gIGRlc2NyaWJlKCkge1xuICAgIGxldCBiYXNlID0gc3VwZXIuZGVzY3JpYmUoKTtcbiAgICBpZiAodGhpcy5pbm5lclR5cGUpIGJhc2UuaW5uZXJUeXBlID0gdGhpcy5pbm5lclR5cGUuZGVzY3JpYmUoKTtcbiAgICByZXR1cm4gYmFzZTtcbiAgfVxuXG4gIG51bGxhYmxlKGlzTnVsbGFibGUgPSB0cnVlKSB7XG4gICAgcmV0dXJuIHN1cGVyLm51bGxhYmxlKGlzTnVsbGFibGUpO1xuICB9XG5cbiAgZGVmaW5lZCgpIHtcbiAgICByZXR1cm4gc3VwZXIuZGVmaW5lZCgpO1xuICB9XG5cbiAgcmVxdWlyZWQobXNnKSB7XG4gICAgcmV0dXJuIHN1cGVyLnJlcXVpcmVkKG1zZyk7XG4gIH1cblxufVxuXG5leHBvcnRzLmRlZmF1bHQgPSBBcnJheVNjaGVtYTtcbmNyZWF0ZS5wcm90b3R5cGUgPSBBcnJheVNjaGVtYS5wcm90b3R5cGU7IC8vXG4vLyBJbnRlcmZhY2VzXG4vLyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNGRCxPQUFPLENBQUNFLE1BQU0sR0FBR0EsTUFBTTtBQUN2QkYsT0FBTyxDQUFDRyxPQUFPLEdBQUcsS0FBSyxDQUFDO0FBRXhCLElBQUlDLFNBQVMsR0FBR0Msc0JBQXNCLENBQUNDLE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0FBRWxFLElBQUlDLFNBQVMsR0FBR0Ysc0JB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