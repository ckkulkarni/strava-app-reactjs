88cb78b043560cddced68c7287c621d2
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.mergeConfigurations = void 0;
const lodash_mergewith_1 = __importDefault(require("lodash.mergewith"));
const ADDITIVE_ARRAYS = ['format', 'import', 'name', 'paths', 'require', 'requireModule'];
const TAG_EXPRESSIONS = ['tags', 'retryTagFilter'];
function mergeArrays(objValue, srcValue) {
  if (objValue && srcValue) {
    return [].concat(objValue, srcValue);
  }
  return undefined;
}
function mergeTagExpressions(objValue, srcValue) {
  if (objValue && srcValue) {
    return `${wrapTagExpression(objValue)} and ${wrapTagExpression(srcValue)}`;
  }
  return undefined;
}
function wrapTagExpression(raw) {
  if (raw.startsWith('(') && raw.endsWith(')')) {
    return raw;
  }
  return `(${raw})`;
}
function customizer(objValue, srcValue, key) {
  if (ADDITIVE_ARRAYS.includes(key)) {
    return mergeArrays(objValue, srcValue);
  }
  if (TAG_EXPRESSIONS.includes(key)) {
    return mergeTagExpressions(objValue, srcValue);
  }
  return undefined;
}
function mergeConfigurations(source, ...configurations) {
  return (0, lodash_mergewith_1.default)({}, source, ...configurations, customizer);
}
exports.mergeConfigurations = mergeConfigurations;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJsb2Rhc2hfbWVyZ2V3aXRoXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiQURESVRJVkVfQVJSQVlTIiwiVEFHX0VYUFJFU1NJT05TIiwibWVyZ2VBcnJheXMiLCJvYmpWYWx1ZSIsInNyY1ZhbHVlIiwiY29uY2F0IiwidW5kZWZpbmVkIiwibWVyZ2VUYWdFeHByZXNzaW9ucyIsIndyYXBUYWdFeHByZXNzaW9uIiwicmF3Iiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwiY3VzdG9taXplciIsImtleSIsImluY2x1ZGVzIiwibWVyZ2VDb25maWd1cmF0aW9ucyIsInNvdXJjZSIsImNvbmZpZ3VyYXRpb25zIiwiZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvY29uZmlndXJhdGlvbi9tZXJnZV9jb25maWd1cmF0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJQ29uZmlndXJhdGlvbiB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgbWVyZ2VXaXRoIGZyb20gJ2xvZGFzaC5tZXJnZXdpdGgnXG5cbmNvbnN0IEFERElUSVZFX0FSUkFZUyA9IFtcbiAgJ2Zvcm1hdCcsXG4gICdpbXBvcnQnLFxuICAnbmFtZScsXG4gICdwYXRocycsXG4gICdyZXF1aXJlJyxcbiAgJ3JlcXVpcmVNb2R1bGUnLFxuXVxuY29uc3QgVEFHX0VYUFJFU1NJT05TID0gWyd0YWdzJywgJ3JldHJ5VGFnRmlsdGVyJ11cblxuZnVuY3Rpb24gbWVyZ2VBcnJheXMob2JqVmFsdWU6IGFueVtdLCBzcmNWYWx1ZTogYW55W10pIHtcbiAgaWYgKG9ialZhbHVlICYmIHNyY1ZhbHVlKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdChvYmpWYWx1ZSwgc3JjVmFsdWUpXG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZFxufVxuXG5mdW5jdGlvbiBtZXJnZVRhZ0V4cHJlc3Npb25zKG9ialZhbHVlOiBzdHJpbmcsIHNyY1ZhbHVlOiBzdHJpbmcpIHtcbiAgaWYgKG9ialZhbHVlICYmIHNyY1ZhbHVlKSB7XG4gICAgcmV0dXJuIGAke3dyYXBUYWdFeHByZXNzaW9uKG9ialZhbHVlKX0gYW5kICR7d3JhcFRhZ0V4cHJlc3Npb24oc3JjVmFsdWUpfWBcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIHdyYXBUYWdFeHByZXNzaW9uKHJhdzogc3RyaW5nKSB7XG4gIGlmIChyYXcuc3RhcnRzV2l0aCgnKCcpICYmIHJhdy5lbmRzV2l0aCgnKScpKSB7XG4gICAgcmV0dXJuIHJhd1xuICB9XG4gIHJldHVybiBgKCR7cmF3fSlgXG59XG5cbmZ1bmN0aW9uIGN1c3RvbWl6ZXIob2JqVmFsdWU6IGFueSwgc3JjVmFsdWU6IGFueSwga2V5OiBzdHJpbmcpOiBhbnkge1xuICBpZiAoQURESVRJVkVfQVJSQVlTLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gbWVyZ2VBcnJheXMob2JqVmFsdWUsIHNyY1ZhbHVlKVxuICB9XG4gIGlmIChUQUdfRVhQUkVTU0lPTlMuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJldHVybiBtZXJnZVRhZ0V4cHJlc3Npb25zKG9ialZhbHVlLCBzcmNWYWx1ZSlcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZUNvbmZpZ3VyYXRpb25zPFQgPSBQYXJ0aWFsPElDb25maWd1cmF0aW9uPj4oXG4gIHNvdXJjZTogVCxcbiAgLi4uY29uZmlndXJhdGlvbnM6IFBhcnRpYWw8SUNvbmZpZ3VyYXRpb24+W11cbik6IFQge1xuICByZXR1cm4gbWVyZ2VXaXRoKHt9LCBzb3VyY2UsIC4uLmNvbmZpZ3VyYXRpb25zLCBjdXN0b21pemVyKVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUNBLE1BQUFBLGtCQUFBLEdBQUFDLGVBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1DLGVBQWUsR0FBRyxDQUN0QixRQUFRLEVBQ1IsUUFBUSxFQUNSLE1BQU0sRUFDTixPQUFPLEVBQ1AsU0FBUyxFQUNULGVBQWUsQ0FDaEI7QUFDRCxNQUFNQyxlQUFlLEdBQUcsQ0FBQyxNQUFNLEVBQUUsZ0JBQWdCLENBQUM7QUFFbEQsU0FBU0MsV0FBV0EsQ0FBQ0MsUUFBZSxFQUFFQyxRQUFlO0VBQ25ELElBQUlELFFBQVEsSUFBSUMsUUFBUSxFQUFFO0lBQ3hCLE9BQU8sRUFBRSxDQUFDQyxNQUFNLENBQUNGLFFBQVEsRUFBRUMsUUFBUSxDQUFDOztFQUV0QyxPQUFPRSxTQUFTO0FBQ2xCO0FBRUEsU0FBU0MsbUJBQW1CQSxDQUFDSixRQUFnQixFQUFFQyxRQUFnQjtFQUM3RCxJQUFJRCxRQUFRLElBQUlDLFFBQVEsRUFBRTtJQUN4QixPQUFPLEdBQUdJLGlCQUFpQixDQUFDTCxRQUFRLENBQUMsUUFBUUssaUJBQWlCLENBQUNKLFFBQVEsQ0FBQyxFQUFFOztFQUU1RSxPQUFPRSxTQUFTO0FBQ2xCO0FBRUEsU0FBU0UsaUJBQWlCQSxDQUFDQyxHQUFXO0VBQ3BDLElBQUlBLEdBQUcsQ0FBQ0MsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJRCxHQUFHLENBQUNFLFFBQVEsQ0FBQyxHQUFHLENBQUMsRUFBRTtJQUM1QyxPQUFPRixHQUFHOztFQUVaLE9BQU8sSUFBSUEsR0FBRyxHQUFHO0FBQ25CO0FBRUEsU0FBU0csVUFBVUEsQ0FBQ1QsUUFBYSxFQUFFQyxRQUFhLEVBQUVTLEdBQVc7RUFDM0QsSUFBSWIsZUFBZSxDQUFDYyxRQUFRLENBQUNELEdBQUcsQ0FBQyxFQUFFO0lBQ2pDLE9BQU9YLFdBQVcsQ0FBQ0MsUUFBUSxFQUFFQyxRQUFRLENBQUM7O0VBRXhDLElBQUlILGVBQWUsQ0FBQ2EsUUFBUSxDQUFDRCxHQUFHLENBQUMsRUFBRTtJQUNqQyxPQUFPTixtQkFBbUIsQ0FBQ0osUUFBUSxFQUFFQyxRQUFRLENBQUM7O0VBRWhELE9BQU9FLFNBQVM7QUFDbEI7QUFFQSxTQUFnQlMsbUJBQW1CQSxDQUNqQ0MsTUFBUyxFQUNULEdBQUdDLGNBQXlDO0VBRTVDLE9BQU8sSUFBQXBCLGtCQUFBLENBQUFxQixPQUFTLEVBQUMsRUFBRSxFQUFFRixNQUFNLEVBQUUsR0FBR0MsY0FBYyxFQUFFTCxVQUFVLENBQUM7QUFDN0Q7QUFMQU8sT0FBQSxDQUFBSixtQkFBQSxHQUFBQSxtQkFBQSJ9