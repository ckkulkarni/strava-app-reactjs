{"version":3,"names":["composer","require","Document","errors","log","lineCounter","parser","parseOptions","options","prettyErrors","lineCounter$1","LineCounter","parseAllDocuments","source","parser$1","Parser","addNewLine","composer$1","Composer","docs","Array","from","compose","parse","doc","forEach","prettifyError","warnings","length","Object","assign","empty","streamInfo","parseDocument","_doc","logLevel","push","YAMLParseError","range","slice","src","reviver","_reviver","undefined","warning","warn","toJS","stringify","value","replacer","_replacer","isArray","indent","Math","round","keepUndefined","toString","exports"],"sources":["public-api.js"],"sourcesContent":["'use strict';\n\nvar composer = require('./compose/composer.js');\nvar Document = require('./doc/Document.js');\nvar errors = require('./errors.js');\nvar log = require('./log.js');\nvar lineCounter = require('./parse/line-counter.js');\nvar parser = require('./parse/parser.js');\n\nfunction parseOptions(options) {\n    const prettyErrors = options.prettyErrors !== false;\n    const lineCounter$1 = options.lineCounter || (prettyErrors && new lineCounter.LineCounter()) || null;\n    return { lineCounter: lineCounter$1, prettyErrors };\n}\n/**\n * Parse the input as a stream of YAML documents.\n *\n * Documents should be separated from each other by `...` or `---` marker lines.\n *\n * @returns If an empty `docs` array is returned, it will be of type\n *   EmptyStream and contain additional stream information. In\n *   TypeScript, you should use `'empty' in docs` as a type guard for it.\n */\nfunction parseAllDocuments(source, options = {}) {\n    const { lineCounter, prettyErrors } = parseOptions(options);\n    const parser$1 = new parser.Parser(lineCounter?.addNewLine);\n    const composer$1 = new composer.Composer(options);\n    const docs = Array.from(composer$1.compose(parser$1.parse(source)));\n    if (prettyErrors && lineCounter)\n        for (const doc of docs) {\n            doc.errors.forEach(errors.prettifyError(source, lineCounter));\n            doc.warnings.forEach(errors.prettifyError(source, lineCounter));\n        }\n    if (docs.length > 0)\n        return docs;\n    return Object.assign([], { empty: true }, composer$1.streamInfo());\n}\n/** Parse an input string into a single YAML.Document */\nfunction parseDocument(source, options = {}) {\n    const { lineCounter, prettyErrors } = parseOptions(options);\n    const parser$1 = new parser.Parser(lineCounter?.addNewLine);\n    const composer$1 = new composer.Composer(options);\n    // `doc` is always set by compose.end(true) at the very latest\n    let doc = null;\n    for (const _doc of composer$1.compose(parser$1.parse(source), true, source.length)) {\n        if (!doc)\n            doc = _doc;\n        else if (doc.options.logLevel !== 'silent') {\n            doc.errors.push(new errors.YAMLParseError(_doc.range.slice(0, 2), 'MULTIPLE_DOCS', 'Source contains multiple documents; please use YAML.parseAllDocuments()'));\n            break;\n        }\n    }\n    if (prettyErrors && lineCounter) {\n        doc.errors.forEach(errors.prettifyError(source, lineCounter));\n        doc.warnings.forEach(errors.prettifyError(source, lineCounter));\n    }\n    return doc;\n}\nfunction parse(src, reviver, options) {\n    let _reviver = undefined;\n    if (typeof reviver === 'function') {\n        _reviver = reviver;\n    }\n    else if (options === undefined && reviver && typeof reviver === 'object') {\n        options = reviver;\n    }\n    const doc = parseDocument(src, options);\n    if (!doc)\n        return null;\n    doc.warnings.forEach(warning => log.warn(doc.options.logLevel, warning));\n    if (doc.errors.length > 0) {\n        if (doc.options.logLevel !== 'silent')\n            throw doc.errors[0];\n        else\n            doc.errors = [];\n    }\n    return doc.toJS(Object.assign({ reviver: _reviver }, options));\n}\nfunction stringify(value, replacer, options) {\n    let _replacer = null;\n    if (typeof replacer === 'function' || Array.isArray(replacer)) {\n        _replacer = replacer;\n    }\n    else if (options === undefined && replacer) {\n        options = replacer;\n    }\n    if (typeof options === 'string')\n        options = options.length;\n    if (typeof options === 'number') {\n        const indent = Math.round(options);\n        options = indent < 1 ? undefined : indent > 8 ? { indent: 8 } : { indent };\n    }\n    if (value === undefined) {\n        const { keepUndefined } = options ?? replacer ?? {};\n        if (!keepUndefined)\n            return undefined;\n    }\n    return new Document.Document(value, _replacer, options).toString(options);\n}\n\nexports.parse = parse;\nexports.parseAllDocuments = parseAllDocuments;\nexports.parseDocument = parseDocument;\nexports.stringify = stringify;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,QAAQ,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAC/C,IAAIC,QAAQ,GAAGD,OAAO,CAAC,mBAAmB,CAAC;AAC3C,IAAIE,MAAM,GAAGF,OAAO,CAAC,aAAa,CAAC;AACnC,IAAIG,GAAG,GAAGH,OAAO,CAAC,UAAU,CAAC;AAC7B,IAAII,WAAW,GAAGJ,OAAO,CAAC,yBAAyB,CAAC;AACpD,IAAIK,MAAM,GAAGL,OAAO,CAAC,mBAAmB,CAAC;AAEzC,SAASM,YAAYA,CAACC,OAAO,EAAE;EAC3B,MAAMC,YAAY,GAAGD,OAAO,CAACC,YAAY,KAAK,KAAK;EACnD,MAAMC,aAAa,GAAGF,OAAO,CAACH,WAAW,IAAKI,YAAY,IAAI,IAAIJ,WAAW,CAACM,WAAW,EAAG,IAAI,IAAI;EACpG,OAAO;IAAEN,WAAW,EAAEK,aAAa;IAAED;EAAa,CAAC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASG,iBAAiBA,CAACC,MAAM,EAAEL,OAAO,GAAG,CAAC,CAAC,EAAE;EAC7C,MAAM;IAAEH,WAAW;IAAEI;EAAa,CAAC,GAAGF,YAAY,CAACC,OAAO,CAAC;EAC3D,MAAMM,QAAQ,GAAG,IAAIR,MAAM,CAACS,MAAM,CAACV,WAAW,EAAEW,UAAU,CAAC;EAC3D,MAAMC,UAAU,GAAG,IAAIjB,QAAQ,CAACkB,QAAQ,CAACV,OAAO,CAAC;EACjD,MAAMW,IAAI,GAAGC,KAAK,CAACC,IAAI,CAACJ,UAAU,CAACK,OAAO,CAACR,QAAQ,CAACS,KAAK,CAACV,MAAM,CAAC,CAAC,CAAC;EACnE,IAAIJ,YAAY,IAAIJ,WAAW,EAC3B,KAAK,MAAMmB,GAAG,IAAIL,IAAI,EAAE;IACpBK,GAAG,CAACrB,MAAM,CAACsB,OAAO,CAACtB,MAAM,CAACuB,aAAa,CAACb,MAAM,EAAER,WAAW,CAAC,CAAC;IAC7DmB,GAAG,CAACG,QAAQ,CAACF,OAAO,CAACtB,MAAM,CAACuB,aAAa,CAACb,MAAM,EAAER,WAAW,CAAC,CAAC;EACnE;EACJ,IAAIc,IAAI,CAACS,MAAM,GAAG,CAAC,EACf,OAAOT,IAAI;EACf,OAAOU,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE;IAAEC,KAAK,EAAE;EAAK,CAAC,EAAEd,UAAU,CAACe,UAAU,EAAE,CAAC;AACtE;AACA;AACA,SAASC,aAAaA,CAACpB,MAAM,EAAEL,OAAO,GAAG,CAAC,CAAC,EAAE;EACzC,MAAM;IAAEH,WAAW;IAAEI;EAAa,CAAC,GAAGF,YAAY,CAACC,OAAO,CAAC;EAC3D,MAAMM,QAAQ,GAAG,IAAIR,MAAM,CAACS,MAAM,CAACV,WAAW,EAAEW,UAAU,CAAC;EAC3D,MAAMC,UAAU,GAAG,IAAIjB,QAAQ,CAACkB,QAAQ,CAACV,OAAO,CAAC;EACjD;EACA,IAAIgB,GAAG,GAAG,IAAI;EACd,KAAK,MAAMU,IAAI,IAAIjB,UAAU,CAACK,OAAO,CAACR,QAAQ,CAACS,KAAK,CAACV,MAAM,CAAC,EAAE,IAAI,EAAEA,MAAM,CAACe,MAAM,CAAC,EAAE;IAChF,IAAI,CAACJ,GAAG,EACJA,GAAG,GAAGU,IAAI,CAAC,KACV,IAAIV,GAAG,CAAChB,OAAO,CAAC2B,QAAQ,KAAK,QAAQ,EAAE;MACxCX,GAAG,CAACrB,MAAM,CAACiC,IAAI,CAAC,IAAIjC,MAAM,CAACkC,cAAc,CAACH,IAAI,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,eAAe,EAAE,yEAAyE,CAAC,CAAC;MAC9J;IACJ;EACJ;EACA,IAAI9B,YAAY,IAAIJ,WAAW,EAAE;IAC7BmB,GAAG,CAACrB,MAAM,CAACsB,OAAO,CAACtB,MAAM,CAACuB,aAAa,CAACb,MAAM,EAAER,WAAW,CAAC,CAAC;IAC7DmB,GAAG,CAACG,QAAQ,CAACF,OAAO,CAACtB,MAAM,CAACuB,aAAa,CAACb,MAAM,EAAER,WAAW,CAAC,CAAC;EACnE;EACA,OAAOmB,GAAG;AACd;AACA,SAASD,KAAKA,CAACiB,GAAG,EAAEC,OAAO,EAAEjC,OAAO,EAAE;EAClC,IAAIkC,QAAQ,GAAGC,SAAS;EACxB,IAAI,OAAOF,OAAO,KAAK,UAAU,EAAE;IAC/BC,QAAQ,GAAGD,OAAO;EACtB,CAAC,MACI,IAAIjC,OAAO,KAAKmC,SAAS,IAAIF,OAAO,IAAI,OAAOA,OAAO,KAAK,QAAQ,EAAE;IACtEjC,OAAO,GAAGiC,OAAO;EACrB;EACA,MAAMjB,GAAG,GAAGS,aAAa,CAACO,GAAG,EAAEhC,OAAO,CAAC;EACvC,IAAI,CAACgB,GAAG,EACJ,OAAO,IAAI;EACfA,GAAG,CAACG,QAAQ,CAACF,OAAO,CAACmB,OAAO,IAAIxC,GAAG,CAACyC,IAAI,CAACrB,GAAG,CAAChB,OAAO,CAAC2B,QAAQ,EAAES,OAAO,CAAC,CAAC;EACxE,IAAIpB,GAAG,CAACrB,MAAM,CAACyB,MAAM,GAAG,CAAC,EAAE;IACvB,IAAIJ,GAAG,CAAChB,OAAO,CAAC2B,QAAQ,KAAK,QAAQ,EACjC,MAAMX,GAAG,CAACrB,MAAM,CAAC,CAAC,CAAC,CAAC,KAEpBqB,GAAG,CAACrB,MAAM,GAAG,EAAE;EACvB;EACA,OAAOqB,GAAG,CAACsB,IAAI,CAACjB,MAAM,CAACC,MAAM,CAAC;IAAEW,OAAO,EAAEC;EAAS,CAAC,EAAElC,OAAO,CAAC,CAAC;AAClE;AACA,SAASuC,SAASA,CAACC,KAAK,EAAEC,QAAQ,EAAEzC,OAAO,EAAE;EACzC,IAAI0C,SAAS,GAAG,IAAI;EACpB,IAAI,OAAOD,QAAQ,KAAK,UAAU,IAAI7B,KAAK,CAAC+B,OAAO,CAACF,QAAQ,CAAC,EAAE;IAC3DC,SAAS,GAAGD,QAAQ;EACxB,CAAC,MACI,IAAIzC,OAAO,KAAKmC,SAAS,IAAIM,QAAQ,EAAE;IACxCzC,OAAO,GAAGyC,QAAQ;EACtB;EACA,IAAI,OAAOzC,OAAO,KAAK,QAAQ,EAC3BA,OAAO,GAAGA,OAAO,CAACoB,MAAM;EAC5B,IAAI,OAAOpB,OAAO,KAAK,QAAQ,EAAE;IAC7B,MAAM4C,MAAM,GAAGC,IAAI,CAACC,KAAK,CAAC9C,OAAO,CAAC;IAClCA,OAAO,GAAG4C,MAAM,GAAG,CAAC,GAAGT,SAAS,GAAGS,MAAM,GAAG,CAAC,GAAG;MAAEA,MAAM,EAAE;IAAE,CAAC,GAAG;MAAEA;IAAO,CAAC;EAC9E;EACA,IAAIJ,KAAK,KAAKL,SAAS,EAAE;IACrB,MAAM;MAAEY;IAAc,CAAC,GAAG/C,OAAO,IAAIyC,QAAQ,IAAI,CAAC,CAAC;IACnD,IAAI,CAACM,aAAa,EACd,OAAOZ,SAAS;EACxB;EACA,OAAO,IAAIzC,QAAQ,CAACA,QAAQ,CAAC8C,KAAK,EAAEE,SAAS,EAAE1C,OAAO,CAAC,CAACgD,QAAQ,CAAChD,OAAO,CAAC;AAC7E;AAEAiD,OAAO,CAAClC,KAAK,GAAGA,KAAK;AACrBkC,OAAO,CAAC7C,iBAAiB,GAAGA,iBAAiB;AAC7C6C,OAAO,CAACxB,aAAa,GAAGA,aAAa;AACrCwB,OAAO,CAACV,SAAS,GAAGA,SAAS"}