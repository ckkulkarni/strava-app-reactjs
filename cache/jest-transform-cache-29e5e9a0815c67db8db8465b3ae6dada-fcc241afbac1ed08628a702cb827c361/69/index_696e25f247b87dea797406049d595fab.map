{"version":3,"names":["os","require","tty","hasFlag","env","process","flagForceColor","envForceColor","FORCE_COLOR","length","Math","min","Number","parseInt","translateLevel","level","hasBasic","has256","has16m","supportsColor","haveStream","streamIsTTY","sniffFlags","noFlagForceColor","undefined","forceColor","TERM","platform","osRelease","release","split","some","sign","CI_NAME","test","TEAMCITY_VERSION","COLORTERM","version","TERM_PROGRAM_VERSION","TERM_PROGRAM","getSupportLevel","stream","options","isTTY","module","exports","stdout","isatty","stderr"],"sources":["index.js"],"sourcesContent":["'use strict';\nconst os = require('os');\nconst tty = require('tty');\nconst hasFlag = require('has-flag');\n\nconst {env} = process;\n\nlet flagForceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false') ||\n\thasFlag('color=never')) {\n\tflagForceColor = 0;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tflagForceColor = 1;\n}\n\nfunction envForceColor() {\n\tif ('FORCE_COLOR' in env) {\n\t\tif (env.FORCE_COLOR === 'true') {\n\t\t\treturn 1;\n\t\t}\n\n\t\tif (env.FORCE_COLOR === 'false') {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn env.FORCE_COLOR.length === 0 ? 1 : Math.min(Number.parseInt(env.FORCE_COLOR, 10), 3);\n\t}\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(haveStream, {streamIsTTY, sniffFlags = true} = {}) {\n\tconst noFlagForceColor = envForceColor();\n\tif (noFlagForceColor !== undefined) {\n\t\tflagForceColor = noFlagForceColor;\n\t}\n\n\tconst forceColor = sniffFlags ? flagForceColor : noFlagForceColor;\n\n\tif (forceColor === 0) {\n\t\treturn 0;\n\t}\n\n\tif (sniffFlags) {\n\t\tif (hasFlag('color=16m') ||\n\t\t\thasFlag('color=full') ||\n\t\t\thasFlag('color=truecolor')) {\n\t\t\treturn 3;\n\t\t}\n\n\t\tif (hasFlag('color=256')) {\n\t\t\treturn 2;\n\t\t}\n\t}\n\n\tif (haveStream && !streamIsTTY && forceColor === undefined) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor || 0;\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\tif (process.platform === 'win32') {\n\t\t// Windows 10 build 10586 is the first Windows release that supports 256 colors.\n\t\t// Windows 10 build 14931 is the first release that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI', 'GITHUB_ACTIONS', 'BUILDKITE', 'DRONE'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = Number.parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream, options = {}) {\n\tconst level = supportsColor(stream, {\n\t\tstreamIsTTY: stream && stream.isTTY,\n\t\t...options\n\t});\n\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel({isTTY: tty.isatty(1)}),\n\tstderr: getSupportLevel({isTTY: tty.isatty(2)})\n};\n"],"mappings":"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"}