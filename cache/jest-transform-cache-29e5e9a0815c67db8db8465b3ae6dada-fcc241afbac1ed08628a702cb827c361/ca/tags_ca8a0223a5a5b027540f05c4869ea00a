8e63f0d93a8d120857e387c31609ed11
'use strict';

var map = require('./common/map.js');
var _null = require('./common/null.js');
var seq = require('./common/seq.js');
var string = require('./common/string.js');
var bool = require('./core/bool.js');
var float = require('./core/float.js');
var int = require('./core/int.js');
var schema = require('./core/schema.js');
var schema$1 = require('./json/schema.js');
var binary = require('./yaml-1.1/binary.js');
var omap = require('./yaml-1.1/omap.js');
var pairs = require('./yaml-1.1/pairs.js');
var schema$2 = require('./yaml-1.1/schema.js');
var set = require('./yaml-1.1/set.js');
var timestamp = require('./yaml-1.1/timestamp.js');
const schemas = new Map([['core', schema.schema], ['failsafe', [map.map, seq.seq, string.string]], ['json', schema$1.schema], ['yaml11', schema$2.schema], ['yaml-1.1', schema$2.schema]]);
const tagsByName = {
  binary: binary.binary,
  bool: bool.boolTag,
  float: float.float,
  floatExp: float.floatExp,
  floatNaN: float.floatNaN,
  floatTime: timestamp.floatTime,
  int: int.int,
  intHex: int.intHex,
  intOct: int.intOct,
  intTime: timestamp.intTime,
  map: map.map,
  null: _null.nullTag,
  omap: omap.omap,
  pairs: pairs.pairs,
  seq: seq.seq,
  set: set.set,
  timestamp: timestamp.timestamp
};
const coreKnownTags = {
  'tag:yaml.org,2002:binary': binary.binary,
  'tag:yaml.org,2002:omap': omap.omap,
  'tag:yaml.org,2002:pairs': pairs.pairs,
  'tag:yaml.org,2002:set': set.set,
  'tag:yaml.org,2002:timestamp': timestamp.timestamp
};
function getTags(customTags, schemaName) {
  let tags = schemas.get(schemaName);
  if (!tags) {
    if (Array.isArray(customTags)) tags = [];else {
      const keys = Array.from(schemas.keys()).filter(key => key !== 'yaml11').map(key => JSON.stringify(key)).join(', ');
      throw new Error(`Unknown schema "${schemaName}"; use one of ${keys} or define customTags array`);
    }
  }
  if (Array.isArray(customTags)) {
    for (const tag of customTags) tags = tags.concat(tag);
  } else if (typeof customTags === 'function') {
    tags = customTags(tags.slice());
  }
  return tags.map(tag => {
    if (typeof tag !== 'string') return tag;
    const tagObj = tagsByName[tag];
    if (tagObj) return tagObj;
    const keys = Object.keys(tagsByName).map(key => JSON.stringify(key)).join(', ');
    throw new Error(`Unknown custom tag "${tag}"; use one of ${keys}`);
  });
}
exports.coreKnownTags = coreKnownTags;
exports.getTags = getTags;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYXAiLCJyZXF1aXJlIiwiX251bGwiLCJzZXEiLCJzdHJpbmciLCJib29sIiwiZmxvYXQiLCJpbnQiLCJzY2hlbWEiLCJzY2hlbWEkMSIsImJpbmFyeSIsIm9tYXAiLCJwYWlycyIsInNjaGVtYSQyIiwic2V0IiwidGltZXN0YW1wIiwic2NoZW1hcyIsIk1hcCIsInRhZ3NCeU5hbWUiLCJib29sVGFnIiwiZmxvYXRFeHAiLCJmbG9hdE5hTiIsImZsb2F0VGltZSIsImludEhleCIsImludE9jdCIsImludFRpbWUiLCJudWxsIiwibnVsbFRhZyIsImNvcmVLbm93blRhZ3MiLCJnZXRUYWdzIiwiY3VzdG9tVGFncyIsInNjaGVtYU5hbWUiLCJ0YWdzIiwiZ2V0IiwiQXJyYXkiLCJpc0FycmF5Iiwia2V5cyIsImZyb20iLCJmaWx0ZXIiLCJrZXkiLCJKU09OIiwic3RyaW5naWZ5Iiwiam9pbiIsIkVycm9yIiwidGFnIiwiY29uY2F0Iiwic2xpY2UiLCJ0YWdPYmoiLCJPYmplY3QiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidGFncy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBtYXAgPSByZXF1aXJlKCcuL2NvbW1vbi9tYXAuanMnKTtcbnZhciBfbnVsbCA9IHJlcXVpcmUoJy4vY29tbW9uL251bGwuanMnKTtcbnZhciBzZXEgPSByZXF1aXJlKCcuL2NvbW1vbi9zZXEuanMnKTtcbnZhciBzdHJpbmcgPSByZXF1aXJlKCcuL2NvbW1vbi9zdHJpbmcuanMnKTtcbnZhciBib29sID0gcmVxdWlyZSgnLi9jb3JlL2Jvb2wuanMnKTtcbnZhciBmbG9hdCA9IHJlcXVpcmUoJy4vY29yZS9mbG9hdC5qcycpO1xudmFyIGludCA9IHJlcXVpcmUoJy4vY29yZS9pbnQuanMnKTtcbnZhciBzY2hlbWEgPSByZXF1aXJlKCcuL2NvcmUvc2NoZW1hLmpzJyk7XG52YXIgc2NoZW1hJDEgPSByZXF1aXJlKCcuL2pzb24vc2NoZW1hLmpzJyk7XG52YXIgYmluYXJ5ID0gcmVxdWlyZSgnLi95YW1sLTEuMS9iaW5hcnkuanMnKTtcbnZhciBvbWFwID0gcmVxdWlyZSgnLi95YW1sLTEuMS9vbWFwLmpzJyk7XG52YXIgcGFpcnMgPSByZXF1aXJlKCcuL3lhbWwtMS4xL3BhaXJzLmpzJyk7XG52YXIgc2NoZW1hJDIgPSByZXF1aXJlKCcuL3lhbWwtMS4xL3NjaGVtYS5qcycpO1xudmFyIHNldCA9IHJlcXVpcmUoJy4veWFtbC0xLjEvc2V0LmpzJyk7XG52YXIgdGltZXN0YW1wID0gcmVxdWlyZSgnLi95YW1sLTEuMS90aW1lc3RhbXAuanMnKTtcblxuY29uc3Qgc2NoZW1hcyA9IG5ldyBNYXAoW1xuICAgIFsnY29yZScsIHNjaGVtYS5zY2hlbWFdLFxuICAgIFsnZmFpbHNhZmUnLCBbbWFwLm1hcCwgc2VxLnNlcSwgc3RyaW5nLnN0cmluZ11dLFxuICAgIFsnanNvbicsIHNjaGVtYSQxLnNjaGVtYV0sXG4gICAgWyd5YW1sMTEnLCBzY2hlbWEkMi5zY2hlbWFdLFxuICAgIFsneWFtbC0xLjEnLCBzY2hlbWEkMi5zY2hlbWFdXG5dKTtcbmNvbnN0IHRhZ3NCeU5hbWUgPSB7XG4gICAgYmluYXJ5OiBiaW5hcnkuYmluYXJ5LFxuICAgIGJvb2w6IGJvb2wuYm9vbFRhZyxcbiAgICBmbG9hdDogZmxvYXQuZmxvYXQsXG4gICAgZmxvYXRFeHA6IGZsb2F0LmZsb2F0RXhwLFxuICAgIGZsb2F0TmFOOiBmbG9hdC5mbG9hdE5hTixcbiAgICBmbG9hdFRpbWU6IHRpbWVzdGFtcC5mbG9hdFRpbWUsXG4gICAgaW50OiBpbnQuaW50LFxuICAgIGludEhleDogaW50LmludEhleCxcbiAgICBpbnRPY3Q6IGludC5pbnRPY3QsXG4gICAgaW50VGltZTogdGltZXN0YW1wLmludFRpbWUsXG4gICAgbWFwOiBtYXAubWFwLFxuICAgIG51bGw6IF9udWxsLm51bGxUYWcsXG4gICAgb21hcDogb21hcC5vbWFwLFxuICAgIHBhaXJzOiBwYWlycy5wYWlycyxcbiAgICBzZXE6IHNlcS5zZXEsXG4gICAgc2V0OiBzZXQuc2V0LFxuICAgIHRpbWVzdGFtcDogdGltZXN0YW1wLnRpbWVzdGFtcFxufTtcbmNvbnN0IGNvcmVLbm93blRhZ3MgPSB7XG4gICAgJ3RhZzp5YW1sLm9yZywyMDAyOmJpbmFyeSc6IGJpbmFyeS5iaW5hcnksXG4gICAgJ3RhZzp5YW1sLm9yZywyMDAyOm9tYXAnOiBvbWFwLm9tYXAsXG4gICAgJ3RhZzp5YW1sLm9yZywyMDAyOnBhaXJzJzogcGFpcnMucGFpcnMsXG4gICAgJ3RhZzp5YW1sLm9yZywyMDAyOnNldCc6IHNldC5zZXQsXG4gICAgJ3RhZzp5YW1sLm9yZywyMDAyOnRpbWVzdGFtcCc6IHRpbWVzdGFtcC50aW1lc3RhbXBcbn07XG5mdW5jdGlvbiBnZXRUYWdzKGN1c3RvbVRhZ3MsIHNjaGVtYU5hbWUpIHtcbiAgICBsZXQgdGFncyA9IHNjaGVtYXMuZ2V0KHNjaGVtYU5hbWUpO1xuICAgIGlmICghdGFncykge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjdXN0b21UYWdzKSlcbiAgICAgICAgICAgIHRhZ3MgPSBbXTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gQXJyYXkuZnJvbShzY2hlbWFzLmtleXMoKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGtleSA9PiBrZXkgIT09ICd5YW1sMTEnKVxuICAgICAgICAgICAgICAgIC5tYXAoa2V5ID0+IEpTT04uc3RyaW5naWZ5KGtleSkpXG4gICAgICAgICAgICAgICAgLmpvaW4oJywgJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gc2NoZW1hIFwiJHtzY2hlbWFOYW1lfVwiOyB1c2Ugb25lIG9mICR7a2V5c30gb3IgZGVmaW5lIGN1c3RvbVRhZ3MgYXJyYXlgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShjdXN0b21UYWdzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IHRhZyBvZiBjdXN0b21UYWdzKVxuICAgICAgICAgICAgdGFncyA9IHRhZ3MuY29uY2F0KHRhZyk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBjdXN0b21UYWdzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRhZ3MgPSBjdXN0b21UYWdzKHRhZ3Muc2xpY2UoKSk7XG4gICAgfVxuICAgIHJldHVybiB0YWdzLm1hcCh0YWcgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHRhZyAhPT0gJ3N0cmluZycpXG4gICAgICAgICAgICByZXR1cm4gdGFnO1xuICAgICAgICBjb25zdCB0YWdPYmogPSB0YWdzQnlOYW1lW3RhZ107XG4gICAgICAgIGlmICh0YWdPYmopXG4gICAgICAgICAgICByZXR1cm4gdGFnT2JqO1xuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGFnc0J5TmFtZSlcbiAgICAgICAgICAgIC5tYXAoa2V5ID0+IEpTT04uc3RyaW5naWZ5KGtleSkpXG4gICAgICAgICAgICAuam9pbignLCAnKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGN1c3RvbSB0YWcgXCIke3RhZ31cIjsgdXNlIG9uZSBvZiAke2tleXN9YCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydHMuY29yZUtub3duVGFncyA9IGNvcmVLbm93blRhZ3M7XG5leHBvcnRzLmdldFRhZ3MgPSBnZXRUYWdzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLEdBQUcsR0FBR0MsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3BDLElBQUlDLEtBQUssR0FBR0QsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBQ3ZDLElBQUlFLEdBQUcsR0FBR0YsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0FBQ3BDLElBQUlHLE1BQU0sR0FBR0gsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQzFDLElBQUlJLElBQUksR0FBR0osT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3BDLElBQUlLLEtBQUssR0FBR0wsT0FBTyxDQUFDLGlCQUFpQixDQUFD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