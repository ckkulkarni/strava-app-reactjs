2bfb4e96077bea4c6023da65031794fa
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
const get_color_fns_1 = __importDefault(require("./get_color_fns"));
const javascript_snippet_syntax_1 = __importDefault(require("./step_definition_snippet_builder/javascript_snippet_syntax"));
const path_1 = __importDefault(require("path"));
const step_definition_snippet_builder_1 = __importDefault(require("./step_definition_snippet_builder"));
const value_checker_1 = require("../value_checker");
const snippet_syntax_1 = require("./step_definition_snippet_builder/snippet_syntax");
const url_1 = require("url");
const formatters_1 = __importDefault(require("./helpers/formatters"));
// eslint-disable-next-line @typescript-eslint/no-var-requires
const {
  importer
} = require('../importer');
const FormatterBuilder = {
  async build(type, options) {
    const FormatterConstructor = await FormatterBuilder.getConstructorByType(type, options.cwd);
    const colorFns = (0, get_color_fns_1.default)(options.stream, options.env, options.parsedArgvOptions.colorsEnabled);
    const snippetBuilder = await FormatterBuilder.getStepDefinitionSnippetBuilder({
      cwd: options.cwd,
      snippetInterface: options.parsedArgvOptions.snippetInterface,
      snippetSyntax: options.parsedArgvOptions.snippetSyntax,
      supportCodeLibrary: options.supportCodeLibrary
    });
    return new FormatterConstructor({
      colorFns,
      snippetBuilder,
      ...options
    });
  },
  async getConstructorByType(type, cwd) {
    const formatters = formatters_1.default.getFormatters();
    return formatters[type] ? formatters[type] : await FormatterBuilder.loadCustomClass('formatter', type, cwd);
  },
  async getStepDefinitionSnippetBuilder({
    cwd,
    snippetInterface,
    snippetSyntax,
    supportCodeLibrary
  }) {
    if ((0, value_checker_1.doesNotHaveValue)(snippetInterface)) {
      snippetInterface = snippet_syntax_1.SnippetInterface.Synchronous;
    }
    let Syntax = javascript_snippet_syntax_1.default;
    if ((0, value_checker_1.doesHaveValue)(snippetSyntax)) {
      Syntax = await FormatterBuilder.loadCustomClass('syntax', snippetSyntax, cwd);
    }
    return new step_definition_snippet_builder_1.default({
      snippetSyntax: new Syntax(snippetInterface),
      parameterTypeRegistry: supportCodeLibrary.parameterTypeRegistry
    });
  },
  async loadCustomClass(type, descriptor, cwd) {
    let normalised = descriptor;
    if (descriptor.startsWith('.')) {
      normalised = (0, url_1.pathToFileURL)(path_1.default.resolve(cwd, descriptor));
    } else if (descriptor.startsWith('file://')) {
      normalised = new URL(descriptor);
    }
    let CustomClass = await FormatterBuilder.loadFile(normalised);
    CustomClass = FormatterBuilder.resolveConstructor(CustomClass);
    if ((0, value_checker_1.doesHaveValue)(CustomClass)) {
      return CustomClass;
    } else {
      throw new Error(`Custom ${type} (${descriptor}) does not export a function/class`);
    }
  },
  async loadFile(urlOrName) {
    let result;
    try {
      // eslint-disable-next-line @typescript-eslint/no-var-requires
      result = require(typeof urlOrName === 'string' ? urlOrName : (0, url_1.fileURLToPath)(urlOrName));
    } catch (error) {
      if (error.code === 'ERR_REQUIRE_ESM') {
        result = await importer(urlOrName);
      } else {
        throw error;
      }
    }
    return result;
  },
  resolveConstructor(ImportedCode) {
    if ((0, value_checker_1.doesNotHaveValue)(ImportedCode)) {
      return null;
    }
    if (typeof ImportedCode === 'function') {
      return ImportedCode;
    } else if (typeof ImportedCode === 'object' && typeof ImportedCode.default === 'function') {
      return ImportedCode.default;
    }
    return null;
  }
};
exports.default = FormatterBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRfY29sb3JfZm5zXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJyZXF1aXJlIiwiamF2YXNjcmlwdF9zbmlwcGV0X3N5bnRheF8xIiwicGF0aF8xIiwic3RlcF9kZWZpbml0aW9uX3NuaXBwZXRfYnVpbGRlcl8xIiwidmFsdWVfY2hlY2tlcl8xIiwic25pcHBldF9zeW50YXhfMSIsInVybF8xIiwiZm9ybWF0dGVyc18xIiwiaW1wb3J0ZXIiLCJGb3JtYXR0ZXJCdWlsZGVyIiwiYnVpbGQiLCJ0eXBlIiwib3B0aW9ucyIsIkZvcm1hdHRlckNvbnN0cnVjdG9yIiwiZ2V0Q29uc3RydWN0b3JCeVR5cGUiLCJjd2QiLCJjb2xvckZucyIsImRlZmF1bHQiLCJzdHJlYW0iLCJlbnYiLCJwYXJzZWRBcmd2T3B0aW9ucyIsImNvbG9yc0VuYWJsZWQiLCJzbmlwcGV0QnVpbGRlciIsImdldFN0ZXBEZWZpbml0aW9uU25pcHBldEJ1aWxkZXIiLCJzbmlwcGV0SW50ZXJmYWNlIiwic25pcHBldFN5bnRheCIsInN1cHBvcnRDb2RlTGlicmFyeSIsImZvcm1hdHRlcnMiLCJnZXRGb3JtYXR0ZXJzIiwibG9hZEN1c3RvbUNsYXNzIiwiZG9lc05vdEhhdmVWYWx1ZSIsIlNuaXBwZXRJbnRlcmZhY2UiLCJTeW5jaHJvbm91cyIsIlN5bnRheCIsImRvZXNIYXZlVmFsdWUiLCJwYXJhbWV0ZXJUeXBlUmVnaXN0cnkiLCJkZXNjcmlwdG9yIiwibm9ybWFsaXNlZCIsInN0YXJ0c1dpdGgiLCJwYXRoVG9GaWxlVVJMIiwicmVzb2x2ZSIsIlVSTCIsIkN1c3RvbUNsYXNzIiwibG9hZEZpbGUiLCJyZXNvbHZlQ29uc3RydWN0b3IiLCJFcnJvciIsInVybE9yTmFtZSIsInJlc3VsdCIsImZpbGVVUkxUb1BhdGgiLCJlcnJvciIsImNvZGUiLCJJbXBvcnRlZENvZGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2Zvcm1hdHRlci9idWlsZGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBnZXRDb2xvckZucyBmcm9tICcuL2dldF9jb2xvcl9mbnMnXG5pbXBvcnQgSmF2YXNjcmlwdFNuaXBwZXRTeW50YXggZnJvbSAnLi9zdGVwX2RlZmluaXRpb25fc25pcHBldF9idWlsZGVyL2phdmFzY3JpcHRfc25pcHBldF9zeW50YXgnXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xuaW1wb3J0IFN0ZXBEZWZpbml0aW9uU25pcHBldEJ1aWxkZXIgZnJvbSAnLi9zdGVwX2RlZmluaXRpb25fc25pcHBldF9idWlsZGVyJ1xuaW1wb3J0IHsgSVN1cHBvcnRDb2RlTGlicmFyeSB9IGZyb20gJy4uL3N1cHBvcnRfY29kZV9saWJyYXJ5X2J1aWxkZXIvdHlwZXMnXG5pbXBvcnQgRm9ybWF0dGVyLCB7XG4gIEZvcm1hdE9wdGlvbnMsXG4gIElGb3JtYXR0ZXJDbGVhbnVwRm4sXG4gIElGb3JtYXR0ZXJMb2dGbixcbn0gZnJvbSAnLidcbmltcG9ydCB7IGRvZXNIYXZlVmFsdWUsIGRvZXNOb3RIYXZlVmFsdWUgfSBmcm9tICcuLi92YWx1ZV9jaGVja2VyJ1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJ1xuaW1wb3J0IEV2ZW50RGF0YUNvbGxlY3RvciBmcm9tICcuL2hlbHBlcnMvZXZlbnRfZGF0YV9jb2xsZWN0b3InXG5pbXBvcnQgeyBXcml0YWJsZSBhcyBXcml0YWJsZVN0cmVhbSB9IGZyb20gJ3N0cmVhbSdcbmltcG9ydCB7IFNuaXBwZXRJbnRlcmZhY2UgfSBmcm9tICcuL3N0ZXBfZGVmaW5pdGlvbl9zbmlwcGV0X2J1aWxkZXIvc25pcHBldF9zeW50YXgnXG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoLCBwYXRoVG9GaWxlVVJMIH0gZnJvbSAndXJsJ1xuaW1wb3J0IEZvcm1hdHRlcnMgZnJvbSAnLi9oZWxwZXJzL2Zvcm1hdHRlcnMnXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuY29uc3QgeyBpbXBvcnRlciB9ID0gcmVxdWlyZSgnLi4vaW1wb3J0ZXInKVxuXG5pbnRlcmZhY2UgSUdldFN0ZXBEZWZpbml0aW9uU25pcHBldEJ1aWxkZXJPcHRpb25zIHtcbiAgY3dkOiBzdHJpbmdcbiAgc25pcHBldEludGVyZmFjZT86IFNuaXBwZXRJbnRlcmZhY2VcbiAgc25pcHBldFN5bnRheD86IHN0cmluZ1xuICBzdXBwb3J0Q29kZUxpYnJhcnk6IElTdXBwb3J0Q29kZUxpYnJhcnlcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQnVpbGRPcHRpb25zIHtcbiAgZW52OiBOb2RlSlMuUHJvY2Vzc0VudlxuICBjd2Q6IHN0cmluZ1xuICBldmVudEJyb2FkY2FzdGVyOiBFdmVudEVtaXR0ZXJcbiAgZXZlbnREYXRhQ29sbGVjdG9yOiBFdmVudERhdGFDb2xsZWN0b3JcbiAgbG9nOiBJRm9ybWF0dGVyTG9nRm5cbiAgcGFyc2VkQXJndk9wdGlvbnM6IEZvcm1hdE9wdGlvbnNcbiAgc3RyZWFtOiBXcml0YWJsZVN0cmVhbVxuICBjbGVhbnVwOiBJRm9ybWF0dGVyQ2xlYW51cEZuXG4gIHN1cHBvcnRDb2RlTGlicmFyeTogSVN1cHBvcnRDb2RlTGlicmFyeVxufVxuXG5jb25zdCBGb3JtYXR0ZXJCdWlsZGVyID0ge1xuICBhc3luYyBidWlsZCh0eXBlOiBzdHJpbmcsIG9wdGlvbnM6IElCdWlsZE9wdGlvbnMpOiBQcm9taXNlPEZvcm1hdHRlcj4ge1xuICAgIGNvbnN0IEZvcm1hdHRlckNvbnN0cnVjdG9yID0gYXdhaXQgRm9ybWF0dGVyQnVpbGRlci5nZXRDb25zdHJ1Y3RvckJ5VHlwZShcbiAgICAgIHR5cGUsXG4gICAgICBvcHRpb25zLmN3ZFxuICAgIClcbiAgICBjb25zdCBjb2xvckZucyA9IGdldENvbG9yRm5zKFxuICAgICAgb3B0aW9ucy5zdHJlYW0sXG4gICAgICBvcHRpb25zLmVudixcbiAgICAgIG9wdGlvbnMucGFyc2VkQXJndk9wdGlvbnMuY29sb3JzRW5hYmxlZFxuICAgIClcbiAgICBjb25zdCBzbmlwcGV0QnVpbGRlciA9XG4gICAgICBhd2FpdCBGb3JtYXR0ZXJCdWlsZGVyLmdldFN0ZXBEZWZpbml0aW9uU25pcHBldEJ1aWxkZXIoe1xuICAgICAgICBjd2Q6IG9wdGlvbnMuY3dkLFxuICAgICAgICBzbmlwcGV0SW50ZXJmYWNlOiBvcHRpb25zLnBhcnNlZEFyZ3ZPcHRpb25zLnNuaXBwZXRJbnRlcmZhY2UsXG4gICAgICAgIHNuaXBwZXRTeW50YXg6IG9wdGlvbnMucGFyc2VkQXJndk9wdGlvbnMuc25pcHBldFN5bnRheCxcbiAgICAgICAgc3VwcG9ydENvZGVMaWJyYXJ5OiBvcHRpb25zLnN1cHBvcnRDb2RlTGlicmFyeSxcbiAgICAgIH0pXG4gICAgcmV0dXJuIG5ldyBGb3JtYXR0ZXJDb25zdHJ1Y3Rvcih7XG4gICAgICBjb2xvckZucyxcbiAgICAgIHNuaXBwZXRCdWlsZGVyLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KVxuICB9LFxuXG4gIGFzeW5jIGdldENvbnN0cnVjdG9yQnlUeXBlKFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBjd2Q6IHN0cmluZ1xuICApOiBQcm9taXNlPHR5cGVvZiBGb3JtYXR0ZXI+IHtcbiAgICBjb25zdCBmb3JtYXR0ZXJzOiBSZWNvcmQ8c3RyaW5nLCB0eXBlb2YgRm9ybWF0dGVyPiA9XG4gICAgICBGb3JtYXR0ZXJzLmdldEZvcm1hdHRlcnMoKVxuXG4gICAgcmV0dXJuIGZvcm1hdHRlcnNbdHlwZV1cbiAgICAgID8gZm9ybWF0dGVyc1t0eXBlXVxuICAgICAgOiBhd2FpdCBGb3JtYXR0ZXJCdWlsZGVyLmxvYWRDdXN0b21DbGFzcygnZm9ybWF0dGVyJywgdHlwZSwgY3dkKVxuICB9LFxuXG4gIGFzeW5jIGdldFN0ZXBEZWZpbml0aW9uU25pcHBldEJ1aWxkZXIoe1xuICAgIGN3ZCxcbiAgICBzbmlwcGV0SW50ZXJmYWNlLFxuICAgIHNuaXBwZXRTeW50YXgsXG4gICAgc3VwcG9ydENvZGVMaWJyYXJ5LFxuICB9OiBJR2V0U3RlcERlZmluaXRpb25TbmlwcGV0QnVpbGRlck9wdGlvbnMpIHtcbiAgICBpZiAoZG9lc05vdEhhdmVWYWx1ZShzbmlwcGV0SW50ZXJmYWNlKSkge1xuICAgICAgc25pcHBldEludGVyZmFjZSA9IFNuaXBwZXRJbnRlcmZhY2UuU3luY2hyb25vdXNcbiAgICB9XG4gICAgbGV0IFN5bnRheCA9IEphdmFzY3JpcHRTbmlwcGV0U3ludGF4XG4gICAgaWYgKGRvZXNIYXZlVmFsdWUoc25pcHBldFN5bnRheCkpIHtcbiAgICAgIFN5bnRheCA9IGF3YWl0IEZvcm1hdHRlckJ1aWxkZXIubG9hZEN1c3RvbUNsYXNzKFxuICAgICAgICAnc3ludGF4JyxcbiAgICAgICAgc25pcHBldFN5bnRheCxcbiAgICAgICAgY3dkXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBuZXcgU3RlcERlZmluaXRpb25TbmlwcGV0QnVpbGRlcih7XG4gICAgICBzbmlwcGV0U3ludGF4OiBuZXcgU3ludGF4KHNuaXBwZXRJbnRlcmZhY2UpLFxuICAgICAgcGFyYW1ldGVyVHlwZVJlZ2lzdHJ5OiBzdXBwb3J0Q29kZUxpYnJhcnkucGFyYW1ldGVyVHlwZVJlZ2lzdHJ5LFxuICAgIH0pXG4gIH0sXG5cbiAgYXN5bmMgbG9hZEN1c3RvbUNsYXNzKFxuICAgIHR5cGU6ICdmb3JtYXR0ZXInIHwgJ3N5bnRheCcsXG4gICAgZGVzY3JpcHRvcjogc3RyaW5nLFxuICAgIGN3ZDogc3RyaW5nXG4gICkge1xuICAgIGxldCBub3JtYWxpc2VkOiBVUkwgfCBzdHJpbmcgPSBkZXNjcmlwdG9yXG4gICAgaWYgKGRlc2NyaXB0b3Iuc3RhcnRzV2l0aCgnLicpKSB7XG4gICAgICBub3JtYWxpc2VkID0gcGF0aFRvRmlsZVVSTChwYXRoLnJlc29sdmUoY3dkLCBkZXNjcmlwdG9yKSlcbiAgICB9IGVsc2UgaWYgKGRlc2NyaXB0b3Iuc3RhcnRzV2l0aCgnZmlsZTovLycpKSB7XG4gICAgICBub3JtYWxpc2VkID0gbmV3IFVSTChkZXNjcmlwdG9yKVxuICAgIH1cbiAgICBsZXQgQ3VzdG9tQ2xhc3MgPSBhd2FpdCBGb3JtYXR0ZXJCdWlsZGVyLmxvYWRGaWxlKG5vcm1hbGlzZWQpXG4gICAgQ3VzdG9tQ2xhc3MgPSBGb3JtYXR0ZXJCdWlsZGVyLnJlc29sdmVDb25zdHJ1Y3RvcihDdXN0b21DbGFzcylcbiAgICBpZiAoZG9lc0hhdmVWYWx1ZShDdXN0b21DbGFzcykpIHtcbiAgICAgIHJldHVybiBDdXN0b21DbGFzc1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBDdXN0b20gJHt0eXBlfSAoJHtkZXNjcmlwdG9yfSkgZG9lcyBub3QgZXhwb3J0IGEgZnVuY3Rpb24vY2xhc3NgXG4gICAgICApXG4gICAgfVxuICB9LFxuXG4gIGFzeW5jIGxvYWRGaWxlKHVybE9yTmFtZTogVVJMIHwgc3RyaW5nKSB7XG4gICAgbGV0IHJlc3VsdFxuICAgIHRyeSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXZhci1yZXF1aXJlc1xuICAgICAgcmVzdWx0ID0gcmVxdWlyZSh0eXBlb2YgdXJsT3JOYW1lID09PSAnc3RyaW5nJ1xuICAgICAgICA/IHVybE9yTmFtZVxuICAgICAgICA6IGZpbGVVUkxUb1BhdGgodXJsT3JOYW1lKSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdFUlJfUkVRVUlSRV9FU00nKSB7XG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGltcG9ydGVyKHVybE9yTmFtZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IGVycm9yXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRcbiAgfSxcblxuICByZXNvbHZlQ29uc3RydWN0b3IoSW1wb3J0ZWRDb2RlOiBhbnkpIHtcbiAgICBpZiAoZG9lc05vdEhhdmVWYWx1ZShJbXBvcnRlZENvZGUpKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBpZiAodHlwZW9mIEltcG9ydGVkQ29kZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIEltcG9ydGVkQ29kZVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2YgSW1wb3J0ZWRDb2RlID09PSAnb2JqZWN0JyAmJlxuICAgICAgdHlwZW9mIEltcG9ydGVkQ29kZS5kZWZhdWx0ID09PSAnZnVuY3Rpb24nXG4gICAgKSB7XG4gICAgICByZXR1cm4gSW1wb3J0ZWRDb2RlLmRlZmF1bHRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSxcbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybWF0dGVyQnVpbGRlclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsTUFBQUEsZUFBQSxHQUFBQyxlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQywyQkFBQSxHQUFBRixlQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBRSxNQUFBLEdBQUFILGVBQUEsQ0FBQUMsT0FBQTtBQUNBLE1BQUFHLGlDQUFBLEdBQUFKLGVBQUEsQ0FBQUMsT0FBQTtBQU9BLE1BQUFJLGVBQUEsR0FBQUosT0FBQTtBQUlBLE1BQUFLLGdCQUFBLEdBQUFMLE9BQUE7QUFDQSxNQUFBTSxLQUFBLEdBQUFOLE9BQUE7QUFDQSxNQUFBTyxZQUFBLEdBQUFSLGVBQUEsQ0FBQUMsT0FBQTtBQUNBO0FBQ0EsTUFBTTtFQUFFUTtBQUFRLENBQUUsR0FBR1IsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQXFCM0MsTUFBTVMsZ0JBQWdCLEdBQUc7RUFDdkIsTUFBTUMsS0FBS0EsQ0FBQ0MsSUFBWSxFQUFFQyxPQUFzQjtJQUM5QyxNQUFNQyxvQkFBb0IsR0FBRyxNQUFNSixnQkFBZ0IsQ0FBQ0ssb0JBQW9CLENBQ3RFSCxJQUFJLEVBQ0pDLE9BQU8sQ0FBQ0csR0FBRyxDQUNaO0lBQ0QsTUFBTUMsUUFBUSxHQUFHLElBQUFsQixlQUFBLENBQUFtQixPQUFXLEVBQzFCTCxPQUFPLENBQUNNLE1BQU0sRUFDZE4sT0FBTyxDQUFDTyxHQUFHLEVBQ1hQLE9BQU8s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