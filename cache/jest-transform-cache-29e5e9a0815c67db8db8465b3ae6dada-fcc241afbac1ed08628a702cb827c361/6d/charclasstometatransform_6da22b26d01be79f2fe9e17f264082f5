473202285b5b7dea71ed951da23957b0
/**
 * The MIT License (MIT)
 * Copyright (c) 2017-present Dmitry Soshnikov <dmitry.soshnikov@gmail.com>
 */

'use strict';

/**
 * A regexp-tree plugin to replace standard character classes with
 * their meta symbols equivalents.
 */
function _toConsumableArray(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }
    return arr2;
  } else {
    return Array.from(arr);
  }
}
module.exports = {
  _hasIFlag: false,
  _hasUFlag: false,
  init: function init(ast) {
    this._hasIFlag = ast.flags.includes('i');
    this._hasUFlag = ast.flags.includes('u');
  },
  CharacterClass: function CharacterClass(path) {
    // [0-9] -> \d
    rewriteNumberRanges(path);

    // [a-zA-Z_0-9] -> \w
    rewriteWordRanges(path, this._hasIFlag, this._hasUFlag);

    // [ \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff] -> \s
    rewriteWhitespaceRanges(path);
  }
};

/**
 * Rewrites number ranges: [0-9] -> \d
 */
function rewriteNumberRanges(path) {
  var node = path.node;
  node.expressions.forEach(function (expression, i) {
    if (isFullNumberRange(expression)) {
      path.getChild(i).replace({
        type: 'Char',
        value: '\\d',
        kind: 'meta'
      });
    }
  });
}

/**
 * Rewrites word ranges: [a-zA-Z_0-9] -> \w
 * Thus, the ranges may go in any order, and other symbols/ranges
 * are kept untouched, e.g. [a-z_\dA-Z$] -> [\w$]
 */
function rewriteWordRanges(path, hasIFlag, hasUFlag) {
  var node = path.node;
  var numberPath = null;
  var lowerCasePath = null;
  var upperCasePath = null;
  var underscorePath = null;
  var u017fPath = null;
  var u212aPath = null;
  node.expressions.forEach(function (expression, i) {
    // \d
    if (isMetaChar(expression, '\\d')) {
      numberPath = path.getChild(i);
    }

    // a-z
    else if (isLowerCaseRange(expression)) {
      lowerCasePath = path.getChild(i);
    }

    // A-Z
    else if (isUpperCaseRange(expression)) {
      upperCasePath = path.getChild(i);
    }

    // _
    else if (isUnderscore(expression)) {
      underscorePath = path.getChild(i);
    } else if (hasIFlag && hasUFlag && isCodePoint(expression, 0x017f)) {
      u017fPath = path.getChild(i);
    } else if (hasIFlag && hasUFlag && isCodePoint(expression, 0x212a)) {
      u212aPath = path.getChild(i);
    }
  });

  // If we found the whole pattern, replace it.
  if (numberPath && (lowerCasePath && upperCasePath || hasIFlag && (lowerCasePath || upperCasePath)) && underscorePath && (!hasUFlag || !hasIFlag || u017fPath && u212aPath)) {
    // Put \w in place of \d.
    numberPath.replace({
      type: 'Char',
      value: '\\w',
      kind: 'meta'
    });

    // Other paths are removed.
    if (lowerCasePath) {
      lowerCasePath.remove();
    }
    if (upperCasePath) {
      upperCasePath.remove();
    }
    underscorePath.remove();
    if (u017fPath) {
      u017fPath.remove();
    }
    if (u212aPath) {
      u212aPath.remove();
    }
  }
}

/**
 * Rewrites whitespace ranges: [ \f\n\r\t\v\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff] -> \s.
 */
var whitespaceRangeTests = [function (node) {
  return isChar(node, ' ');
}].concat(_toConsumableArray(['\\f', '\\n', '\\r', '\\t', '\\v'].map(function (char) {
  return function (node) {
    return isMetaChar(node, char);
  };
})), _toConsumableArray([0x00a0, 0x1680, 0x2028, 0x2029, 0x202f, 0x205f, 0x3000, 0xfeff].map(function (codePoint) {
  return function (node) {
    return isCodePoint(node, codePoint);
  };
})), [function (node) {
  return node.type === 'ClassRange' && isCodePoint(node.from, 0x2000) && isCodePoint(node.to, 0x200a);
}]);
function rewriteWhitespaceRanges(path) {
  var node = path.node;
  if (node.expressions.length < whitespaceRangeTests.length || !whitespaceRangeTests.every(function (test) {
    return node.expressions.some(function (expression) {
      return test(expression);
    });
  })) {
    return;
  }

  // If we found the whole pattern, replace it.

  // Put \s in place of \n.
  var nNode = node.expressions.find(function (expression) {
    return isMetaChar(expression, '\\n');
  });
  nNode.value = '\\s';
  nNode.symbol = undefined;
  nNode.codePoint = NaN;

  // Other paths are removed.
  node.expressions.map(function (expression, i) {
    return whitespaceRangeTests.some(function (test) {
      return test(expression);
    }) ? path.getChild(i) : undefined;
  }).filter(Boolean).forEach(function (path) {
    return path.remove();
  });
}
function isFullNumberRange(node) {
  return node.type === 'ClassRange' && node.from.value === '0' && node.to.value === '9';
}
function isChar(node, value) {
  var kind = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'simple';
  return node.type === 'Char' && node.value === value && node.kind === kind;
}
function isMetaChar(node, value) {
  return isChar(node, value, 'meta');
}
function isLowerCaseRange(node) {
  return node.type === 'ClassRange' && node.from.value === 'a' && node.to.value === 'z';
}
function isUpperCaseRange(node) {
  return node.type === 'ClassRange' && node.from.value === 'A' && node.to.value === 'Z';
}
function isUnderscore(node) {
  return node.type === 'Char' && node.value === '_' && node.kind === 'simple';
}
function isCodePoint(node, codePoint) {
  return node.type === 'Char' && node.kind === 'unicode' && node.codePoint === codePoint;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJBcnJheSIsImlzQXJyYXkiLCJpIiwiYXJyMiIsImxlbmd0aCIsImZyb20iLCJtb2R1bGUiLCJleHBvcnRzIiwiX2hhc0lGbGFnIiwiX2hhc1VGbGFnIiwiaW5pdCIsImFzdCIsImZsYWdzIiwiaW5jbHVkZXMiLCJDaGFyYWN0ZXJDbGFzcyIsInBhdGgiLCJyZXdyaXRlTnVtYmVyUmFuZ2VzIiwicmV3cml0ZVdvcmRSYW5nZXMiLCJyZXdyaXRlV2hpdGVzcGFjZVJhbmdlcyIsIm5vZGUiLCJleHByZXNzaW9ucyIsImZvckVhY2giLCJleHByZXNzaW9uIiwiaXNGdWxsTnVtYmVyUmFuZ2UiLCJnZXRDaGlsZCIsInJlcGxhY2UiLCJ0eXBlIiwidmFsdWUiLCJraW5kIiwiaGFzSUZsYWciLCJoYXNVRmxhZyIsIm51bWJlclBhdGgiLCJsb3dlckNhc2VQYXRoIiwidXBwZXJDYXNlUGF0aCIsInVuZGVyc2NvcmVQYXRoIiwidTAxN2ZQYXRoIiwidTIxMmFQYXRoIiwiaXNNZXRhQ2hhciIsImlzTG93ZXJDYXNlUmFuZ2UiLCJpc1VwcGVyQ2FzZVJhbmdlIiwiaXNVbmRlcnNjb3JlIiwiaXNDb2RlUG9pbnQiLCJyZW1vdmUiLCJ3aGl0ZXNwYWNlUmFuZ2VUZXN0cyIsImlzQ2hhciIsImNvbmNhdCIsIm1hcCIsImNoYXIiLCJjb2RlUG9pbnQiLCJ0byIsImV2ZXJ5IiwidGVzdCIsInNvbWUiLCJuTm9kZSIsImZpbmQiLCJzeW1ib2wiLCJ1bmRlZmluZWQiLCJOYU4iLCJmaWx0ZXIiLCJCb29sZWFuIiwiYXJndW1lbnRzIl0sInNvdXJjZXMiOlsiY2hhci1jbGFzcy10by1tZXRhLXRyYW5zZm9ybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQgRG1pdHJ5IFNvc2huaWtvdiA8ZG1pdHJ5LnNvc2huaWtvdkBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgcmVnZXhwLXRyZWUgcGx1Z2luIHRvIHJlcGxhY2Ugc3RhbmRhcmQgY2hhcmFjdGVyIGNsYXNzZXMgd2l0aFxuICogdGhlaXIgbWV0YSBzeW1ib2xzIGVxdWl2YWxlbnRzLlxuICovXG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgX2hhc0lGbGFnOiBmYWxzZSxcbiAgX2hhc1VGbGFnOiBmYWxzZSxcbiAgaW5pdDogZnVuY3Rpb24gaW5pdChhc3QpIHtcbiAgICB0aGlzLl9oYXNJRmxhZyA9IGFzdC5mbGFncy5pbmNsdWRlcygnaScpO1xuICAgIHRoaXMuX2hhc1VGbGFnID0gYXN0LmZsYWdzLmluY2x1ZGVzKCd1Jyk7XG4gIH0sXG4gIENoYXJhY3RlckNsYXNzOiBmdW5jdGlvbiBDaGFyYWN0ZXJDbGFzcyhwYXRoKSB7XG4gICAgLy8gWzAtOV0gLT4gXFxkXG4gICAgcmV3cml0ZU51bWJlclJhbmdlcyhwYXRoKTtcblxuICAgIC8vIFthLXpBLVpfMC05XSAtPiBcXHdcbiAgICByZXdyaXRlV29yZFJhbmdlcyhwYXRoLCB0aGlzLl9oYXNJRmxhZywgdGhpcy5faGFzVUZsYWcpO1xuXG4gICAgLy8gWyBcXGZcXG5cXHJcXHRcXHZcXHUwMGEwXFx1MTY4MFxcdTIwMDAtXFx1MjAwYVxcdTIwMjhcXHUyMDI5XFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1ZmVmZl0gLT4gXFxzXG4gICAgcmV3cml0ZVdoaXRlc3BhY2VSYW5nZXMocGF0aCk7XG4gIH1cbn07XG5cbi8qKlxuICogUmV3cml0ZXMgbnVtYmVyIHJhbmdlczogWzAtOV0gLT4gXFxkXG4gKi9cbmZ1bmN0aW9uIHJld3JpdGVOdW1iZXJSYW5nZXMocGF0aCkge1xuICB2YXIgbm9kZSA9IHBhdGgubm9kZTtcblxuXG4gIG5vZGUuZXhwcmVzc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXhwcmVzc2lvbiwgaSkge1xuICAgIGlmIChpc0Z1bGxOdW1iZXJSYW5nZShleHByZXNzaW9uKSkge1xuICAgICAgcGF0aC5nZXRDaGlsZChpKS5yZXBsYWNlKHtcbiAgICAgICAgdHlwZTogJ0NoYXInLFxuICAgICAgICB2YWx1ZTogJ1xcXFxkJyxcbiAgICAgICAga2luZDogJ21ldGEnXG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufVxuXG4vKipcbiAqIFJld3JpdGVzIHdvcmQgcmFuZ2VzOiBbYS16QS1aXzAtOV0gLT4gXFx3XG4gKiBUaHVzLCB0aGUgcmFuZ2VzIG1heSBnbyBpbiBhbnkgb3JkZXIsIGFuZCBvdGhlciBzeW1ib2xzL3Jhbmdlc1xuICogYXJlIGtlcHQgdW50b3VjaGVkLCBlLmcuIFthLXpfXFxkQS1aJF0gLT4gW1xcdyRdXG4gKi9cbmZ1bmN0aW9uIHJld3JpdGVXb3JkUmFuZ2VzKHBhdGgsIGhhc0lGbGFnLCBoYXNVRmxhZykge1xuICB2YXIgbm9kZSA9IHBhdGgubm9kZTtcblxuXG4gIHZhciBudW1iZXJQYXRoID0gbnVsbDtcbiAgdmFyIGxvd2VyQ2FzZVBhdGggPSBudWxsO1xuICB2YXIgdXBwZXJDYXNlUGF0aCA9IG51bGw7XG4gIHZhciB1bmRlcnNjb3JlUGF0aCA9IG51bGw7XG4gIHZhciB1MDE3ZlBhdGggPSBudWxsO1xuICB2YXIgdTIxMmFQYXRoID0gbnVsbDtcblxuICBub2RlLmV4cHJlc3Npb25zLmZvckVhY2goZnVuY3Rpb24gKGV4cHJlc3Npb24sIGkpIHtcbiAgICAvLyBcXGRcbiAgICBpZiAoaXNNZXRhQ2hhcihleHByZXNzaW9uLCAnXFxcXGQnKSkge1xuICAgICAgbnVtYmVyUGF0aCA9IHBhdGguZ2V0Q2hpbGQoaSk7XG4gICAgfVxuXG4gICAgLy8gYS16XG4gICAgZWxzZSBpZiAoaXNMb3dlckNhc2VSYW5nZShleHByZXNzaW9uKSkge1xuICAgICAgICBsb3dlckNhc2VQYXRoID0gcGF0aC5nZXRDaGlsZChpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQS1aXG4gICAgICBlbHNlIGlmIChpc1VwcGVyQ2FzZVJhbmdlKGV4cHJlc3Npb24pKSB7XG4gICAgICAgICAgdXBwZXJDYXNlUGF0aCA9IHBhdGguZ2V0Q2hpbGQoaSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBfXG4gICAgICAgIGVsc2UgaWYgKGlzVW5kZXJzY29yZShleHByZXNzaW9uKSkge1xuICAgICAgICAgICAgdW5kZXJzY29yZVBhdGggPSBwYXRoLmdldENoaWxkKGkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoaGFzSUZsYWcgJiYgaGFzVUZsYWcgJiYgaXNDb2RlUG9pbnQoZXhwcmVzc2lvbiwgMHgwMTdmKSkge1xuICAgICAgICAgICAgdTAxN2ZQYXRoID0gcGF0aC5nZXRDaGlsZChpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0lGbGFnICYmIGhhc1VGbGFnICYmIGlzQ29kZVBvaW50KGV4cHJlc3Npb24sIDB4MjEyYSkpIHtcbiAgICAgICAgICAgIHUyMTJhUGF0aCA9IHBhdGguZ2V0Q2hpbGQoaSk7XG4gICAgICAgICAgfVxuICB9KTtcblxuICAvLyBJZiB3ZSBmb3VuZCB0aGUgd2hvbGUgcGF0dGVybiwgcmVwbGFjZSBpdC5cbiAgaWYgKG51bWJlclBhdGggJiYgKGxvd2VyQ2FzZVBhdGggJiYgdXBwZXJDYXNlUGF0aCB8fCBoYXNJRmxhZyAmJiAobG93ZXJDYXNlUGF0aCB8fCB1cHBlckNhc2VQYXRoKSkgJiYgdW5kZXJzY29yZVBhdGggJiYgKCFoYXNVRmxhZyB8fCAhaGFzSUZsYWcgfHwgdTAxN2ZQYXRoICYmIHUyMTJhUGF0aCkpIHtcbiAgICAvLyBQdXQgXFx3IGluIHBsYWNlIG9mIFxcZC5cbiAgICBudW1iZXJQYXRoLnJlcGxhY2Uoe1xuICAgICAgdHlwZTogJ0NoYXInLFxuICAgICAgdmFsdWU6ICdcXFxcdycsXG4gICAgICBraW5kOiAnbWV0YSdcbiAgICB9KTtcblxuICAgIC8vIE90aGVyIHBhdGhzIGFyZSByZW1vdmVkLlxuICAgIGlmIChsb3dlckNhc2VQYXRoKSB7XG4gICAgICBsb3dlckNhc2VQYXRoLnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodXBwZXJDYXNlUGF0aCkge1xuICAgICAgdXBwZXJDYXNlUGF0aC5yZW1vdmUoKTtcbiAgICB9XG4gICAgdW5kZXJzY29yZVBhdGgucmVtb3ZlKCk7XG4gICAgaWYgKHUwMTdmUGF0aCkge1xuICAgICAgdTAxN2ZQYXRoLnJlbW92ZSgpO1xuICAgIH1cbiAgICBpZiAodTIxMmFQYXRoKSB7XG4gICAgICB1MjEyYVBhdGgucmVtb3ZlKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmV3cml0ZXMgd2hpdGVzcGFjZSByYW5nZXM6IFsgXFxmXFxuXFxyXFx0XFx2XFx1MDBhMFxcdTE2ODBcXHUyMDAwLVxcdTIwMGFcXHUyMDI4XFx1MjAyOVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdWZlZmZdIC0+IFxccy5cbiAqL1xudmFyIHdoaXRlc3BhY2VSYW5nZVRlc3RzID0gW2Z1bmN0aW9uIChub2RlKSB7XG4gIHJldHVybiBpc0NoYXIobm9kZSwgJyAnKTtcbn1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoWydcXFxcZicsICdcXFxcbicsICdcXFxccicsICdcXFxcdCcsICdcXFxcdiddLm1hcChmdW5jdGlvbiAoY2hhcikge1xuICByZXR1cm4gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gaXNNZXRhQ2hhcihub2RlLCBjaGFyKTtcbiAgfTtcbn0pKSwgX3RvQ29uc3VtYWJsZUFycmF5KFsweDAwYTAsIDB4MTY4MCwgMHgyMDI4LCAweDIwMjksIDB4MjAyZiwgMHgyMDVmLCAweDMwMDAsIDB4ZmVmZl0ubWFwKGZ1bmN0aW9uIChjb2RlUG9pbnQpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGlzQ29kZVBvaW50KG5vZGUsIGNvZGVQb2ludCk7XG4gIH07XG59KSksIFtmdW5jdGlvbiAobm9kZSkge1xuICByZXR1cm4gbm9kZS50eXBlID09PSAnQ2xhc3NSYW5nZScgJiYgaXNDb2RlUG9pbnQobm9kZS5mcm9tLCAweDIwMDApICYmIGlzQ29kZVBvaW50KG5vZGUudG8sIDB4MjAwYSk7XG59XSk7XG5cbmZ1bmN0aW9uIHJld3JpdGVXaGl0ZXNwYWNlUmFuZ2VzKHBhdGgpIHtcbiAgdmFyIG5vZGUgPSBwYXRoLm5vZGU7XG5cblxuICBpZiAobm9kZS5leHByZXNzaW9ucy5sZW5ndGggPCB3aGl0ZXNwYWNlUmFuZ2VUZXN0cy5sZW5ndGggfHwgIXdoaXRlc3BhY2VSYW5nZVRlc3RzLmV2ZXJ5KGZ1bmN0aW9uICh0ZXN0KSB7XG4gICAgcmV0dXJuIG5vZGUuZXhwcmVzc2lvbnMuc29tZShmdW5jdGlvbiAoZXhwcmVzc2lvbikge1xuICAgICAgcmV0dXJuIHRlc3QoZXhwcmVzc2lvbik7XG4gICAgfSk7XG4gIH0pKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgd2UgZm91bmQgdGhlIHdob2xlIHBhdHRlcm4sIHJlcGxhY2UgaXQuXG5cbiAgLy8gUHV0IFxccyBpbiBwbGFjZSBvZiBcXG4uXG4gIHZhciBuTm9kZSA9IG5vZGUuZXhwcmVzc2lvbnMuZmluZChmdW5jdGlvbiAoZXhwcmVzc2lvbikge1xuICAgIHJldHVybiBpc01ldGFDaGFyKGV4cHJlc3Npb24sICdcXFxcbicpO1xuICB9KTtcbiAgbk5vZGUudmFsdWUgPSAnXFxcXHMnO1xuICBuTm9kZS5zeW1ib2wgPSB1bmRlZmluZWQ7XG4gIG5Ob2RlLmNvZGVQb2ludCA9IE5hTjtcblxuICAvLyBPdGhlciBwYXRocyBhcmUgcmVtb3ZlZC5cbiAgbm9kZS5leHByZXNzaW9ucy5tYXAoZnVuY3Rpb24gKGV4cHJlc3Npb24sIGkpIHtcbiAgICByZXR1cm4gd2hpdGVzcGFjZVJhbmdlVGVzdHMuc29tZShmdW5jdGlvbiAodGVzdCkge1xuICAgICAgcmV0dXJuIHRlc3QoZXhwcmVzc2lvbik7XG4gICAgfSkgPyBwYXRoLmdldENoaWxkKGkpIDogdW5kZWZpbmVkO1xuICB9KS5maWx0ZXIoQm9vbGVhbikuZm9yRWFjaChmdW5jdGlvbiAocGF0aCkge1xuICAgIHJldHVybiBwYXRoLnJlbW92ZSgpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gaXNGdWxsTnVtYmVyUmFuZ2Uobm9kZSkge1xuICByZXR1cm4gbm9kZS50eXBlID09PSAnQ2xhc3NSYW5nZScgJiYgbm9kZS5mcm9tLnZhbHVlID09PSAnMCcgJiYgbm9kZS50by52YWx1ZSA9PT0gJzknO1xufVxuXG5mdW5jdGlvbiBpc0NoYXIobm9kZSwgdmFsdWUpIHtcbiAgdmFyIGtpbmQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6ICdzaW1wbGUnO1xuXG4gIHJldHVybiBub2RlLnR5cGUgPT09ICdDaGFyJyAmJiBub2RlLnZhbHVlID09PSB2YWx1ZSAmJiBub2RlLmtpbmQgPT09IGtpbmQ7XG59XG5cbmZ1bmN0aW9uIGlzTWV0YUNoYXIobm9kZSwgdmFsdWUpIHtcbiAgcmV0dXJuIGlzQ2hhcihub2RlLCB2YWx1ZSwgJ21ldGEnKTtcbn1cblxuZnVuY3Rpb24gaXNMb3dlckNhc2VSYW5nZShub2RlKSB7XG4gIHJldHVybiBub2RlLnR5cGUgPT09ICdDbGFzc1JhbmdlJyAmJiBub2RlLmZyb20udmFsdWUgPT09ICdhJyAmJiBub2RlLnRvLnZhbHVlID09PSAneic7XG59XG5cbmZ1bmN0aW9uIGlzVXBwZXJDYXNlUmFuZ2Uobm9kZSkge1xuICByZXR1cm4gbm9kZS50eXBlID09PSAnQ2xhc3NSYW5nZScgJiYgbm9kZS5mcm9tLnZhbHVlID09PSAnQScgJiYgbm9kZS50by52YWx1ZSA9PT0gJ1onO1xufVxuXG5mdW5jdGlvbiBpc1VuZGVyc2NvcmUobm9kZSkge1xuICByZXR1cm4gbm9kZS50eXBlID09PSAnQ2hhcicgJiYgbm9kZS52YWx1ZSA9PT0gJ18nICYmIG5vZGUua2luZCA9PT0gJ3NpbXBsZSc7XG59XG5cbmZ1bmN0aW9uIGlzQ29kZVBvaW50KG5vZGUsIGNvZGVQb2ludCkge1xuICByZXR1cm4gbm9kZS50eXBlID09PSAnQ2hhcicgJiYgbm9kZS5raW5kID09PSAndW5pY29kZScgJiYgbm9kZS5jb2RlUG9pbnQgPT09IGNvZGVQb2ludDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFlBQVk7O0FBRVo7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFTQSxrQkFBa0JBLENBQUNDLEdBQUcsRUFBRTtFQUFFLElBQUlDLEtBQUssQ0FBQ0MsT0FBTyxDQUFDRixHQUFHLENBQUMsRUFBRTtJQUFFLEtBQUssSUFBSUcsQ0FBQyxHQUFHLENBQUMsRUFBRUMsSUFBSSxHQUFHSCxLQUFLLENBQUNELEdBQUcsQ0FBQ0ssTUFBTSxDQUFDLEVBQUVGLENBQUMsR0FBR0gsR0FBRyxDQUFDSyxNQUFNLEVBQUVGLENBQUMsRUFBRSxFQUFFO01BQUVDLElBQUksQ0FBQ0QsQ0FBQyxDQUFDLEdBQUdILEdBQUcsQ0FBQ0csQ0FBQyxDQUFDO0lBQUU7SUFBRSxPQUFPQyxJQUFJO0VBQUUsQ0FBQyxNQUFNO0lBQUUsT0FBT0gsS0FBSyxDQUFDSyxJQUFJLENBQUNOLEdBQUcsQ0FBQztFQUFFO0FBQUU7QUFFbE1PLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZDLFNBQVMsRUFBRSxLQUFLO0VBQ2hCQyxTQUFTLEVBQUUsS0FBSztFQUNoQkMsSUFBSSxFQUFFLFNBQVNBLElBQUlBLENBQUNDLEdBQUcsRUFBRTtJQUN2QixJQUFJLENBQUNILFNBQVMsR0FBR0csR0FBRyxDQUFDQyxLQUFLLENBQUNDLFFBQVEsQ0FBQyxHQUFHLENBQUM7SUFDeEMsSUFBSSxDQUFDSixTQUFTLEdBQUdFLEdBQUcsQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRLENB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