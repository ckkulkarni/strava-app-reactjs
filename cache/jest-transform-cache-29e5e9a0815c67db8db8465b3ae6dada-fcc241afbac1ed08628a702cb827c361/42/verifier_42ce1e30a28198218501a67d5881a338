9fe36ffdc4e9f39a44872f11d6e502fe
"use strict";

module.exports = verifier;
var Enum = require("./enum"),
  util = require("./util");
function invalid(field, expected) {
  return field.name + ": " + expected + (field.repeated && expected !== "array" ? "[]" : field.map && expected !== "object" ? "{k:" + field.keyType + "}" : "") + " expected";
}

/**
 * Generates a partial value verifier.
 * @param {Codegen} gen Codegen instance
 * @param {Field} field Reflected field
 * @param {number} fieldIndex Field index
 * @param {string} ref Variable reference
 * @returns {Codegen} Codegen instance
 * @ignore
 */
function genVerifyValue(gen, field, fieldIndex, ref) {
  /* eslint-disable no-unexpected-multiline */
  if (field.resolvedType) {
    if (field.resolvedType instanceof Enum) {
      gen("switch(%s){", ref)("default:")("return%j", invalid(field, "enum value"));
      for (var keys = Object.keys(field.resolvedType.values), j = 0; j < keys.length; ++j) gen("case %i:", field.resolvedType.values[keys[j]]);
      gen("break")("}");
    } else {
      gen("{")("var e=types[%i].verify(%s);", fieldIndex, ref)("if(e)")("return%j+e", field.name + ".")("}");
    }
  } else {
    switch (field.type) {
      case "int32":
      case "uint32":
      case "sint32":
      case "fixed32":
      case "sfixed32":
        gen("if(!util.isInteger(%s))", ref)("return%j", invalid(field, "integer"));
        break;
      case "int64":
      case "uint64":
      case "sint64":
      case "fixed64":
      case "sfixed64":
        gen("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))", ref, ref, ref, ref)("return%j", invalid(field, "integer|Long"));
        break;
      case "float":
      case "double":
        gen("if(typeof %s!==\"number\")", ref)("return%j", invalid(field, "number"));
        break;
      case "bool":
        gen("if(typeof %s!==\"boolean\")", ref)("return%j", invalid(field, "boolean"));
        break;
      case "string":
        gen("if(!util.isString(%s))", ref)("return%j", invalid(field, "string"));
        break;
      case "bytes":
        gen("if(!(%s&&typeof %s.length===\"number\"||util.isString(%s)))", ref, ref, ref)("return%j", invalid(field, "buffer"));
        break;
    }
  }
  return gen;
  /* eslint-enable no-unexpected-multiline */
}

/**
 * Generates a partial key verifier.
 * @param {Codegen} gen Codegen instance
 * @param {Field} field Reflected field
 * @param {string} ref Variable reference
 * @returns {Codegen} Codegen instance
 * @ignore
 */
function genVerifyKey(gen, field, ref) {
  /* eslint-disable no-unexpected-multiline */
  switch (field.keyType) {
    case "int32":
    case "uint32":
    case "sint32":
    case "fixed32":
    case "sfixed32":
      gen("if(!util.key32Re.test(%s))", ref)("return%j", invalid(field, "integer key"));
      break;
    case "int64":
    case "uint64":
    case "sint64":
    case "fixed64":
    case "sfixed64":
      gen("if(!util.key64Re.test(%s))", ref) // see comment above: x is ok, d is not
      ("return%j", invalid(field, "integer|Long key"));
      break;
    case "bool":
      gen("if(!util.key2Re.test(%s))", ref)("return%j", invalid(field, "boolean key"));
      break;
  }
  return gen;
  /* eslint-enable no-unexpected-multiline */
}

/**
 * Generates a verifier specific to the specified message type.
 * @param {Type} mtype Message type
 * @returns {Codegen} Codegen instance
 */
function verifier(mtype) {
  /* eslint-disable no-unexpected-multiline */

  var gen = util.codegen(["m"], mtype.name + "$verify")("if(typeof m!==\"object\"||m===null)")("return%j", "object expected");
  var oneofs = mtype.oneofsArray,
    seenFirstField = {};
  if (oneofs.length) gen("var p={}");
  for (var i = 0; i < /* initializes */mtype.fieldsArray.length; ++i) {
    var field = mtype._fieldsArray[i].resolve(),
      ref = "m" + util.safeProp(field.name);
    if (field.optional) gen("if(%s!=null&&m.hasOwnProperty(%j)){", ref, field.name); // !== undefined && !== null

    // map fields
    if (field.map) {
      gen("if(!util.isObject(%s))", ref)("return%j", invalid(field, "object"))("var k=Object.keys(%s)", ref)("for(var i=0;i<k.length;++i){");
      genVerifyKey(gen, field, "k[i]");
      genVerifyValue(gen, field, i, ref + "[k[i]]")("}");

      // repeated fields
    } else if (field.repeated) {
      gen("if(!Array.isArray(%s))", ref)("return%j", invalid(field, "array"))("for(var i=0;i<%s.length;++i){", ref);
      genVerifyValue(gen, field, i, ref + "[i]")("}");

      // required or present fields
    } else {
      if (field.partOf) {
        var oneofProp = util.safeProp(field.partOf.name);
        if (seenFirstField[field.partOf.name] === 1) gen("if(p%s===1)", oneofProp)("return%j", field.partOf.name + ": multiple values");
        seenFirstField[field.partOf.name] = 1;
        gen("p%s=1", oneofProp);
      }
      genVerifyValue(gen, field, i, ref);
    }
    if (field.optional) gen("}");
  }
  return gen("return null");
  /* eslint-enable no-unexpected-multiline */
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwidmVyaWZpZXIiLCJFbnVtIiwicmVxdWlyZSIsInV0aWwiLCJpbnZhbGlkIiwiZmllbGQiLCJleHBlY3RlZCIsIm5hbWUiLCJyZXBlYXRlZCIsIm1hcCIsImtleVR5cGUiLCJnZW5WZXJpZnlWYWx1ZSIsImdlbiIsImZpZWxkSW5kZXgiLCJyZWYiLCJyZXNvbHZlZFR5cGUiLCJrZXlzIiwiT2JqZWN0IiwidmFsdWVzIiwiaiIsImxlbmd0aCIsInR5cGUiLCJnZW5WZXJpZnlLZXkiLCJtdHlwZSIsImNvZGVnZW4iLCJvbmVvZnMiLCJvbmVvZnNBcnJheSIsInNlZW5GaXJzdEZpZWxkIiwiaSIsImZpZWxkc0FycmF5IiwiX2ZpZWxkc0FycmF5IiwicmVzb2x2ZSIsInNhZmVQcm9wIiwib3B0aW9uYWwiLCJwYXJ0T2YiLCJvbmVvZlByb3AiXSwic291cmNlcyI6WyJ2ZXJpZmllci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbm1vZHVsZS5leHBvcnRzID0gdmVyaWZpZXI7XG5cbnZhciBFbnVtICAgICAgPSByZXF1aXJlKFwiLi9lbnVtXCIpLFxuICAgIHV0aWwgICAgICA9IHJlcXVpcmUoXCIuL3V0aWxcIik7XG5cbmZ1bmN0aW9uIGludmFsaWQoZmllbGQsIGV4cGVjdGVkKSB7XG4gICAgcmV0dXJuIGZpZWxkLm5hbWUgKyBcIjogXCIgKyBleHBlY3RlZCArIChmaWVsZC5yZXBlYXRlZCAmJiBleHBlY3RlZCAhPT0gXCJhcnJheVwiID8gXCJbXVwiIDogZmllbGQubWFwICYmIGV4cGVjdGVkICE9PSBcIm9iamVjdFwiID8gXCJ7azpcIitmaWVsZC5rZXlUeXBlK1wifVwiIDogXCJcIikgKyBcIiBleHBlY3RlZFwiO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHBhcnRpYWwgdmFsdWUgdmVyaWZpZXIuXG4gKiBAcGFyYW0ge0NvZGVnZW59IGdlbiBDb2RlZ2VuIGluc3RhbmNlXG4gKiBAcGFyYW0ge0ZpZWxkfSBmaWVsZCBSZWZsZWN0ZWQgZmllbGRcbiAqIEBwYXJhbSB7bnVtYmVyfSBmaWVsZEluZGV4IEZpZWxkIGluZGV4XG4gKiBAcGFyYW0ge3N0cmluZ30gcmVmIFZhcmlhYmxlIHJlZmVyZW5jZVxuICogQHJldHVybnMge0NvZGVnZW59IENvZGVnZW4gaW5zdGFuY2VcbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gZ2VuVmVyaWZ5VmFsdWUoZ2VuLCBmaWVsZCwgZmllbGRJbmRleCwgcmVmKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5leHBlY3RlZC1tdWx0aWxpbmUgKi9cbiAgICBpZiAoZmllbGQucmVzb2x2ZWRUeXBlKSB7XG4gICAgICAgIGlmIChmaWVsZC5yZXNvbHZlZFR5cGUgaW5zdGFuY2VvZiBFbnVtKSB7IGdlblxuICAgICAgICAgICAgKFwic3dpdGNoKCVzKXtcIiwgcmVmKVxuICAgICAgICAgICAgICAgIChcImRlZmF1bHQ6XCIpXG4gICAgICAgICAgICAgICAgICAgIChcInJldHVybiVqXCIsIGludmFsaWQoZmllbGQsIFwiZW51bSB2YWx1ZVwiKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXlzID0gT2JqZWN0LmtleXMoZmllbGQucmVzb2x2ZWRUeXBlLnZhbHVlcyksIGogPSAwOyBqIDwga2V5cy5sZW5ndGg7ICsraikgZ2VuXG4gICAgICAgICAgICAgICAgKFwiY2FzZSAlaTpcIiwgZmllbGQucmVzb2x2ZWRUeXBlLnZhbHVlc1trZXlzW2pdXSk7XG4gICAgICAgICAgICBnZW5cbiAgICAgICAgICAgICAgICAgICAgKFwiYnJlYWtcIilcbiAgICAgICAgICAgIChcIn1cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW5cbiAgICAgICAgICAgIChcIntcIilcbiAgICAgICAgICAgICAgICAoXCJ2YXIgZT10eXBlc1slaV0udmVyaWZ5KCVzKTtcIiwgZmllbGRJbmRleCwgcmVmKVxuICAgICAgICAgICAgICAgIChcImlmKGUpXCIpXG4gICAgICAgICAgICAgICAgICAgIChcInJldHVybiVqK2VcIiwgZmllbGQubmFtZSArIFwiLlwiKVxuICAgICAgICAgICAgKFwifVwiKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoZmllbGQudHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcImludDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwidWludDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwic2ludDMyXCI6XG4gICAgICAgICAgICBjYXNlIFwiZml4ZWQzMlwiOlxuICAgICAgICAgICAgY2FzZSBcInNmaXhlZDMyXCI6IGdlblxuICAgICAgICAgICAgICAgIChcImlmKCF1dGlsLmlzSW50ZWdlciglcykpXCIsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgKFwicmV0dXJuJWpcIiwgaW52YWxpZChmaWVsZCwgXCJpbnRlZ2VyXCIpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJpbnQ2NFwiOlxuICAgICAgICAgICAgY2FzZSBcInVpbnQ2NFwiOlxuICAgICAgICAgICAgY2FzZSBcInNpbnQ2NFwiOlxuICAgICAgICAgICAgY2FzZSBcImZpeGVkNjRcIjpcbiAgICAgICAgICAgIGNhc2UgXCJzZml4ZWQ2NFwiOiBnZW5cbiAgICAgICAgICAgICAgICAoXCJpZighdXRpbC5pc0ludGVnZXIoJXMpJiYhKCVzJiZ1dGlsLmlzSW50ZWdlciglcy5sb3cpJiZ1dGlsLmlzSW50ZWdlciglcy5oaWdoKSkpXCIsIHJlZiwgcmVmLCByZWYsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgKFwicmV0dXJuJWpcIiwgaW52YWxpZChmaWVsZCwgXCJpbnRlZ2VyfExvbmdcIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImZsb2F0XCI6XG4gICAgICAgICAgICBjYXNlIFwiZG91YmxlXCI6IGdlblxuICAgICAgICAgICAgICAgIChcImlmKHR5cGVvZiAlcyE9PVxcXCJudW1iZXJcXFwiKVwiLCByZWYpXG4gICAgICAgICAgICAgICAgICAgIChcInJldHVybiVqXCIsIGludmFsaWQoZmllbGQsIFwibnVtYmVyXCIpKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJib29sXCI6IGdlblxuICAgICAgICAgICAgICAgIChcImlmKHR5cGVvZiAlcyE9PVxcXCJib29sZWFuXFxcIilcIiwgcmVmKVxuICAgICAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBpbnZhbGlkKGZpZWxkLCBcImJvb2xlYW5cIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcInN0cmluZ1wiOiBnZW5cbiAgICAgICAgICAgICAgICAoXCJpZighdXRpbC5pc1N0cmluZyglcykpXCIsIHJlZilcbiAgICAgICAgICAgICAgICAgICAgKFwicmV0dXJuJWpcIiwgaW52YWxpZChmaWVsZCwgXCJzdHJpbmdcIikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImJ5dGVzXCI6IGdlblxuICAgICAgICAgICAgICAgIChcImlmKCEoJXMmJnR5cGVvZiAlcy5sZW5ndGg9PT1cXFwibnVtYmVyXFxcInx8dXRpbC5pc1N0cmluZyglcykpKVwiLCByZWYsIHJlZiwgcmVmKVxuICAgICAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBpbnZhbGlkKGZpZWxkLCBcImJ1ZmZlclwiKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGdlbjtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVuZXhwZWN0ZWQtbXVsdGlsaW5lICovXG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgcGFydGlhbCBrZXkgdmVyaWZpZXIuXG4gKiBAcGFyYW0ge0NvZGVnZW59IGdlbiBDb2RlZ2VuIGluc3RhbmNlXG4gKiBAcGFyYW0ge0ZpZWxkfSBmaWVsZCBSZWZsZWN0ZWQgZmllbGRcbiAqIEBwYXJhbSB7c3RyaW5nfSByZWYgVmFyaWFibGUgcmVmZXJlbmNlXG4gKiBAcmV0dXJucyB7Q29kZWdlbn0gQ29kZWdlbiBpbnN0YW5jZVxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBnZW5WZXJpZnlLZXkoZ2VuLCBmaWVsZCwgcmVmKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5leHBlY3RlZC1tdWx0aWxpbmUgKi9cbiAgICBzd2l0Y2ggKGZpZWxkLmtleVR5cGUpIHtcbiAgICAgICAgY2FzZSBcImludDMyXCI6XG4gICAgICAgIGNhc2UgXCJ1aW50MzJcIjpcbiAgICAgICAgY2FzZSBcInNpbnQzMlwiOlxuICAgICAgICBjYXNlIFwiZml4ZWQzMlwiOlxuICAgICAgICBjYXNlIFwic2ZpeGVkMzJcIjogZ2VuXG4gICAgICAgICAgICAoXCJpZighdXRpbC5rZXkzMlJlLnRlc3QoJXMpKVwiLCByZWYpXG4gICAgICAgICAgICAgICAgKFwicmV0dXJuJWpcIiwgaW52YWxpZChmaWVsZCwgXCJpbnRlZ2VyIGtleVwiKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImludDY0XCI6XG4gICAgICAgIGNhc2UgXCJ1aW50NjRcIjpcbiAgICAgICAgY2FzZSBcInNpbnQ2NFwiOlxuICAgICAgICBjYXNlIFwiZml4ZWQ2NFwiOlxuICAgICAgICBjYXNlIFwic2ZpeGVkNjRcIjogZ2VuXG4gICAgICAgICAgICAoXCJpZighdXRpbC5rZXk2NFJlLnRlc3QoJXMpKVwiLCByZWYpIC8vIHNlZSBjb21tZW50IGFib3ZlOiB4IGlzIG9rLCBkIGlzIG5vdFxuICAgICAgICAgICAgICAgIChcInJldHVybiVqXCIsIGludmFsaWQoZmllbGQsIFwiaW50ZWdlcnxMb25nIGtleVwiKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImJvb2xcIjogZ2VuXG4gICAgICAgICAgICAoXCJpZighdXRpbC5rZXkyUmUudGVzdCglcykpXCIsIHJlZilcbiAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBpbnZhbGlkKGZpZWxkLCBcImJvb2xlYW4ga2V5XCIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZ2VuO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW5leHBlY3RlZC1tdWx0aWxpbmUgKi9cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB2ZXJpZmllciBzcGVjaWZpYyB0byB0aGUgc3BlY2lmaWVkIG1lc3NhZ2UgdHlwZS5cbiAqIEBwYXJhbSB7VHlwZX0gbXR5cGUgTWVzc2FnZSB0eXBlXG4gKiBAcmV0dXJucyB7Q29kZWdlbn0gQ29kZWdlbiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiB2ZXJpZmllcihtdHlwZSkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZXhwZWN0ZWQtbXVsdGlsaW5lICovXG5cbiAgICB2YXIgZ2VuID0gdXRpbC5jb2RlZ2VuKFtcIm1cIl0sIG10eXBlLm5hbWUgKyBcIiR2ZXJpZnlcIilcbiAgICAoXCJpZih0eXBlb2YgbSE9PVxcXCJvYmplY3RcXFwifHxtPT09bnVsbClcIilcbiAgICAgICAgKFwicmV0dXJuJWpcIiwgXCJvYmplY3QgZXhwZWN0ZWRcIik7XG4gICAgdmFyIG9uZW9mcyA9IG10eXBlLm9uZW9mc0FycmF5LFxuICAgICAgICBzZWVuRmlyc3RGaWVsZCA9IHt9O1xuICAgIGlmIChvbmVvZnMubGVuZ3RoKSBnZW5cbiAgICAoXCJ2YXIgcD17fVwiKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgLyogaW5pdGlhbGl6ZXMgKi8gbXR5cGUuZmllbGRzQXJyYXkubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGZpZWxkID0gbXR5cGUuX2ZpZWxkc0FycmF5W2ldLnJlc29sdmUoKSxcbiAgICAgICAgICAgIHJlZiAgID0gXCJtXCIgKyB1dGlsLnNhZmVQcm9wKGZpZWxkLm5hbWUpO1xuXG4gICAgICAgIGlmIChmaWVsZC5vcHRpb25hbCkgZ2VuXG4gICAgICAgIChcImlmKCVzIT1udWxsJiZtLmhhc093blByb3BlcnR5KCVqKSl7XCIsIHJlZiwgZmllbGQubmFtZSk7IC8vICE9PSB1bmRlZmluZWQgJiYgIT09IG51bGxcblxuICAgICAgICAvLyBtYXAgZmllbGRzXG4gICAgICAgIGlmIChmaWVsZC5tYXApIHsgZ2VuXG4gICAgICAgICAgICAoXCJpZighdXRpbC5pc09iamVjdCglcykpXCIsIHJlZilcbiAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBpbnZhbGlkKGZpZWxkLCBcIm9iamVjdFwiKSlcbiAgICAgICAgICAgIChcInZhciBrPU9iamVjdC5rZXlzKCVzKVwiLCByZWYpXG4gICAgICAgICAgICAoXCJmb3IodmFyIGk9MDtpPGsubGVuZ3RoOysraSl7XCIpO1xuICAgICAgICAgICAgICAgIGdlblZlcmlmeUtleShnZW4sIGZpZWxkLCBcImtbaV1cIik7XG4gICAgICAgICAgICAgICAgZ2VuVmVyaWZ5VmFsdWUoZ2VuLCBmaWVsZCwgaSwgcmVmICsgXCJba1tpXV1cIilcbiAgICAgICAgICAgIChcIn1cIik7XG5cbiAgICAgICAgLy8gcmVwZWF0ZWQgZmllbGRzXG4gICAgICAgIH0gZWxzZSBpZiAoZmllbGQucmVwZWF0ZWQpIHsgZ2VuXG4gICAgICAgICAgICAoXCJpZighQXJyYXkuaXNBcnJheSglcykpXCIsIHJlZilcbiAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBpbnZhbGlkKGZpZWxkLCBcImFycmF5XCIpKVxuICAgICAgICAgICAgKFwiZm9yKHZhciBpPTA7aTwlcy5sZW5ndGg7KytpKXtcIiwgcmVmKTtcbiAgICAgICAgICAgICAgICBnZW5WZXJpZnlWYWx1ZShnZW4sIGZpZWxkLCBpLCByZWYgKyBcIltpXVwiKVxuICAgICAgICAgICAgKFwifVwiKTtcblxuICAgICAgICAvLyByZXF1aXJlZCBvciBwcmVzZW50IGZpZWxkc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKGZpZWxkLnBhcnRPZikge1xuICAgICAgICAgICAgICAgIHZhciBvbmVvZlByb3AgPSB1dGlsLnNhZmVQcm9wKGZpZWxkLnBhcnRPZi5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VlbkZpcnN0RmllbGRbZmllbGQucGFydE9mLm5hbWVdID09PSAxKSBnZW5cbiAgICAgICAgICAgIChcImlmKHAlcz09PTEpXCIsIG9uZW9mUHJvcClcbiAgICAgICAgICAgICAgICAoXCJyZXR1cm4lalwiLCBmaWVsZC5wYXJ0T2YubmFtZSArIFwiOiBtdWx0aXBsZSB2YWx1ZXNcIik7XG4gICAgICAgICAgICAgICAgc2VlbkZpcnN0RmllbGRbZmllbGQucGFydE9mLm5hbWVdID0gMTtcbiAgICAgICAgICAgICAgICBnZW5cbiAgICAgICAgICAgIChcInAlcz0xXCIsIG9uZW9mUHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZW5WZXJpZnlWYWx1ZShnZW4sIGZpZWxkLCBpLCByZWYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZC5vcHRpb25hbCkgZ2VuXG4gICAgICAgIChcIn1cIik7XG4gICAgfVxuICAgIHJldHVybiBnZW5cbiAgICAoXCJyZXR1cm4gbnVsbFwiKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVuZXhwZWN0ZWQtbXVsdGlsaW5lICovXG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUNaQSxNQUFNLENBQUNDLE9BQU8sR0FBR0MsUUFBUTtBQUV6QixJQUFJQyxJQUFJLEdBQVFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7RUFDN0JDLElBQUksR0FBUUQsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUVqQyxTQUFTRSxPQUFPQSxDQUFDQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtFQUM5QixPQUFPRCxLQUFLLENBQUNFLElBQUksR0FBRyxJQUFJLEdBQUdELFFBQVEsSUFBSUQsS0FBSyxDQUFDRyxRQUFRLElBQUlGLFFBQVEsS0FBSyxPQUFPLEdBQUcsSUFBSSxHQUFHRCxLQUFLLENBQUNJLEdBQUcs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