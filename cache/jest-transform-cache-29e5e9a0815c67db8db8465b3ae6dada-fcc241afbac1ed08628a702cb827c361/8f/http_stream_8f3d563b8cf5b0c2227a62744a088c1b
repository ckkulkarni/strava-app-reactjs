25314c6ac3e9af1a962d514ce68e636d
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
const stream_1 = require("stream");
const tmp_1 = __importDefault(require("tmp"));
const fs_1 = __importDefault(require("fs"));
const http_1 = __importDefault(require("http"));
const https_1 = __importDefault(require("https"));
const value_checker_1 = require("../value_checker");
/**
 * This Writable writes data to a HTTP/HTTPS URL.
 *
 * It has special handling for https://reports.cucumber.io/
 * which uses an API where the first request is a `GET`,
 * and if the response is 202 with a Location header, issues
 * a PUT request to that URL.
 *
 * 3xx redirects are not currently followed.
 */
class HttpStream extends stream_1.Transform {
  constructor(url, method, headers) {
    super({
      readableObjectMode: true
    });
    this.url = url;
    this.method = method;
    this.headers = headers;
  }
  _write(chunk, encoding, callback) {
    if (this.tempFile === undefined) {
      tmp_1.default.file((err, name, fd) => {
        if ((0, value_checker_1.doesHaveValue)(err)) return callback(err);
        this.tempFilePath = name;
        this.tempFile = fs_1.default.createWriteStream(name, {
          fd
        });
        this.tempFile.write(chunk, encoding, callback);
      });
    } else {
      this.tempFile.write(chunk, encoding, callback);
    }
  }
  _final(callback) {
    this.tempFile.end(() => {
      this.sendHttpRequest(this.url, this.method, this.headers, (err1, res1) => {
        if ((0, value_checker_1.doesHaveValue)(err1)) return callback(err1);
        this.pushResponseBody(res1, () => {
          this.emitErrorUnlessHttp2xx(res1, this.url, this.method);
          if (res1.statusCode === 202 && res1.headers.location !== undefined) {
            this.sendHttpRequest(res1.headers.location, 'PUT', {}, (err2, res2) => {
              if ((0, value_checker_1.doesHaveValue)(err2)) return callback(err2);
              this.emitErrorUnlessHttp2xx(res2, this.url, this.method);
              callback();
            });
          } else {
            callback();
          }
        });
      });
    });
  }
  pushResponseBody(res, done) {
    let body = Buffer.alloc(0);
    res.on('data', chunk => {
      body = Buffer.concat([body, chunk]);
    });
    res.on('end', () => {
      this.push(body.toString('utf-8'));
      done();
    });
  }
  emitErrorUnlessHttp2xx(res, url, method) {
    if (res.statusCode >= 300) this.emit('error', new Error(`Unexpected http status ${res.statusCode} from ${method} ${url}`));
  }
  sendHttpRequest(url, method, headers, callback) {
    const httpx = (0, value_checker_1.doesHaveValue)(url.match(/^https:/)) ? https_1.default : http_1.default;
    const additionalHttpHeaders = {};
    const upload = method === 'PUT' || method === 'POST';
    if (upload) {
      additionalHttpHeaders['Content-Length'] = fs_1.default.statSync(this.tempFilePath).size;
    }
    const allHeaders = {
      ...headers,
      ...additionalHttpHeaders
    };
    const req = httpx.request(url, {
      method,
      headers: allHeaders
    });
    req.on('error', err => this.emit('error', err));
    req.on('response', res => {
      res.on('error', err => this.emit('error', err));
      callback(null, res);
    });
    if (upload) {
      (0, stream_1.pipeline)(fs_1.default.createReadStream(this.tempFilePath), req, err => {
        if ((0, value_checker_1.doesHaveValue)(err)) {
          this.emit('error', err);
        }
      });
    } else {
      req.end();
    }
  }
}
exports.default = HttpStream;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzdHJlYW1fMSIsInJlcXVpcmUiLCJ0bXBfMSIsIl9faW1wb3J0RGVmYXVsdCIsImZzXzEiLCJodHRwXzEiLCJodHRwc18xIiwidmFsdWVfY2hlY2tlcl8xIiwiSHR0cFN0cmVhbSIsIlRyYW5zZm9ybSIsImNvbnN0cnVjdG9yIiwidXJsIiwibWV0aG9kIiwiaGVhZGVycyIsInJlYWRhYmxlT2JqZWN0TW9kZSIsIl93cml0ZSIsImNodW5rIiwiZW5jb2RpbmciLCJjYWxsYmFjayIsInRlbXBGaWxlIiwidW5kZWZpbmVkIiwiZGVmYXVsdCIsImZpbGUiLCJlcnIiLCJuYW1lIiwiZmQiLCJkb2VzSGF2ZVZhbHVlIiwidGVtcEZpbGVQYXRoIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJ3cml0ZSIsIl9maW5hbCIsImVuZCIsInNlbmRIdHRwUmVxdWVzdCIsImVycjEiLCJyZXMxIiwicHVzaFJlc3BvbnNlQm9keSIsImVtaXRFcnJvclVubGVzc0h0dHAyeHgiLCJzdGF0dXNDb2RlIiwibG9jYXRpb24iLCJlcnIyIiwicmVzMiIsInJlcyIsImRvbmUiLCJib2R5IiwiQnVmZmVyIiwiYWxsb2MiLCJvbiIsImNvbmNhdCIsInB1c2giLCJ0b1N0cmluZyIsImVtaXQiLCJFcnJvciIsImh0dHB4IiwibWF0Y2giLCJhZGRpdGlvbmFsSHR0cEhlYWRlcnMiLCJ1cGxvYWQiLCJzdGF0U3luYyIsInNpemUiLCJhbGxIZWFkZXJzIiwicmVxIiwicmVxdWVzdCIsInBpcGVsaW5lIiwiY3JlYXRlUmVhZFN0cmVhbSIsImV4cG9ydHMiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvcHVibGlzaC9odHRwX3N0cmVhbS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaXBlbGluZSwgVHJhbnNmb3JtLCBXcml0YWJsZSB9IGZyb20gJ3N0cmVhbSdcbmltcG9ydCB0bXAgZnJvbSAndG1wJ1xuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IGh0dHAgZnJvbSAnaHR0cCdcbmltcG9ydCBodHRwcyBmcm9tICdodHRwcydcbmltcG9ydCB7IGRvZXNIYXZlVmFsdWUgfSBmcm9tICcuLi92YWx1ZV9jaGVja2VyJ1xuXG50eXBlIEh0dHBNZXRob2QgPSAnR0VUJyB8ICdQT1NUJyB8ICdQVVQnXG5cbi8qKlxuICogVGhpcyBXcml0YWJsZSB3cml0ZXMgZGF0YSB0byBhIEhUVFAvSFRUUFMgVVJMLlxuICpcbiAqIEl0IGhhcyBzcGVjaWFsIGhhbmRsaW5nIGZvciBodHRwczovL3JlcG9ydHMuY3VjdW1iZXIuaW8vXG4gKiB3aGljaCB1c2VzIGFuIEFQSSB3aGVyZSB0aGUgZmlyc3QgcmVxdWVzdCBpcyBhIGBHRVRgLFxuICogYW5kIGlmIHRoZSByZXNwb25zZSBpcyAyMDIgd2l0aCBhIExvY2F0aW9uIGhlYWRlciwgaXNzdWVzXG4gKiBhIFBVVCByZXF1ZXN0IHRvIHRoYXQgVVJMLlxuICpcbiAqIDN4eCByZWRpcmVjdHMgYXJlIG5vdCBjdXJyZW50bHkgZm9sbG93ZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0dHBTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm0ge1xuICBwcml2YXRlIHRlbXBGaWxlUGF0aDogc3RyaW5nXG4gIHByaXZhdGUgdGVtcEZpbGU6IFdyaXRhYmxlXG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZWFkb25seSB1cmw6IHN0cmluZyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IG1ldGhvZDogSHR0cE1ldGhvZCxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGhlYWRlcnM6IGh0dHAuT3V0Z29pbmdIdHRwSGVhZGVyc1xuICApIHtcbiAgICBzdXBlcih7XG4gICAgICByZWFkYWJsZU9iamVjdE1vZGU6IHRydWUsXG4gICAgfSlcbiAgfVxuXG4gIF93cml0ZShcbiAgICBjaHVuazogYW55LFxuICAgIGVuY29kaW5nOiBCdWZmZXJFbmNvZGluZyxcbiAgICBjYWxsYmFjazogKGVycj86IEVycm9yIHwgbnVsbCkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBpZiAodGhpcy50ZW1wRmlsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0bXAuZmlsZSgoZXJyLCBuYW1lLCBmZCkgPT4ge1xuICAgICAgICBpZiAoZG9lc0hhdmVWYWx1ZShlcnIpKSByZXR1cm4gY2FsbGJhY2soZXJyKVxuICAgICAgICB0aGlzLnRlbXBGaWxlUGF0aCA9IG5hbWVcbiAgICAgICAgdGhpcy50ZW1wRmlsZSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKG5hbWUsIHsgZmQgfSlcbiAgICAgICAgdGhpcy50ZW1wRmlsZS53cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50ZW1wRmlsZS53cml0ZShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKVxuICAgIH1cbiAgfVxuXG4gIF9maW5hbChjYWxsYmFjazogKGVycm9yPzogRXJyb3IgfCBudWxsKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy50ZW1wRmlsZS5lbmQoKCkgPT4ge1xuICAgICAgdGhpcy5zZW5kSHR0cFJlcXVlc3QoXG4gICAgICAgIHRoaXMudXJsLFxuICAgICAgICB0aGlzLm1ldGhvZCxcbiAgICAgICAgdGhpcy5oZWFkZXJzLFxuICAgICAgICAoZXJyMSwgcmVzMSkgPT4ge1xuICAgICAgICAgIGlmIChkb2VzSGF2ZVZhbHVlKGVycjEpKSByZXR1cm4gY2FsbGJhY2soZXJyMSlcbiAgICAgICAgICB0aGlzLnB1c2hSZXNwb25zZUJvZHkocmVzMSwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbWl0RXJyb3JVbmxlc3NIdHRwMnh4KHJlczEsIHRoaXMudXJsLCB0aGlzLm1ldGhvZClcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgcmVzMS5zdGF0dXNDb2RlID09PSAyMDIgJiZcbiAgICAgICAgICAgICAgcmVzMS5oZWFkZXJzLmxvY2F0aW9uICE9PSB1bmRlZmluZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB0aGlzLnNlbmRIdHRwUmVxdWVzdChcbiAgICAgICAgICAgICAgICByZXMxLmhlYWRlcnMubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgJ1BVVCcsXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgKGVycjIsIHJlczIpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChkb2VzSGF2ZVZhbHVlKGVycjIpKSByZXR1cm4gY2FsbGJhY2soZXJyMilcbiAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdEVycm9yVW5sZXNzSHR0cDJ4eChyZXMyLCB0aGlzLnVybCwgdGhpcy5tZXRob2QpXG4gICAgICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjYWxsYmFjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIHB1c2hSZXNwb25zZUJvZHkocmVzOiBodHRwLkluY29taW5nTWVzc2FnZSwgZG9uZTogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIGxldCBib2R5ID0gQnVmZmVyLmFsbG9jKDApXG4gICAgcmVzLm9uKCdkYXRhJywgKGNodW5rKSA9PiB7XG4gICAgICBib2R5ID0gQnVmZmVyLmNvbmNhdChbYm9keSwgY2h1bmtdKVxuICAgIH0pXG4gICAgcmVzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICB0aGlzLnB1c2goYm9keS50b1N0cmluZygndXRmLTgnKSlcbiAgICAgIGRvbmUoKVxuICAgIH0pXG4gIH1cblxuICBwcml2YXRlIGVtaXRFcnJvclVubGVzc0h0dHAyeHgoXG4gICAgcmVzOiBodHRwLkluY29taW5nTWVzc2FnZSxcbiAgICB1cmw6IHN0cmluZyxcbiAgICBtZXRob2Q6IHN0cmluZ1xuICApOiB2b2lkIHtcbiAgICBpZiAocmVzLnN0YXR1c0NvZGUgPj0gMzAwKVxuICAgICAgdGhpcy5lbWl0KFxuICAgICAgICAnZXJyb3InLFxuICAgICAgICBuZXcgRXJyb3IoXG4gICAgICAgICAgYFVuZXhwZWN0ZWQgaHR0cCBzdGF0dXMgJHtyZXMuc3RhdHVzQ29kZX0gZnJvbSAke21ldGhvZH0gJHt1cmx9YFxuICAgICAgICApXG4gICAgICApXG4gIH1cblxuICBwcml2YXRlIHNlbmRIdHRwUmVxdWVzdChcbiAgICB1cmw6IHN0cmluZyxcbiAgICBtZXRob2Q6IEh0dHBNZXRob2QsXG4gICAgaGVhZGVyczogaHR0cC5PdXRnb2luZ0h0dHBIZWFkZXJzLFxuICAgIGNhbGxiYWNrOiAoZXJyPzogRXJyb3IgfCBudWxsLCByZXM/OiBodHRwLkluY29taW5nTWVzc2FnZSkgPT4gdm9pZFxuICApOiB2b2lkIHtcbiAgICBjb25zdCBodHRweCA9IGRvZXNIYXZlVmFsdWUodXJsLm1hdGNoKC9eaHR0cHM6LykpID8gaHR0cHMgOiBodHRwXG4gICAgY29uc3QgYWRkaXRpb25hbEh0dHBIZWFkZXJzOiBodHRwLk91dGdvaW5nSHR0cEhlYWRlcnMgPSB7fVxuXG4gICAgY29uc3QgdXBsb2FkID0gbWV0aG9kID09PSAnUFVUJyB8fCBtZXRob2QgPT09ICdQT1NUJ1xuICAgIGlmICh1cGxvYWQpIHtcbiAgICAgIGFkZGl0aW9uYWxIdHRwSGVhZGVyc1snQ29udGVudC1MZW5ndGgnXSA9IGZzLnN0YXRTeW5jKFxuICAgICAgICB0aGlzLnRlbXBGaWxlUGF0aFxuICAgICAgKS5zaXplXG4gICAgfVxuXG4gICAgY29uc3QgYWxsSGVhZGVycyA9IHsgLi4uaGVhZGVycywgLi4uYWRkaXRpb25hbEh0dHBIZWFkZXJzIH1cbiAgICBjb25zdCByZXEgPSBodHRweC5yZXF1ZXN0KHVybCwge1xuICAgICAgbWV0aG9kLFxuICAgICAgaGVhZGVyczogYWxsSGVhZGVycyxcbiAgICB9KVxuICAgIHJlcS5vbignZXJyb3InLCAoZXJyKSA9PiB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKSlcbiAgICByZXEub24oJ3Jlc3BvbnNlJywgKHJlcykgPT4ge1xuICAgICAgcmVzLm9uKCdlcnJvcicsIChlcnIpID0+IHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpKVxuICAgICAgY2FsbGJhY2sobnVsbCwgcmVzKVxuICAgIH0pXG5cbiAgICBpZiAodXBsb2FkKSB7XG4gICAgICBwaXBlbGluZShmcy5jcmVhdGVSZWFkU3RyZWFtKHRoaXMudGVtcEZpbGVQYXRoKSwgcmVxLCAoZXJyKSA9PiB7XG4gICAgICAgIGlmIChkb2VzSGF2ZVZhbHVlKGVycikpIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXEuZW5kKClcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLE1BQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLEtBQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQUcsSUFBQSxHQUFBRCxlQUFBLENBQUFGLE9BQUE7QUFDQSxNQUFBSSxNQUFBLEdBQUFGLGVBQUEsQ0FBQUYsT0FBQTtBQUNBLE1BQUFLLE9BQUEsR0FBQUgsZUFBQSxDQUFBRixPQUFBO0FBQ0EsTUFBQU0sZUFBQSxHQUFBTixPQUFBO0FBSUE7Ozs7Ozs7Ozs7QUFVQSxNQUFxQk8sVUFBVyxTQUFRUixRQUFBLENBQUFTLFNBQVM7RUFJL0NDLFlBQ21CQyxHQUFXLEVBQ1hDLE1BQWtCLEVBQ2xCQyxPQUFpQztJQUVsRCxLQUFLLENBQUM7TUFDSkMsa0JBQWtCLEVBQUU7S0FDckIsQ0FBQztJQU5lLEtBQUFILEdBQUcsR0FBSEEsR0FBRztJQUNILEtBQUFDLE1BQU0sR0FBTkEsTUFBTTtJQUNOLEtBQUFDLE9BQU8sR0FBUEEsT0FBTztFQUsxQjtFQUVBRSxNQUFNQSxDQUNKQyxLQUFVLEVBQ1ZDLFFBQXdCLEVBQ3hCQyxRQUFzQztJQUV0QyxJQUFJLElBQUksQ0FBQ0MsUUFBUSxLQUFLQyxTQUFTLEVBQUU7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