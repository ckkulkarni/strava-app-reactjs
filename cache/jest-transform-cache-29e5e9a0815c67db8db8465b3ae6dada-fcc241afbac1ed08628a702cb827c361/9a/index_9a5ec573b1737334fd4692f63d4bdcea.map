{"version":3,"names":["compatTransforms","require","_transform","module","exports","transform","regexp","transformsWhitelist","arguments","length","undefined","transformToApply","Object","keys","result","extra","forEach","transformName","hasOwnProperty","Error","join","handler","getAST","getExtra","setExtra"],"sources":["index.js"],"sourcesContent":["/**\n * The MIT License (MIT)\n * Copyright (c) 2017-present Dmitry Soshnikov <dmitry.soshnikov@gmail.com>\n */\n\n'use strict';\n\nvar compatTransforms = require('./transforms');\nvar _transform = require('../transform');\n\nmodule.exports = {\n  /**\n   * Translates a regexp in new syntax to equivalent regexp in old syntax.\n   *\n   * @param string|RegExp|AST - regexp\n   * @param Array transformsWhitelist - names of the transforms to apply\n   */\n  transform: function transform(regexp) {\n    var transformsWhitelist = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n    var transformToApply = transformsWhitelist.length > 0 ? transformsWhitelist : Object.keys(compatTransforms);\n\n    var result = void 0;\n\n    // Collect extra data per transform.\n    var extra = {};\n\n    transformToApply.forEach(function (transformName) {\n\n      if (!compatTransforms.hasOwnProperty(transformName)) {\n        throw new Error('Unknown compat-transform: ' + transformName + '. ' + 'Available transforms are: ' + Object.keys(compatTransforms).join(', '));\n      }\n\n      var handler = compatTransforms[transformName];\n\n      result = _transform.transform(regexp, handler);\n      regexp = result.getAST();\n\n      // Collect `extra` transform result.\n      if (typeof handler.getExtra === 'function') {\n        extra[transformName] = handler.getExtra();\n      }\n    });\n\n    // Set the final extras for all transforms.\n    result.setExtra(extra);\n\n    return result;\n  }\n};"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA,YAAY;;AAEZ,IAAIA,gBAAgB,GAAGC,OAAO,CAAC,cAAc,CAAC;AAC9C,IAAIC,UAAU,GAAGD,OAAO,CAAC,cAAc,CAAC;AAExCE,MAAM,CAACC,OAAO,GAAG;EACf;AACF;AACA;AACA;AACA;AACA;EACEC,SAAS,EAAE,SAASA,SAASA,CAACC,MAAM,EAAE;IACpC,IAAIC,mBAAmB,GAAGC,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAKE,SAAS,GAAGF,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;IAEhG,IAAIG,gBAAgB,GAAGJ,mBAAmB,CAACE,MAAM,GAAG,CAAC,GAAGF,mBAAmB,GAAGK,MAAM,CAACC,IAAI,CAACb,gBAAgB,CAAC;IAE3G,IAAIc,MAAM,GAAG,KAAK,CAAC;;IAEnB;IACA,IAAIC,KAAK,GAAG,CAAC,CAAC;IAEdJ,gBAAgB,CAACK,OAAO,CAAC,UAAUC,aAAa,EAAE;MAEhD,IAAI,CAACjB,gBAAgB,CAACkB,cAAc,CAACD,aAAa,CAAC,EAAE;QACnD,MAAM,IAAIE,KAAK,CAAC,4BAA4B,GAAGF,aAAa,GAAG,IAAI,GAAG,4BAA4B,GAAGL,MAAM,CAACC,IAAI,CAACb,gBAAgB,CAAC,CAACoB,IAAI,CAAC,IAAI,CAAC,CAAC;MAChJ;MAEA,IAAIC,OAAO,GAAGrB,gBAAgB,CAACiB,aAAa,CAAC;MAE7CH,MAAM,GAAGZ,UAAU,CAACG,SAAS,CAACC,MAAM,EAAEe,OAAO,CAAC;MAC9Cf,MAAM,GAAGQ,MAAM,CAACQ,MAAM,EAAE;;MAExB;MACA,IAAI,OAAOD,OAAO,CAACE,QAAQ,KAAK,UAAU,EAAE;QAC1CR,KAAK,CAACE,aAAa,CAAC,GAAGI,OAAO,CAACE,QAAQ,EAAE;MAC3C;IACF,CAAC,CAAC;;IAEF;IACAT,MAAM,CAACU,QAAQ,CAACT,KAAK,CAAC;IAEtB,OAAOD,MAAM;EACf;AACF,CAAC"}