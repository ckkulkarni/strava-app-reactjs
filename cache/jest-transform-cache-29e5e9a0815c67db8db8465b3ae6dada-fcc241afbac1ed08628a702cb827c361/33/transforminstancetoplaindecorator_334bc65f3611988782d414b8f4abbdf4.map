{"version":3,"names":["ClassTransformer_1","require","TransformInstanceToPlain","params","target","propertyKey","descriptor","classTransformer","ClassTransformer","originalMethod","value","args","result","apply","isPromise","then","data","instanceToPlain","exports"],"sources":["../../../src/decorators/transform-instance-to-plain.decorator.ts"],"sourcesContent":["import { ClassTransformer } from '../ClassTransformer';\nimport { ClassTransformOptions } from '../interfaces';\n\n/**\n * Transform the object from class to plain object and return only with the exposed properties.\n *\n * Can be applied to functions and getters/setters only.\n */\nexport function TransformInstanceToPlain(params?: ClassTransformOptions): MethodDecorator {\n  return function (target: Record<string, any>, propertyKey: string | Symbol, descriptor: PropertyDescriptor): void {\n    const classTransformer: ClassTransformer = new ClassTransformer();\n    const originalMethod = descriptor.value;\n\n    descriptor.value = function (...args: any[]): Record<string, any> {\n      const result: any = originalMethod.apply(this, args);\n      const isPromise =\n        !!result && (typeof result === 'object' || typeof result === 'function') && typeof result.then === 'function';\n      return isPromise\n        ? result.then((data: any) => classTransformer.instanceToPlain(data, params))\n        : classTransformer.instanceToPlain(result, params);\n    };\n  };\n}\n"],"mappings":";;;;;;AAAA,MAAAA,kBAAA,GAAAC,OAAA;AAGA;;;;;AAKA,SAAgBC,wBAAwBA,CAACC,MAA8B;EACrE,OAAO,UAAUC,MAA2B,EAAEC,WAA4B,EAAEC,UAA8B;IACxG,MAAMC,gBAAgB,GAAqB,IAAIP,kBAAA,CAAAQ,gBAAgB,EAAE;IACjE,MAAMC,cAAc,GAAGH,UAAU,CAACI,KAAK;IAEvCJ,UAAU,CAACI,KAAK,GAAG,UAAU,GAAGC,IAAW;MACzC,MAAMC,MAAM,GAAQH,cAAc,CAACI,KAAK,CAAC,IAAI,EAAEF,IAAI,CAAC;MACpD,MAAMG,SAAS,GACb,CAAC,CAACF,MAAM,KAAK,OAAOA,MAAM,KAAK,QAAQ,IAAI,OAAOA,MAAM,KAAK,UAAU,CAAC,IAAI,OAAOA,MAAM,CAACG,IAAI,KAAK,UAAU;MAC/G,OAAOD,SAAS,GACZF,MAAM,CAACG,IAAI,CAAEC,IAAS,IAAKT,gBAAgB,CAACU,eAAe,CAACD,IAAI,EAAEb,MAAM,CAAC,CAAC,GAC1EI,gBAAgB,CAACU,eAAe,CAACL,MAAM,EAAET,MAAM,CAAC;IACtD,CAAC;EACH,CAAC;AACH;AAdAe,OAAA,CAAAhB,wBAAA,GAAAA,wBAAA"}