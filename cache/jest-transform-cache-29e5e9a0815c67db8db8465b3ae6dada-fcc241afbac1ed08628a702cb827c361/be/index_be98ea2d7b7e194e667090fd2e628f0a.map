{"version":3,"names":["path","require","os","fs","ini","isWindows","process","platform","readRc","filePath","parse","readFileSync","prefix","getEnvNpmPrefix","Object","keys","env","reduce","name","test","undefined","getGlobalNpmrc","APPDATA","join","execPath","includes","homebrewPrefix","slice","indexOf","endsWith","installDir","dirname","getDefaultNpmPrefix","getNpmPrefix","envPrefix","homePrefix","homedir","PREFIX","globalPrefix","npmPrefix","resolve","getYarnWindowsDirectory","LOCALAPPDATA","dir","existsSync","getYarnPrefix","windowsPrefix","configPrefix","exports","npm","packages","binaries","yarnPrefix","yarn"],"sources":["index.js"],"sourcesContent":["'use strict';\nconst path = require('path');\nconst os = require('os');\nconst fs = require('fs');\nconst ini = require('ini');\n\nconst isWindows = process.platform === 'win32';\n\nconst readRc = filePath => {\n\ttry {\n\t\treturn ini.parse(fs.readFileSync(filePath, 'utf8')).prefix;\n\t} catch {}\n};\n\nconst getEnvNpmPrefix = () => {\n\t// TODO: Remove the `.reduce` call.\n\t// eslint-disable-next-line unicorn/no-array-reduce\n\treturn Object.keys(process.env).reduce((prefix, name) => {\n\t\treturn /^npm_config_prefix$/i.test(name) ? process.env[name] : prefix;\n\t}, undefined);\n};\n\nconst getGlobalNpmrc = () => {\n\tif (isWindows && process.env.APPDATA) {\n\t\t// Hardcoded contents of `c:\\Program Files\\nodejs\\node_modules\\npm\\npmrc`\n\t\treturn path.join(process.env.APPDATA, '/npm/etc/npmrc');\n\t}\n\n\t// Homebrew special case: `$(brew --prefix)/lib/node_modules/npm/npmrc`\n\tif (process.execPath.includes('/Cellar/node')) {\n\t\tconst homebrewPrefix = process.execPath.slice(0, process.execPath.indexOf('/Cellar/node'));\n\t\treturn path.join(homebrewPrefix, '/lib/node_modules/npm/npmrc');\n\t}\n\n\tif (process.execPath.endsWith('/bin/node')) {\n\t\tconst installDir = path.dirname(path.dirname(process.execPath));\n\t\treturn path.join(installDir, '/etc/npmrc');\n\t}\n};\n\nconst getDefaultNpmPrefix = () => {\n\tif (isWindows) {\n\t\tconst {APPDATA} = process.env;\n\t\t// `c:\\node\\node.exe` → `prefix=c:\\node\\`\n\t\treturn APPDATA ? path.join(APPDATA, 'npm') : path.dirname(process.execPath);\n\t}\n\n\t// `/usr/local/bin/node` → `prefix=/usr/local`\n\treturn path.dirname(path.dirname(process.execPath));\n};\n\nconst getNpmPrefix = () => {\n\tconst envPrefix = getEnvNpmPrefix();\n\tif (envPrefix) {\n\t\treturn envPrefix;\n\t}\n\n\tconst homePrefix = readRc(path.join(os.homedir(), '.npmrc'));\n\tif (homePrefix) {\n\t\treturn homePrefix;\n\t}\n\n\tif (process.env.PREFIX) {\n\t\treturn process.env.PREFIX;\n\t}\n\n\tconst globalPrefix = readRc(getGlobalNpmrc());\n\tif (globalPrefix) {\n\t\treturn globalPrefix;\n\t}\n\n\treturn getDefaultNpmPrefix();\n};\n\nconst npmPrefix = path.resolve(getNpmPrefix());\n\nconst getYarnWindowsDirectory = () => {\n\tif (isWindows && process.env.LOCALAPPDATA) {\n\t\tconst dir = path.join(process.env.LOCALAPPDATA, 'Yarn');\n\t\tif (fs.existsSync(dir)) {\n\t\t\treturn dir;\n\t\t}\n\t}\n\n\treturn false;\n};\n\nconst getYarnPrefix = () => {\n\tif (process.env.PREFIX) {\n\t\treturn process.env.PREFIX;\n\t}\n\n\tconst windowsPrefix = getYarnWindowsDirectory();\n\tif (windowsPrefix) {\n\t\treturn windowsPrefix;\n\t}\n\n\tconst configPrefix = path.join(os.homedir(), '.config/yarn');\n\tif (fs.existsSync(configPrefix)) {\n\t\treturn configPrefix;\n\t}\n\n\tconst homePrefix = path.join(os.homedir(), '.yarn-config');\n\tif (fs.existsSync(homePrefix)) {\n\t\treturn homePrefix;\n\t}\n\n\t// Yarn supports the npm conventions but the inverse is not true\n\treturn npmPrefix;\n};\n\nexports.npm = {};\nexports.npm.prefix = npmPrefix;\nexports.npm.packages = path.join(npmPrefix, isWindows ? 'node_modules' : 'lib/node_modules');\nexports.npm.binaries = isWindows ? npmPrefix : path.join(npmPrefix, 'bin');\n\nconst yarnPrefix = path.resolve(getYarnPrefix());\nexports.yarn = {};\nexports.yarn.prefix = yarnPrefix;\nexports.yarn.packages = path.join(yarnPrefix, getYarnWindowsDirectory() ? 'Data/global/node_modules' : 'global/node_modules');\nexports.yarn.binaries = path.join(exports.yarn.packages, '.bin');\n"],"mappings":"AAAA,YAAY;;AACZ,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAI,CAAC;AACxB,MAAME,EAAE,GAAGF,OAAO,CAAC,IAAI,CAAC;AACxB,MAAMG,GAAG,GAAGH,OAAO,CAAC,KAAK,CAAC;AAE1B,MAAMI,SAAS,GAAGC,OAAO,CAACC,QAAQ,KAAK,OAAO;AAE9C,MAAMC,MAAM,GAAGC,QAAQ,IAAI;EAC1B,IAAI;IACH,OAAOL,GAAG,CAACM,KAAK,CAACP,EAAE,CAACQ,YAAY,CAACF,QAAQ,EAAE,MAAM,CAAC,CAAC,CAACG,MAAM;EAC3D,CAAC,CAAC,MAAM,CAAC;AACV,CAAC;AAED,MAAMC,eAAe,GAAGA,CAAA,KAAM;EAC7B;EACA;EACA,OAAOC,MAAM,CAACC,IAAI,CAACT,OAAO,CAACU,GAAG,CAAC,CAACC,MAAM,CAAC,CAACL,MAAM,EAAEM,IAAI,KAAK;IACxD,OAAO,sBAAsB,CAACC,IAAI,CAACD,IAAI,CAAC,GAAGZ,OAAO,CAACU,GAAG,CAACE,IAAI,CAAC,GAAGN,MAAM;EACtE,CAAC,EAAEQ,SAAS,CAAC;AACd,CAAC;AAED,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAC5B,IAAIhB,SAAS,IAAIC,OAAO,CAACU,GAAG,CAACM,OAAO,EAAE;IACrC;IACA,OAAOtB,IAAI,CAACuB,IAAI,CAACjB,OAAO,CAACU,GAAG,CAACM,OAAO,EAAE,gBAAgB,CAAC;EACxD;;EAEA;EACA,IAAIhB,OAAO,CAACkB,QAAQ,CAACC,QAAQ,CAAC,cAAc,CAAC,EAAE;IAC9C,MAAMC,cAAc,GAAGpB,OAAO,CAACkB,QAAQ,CAACG,KAAK,CAAC,CAAC,EAAErB,OAAO,CAACkB,QAAQ,CAACI,OAAO,CAAC,cAAc,CAAC,CAAC;IAC1F,OAAO5B,IAAI,CAACuB,IAAI,CAACG,cAAc,EAAE,6BAA6B,CAAC;EAChE;EAEA,IAAIpB,OAAO,CAACkB,QAAQ,CAACK,QAAQ,CAAC,WAAW,CAAC,EAAE;IAC3C,MAAMC,UAAU,GAAG9B,IAAI,CAAC+B,OAAO,CAAC/B,IAAI,CAAC+B,OAAO,CAACzB,OAAO,CAACkB,QAAQ,CAAC,CAAC;IAC/D,OAAOxB,IAAI,CAACuB,IAAI,CAACO,UAAU,EAAE,YAAY,CAAC;EAC3C;AACD,CAAC;AAED,MAAME,mBAAmB,GAAGA,CAAA,KAAM;EACjC,IAAI3B,SAAS,EAAE;IACd,MAAM;MAACiB;IAAO,CAAC,GAAGhB,OAAO,CAACU,GAAG;IAC7B;IACA,OAAOM,OAAO,GAAGtB,IAAI,CAACuB,IAAI,CAACD,OAAO,EAAE,KAAK,CAAC,GAAGtB,IAAI,CAAC+B,OAAO,CAACzB,OAAO,CAACkB,QAAQ,CAAC;EAC5E;;EAEA;EACA,OAAOxB,IAAI,CAAC+B,OAAO,CAAC/B,IAAI,CAAC+B,OAAO,CAACzB,OAAO,CAACkB,QAAQ,CAAC,CAAC;AACpD,CAAC;AAED,MAAMS,YAAY,GAAGA,CAAA,KAAM;EAC1B,MAAMC,SAAS,GAAGrB,eAAe,EAAE;EACnC,IAAIqB,SAAS,EAAE;IACd,OAAOA,SAAS;EACjB;EAEA,MAAMC,UAAU,GAAG3B,MAAM,CAACR,IAAI,CAACuB,IAAI,CAACrB,EAAE,CAACkC,OAAO,EAAE,EAAE,QAAQ,CAAC,CAAC;EAC5D,IAAID,UAAU,EAAE;IACf,OAAOA,UAAU;EAClB;EAEA,IAAI7B,OAAO,CAACU,GAAG,CAACqB,MAAM,EAAE;IACvB,OAAO/B,OAAO,CAACU,GAAG,CAACqB,MAAM;EAC1B;EAEA,MAAMC,YAAY,GAAG9B,MAAM,CAACa,cAAc,EAAE,CAAC;EAC7C,IAAIiB,YAAY,EAAE;IACjB,OAAOA,YAAY;EACpB;EAEA,OAAON,mBAAmB,EAAE;AAC7B,CAAC;AAED,MAAMO,SAAS,GAAGvC,IAAI,CAACwC,OAAO,CAACP,YAAY,EAAE,CAAC;AAE9C,MAAMQ,uBAAuB,GAAGA,CAAA,KAAM;EACrC,IAAIpC,SAAS,IAAIC,OAAO,CAACU,GAAG,CAAC0B,YAAY,EAAE;IAC1C,MAAMC,GAAG,GAAG3C,IAAI,CAACuB,IAAI,CAACjB,OAAO,CAACU,GAAG,CAAC0B,YAAY,EAAE,MAAM,CAAC;IACvD,IAAIvC,EAAE,CAACyC,UAAU,CAACD,GAAG,CAAC,EAAE;MACvB,OAAOA,GAAG;IACX;EACD;EAEA,OAAO,KAAK;AACb,CAAC;AAED,MAAME,aAAa,GAAGA,CAAA,KAAM;EAC3B,IAAIvC,OAAO,CAACU,GAAG,CAACqB,MAAM,EAAE;IACvB,OAAO/B,OAAO,CAACU,GAAG,CAACqB,MAAM;EAC1B;EAEA,MAAMS,aAAa,GAAGL,uBAAuB,EAAE;EAC/C,IAAIK,aAAa,EAAE;IAClB,OAAOA,aAAa;EACrB;EAEA,MAAMC,YAAY,GAAG/C,IAAI,CAACuB,IAAI,CAACrB,EAAE,CAACkC,OAAO,EAAE,EAAE,cAAc,CAAC;EAC5D,IAAIjC,EAAE,CAACyC,UAAU,CAACG,YAAY,CAAC,EAAE;IAChC,OAAOA,YAAY;EACpB;EAEA,MAAMZ,UAAU,GAAGnC,IAAI,CAACuB,IAAI,CAACrB,EAAE,CAACkC,OAAO,EAAE,EAAE,cAAc,CAAC;EAC1D,IAAIjC,EAAE,CAACyC,UAAU,CAACT,UAAU,CAAC,EAAE;IAC9B,OAAOA,UAAU;EAClB;;EAEA;EACA,OAAOI,SAAS;AACjB,CAAC;AAEDS,OAAO,CAACC,GAAG,GAAG,CAAC,CAAC;AAChBD,OAAO,CAACC,GAAG,CAACrC,MAAM,GAAG2B,SAAS;AAC9BS,OAAO,CAACC,GAAG,CAACC,QAAQ,GAAGlD,IAAI,CAACuB,IAAI,CAACgB,SAAS,EAAElC,SAAS,GAAG,cAAc,GAAG,kBAAkB,CAAC;AAC5F2C,OAAO,CAACC,GAAG,CAACE,QAAQ,GAAG9C,SAAS,GAAGkC,SAAS,GAAGvC,IAAI,CAACuB,IAAI,CAACgB,SAAS,EAAE,KAAK,CAAC;AAE1E,MAAMa,UAAU,GAAGpD,IAAI,CAACwC,OAAO,CAACK,aAAa,EAAE,CAAC;AAChDG,OAAO,CAACK,IAAI,GAAG,CAAC,CAAC;AACjBL,OAAO,CAACK,IAAI,CAACzC,MAAM,GAAGwC,UAAU;AAChCJ,OAAO,CAACK,IAAI,CAACH,QAAQ,GAAGlD,IAAI,CAACuB,IAAI,CAAC6B,UAAU,EAAEX,uBAAuB,EAAE,GAAG,0BAA0B,GAAG,qBAAqB,CAAC;AAC7HO,OAAO,CAACK,IAAI,CAACF,QAAQ,GAAGnD,IAAI,CAACuB,IAAI,CAACyB,OAAO,CAACK,IAAI,CAACH,QAAQ,EAAE,MAAM,CAAC"}