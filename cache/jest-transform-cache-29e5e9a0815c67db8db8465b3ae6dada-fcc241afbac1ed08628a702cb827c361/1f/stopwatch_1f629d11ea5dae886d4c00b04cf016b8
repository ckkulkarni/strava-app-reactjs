9320b730dd0974efbacdff97df567788
"use strict";

var __importDefault = void 0 && (void 0).__importDefault || function (mod) {
  return mod && mod.__esModule ? mod : {
    "default": mod
  };
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.create = void 0;
const messages_1 = require("@cucumber/messages");
const time_1 = __importDefault(require("../time"));
class StopwatchImpl {
  constructor(base = {
    seconds: 0,
    nanos: 0
  }) {
    this.base = base;
  }
  start() {
    this.started = time_1.default.performance.now();
    return this;
  }
  stop() {
    this.base = this.duration();
    this.started = undefined;
    return this;
  }
  duration() {
    if (typeof this.started !== 'number') {
      return this.base;
    }
    return messages_1.TimeConversion.addDurations(this.base, messages_1.TimeConversion.millisecondsToDuration(time_1.default.performance.now() - this.started));
  }
  timestamp() {
    return messages_1.TimeConversion.millisecondsSinceEpochToTimestamp(time_1.default.Date.now());
  }
}
const create = base => new StopwatchImpl(base);
exports.create = create;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXNzYWdlc18xIiwicmVxdWlyZSIsInRpbWVfMSIsIl9faW1wb3J0RGVmYXVsdCIsIlN0b3B3YXRjaEltcGwiLCJjb25zdHJ1Y3RvciIsImJhc2UiLCJzZWNvbmRzIiwibmFub3MiLCJzdGFydCIsInN0YXJ0ZWQiLCJkZWZhdWx0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJzdG9wIiwiZHVyYXRpb24iLCJ1bmRlZmluZWQiLCJUaW1lQ29udmVyc2lvbiIsImFkZER1cmF0aW9ucyIsIm1pbGxpc2Vjb25kc1RvRHVyYXRpb24iLCJ0aW1lc3RhbXAiLCJtaWxsaXNlY29uZHNTaW5jZUVwb2NoVG9UaW1lc3RhbXAiLCJEYXRlIiwiY3JlYXRlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ydW50aW1lL3N0b3B3YXRjaC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEdXJhdGlvbiwgVGltZUNvbnZlcnNpb24sIFRpbWVzdGFtcCB9IGZyb20gJ0BjdWN1bWJlci9tZXNzYWdlcydcbmltcG9ydCBtZXRob2RzIGZyb20gJy4uL3RpbWUnXG5cbi8qKlxuICogQSB1dGlsaXR5IGZvciB0aW1pbmcgdGVzdCBydW4gb3BlcmF0aW9ucyBhbmQgcmV0dXJuaW5nIGR1cmF0aW9uIGFuZFxuICogdGltZXN0YW1wIG9iamVjdHMgaW4gbWVzc2FnZXMtY29tcGF0aWJsZSBmb3JtYXRzXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVN0b3B3YXRjaCB7XG4gIHN0YXJ0OiAoKSA9PiBJU3RvcHdhdGNoXG4gIHN0b3A6ICgpID0+IElTdG9wd2F0Y2hcbiAgZHVyYXRpb246ICgpID0+IER1cmF0aW9uXG4gIHRpbWVzdGFtcDogKCkgPT4gVGltZXN0YW1wXG59XG5cbmNsYXNzIFN0b3B3YXRjaEltcGwgaW1wbGVtZW50cyBJU3RvcHdhdGNoIHtcbiAgcHJpdmF0ZSBzdGFydGVkOiBudW1iZXJcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGJhc2U6IER1cmF0aW9uID0geyBzZWNvbmRzOiAwLCBuYW5vczogMCB9KSB7fVxuXG4gIHN0YXJ0KCk6IElTdG9wd2F0Y2gge1xuICAgIHRoaXMuc3RhcnRlZCA9IG1ldGhvZHMucGVyZm9ybWFuY2Uubm93KClcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RvcCgpOiBJU3RvcHdhdGNoIHtcbiAgICB0aGlzLmJhc2UgPSB0aGlzLmR1cmF0aW9uKClcbiAgICB0aGlzLnN0YXJ0ZWQgPSB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgZHVyYXRpb24oKTogRHVyYXRpb24ge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdGFydGVkICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRoaXMuYmFzZVxuICAgIH1cbiAgICByZXR1cm4gVGltZUNvbnZlcnNpb24uYWRkRHVyYXRpb25zKFxuICAgICAgdGhpcy5iYXNlLFxuICAgICAgVGltZUNvbnZlcnNpb24ubWlsbGlzZWNvbmRzVG9EdXJhdGlvbihcbiAgICAgICAgbWV0aG9kcy5wZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuc3RhcnRlZFxuICAgICAgKVxuICAgIClcbiAgfVxuXG4gIHRpbWVzdGFtcCgpOiBUaW1lc3RhbXAge1xuICAgIHJldHVybiBUaW1lQ29udmVyc2lvbi5taWxsaXNlY29uZHNTaW5jZUVwb2NoVG9UaW1lc3RhbXAobWV0aG9kcy5EYXRlLm5vdygpKVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGUgPSAoYmFzZT86IER1cmF0aW9uKTogSVN0b3B3YXRjaCA9PiBuZXcgU3RvcHdhdGNoSW1wbChiYXNlKVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLE1BQUFBLFVBQUEsR0FBQUMsT0FBQTtBQUNBLE1BQUFDLE1BQUEsR0FBQUMsZUFBQSxDQUFBRixPQUFBO0FBYUEsTUFBTUcsYUFBYTtFQUdqQkMsWUFBb0JDLElBQUEsR0FBaUI7SUFBRUMsT0FBTyxFQUFFLENBQUM7SUFBRUMsS0FBSyxFQUFFO0VBQUMsQ0FBRTtJQUF6QyxLQUFBRixJQUFJLEdBQUpBLElBQUk7RUFBd0M7RUFFaEVHLEtBQUtBLENBQUE7SUFDSCxJQUFJLENBQUNDLE9BQU8sR0FBR1IsTUFBQSxDQUFBUyxPQUFPLENBQUNDLFdBQVcsQ0FBQ0MsR0FBRyxFQUFFO0lBQ3hDLE9BQU8sSUFBSTtFQUNiO0VBRUFDLElBQUlBLENBQUE7SUFDRixJQUFJLENBQUNSLElBQUksR0FBRyxJQUFJLENBQUNTLFFBQVEsRUFBRTtJQUMzQixJQUFJLENBQUNMLE9BQU8sR0FBR00sU0FBUztJQUN4QixPQUFPLElBQUk7RUFDYjtFQUVBRCxRQUFRQSxDQUFBO0lBQ04sSUFBSSxPQUFPLElBQUksQ0FBQ0wsT0FBTyxLQUFLLFFBQVEsRUFBRTtNQUNwQyxPQUFPLElBQUksQ0FBQ0osSUFBSTs7SUFFbEIsT0FBT04sVUFBQSxDQUFBaUIsY0FBYyxDQUFDQyxZQUFZLENBQ2hDLElBQUksQ0FBQ1osSUFBSSxFQUNUTixVQUFBLENBQUFpQixjQUFjLENBQUNFLHNCQUFzQixDQUNuQ2pCLE1BQUEsQ0FBQVMsT0FBTyxDQUFDQyxXQUFXLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsT0FBTyxDQUN6QyxDQUNGO0VBQ0g7RUFFQVUsU0FBU0EsQ0FBQTtJQUNQLE9BQU9wQixVQUFBLENBQUFpQixjQUFjLENBQUNJLGlDQUFpQyxDQUFDbkIsTUFBQSxDQUFBUyxPQUFPLENBQUNXLElBQUksQ0FBQ1QsR0FBRyxFQUFFLENBQUM7RUFDN0U7O0FBR0ssTUFBTVUsTUFBTSxHQUFJakIsSUFBZSxJQUFpQixJQUFJRixhQUFhLENBQUNFLElBQUksQ0FBQztBQUFqRWtCLE9BQUEsQ0FBQUQsTUFBTSxHQUFBQSxNQUFBIn0=