{"version":3,"names":["messages_1","require","time_1","__importDefault","StopwatchImpl","constructor","base","seconds","nanos","start","started","default","performance","now","stop","duration","undefined","TimeConversion","addDurations","millisecondsToDuration","timestamp","millisecondsSinceEpochToTimestamp","Date","create","exports"],"sources":["../../src/runtime/stopwatch.ts"],"sourcesContent":["import { Duration, TimeConversion, Timestamp } from '@cucumber/messages'\nimport methods from '../time'\n\n/**\n * A utility for timing test run operations and returning duration and\n * timestamp objects in messages-compatible formats\n */\nexport interface IStopwatch {\n  start: () => IStopwatch\n  stop: () => IStopwatch\n  duration: () => Duration\n  timestamp: () => Timestamp\n}\n\nclass StopwatchImpl implements IStopwatch {\n  private started: number\n\n  constructor(private base: Duration = { seconds: 0, nanos: 0 }) {}\n\n  start(): IStopwatch {\n    this.started = methods.performance.now()\n    return this\n  }\n\n  stop(): IStopwatch {\n    this.base = this.duration()\n    this.started = undefined\n    return this\n  }\n\n  duration(): Duration {\n    if (typeof this.started !== 'number') {\n      return this.base\n    }\n    return TimeConversion.addDurations(\n      this.base,\n      TimeConversion.millisecondsToDuration(\n        methods.performance.now() - this.started\n      )\n    )\n  }\n\n  timestamp(): Timestamp {\n    return TimeConversion.millisecondsSinceEpochToTimestamp(methods.Date.now())\n  }\n}\n\nexport const create = (base?: Duration): IStopwatch => new StopwatchImpl(base)\n"],"mappings":";;;;;;;;;;;AAAA,MAAAA,UAAA,GAAAC,OAAA;AACA,MAAAC,MAAA,GAAAC,eAAA,CAAAF,OAAA;AAaA,MAAMG,aAAa;EAGjBC,YAAoBC,IAAA,GAAiB;IAAEC,OAAO,EAAE,CAAC;IAAEC,KAAK,EAAE;EAAC,CAAE;IAAzC,KAAAF,IAAI,GAAJA,IAAI;EAAwC;EAEhEG,KAAKA,CAAA;IACH,IAAI,CAACC,OAAO,GAAGR,MAAA,CAAAS,OAAO,CAACC,WAAW,CAACC,GAAG,EAAE;IACxC,OAAO,IAAI;EACb;EAEAC,IAAIA,CAAA;IACF,IAAI,CAACR,IAAI,GAAG,IAAI,CAACS,QAAQ,EAAE;IAC3B,IAAI,CAACL,OAAO,GAAGM,SAAS;IACxB,OAAO,IAAI;EACb;EAEAD,QAAQA,CAAA;IACN,IAAI,OAAO,IAAI,CAACL,OAAO,KAAK,QAAQ,EAAE;MACpC,OAAO,IAAI,CAACJ,IAAI;;IAElB,OAAON,UAAA,CAAAiB,cAAc,CAACC,YAAY,CAChC,IAAI,CAACZ,IAAI,EACTN,UAAA,CAAAiB,cAAc,CAACE,sBAAsB,CACnCjB,MAAA,CAAAS,OAAO,CAACC,WAAW,CAACC,GAAG,EAAE,GAAG,IAAI,CAACH,OAAO,CACzC,CACF;EACH;EAEAU,SAASA,CAAA;IACP,OAAOpB,UAAA,CAAAiB,cAAc,CAACI,iCAAiC,CAACnB,MAAA,CAAAS,OAAO,CAACW,IAAI,CAACT,GAAG,EAAE,CAAC;EAC7E;;AAGK,MAAMU,MAAM,GAAIjB,IAAe,IAAiB,IAAIF,aAAa,CAACE,IAAI,CAAC;AAAjEkB,OAAA,CAAAD,MAAM,GAAAA,MAAA"}