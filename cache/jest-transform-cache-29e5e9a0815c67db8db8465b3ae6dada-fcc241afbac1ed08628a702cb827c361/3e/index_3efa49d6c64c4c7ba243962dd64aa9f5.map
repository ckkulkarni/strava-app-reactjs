{"version":3,"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","generator","require","parser","traverse","TransformResult","ast","extra","arguments","undefined","_ast","_source","_string","_regexp","_extra","value","getAST","setExtra","getExtra","toRegExp","RegExp","getSource","flags","generate","body","getFlags","toString","module","exports","transform","regexp","handlers","parse","captureLocations"],"sources":["index.js"],"sourcesContent":["/**\n * The MIT License (MIT)\n * Copyright (c) 2017-present Dmitry Soshnikov <dmitry.soshnikov@gmail.com>\n */\n\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar generator = require('../generator');\nvar parser = require('../parser');\nvar traverse = require('../traverse');\n\n/**\n * Transform result.\n */\n\nvar TransformResult = function () {\n  /**\n   * Initializes a transform result for an AST.\n   *\n   * @param Object ast - an AST node\n   * @param mixed extra - any extra data a transform may return\n   */\n  function TransformResult(ast) {\n    var extra = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, TransformResult);\n\n    this._ast = ast;\n    this._source = null;\n    this._string = null;\n    this._regexp = null;\n    this._extra = extra;\n  }\n\n  _createClass(TransformResult, [{\n    key: 'getAST',\n    value: function getAST() {\n      return this._ast;\n    }\n  }, {\n    key: 'setExtra',\n    value: function setExtra(extra) {\n      this._extra = extra;\n    }\n  }, {\n    key: 'getExtra',\n    value: function getExtra() {\n      return this._extra;\n    }\n  }, {\n    key: 'toRegExp',\n    value: function toRegExp() {\n      if (!this._regexp) {\n        this._regexp = new RegExp(this.getSource(), this._ast.flags);\n      }\n      return this._regexp;\n    }\n  }, {\n    key: 'getSource',\n    value: function getSource() {\n      if (!this._source) {\n        this._source = generator.generate(this._ast.body);\n      }\n      return this._source;\n    }\n  }, {\n    key: 'getFlags',\n    value: function getFlags() {\n      return this._ast.flags;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      if (!this._string) {\n        this._string = generator.generate(this._ast);\n      }\n      return this._string;\n    }\n  }]);\n\n  return TransformResult;\n}();\n\nmodule.exports = {\n  /**\n   * Expose `TransformResult`.\n   */\n  TransformResult: TransformResult,\n\n  /**\n   * Transforms a regular expression applying a set of\n   * transformation handlers.\n   *\n   * @param string | AST | RegExp:\n   *\n   *   a regular expression in different representations: a string,\n   *   a RegExp object, or an AST.\n   *\n   * @param Object | Array<Object>:\n   *\n   *   a handler (or a list of handlers) from `traverse` API.\n   *\n   * @return TransformResult instance.\n   *\n   * Example:\n   *\n   *   transform(/[a-z]/i, {\n   *     onChar(path) {\n   *       const {node} = path;\n   *\n   *       if (...) {\n   *         path.remove();\n   *       }\n   *     }\n   *   });\n   */\n  transform: function transform(regexp, handlers) {\n    var ast = regexp;\n\n    if (regexp instanceof RegExp) {\n      regexp = '' + regexp;\n    }\n\n    if (typeof regexp === 'string') {\n      ast = parser.parse(regexp, {\n        captureLocations: true\n      });\n    }\n\n    traverse.traverse(ast, handlers);\n\n    return new TransformResult(ast);\n  }\n};"],"mappings":"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"}