{"version":3,"names":["chalk_1","__importDefault","require","supports_color_1","value_checker_1","getColorFns","stream","env","enabled","support","detectSupport","chalkInstance","default","Instance","forStatus","status","AMBIGUOUS","red","bind","FAILED","PASSED","green","PENDING","yellow","SKIPPED","cyan","UNDEFINED","UNKNOWN","location","gray","tag","diffAdded","diffRemoved","errorMessage","errorStack","grey","_status","x","exports","supportsColor","doesNotHaveValue","level"],"sources":["../../src/formatter/get_color_fns.ts"],"sourcesContent":["import chalk from 'chalk'\nimport { ColorInfo, supportsColor } from 'supports-color'\nimport { TestStepResultStatus } from '@cucumber/messages'\nimport { Writable } from 'stream'\nimport { doesNotHaveValue } from '../value_checker'\n\nexport type IColorFn = (text: string) => string\n\nexport interface IColorFns {\n  forStatus: (status: TestStepResultStatus) => IColorFn\n  location: IColorFn\n  tag: IColorFn\n  diffAdded: IColorFn\n  diffRemoved: IColorFn\n  errorMessage: IColorFn\n  errorStack: IColorFn\n}\n\nexport default function getColorFns(\n  stream: Writable,\n  env: NodeJS.ProcessEnv,\n  enabled?: boolean\n): IColorFns {\n  const support: ColorInfo = detectSupport(stream, env, enabled)\n  if (support) {\n    const chalkInstance = new chalk.Instance(support)\n    return {\n      forStatus(status: TestStepResultStatus) {\n        return {\n          AMBIGUOUS: chalkInstance.red.bind(chalk),\n          FAILED: chalkInstance.red.bind(chalk),\n          PASSED: chalkInstance.green.bind(chalk),\n          PENDING: chalkInstance.yellow.bind(chalk),\n          SKIPPED: chalkInstance.cyan.bind(chalk),\n          UNDEFINED: chalkInstance.yellow.bind(chalk),\n          UNKNOWN: chalkInstance.yellow.bind(chalk),\n        }[status]\n      },\n      location: chalkInstance.gray.bind(chalk),\n      tag: chalkInstance.cyan.bind(chalk),\n      diffAdded: chalkInstance.green.bind(chalk),\n      diffRemoved: chalkInstance.red.bind(chalk),\n      errorMessage: chalkInstance.red.bind(chalk),\n      errorStack: chalkInstance.grey.bind(chalk),\n    }\n  } else {\n    return {\n      forStatus(_status: TestStepResultStatus) {\n        return (x) => x\n      },\n      location: (x) => x,\n      tag: (x) => x,\n      diffAdded: (x) => x,\n      diffRemoved: (x) => x,\n      errorMessage: (x) => x,\n      errorStack: (x) => x,\n    }\n  }\n}\n\nfunction detectSupport(\n  stream: Writable,\n  env: NodeJS.ProcessEnv,\n  enabled?: boolean\n): ColorInfo {\n  const support: ColorInfo = supportsColor(stream)\n  // if we find FORCE_COLOR, we can let the supports-color library handle that\n  if ('FORCE_COLOR' in env || doesNotHaveValue(enabled)) {\n    return support\n  }\n  return enabled ? support || { level: 1 } : false\n}\n"],"mappings":";;;;;;;;;;AAAA,MAAAA,OAAA,GAAAC,eAAA,CAAAC,OAAA;AACA,MAAAC,gBAAA,GAAAD,OAAA;AAGA,MAAAE,eAAA,GAAAF,OAAA;AAcA,SAAwBG,WAAWA,CACjCC,MAAgB,EAChBC,GAAsB,EACtBC,OAAiB;EAEjB,MAAMC,OAAO,GAAcC,aAAa,CAACJ,MAAM,EAAEC,GAAG,EAAEC,OAAO,CAAC;EAC9D,IAAIC,OAAO,EAAE;IACX,MAAME,aAAa,GAAG,IAAIX,OAAA,CAAAY,OAAK,CAACC,QAAQ,CAACJ,OAAO,CAAC;IACjD,OAAO;MACLK,SAASA,CAACC,MAA4B;QACpC,OAAO;UACLC,SAAS,EAAEL,aAAa,CAACM,GAAG,CAACC,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UACxCO,MAAM,EAAER,aAAa,CAACM,GAAG,CAACC,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UACrCQ,MAAM,EAAET,aAAa,CAACU,KAAK,CAACH,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UACvCU,OAAO,EAAEX,aAAa,CAACY,MAAM,CAACL,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UACzCY,OAAO,EAAEb,aAAa,CAACc,IAAI,CAACP,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UACvCc,SAAS,EAAEf,aAAa,CAACY,MAAM,CAACL,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;UAC3Ce,OAAO,EAAEhB,aAAa,CAACY,MAAM,CAACL,IAAI,CAAClB,OAAA,CAAAY,OAAK;SACzC,CAACG,MAAM,CAAC;MACX,CAAC;MACDa,QAAQ,EAAEjB,aAAa,CAACkB,IAAI,CAACX,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;MACxCkB,GAAG,EAAEnB,aAAa,CAACc,IAAI,CAACP,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;MACnCmB,SAAS,EAAEpB,aAAa,CAACU,KAAK,CAACH,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;MAC1CoB,WAAW,EAAErB,aAAa,CAACM,GAAG,CAACC,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;MAC1CqB,YAAY,EAAEtB,aAAa,CAACM,GAAG,CAACC,IAAI,CAAClB,OAAA,CAAAY,OAAK,CAAC;MAC3CsB,UAAU,EAAEvB,aAAa,CAACwB,IAAI,CAACjB,IAAI,CAAClB,OAAA,CAAAY,OAAK;KAC1C;GACF,MAAM;IACL,OAAO;MACLE,SAASA,CAACsB,OAA6B;QACrC,OAAQC,CAAC,IAAKA,CAAC;MACjB,CAAC;MACDT,QAAQ,EAAGS,CAAC,IAAKA,CAAC;MAClBP,GAAG,EAAGO,CAAC,IAAKA,CAAC;MACbN,SAAS,EAAGM,CAAC,IAAKA,CAAC;MACnBL,WAAW,EAAGK,CAAC,IAAKA,CAAC;MACrBJ,YAAY,EAAGI,CAAC,IAAKA,CAAC;MACtBH,UAAU,EAAGG,CAAC,IAAKA;KACpB;;AAEL;AAxCAC,OAAA,CAAA1B,OAAA,GAAAP,WAAA;AA0CA,SAASK,aAAaA,CACpBJ,MAAgB,EAChBC,GAAsB,EACtBC,OAAiB;EAEjB,MAAMC,OAAO,GAAc,IAAAN,gBAAA,CAAAoC,aAAa,EAACjC,MAAM,CAAC;EAChD;EACA,IAAI,aAAa,IAAIC,GAAG,IAAI,IAAAH,eAAA,CAAAoC,gBAAgB,EAAChC,OAAO,CAAC,EAAE;IACrD,OAAOC,OAAO;;EAEhB,OAAOD,OAAO,GAAGC,OAAO,IAAI;IAAEgC,KAAK,EAAE;EAAC,CAAE,GAAG,KAAK;AAClD"}