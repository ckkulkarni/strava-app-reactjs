847345adc650c6e5c0de81741a0b6dcf
'use strict';

const os = require('os');
const hasFlag = require('has-flag');
const env = process.env;
let forceColor;
if (hasFlag('no-color') || hasFlag('no-colors') || hasFlag('color=false')) {
  forceColor = false;
} else if (hasFlag('color') || hasFlag('colors') || hasFlag('color=true') || hasFlag('color=always')) {
  forceColor = true;
}
if ('FORCE_COLOR' in env) {
  forceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;
}
function translateLevel(level) {
  if (level === 0) {
    return false;
  }
  return {
    level,
    hasBasic: true,
    has256: level >= 2,
    has16m: level >= 3
  };
}
function supportsColor(stream) {
  if (forceColor === false) {
    return 0;
  }
  if (hasFlag('color=16m') || hasFlag('color=full') || hasFlag('color=truecolor')) {
    return 3;
  }
  if (hasFlag('color=256')) {
    return 2;
  }
  if (stream && !stream.isTTY && forceColor !== true) {
    return 0;
  }
  const min = forceColor ? 1 : 0;
  if (process.platform === 'win32') {
    // Node.js 7.5.0 is the first version of Node.js to include a patch to
    // libuv that enables 256 color output on Windows. Anything earlier and it
    // won't work. However, here we target Node.js 8 at minimum as it is an LTS
    // release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows
    // release that supports 256 colors. Windows 10 build 14931 is the first release
    // that supports 16m/TrueColor.
    const osRelease = os.release().split('.');
    if (Number(process.versions.node.split('.')[0]) >= 8 && Number(osRelease[0]) >= 10 && Number(osRelease[2]) >= 10586) {
      return Number(osRelease[2]) >= 14931 ? 3 : 2;
    }
    return 1;
  }
  if ('CI' in env) {
    if (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {
      return 1;
    }
    return min;
  }
  if ('TEAMCITY_VERSION' in env) {
    return /^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;
  }
  if (env.COLORTERM === 'truecolor') {
    return 3;
  }
  if ('TERM_PROGRAM' in env) {
    const version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);
    switch (env.TERM_PROGRAM) {
      case 'iTerm.app':
        return version >= 3 ? 3 : 2;
      case 'Apple_Terminal':
        return 2;
      // No default
    }
  }

  if (/-256(color)?$/i.test(env.TERM)) {
    return 2;
  }
  if (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {
    return 1;
  }
  if ('COLORTERM' in env) {
    return 1;
  }
  if (env.TERM === 'dumb') {
    return min;
  }
  return min;
}
function getSupportLevel(stream) {
  const level = supportsColor(stream);
  return translateLevel(level);
}
module.exports = {
  supportsColor: getSupportLevel,
  stdout: getSupportLevel(process.stdout),
  stderr: getSupportLevel(process.stderr)
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcyIsInJlcXVpcmUiLCJoYXNGbGFnIiwiZW52IiwicHJvY2VzcyIsImZvcmNlQ29sb3IiLCJGT1JDRV9DT0xPUiIsImxlbmd0aCIsInBhcnNlSW50IiwidHJhbnNsYXRlTGV2ZWwiLCJsZXZlbCIsImhhc0Jhc2ljIiwiaGFzMjU2IiwiaGFzMTZtIiwic3VwcG9ydHNDb2xvciIsInN0cmVhbSIsImlzVFRZIiwibWluIiwicGxhdGZvcm0iLCJvc1JlbGVhc2UiLCJyZWxlYXNlIiwic3BsaXQiLCJOdW1iZXIiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJzb21lIiwic2lnbiIsIkNJX05BTUUiLCJ0ZXN0IiwiVEVBTUNJVFlfVkVSU0lPTiIsIkNPTE9SVEVSTSIsInZlcnNpb24iLCJURVJNX1BST0dSQU1fVkVSU0lPTiIsIlRFUk1fUFJPR1JBTSIsIlRFUk0iLCJnZXRTdXBwb3J0TGV2ZWwiLCJtb2R1bGUiLCJleHBvcnRzIiwic3Rkb3V0Iiwic3RkZXJyIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpO1xuY29uc3QgaGFzRmxhZyA9IHJlcXVpcmUoJ2hhcy1mbGFnJyk7XG5cbmNvbnN0IGVudiA9IHByb2Nlc3MuZW52O1xuXG5sZXQgZm9yY2VDb2xvcjtcbmlmIChoYXNGbGFnKCduby1jb2xvcicpIHx8XG5cdGhhc0ZsYWcoJ25vLWNvbG9ycycpIHx8XG5cdGhhc0ZsYWcoJ2NvbG9yPWZhbHNlJykpIHtcblx0Zm9yY2VDb2xvciA9IGZhbHNlO1xufSBlbHNlIGlmIChoYXNGbGFnKCdjb2xvcicpIHx8XG5cdGhhc0ZsYWcoJ2NvbG9ycycpIHx8XG5cdGhhc0ZsYWcoJ2NvbG9yPXRydWUnKSB8fFxuXHRoYXNGbGFnKCdjb2xvcj1hbHdheXMnKSkge1xuXHRmb3JjZUNvbG9yID0gdHJ1ZTtcbn1cbmlmICgnRk9SQ0VfQ09MT1InIGluIGVudikge1xuXHRmb3JjZUNvbG9yID0gZW52LkZPUkNFX0NPTE9SLmxlbmd0aCA9PT0gMCB8fCBwYXJzZUludChlbnYuRk9SQ0VfQ09MT1IsIDEwKSAhPT0gMDtcbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRlTGV2ZWwobGV2ZWwpIHtcblx0aWYgKGxldmVsID09PSAwKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIHtcblx0XHRsZXZlbCxcblx0XHRoYXNCYXNpYzogdHJ1ZSxcblx0XHRoYXMyNTY6IGxldmVsID49IDIsXG5cdFx0aGFzMTZtOiBsZXZlbCA+PSAzXG5cdH07XG59XG5cbmZ1bmN0aW9uIHN1cHBvcnRzQ29sb3Ioc3RyZWFtKSB7XG5cdGlmIChmb3JjZUNvbG9yID09PSBmYWxzZSkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cblx0aWYgKGhhc0ZsYWcoJ2NvbG9yPTE2bScpIHx8XG5cdFx0aGFzRmxhZygnY29sb3I9ZnVsbCcpIHx8XG5cdFx0aGFzRmxhZygnY29sb3I9dHJ1ZWNvbG9yJykpIHtcblx0XHRyZXR1cm4gMztcblx0fVxuXG5cdGlmIChoYXNGbGFnKCdjb2xvcj0yNTYnKSkge1xuXHRcdHJldHVybiAyO1xuXHR9XG5cblx0aWYgKHN0cmVhbSAmJiAhc3RyZWFtLmlzVFRZICYmIGZvcmNlQ29sb3IgIT09IHRydWUpIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdGNvbnN0IG1pbiA9IGZvcmNlQ29sb3IgPyAxIDogMDtcblxuXHRpZiAocHJvY2Vzcy5wbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xuXHRcdC8vIE5vZGUuanMgNy41LjAgaXMgdGhlIGZpcnN0IHZlcnNpb24gb2YgTm9kZS5qcyB0byBpbmNsdWRlIGEgcGF0Y2ggdG9cblx0XHQvLyBsaWJ1diB0aGF0IGVuYWJsZXMgMjU2IGNvbG9yIG91dHB1dCBvbiBXaW5kb3dzLiBBbnl0aGluZyBlYXJsaWVyIGFuZCBpdFxuXHRcdC8vIHdvbid0IHdvcmsuIEhvd2V2ZXIsIGhlcmUgd2UgdGFyZ2V0IE5vZGUuanMgOCBhdCBtaW5pbXVtIGFzIGl0IGlzIGFuIExUU1xuXHRcdC8vIHJlbGVhc2UsIGFuZCBOb2RlLmpzIDcgaXMgbm90LiBXaW5kb3dzIDEwIGJ1aWxkIDEwNTg2IGlzIHRoZSBmaXJzdCBXaW5kb3dzXG5cdFx0Ly8gcmVsZWFzZSB0aGF0IHN1cHBvcnRzIDI1NiBjb2xvcnMuIFdpbmRvd3MgMTAgYnVpbGQgMTQ5MzEgaXMgdGhlIGZpcnN0IHJlbGVhc2Vcblx0XHQvLyB0aGF0IHN1cHBvcnRzIDE2bS9UcnVlQ29sb3IuXG5cdFx0Y29uc3Qgb3NSZWxlYXNlID0gb3MucmVsZWFzZSgpLnNwbGl0KCcuJyk7XG5cdFx0aWYgKFxuXHRcdFx0TnVtYmVyKHByb2Nlc3MudmVyc2lvbnMubm9kZS5zcGxpdCgnLicpWzBdKSA+PSA4ICYmXG5cdFx0XHROdW1iZXIob3NSZWxlYXNlWzBdKSA+PSAxMCAmJlxuXHRcdFx0TnVtYmVyKG9zUmVsZWFzZVsyXSkgPj0gMTA1ODZcblx0XHQpIHtcblx0XHRcdHJldHVybiBOdW1iZXIob3NSZWxlYXNlWzJdKSA+PSAxNDkzMSA/IDMgOiAyO1xuXHRcdH1cblxuXHRcdHJldHVybiAxO1xuXHR9XG5cblx0aWYgKCdDSScgaW4gZW52KSB7XG5cdFx0aWYgKFsnVFJBVklTJywgJ0NJUkNMRUNJJywgJ0FQUFZFWU9SJywgJ0dJVExBQl9DSSddLnNvbWUoc2lnbiA9PiBzaWduIGluIGVudikgfHwgZW52LkNJX05BTUUgPT09ICdjb2Rlc2hpcCcpIHtcblx0XHRcdHJldHVybiAxO1xuXHRcdH1cblxuXHRcdHJldHVybiBtaW47XG5cdH1cblxuXHRpZiAoJ1RFQU1DSVRZX1ZFUlNJT04nIGluIGVudikge1xuXHRcdHJldHVybiAvXig5XFwuKDAqWzEtOV1cXGQqKVxcLnxcXGR7Mix9XFwuKS8udGVzdChlbnYuVEVBTUNJVFlfVkVSU0lPTikgPyAxIDogMDtcblx0fVxuXG5cdGlmIChlbnYuQ09MT1JURVJNID09PSAndHJ1ZWNvbG9yJykge1xuXHRcdHJldHVybiAzO1xuXHR9XG5cblx0aWYgKCdURVJNX1BST0dSQU0nIGluIGVudikge1xuXHRcdGNvbnN0IHZlcnNpb24gPSBwYXJzZUludCgoZW52LlRFUk1fUFJPR1JBTV9WRVJTSU9OIHx8ICcnKS5zcGxpdCgnLicpWzBdLCAxMCk7XG5cblx0XHRzd2l0Y2ggKGVudi5URVJNX1BST0dSQU0pIHtcblx0XHRcdGNhc2UgJ2lUZXJtLmFwcCc6XG5cdFx0XHRcdHJldHVybiB2ZXJzaW9uID49IDMgPyAzIDogMjtcblx0XHRcdGNhc2UgJ0FwcGxlX1Rlcm1pbmFsJzpcblx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHQvLyBObyBkZWZhdWx0XG5cdFx0fVxuXHR9XG5cblx0aWYgKC8tMjU2KGNvbG9yKT8kL2kudGVzdChlbnYuVEVSTSkpIHtcblx0XHRyZXR1cm4gMjtcblx0fVxuXG5cdGlmICgvXnNjcmVlbnxeeHRlcm18XnZ0MTAwfF52dDIyMHxecnh2dHxjb2xvcnxhbnNpfGN5Z3dpbnxsaW51eC9pLnRlc3QoZW52LlRFUk0pKSB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblxuXHRpZiAoJ0NPTE9SVEVSTScgaW4gZW52KSB7XG5cdFx0cmV0dXJuIDE7XG5cdH1cblxuXHRpZiAoZW52LlRFUk0gPT09ICdkdW1iJykge1xuXHRcdHJldHVybiBtaW47XG5cdH1cblxuXHRyZXR1cm4gbWluO1xufVxuXG5mdW5jdGlvbiBnZXRTdXBwb3J0TGV2ZWwoc3RyZWFtKSB7XG5cdGNvbnN0IGxldmVsID0gc3VwcG9ydHNDb2xvcihzdHJlYW0pO1xuXHRyZXR1cm4gdHJhbnNsYXRlTGV2ZWwobGV2ZWwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0c3VwcG9ydHNDb2xvcjogZ2V0U3VwcG9ydExldmVsLFxuXHRzdGRvdXQ6IGdldFN1cHBvcnRMZXZlbChwcm9jZXNzLnN0ZG91dCksXG5cdHN0ZGVycjogZ2V0U3VwcG9ydExldmVsKHByb2Nlc3Muc3RkZXJyKVxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFDWixNQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJ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