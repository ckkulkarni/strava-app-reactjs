a0c543dd7b02aa55da3a9e624afd9f1c
"use strict";

var __createBinding = void 0 && (void 0).__createBinding || (Object.create ? function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  var desc = Object.getOwnPropertyDescriptor(m, k);
  if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
    desc = {
      enumerable: true,
      get: function () {
        return m[k];
      }
    };
  }
  Object.defineProperty(o, k2, desc);
} : function (o, m, k, k2) {
  if (k2 === undefined) k2 = k;
  o[k2] = m[k];
});
var __setModuleDefault = void 0 && (void 0).__setModuleDefault || (Object.create ? function (o, v) {
  Object.defineProperty(o, "default", {
    enumerable: true,
    value: v
  });
} : function (o, v) {
  o["default"] = v;
});
var __importStar = void 0 && (void 0).__importStar || function (mod) {
  if (mod && mod.__esModule) return mod;
  var result = {};
  if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
  __setModuleDefault(result, mod);
  return result;
};
Object.defineProperty(exports, "__esModule", {
  value: true
});
const messages = __importStar(require("@cucumber/messages"));
const value_checker_1 = require("../../value_checker");
class EventDataCollector {
  constructor(eventBroadcaster) {
    this.gherkinDocumentMap = {};
    this.pickleMap = {};
    this.testCaseMap = {};
    this.testCaseAttemptDataMap = {};
    this.undefinedParameterTypes = [];
    eventBroadcaster.on('envelope', this.parseEnvelope.bind(this));
  }
  getGherkinDocument(uri) {
    return this.gherkinDocumentMap[uri];
  }
  getPickle(pickleId) {
    return this.pickleMap[pickleId];
  }
  getTestCaseAttempts() {
    return Object.keys(this.testCaseAttemptDataMap).map(testCaseStartedId => {
      return this.getTestCaseAttempt(testCaseStartedId);
    });
  }
  getTestCaseAttempt(testCaseStartedId) {
    const testCaseAttemptData = this.testCaseAttemptDataMap[testCaseStartedId];
    const testCase = this.testCaseMap[testCaseAttemptData.testCaseId];
    const pickle = this.pickleMap[testCase.pickleId];
    return {
      gherkinDocument: this.gherkinDocumentMap[pickle.uri],
      pickle,
      testCase,
      attempt: testCaseAttemptData.attempt,
      willBeRetried: testCaseAttemptData.willBeRetried,
      stepAttachments: testCaseAttemptData.stepAttachments,
      stepResults: testCaseAttemptData.stepResults,
      worstTestStepResult: testCaseAttemptData.worstTestStepResult
    };
  }
  parseEnvelope(envelope) {
    if ((0, value_checker_1.doesHaveValue)(envelope.gherkinDocument)) {
      this.gherkinDocumentMap[envelope.gherkinDocument.uri] = envelope.gherkinDocument;
    } else if ((0, value_checker_1.doesHaveValue)(envelope.pickle)) {
      this.pickleMap[envelope.pickle.id] = envelope.pickle;
    } else if ((0, value_checker_1.doesHaveValue)(envelope.undefinedParameterType)) {
      this.undefinedParameterTypes.push(envelope.undefinedParameterType);
    } else if ((0, value_checker_1.doesHaveValue)(envelope.testCase)) {
      this.testCaseMap[envelope.testCase.id] = envelope.testCase;
    } else if ((0, value_checker_1.doesHaveValue)(envelope.testCaseStarted)) {
      this.initTestCaseAttempt(envelope.testCaseStarted);
    } else if ((0, value_checker_1.doesHaveValue)(envelope.attachment)) {
      this.storeAttachment(envelope.attachment);
    } else if ((0, value_checker_1.doesHaveValue)(envelope.testStepFinished)) {
      this.storeTestStepResult(envelope.testStepFinished);
    } else if ((0, value_checker_1.doesHaveValue)(envelope.testCaseFinished)) {
      this.storeTestCaseResult(envelope.testCaseFinished);
    }
  }
  initTestCaseAttempt(testCaseStarted) {
    this.testCaseAttemptDataMap[testCaseStarted.id] = {
      attempt: testCaseStarted.attempt,
      willBeRetried: false,
      testCaseId: testCaseStarted.testCaseId,
      stepAttachments: {},
      stepResults: {},
      worstTestStepResult: {
        duration: {
          seconds: 0,
          nanos: 0
        },
        status: messages.TestStepResultStatus.UNKNOWN
      }
    };
  }
  storeAttachment(attachment) {
    const {
      testCaseStartedId,
      testStepId
    } = attachment;
    // TODO: we shouldn't have to check if these properties have values - they are non-nullable
    if ((0, value_checker_1.doesHaveValue)(testCaseStartedId) && (0, value_checker_1.doesHaveValue)(testStepId)) {
      const {
        stepAttachments
      } = this.testCaseAttemptDataMap[testCaseStartedId];
      if ((0, value_checker_1.doesNotHaveValue)(stepAttachments[testStepId])) {
        stepAttachments[testStepId] = [];
      }
      stepAttachments[testStepId].push(attachment);
    }
  }
  storeTestStepResult({
    testCaseStartedId,
    testStepId,
    testStepResult
  }) {
    this.testCaseAttemptDataMap[testCaseStartedId].stepResults[testStepId] = testStepResult;
  }
  storeTestCaseResult({
    testCaseStartedId,
    willBeRetried
  }) {
    const stepResults = Object.values(this.testCaseAttemptDataMap[testCaseStartedId].stepResults);
    this.testCaseAttemptDataMap[testCaseStartedId].worstTestStepResult = messages.getWorstTestStepResult(stepResults);
    this.testCaseAttemptDataMap[testCaseStartedId].willBeRetried = willBeRetried;
  }
}
exports.default = EventDataCollector;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXNzYWdlcyIsIl9faW1wb3J0U3RhciIsInJlcXVpcmUiLCJ2YWx1ZV9jaGVja2VyXzEiLCJFdmVudERhdGFDb2xsZWN0b3IiLCJjb25zdHJ1Y3RvciIsImV2ZW50QnJvYWRjYXN0ZXIiLCJnaGVya2luRG9jdW1lbnRNYXAiLCJwaWNrbGVNYXAiLCJ0ZXN0Q2FzZU1hcCIsInRlc3RDYXNlQXR0ZW1wdERhdGFNYXAiLCJ1bmRlZmluZWRQYXJhbWV0ZXJUeXBlcyIsIm9uIiwicGFyc2VFbnZlbG9wZSIsImJpbmQiLCJnZXRHaGVya2luRG9jdW1lbnQiLCJ1cmkiLCJnZXRQaWNrbGUiLCJwaWNrbGVJZCIsImdldFRlc3RDYXNlQXR0ZW1wdHMiLCJPYmplY3QiLCJrZXlzIiwibWFwIiwidGVzdENhc2VTdGFydGVkSWQiLCJnZXRUZXN0Q2FzZUF0dGVtcHQiLCJ0ZXN0Q2FzZUF0dGVtcHREYXRhIiwidGVzdENhc2UiLCJ0ZXN0Q2FzZUlkIiwicGlja2xlIiwiZ2hlcmtpbkRvY3VtZW50IiwiYXR0ZW1wdCIsIndpbGxCZVJldHJpZWQiLCJzdGVwQXR0YWNobWVudHMiLCJzdGVwUmVzdWx0cyIsIndvcnN0VGVzdFN0ZXBSZXN1bHQiLCJlbnZlbG9wZSIsImRvZXNIYXZlVmFsdWUiLCJpZCIsInVuZGVmaW5lZFBhcmFtZXRlclR5cGUiLCJwdXNoIiwidGVzdENhc2VTdGFydGVkIiwiaW5pdFRlc3RDYXNlQXR0ZW1wdCIsImF0dGFjaG1lbnQiLCJzdG9yZUF0dGFjaG1lbnQiLCJ0ZXN0U3RlcEZpbmlzaGVkIiwic3RvcmVUZXN0U3RlcFJlc3VsdCIsInRlc3RDYXNlRmluaXNoZWQiLCJzdG9yZVRlc3RDYXNlUmVzdWx0IiwiZHVyYXRpb24iLCJzZWNvbmRzIiwibmFub3MiLCJzdGF0dXMiLCJUZXN0U3RlcFJlc3VsdFN0YXR1cyIsIlVOS05PV04iLCJ0ZXN0U3RlcElkIiwiZG9lc05vdEhhdmVWYWx1ZSIsInRlc3RTdGVwUmVzdWx0IiwidmFsdWVzIiwiZ2V0V29yc3RUZXN0U3RlcFJlc3VsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2Zvcm1hdHRlci9oZWxwZXJzL2V2ZW50X2RhdGFfY29sbGVjdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG1lc3NhZ2VzIGZyb20gJ0BjdWN1bWJlci9tZXNzYWdlcydcbmltcG9ydCB7IGRvZXNIYXZlVmFsdWUsIGRvZXNOb3RIYXZlVmFsdWUgfSBmcm9tICcuLi8uLi92YWx1ZV9jaGVja2VyJ1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJ1xuXG5pbnRlcmZhY2UgSVRlc3RDYXNlQXR0ZW1wdERhdGEge1xuICBhdHRlbXB0OiBudW1iZXJcbiAgd2lsbEJlUmV0cmllZDogYm9vbGVhblxuICB0ZXN0Q2FzZUlkOiBzdHJpbmdcbiAgc3RlcEF0dGFjaG1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5BdHRhY2htZW50W10+XG4gIHN0ZXBSZXN1bHRzOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5UZXN0U3RlcFJlc3VsdD5cbiAgd29yc3RUZXN0U3RlcFJlc3VsdDogbWVzc2FnZXMuVGVzdFN0ZXBSZXN1bHRcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVGVzdENhc2VBdHRlbXB0IHtcbiAgYXR0ZW1wdDogbnVtYmVyXG4gIHdpbGxCZVJldHJpZWQ6IGJvb2xlYW5cbiAgZ2hlcmtpbkRvY3VtZW50OiBtZXNzYWdlcy5HaGVya2luRG9jdW1lbnRcbiAgcGlja2xlOiBtZXNzYWdlcy5QaWNrbGVcbiAgc3RlcEF0dGFjaG1lbnRzOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5BdHRhY2htZW50W10+XG4gIHN0ZXBSZXN1bHRzOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5UZXN0U3RlcFJlc3VsdD5cbiAgdGVzdENhc2U6IG1lc3NhZ2VzLlRlc3RDYXNlXG4gIHdvcnN0VGVzdFN0ZXBSZXN1bHQ6IG1lc3NhZ2VzLlRlc3RTdGVwUmVzdWx0XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RGF0YUNvbGxlY3RvciB7XG4gIHByaXZhdGUgZ2hlcmtpbkRvY3VtZW50TWFwOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5HaGVya2luRG9jdW1lbnQ+ID0ge31cbiAgcHJpdmF0ZSBwaWNrbGVNYXA6IFJlY29yZDxzdHJpbmcsIG1lc3NhZ2VzLlBpY2tsZT4gPSB7fVxuICBwcml2YXRlIHRlc3RDYXNlTWFwOiBSZWNvcmQ8c3RyaW5nLCBtZXNzYWdlcy5UZXN0Q2FzZT4gPSB7fVxuICBwcml2YXRlIHRlc3RDYXNlQXR0ZW1wdERhdGFNYXA6IFJlY29yZDxzdHJpbmcsIElUZXN0Q2FzZUF0dGVtcHREYXRhPiA9IHt9XG4gIHJlYWRvbmx5IHVuZGVmaW5lZFBhcmFtZXRlclR5cGVzOiBtZXNzYWdlcy5VbmRlZmluZWRQYXJhbWV0ZXJUeXBlW10gPSBbXVxuXG4gIGNvbnN0cnVjdG9yKGV2ZW50QnJvYWRjYXN0ZXI6IEV2ZW50RW1pdHRlcikge1xuICAgIGV2ZW50QnJvYWRjYXN0ZXIub24oJ2VudmVsb3BlJywgdGhpcy5wYXJzZUVudmVsb3BlLmJpbmQodGhpcykpXG4gIH1cblxuICBnZXRHaGVya2luRG9jdW1lbnQodXJpOiBzdHJpbmcpOiBtZXNzYWdlcy5HaGVya2luRG9jdW1lbnQge1xuICAgIHJldHVybiB0aGlzLmdoZXJraW5Eb2N1bWVudE1hcFt1cmldXG4gIH1cblxuICBnZXRQaWNrbGUocGlja2xlSWQ6IHN0cmluZyk6IG1lc3NhZ2VzLlBpY2tsZSB7XG4gICAgcmV0dXJuIHRoaXMucGlja2xlTWFwW3BpY2tsZUlkXVxuICB9XG5cbiAgZ2V0VGVzdENhc2VBdHRlbXB0cygpOiBJVGVzdENhc2VBdHRlbXB0W10ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnRlc3RDYXNlQXR0ZW1wdERhdGFNYXApLm1hcCgodGVzdENhc2VTdGFydGVkSWQpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLmdldFRlc3RDYXNlQXR0ZW1wdCh0ZXN0Q2FzZVN0YXJ0ZWRJZClcbiAgICB9KVxuICB9XG5cbiAgZ2V0VGVzdENhc2VBdHRlbXB0KHRlc3RDYXNlU3RhcnRlZElkOiBzdHJpbmcpOiBJVGVzdENhc2VBdHRlbXB0IHtcbiAgICBjb25zdCB0ZXN0Q2FzZUF0dGVtcHREYXRhID0gdGhpcy50ZXN0Q2FzZUF0dGVtcHREYXRhTWFwW3Rlc3RDYXNlU3RhcnRlZElkXVxuICAgIGNvbnN0IHRlc3RDYXNlID0gdGhpcy50ZXN0Q2FzZU1hcFt0ZXN0Q2FzZUF0dGVtcHREYXRhLnRlc3RDYXNlSWRdXG4gICAgY29uc3QgcGlja2xlID0gdGhpcy5waWNrbGVNYXBbdGVzdENhc2UucGlja2xlSWRdXG4gICAgcmV0dXJuIHtcbiAgICAgIGdoZXJraW5Eb2N1bWVudDogdGhpcy5naGVya2luRG9jdW1lbnRNYXBbcGlja2xlLnVyaV0sXG4gICAgICBwaWNrbGUsXG4gICAgICB0ZXN0Q2FzZSxcbiAgICAgIGF0dGVtcHQ6IHRlc3RDYXNlQXR0ZW1wdERhdGEuYXR0ZW1wdCxcbiAgICAgIHdpbGxCZVJldHJpZWQ6IHRlc3RDYXNlQXR0ZW1wdERhdGEud2lsbEJlUmV0cmllZCxcbiAgICAgIHN0ZXBBdHRhY2htZW50czogdGVzdENhc2VBdHRlbXB0RGF0YS5zdGVwQXR0YWNobWVudHMsXG4gICAgICBzdGVwUmVzdWx0czogdGVzdENhc2VBdHRlbXB0RGF0YS5zdGVwUmVzdWx0cyxcbiAgICAgIHdvcnN0VGVzdFN0ZXBSZXN1bHQ6IHRlc3RDYXNlQXR0ZW1wdERhdGEud29yc3RUZXN0U3RlcFJlc3VsdCxcbiAgICB9XG4gIH1cblxuICBwYXJzZUVudmVsb3BlKGVudmVsb3BlOiBtZXNzYWdlcy5FbnZlbG9wZSk6IHZvaWQge1xuICAgIGlmIChkb2VzSGF2ZVZhbHVlKGVudmVsb3BlLmdoZXJraW5Eb2N1bWVudCkpIHtcbiAgICAgIHRoaXMuZ2hlcmtpbkRvY3VtZW50TWFwW2VudmVsb3BlLmdoZXJraW5Eb2N1bWVudC51cmldID1cbiAgICAgICAgZW52ZWxvcGUuZ2hlcmtpbkRvY3VtZW50XG4gICAgfSBlbHNlIGlmIChkb2VzSGF2ZVZhbHVlKGVudmVsb3BlLnBpY2tsZSkpIHtcbiAgICAgIHRoaXMucGlja2xlTWFwW2VudmVsb3BlLnBpY2tsZS5pZF0gPSBlbnZlbG9wZS5waWNrbGVcbiAgICB9IGVsc2UgaWYgKGRvZXNIYXZlVmFsdWUoZW52ZWxvcGUudW5kZWZpbmVkUGFyYW1ldGVyVHlwZSkpIHtcbiAgICAgIHRoaXMudW5kZWZpbmVkUGFyYW1ldGVyVHlwZXMucHVzaChlbnZlbG9wZS51bmRlZmluZWRQYXJhbWV0ZXJUeXBlKVxuICAgIH0gZWxzZSBpZiAoZG9lc0hhdmVWYWx1ZShlbnZlbG9wZS50ZXN0Q2FzZSkpIHtcbiAgICAgIHRoaXMudGVzdENhc2VNYXBbZW52ZWxvcGUudGVzdENhc2UuaWRdID0gZW52ZWxvcGUudGVzdENhc2VcbiAgICB9IGVsc2UgaWYgKGRvZXNIYXZlVmFsdWUoZW52ZWxvcGUudGVzdENhc2VTdGFydGVkKSkge1xuICAgICAgdGhpcy5pbml0VGVzdENhc2VBdHRlbXB0KGVudmVsb3BlLnRlc3RDYXNlU3RhcnRlZClcbiAgICB9IGVsc2UgaWYgKGRvZXNIYXZlVmFsdWUoZW52ZWxvcGUuYXR0YWNobWVudCkpIHtcbiAgICAgIHRoaXMuc3RvcmVBdHRhY2htZW50KGVudmVsb3BlLmF0dGFjaG1lbnQpXG4gICAgfSBlbHNlIGlmIChkb2VzSGF2ZVZhbHVlKGVudmVsb3BlLnRlc3RTdGVwRmluaXNoZWQpKSB7XG4gICAgICB0aGlzLnN0b3JlVGVzdFN0ZXBSZXN1bHQoZW52ZWxvcGUudGVzdFN0ZXBGaW5pc2hlZClcbiAgICB9IGVsc2UgaWYgKGRvZXNIYXZlVmFsdWUoZW52ZWxvcGUudGVzdENhc2VGaW5pc2hlZCkpIHtcbiAgICAgIHRoaXMuc3RvcmVUZXN0Q2FzZVJlc3VsdChlbnZlbG9wZS50ZXN0Q2FzZUZpbmlzaGVkKVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5pdFRlc3RDYXNlQXR0ZW1wdCh0ZXN0Q2FzZVN0YXJ0ZWQ6IG1lc3NhZ2VzLlRlc3RDYXNlU3RhcnRlZCk6IHZvaWQge1xuICAgIHRoaXMudGVzdENhc2VBdHRlbXB0RGF0YU1hcFt0ZXN0Q2FzZVN0YXJ0ZWQuaWRdID0ge1xuICAgICAgYXR0ZW1wdDogdGVzdENhc2VTdGFydGVkLmF0dGVtcHQsXG4gICAgICB3aWxsQmVSZXRyaWVkOiBmYWxzZSxcbiAgICAgIHRlc3RDYXNlSWQ6IHRlc3RDYXNlU3RhcnRlZC50ZXN0Q2FzZUlkLFxuICAgICAgc3RlcEF0dGFjaG1lbnRzOiB7fSxcbiAgICAgIHN0ZXBSZXN1bHRzOiB7fSxcbiAgICAgIHdvcnN0VGVzdFN0ZXBSZXN1bHQ6IHtcbiAgICAgICAgZHVyYXRpb246IHsgc2Vjb25kczogMCwgbmFub3M6IDAgfSxcbiAgICAgICAgc3RhdHVzOiBtZXNzYWdlcy5UZXN0U3RlcFJlc3VsdFN0YXR1cy5VTktOT1dOLFxuICAgICAgfSxcbiAgICB9XG4gIH1cblxuICBzdG9yZUF0dGFjaG1lbnQoYXR0YWNobWVudDogbWVzc2FnZXMuQXR0YWNobWVudCk6IHZvaWQge1xuICAgIGNvbnN0IHsgdGVzdENhc2VTdGFydGVkSWQsIHRlc3RTdGVwSWQgfSA9IGF0dGFjaG1lbnRcbiAgICAvLyBUT0RPOiB3ZSBzaG91bGRuJ3QgaGF2ZSB0byBjaGVjayBpZiB0aGVzZSBwcm9wZXJ0aWVzIGhhdmUgdmFsdWVzIC0gdGhleSBhcmUgbm9uLW51bGxhYmxlXG4gICAgaWYgKGRvZXNIYXZlVmFsdWUodGVzdENhc2VTdGFydGVkSWQpICYmIGRvZXNIYXZlVmFsdWUodGVzdFN0ZXBJZCkpIHtcbiAgICAgIGNvbnN0IHsgc3RlcEF0dGFjaG1lbnRzIH0gPSB0aGlzLnRlc3RDYXNlQXR0ZW1wdERhdGFNYXBbdGVzdENhc2VTdGFydGVkSWRdXG4gICAgICBpZiAoZG9lc05vdEhhdmVWYWx1ZShzdGVwQXR0YWNobWVudHNbdGVzdFN0ZXBJZF0pKSB7XG4gICAgICAgIHN0ZXBBdHRhY2htZW50c1t0ZXN0U3RlcElkXSA9IFtdXG4gICAgICB9XG4gICAgICBzdGVwQXR0YWNobWVudHNbdGVzdFN0ZXBJZF0ucHVzaChhdHRhY2htZW50KVxuICAgIH1cbiAgfVxuXG4gIHN0b3JlVGVzdFN0ZXBSZXN1bHQoe1xuICAgIHRlc3RDYXNlU3RhcnRlZElkLFxuICAgIHRlc3RTdGVwSWQsXG4gICAgdGVzdFN0ZXBSZXN1bHQsXG4gIH06IG1lc3NhZ2VzLlRlc3RTdGVwRmluaXNoZWQpOiB2b2lkIHtcbiAgICB0aGlzLnRlc3RDYXNlQXR0ZW1wdERhdGFNYXBbdGVzdENhc2VTdGFydGVkSWRdLnN0ZXBSZXN1bHRzW3Rlc3RTdGVwSWRdID1cbiAgICAgIHRlc3RTdGVwUmVzdWx0XG4gIH1cblxuICBzdG9yZVRlc3RDYXNlUmVzdWx0KHtcbiAgICB0ZXN0Q2FzZVN0YXJ0ZWRJZCxcbiAgICB3aWxsQmVSZXRyaWVkLFxuICB9OiBtZXNzYWdlcy5UZXN0Q2FzZUZpbmlzaGVkKTogdm9pZCB7XG4gICAgY29uc3Qgc3RlcFJlc3VsdHMgPSBPYmplY3QudmFsdWVzKFxuICAgICAgdGhpcy50ZXN0Q2FzZUF0dGVtcHREYXRhTWFwW3Rlc3RDYXNlU3RhcnRlZElkXS5zdGVwUmVzdWx0c1xuICAgIClcbiAgICB0aGlzLnRlc3RDYXNlQXR0ZW1wdERhdGFNYXBbdGVzdENhc2VTdGFydGVkSWRdLndvcnN0VGVzdFN0ZXBSZXN1bHQgPVxuICAgICAgbWVzc2FnZXMuZ2V0V29yc3RUZXN0U3RlcFJlc3VsdChzdGVwUmVzdWx0cylcbiAgICB0aGlzLnRlc3RDYXNlQXR0ZW1wdERhdGFNYXBbdGVzdENhc2VTdGFydGVkSWRdLndpbGxCZVJldHJpZWQgPSB3aWxsQmVSZXRyaWVkXG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsTUFBQUEsUUFBQSxHQUFBQyxZQUFBLENBQUFDLE9BQUE7QUFDQSxNQUFBQyxlQUFBLEdBQUFELE9BQUE7QUF1QkEsTUFBcUJFLGtCQUFrQjtFQU9yQ0MsWUFBWUMsZ0JBQThCO0lBTmxD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