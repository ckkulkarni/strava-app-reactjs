0a873ef772886972ee9857fa8fa8fc89
"use strict";

var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _PaymentScreen = _interopRequireDefault(require("./../../PaymentScreen"));
require("@testing-library/jest-dom/extend-expect");
var _reactRedux = require("react-redux");
var _toolkit = require("@reduxjs/toolkit");
var _jestCucumber = require("jest-cucumber");
var _reactRouterDom = require("react-router-dom");
var _parkingSlice = _interopRequireDefault(require("../../redux/reducer/parkingSlice"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _getJestObj() {
  const {
    jest
  } = require("@jest/globals");
  _getJestObj = () => jest;
  return jest;
}
let store;
const feature = (0, _jestCucumber.loadFeature)("src/components/features/paymentscreen.feature");
(0, _jestCucumber.defineFeature)(feature, test => {
  test("User pays for occupied parking spot", ({
    given,
    then,
    when,
    and
  }) => {
    _getJestObj().mock("react-router-dom", () => ({
      ...jest.requireActual("react-router-dom"),
      useLocation: jest.fn()
    }));
    const spaceDetails = {
      registration: "ABC",
      parkingTime: "14:00"
    };
    const space = "1";
    const mockLocation = {
      state: {
        spaceDetails,
        space
      }
    };
    given("I am on the Payment Screen", () => {
      store = (0, _toolkit.configureStore)({
        reducer: {
          parkingSpaces: _parkingSlice.default
        }
      });
      const state = {
        spaceDetails: {
          registration: "ABC123",
          parkingTime: "08:30"
        },
        space: 1
      };
      jest.spyOn(require("react-router-dom"), "useLocation").mockReturnValue(mockLocation);
      (0, _react2.render)( /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
        store: store
      }, /*#__PURE__*/_react.default.createElement(_reactRouterDom.MemoryRouter, {
        initialEntries: ["/payment"]
      }, /*#__PURE__*/_react.default.createElement(_reactRouterDom.Routes, null, /*#__PURE__*/_react.default.createElement(_reactRouterDom.Route, {
        path: "/payment",
        element: /*#__PURE__*/_react.default.createElement(_PaymentScreen.default, null)
      })))));
    });
    and("I see the vehicle registration and hours parked for the occupied parking spot", async () => {
      store = (0, _toolkit.configureStore)({
        reducer: {
          parkingSpaces: _parkingSlice.default
        }
      });
      const spaceDetails = {
        registration: "ABC",
        parkingTime: "12:30"
      };
      const space = 1;
      jest.spyOn(require("react-router-dom"), "useLocation").mockReturnValue(mockLocation);
      const {
        getByTestId
      } = (0, _react2.render)( /*#__PURE__*/_react.default.createElement(_reactRedux.Provider, {
        store: store
      }, /*#__PURE__*/_react.default.createElement(_reactRouterDom.MemoryRouter, {
        initialEntries: [`/payment`]
      }, /*#__PURE__*/_react.default.createElement(_reactRouterDom.Route, {
        path: "/payment/:space"
      }, /*#__PURE__*/_react.default.createElement(_PaymentScreen.default, null)))));
      expect(await _react2.screen.findByTestId("reg")).toHaveTextContent("Vehicle Registration: ABC123");
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdDIiLCJfUGF5bWVudFNjcmVlbiIsIl9yZWFjdFJlZHV4IiwiX3Rvb2xraXQiLCJfamVzdEN1Y3VtYmVyIiwiX3JlYWN0Um91dGVyRG9tIiwiX3BhcmtpbmdTbGljZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2dldEplc3RPYmoiLCJqZXN0Iiwic3RvcmUiLCJmZWF0dXJlIiwibG9hZEZlYXR1cmUiLCJkZWZpbmVGZWF0dXJlIiwidGVzdCIsImdpdmVuIiwidGhlbiIsIndoZW4iLCJhbmQiLCJtb2NrIiwicmVxdWlyZUFjdHVhbCIsInVzZUxvY2F0aW9uIiwiZm4iLCJzcGFjZURldGFpbHMiLCJyZWdpc3RyYXRpb24iLCJwYXJraW5nVGltZSIsInNwYWNlIiwibW9ja0xvY2F0aW9uIiwic3RhdGUiLCJjb25maWd1cmVTdG9yZSIsInJlZHVjZXIiLCJwYXJraW5nU3BhY2VzIiwicGFya2luZ1NsaWNlIiwic3B5T24iLCJtb2NrUmV0dXJuVmFsdWUiLCJyZW5kZXIiLCJjcmVhdGVFbGVtZW50IiwiUHJvdmlkZXIiLCJNZW1vcnlSb3V0ZXIiLCJpbml0aWFsRW50cmllcyIsIlJvdXRlcyIsIlJvdXRlIiwicGF0aCIsImVsZW1lbnQiLCJnZXRCeVRlc3RJZCIsImV4cGVjdCIsInNjcmVlbiIsImZpbmRCeVRlc3RJZCIsInRvSGF2ZVRleHRDb250ZW50Il0sInNvdXJjZXMiOlsicGF5bWVudHNjcmVlbi5zdGVwcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgeyBzY3JlZW4sIHJlbmRlciwgZmlyZUV2ZW50IH0gZnJvbSBcIkB0ZXN0aW5nLWxpYnJhcnkvcmVhY3RcIjtcclxuaW1wb3J0IFBheW1lbnRTY3JlZW4gZnJvbSBcIi4vLi4vLi4vUGF5bWVudFNjcmVlblwiO1xyXG5pbXBvcnQgXCJAdGVzdGluZy1saWJyYXJ5L2plc3QtZG9tL2V4dGVuZC1leHBlY3RcIjtcclxuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcclxuaW1wb3J0IHsgY29uZmlndXJlU3RvcmUgfSBmcm9tIFwiQHJlZHV4anMvdG9vbGtpdFwiO1xyXG5pbXBvcnQgeyBkZWZpbmVGZWF0dXJlLCBsb2FkRmVhdHVyZSB9IGZyb20gXCJqZXN0LWN1Y3VtYmVyXCI7XHJcbmltcG9ydCB7XHJcbiAgQnJvd3NlclJvdXRlciBhcyBSb3V0ZXIsXHJcbiAgUm91dGVzLFxyXG4gIFJvdXRlLFxyXG4gIE1lbW9yeVJvdXRlcixcclxuICB1c2VMb2NhdGlvbixcclxufSBmcm9tIFwicmVhY3Qtcm91dGVyLWRvbVwiO1xyXG5pbXBvcnQgcGFya2luZ1NsaWNlIGZyb20gXCIuLi8uLi9yZWR1eC9yZWR1Y2VyL3BhcmtpbmdTbGljZVwiO1xyXG5sZXQgc3RvcmU6IGFueTtcclxuY29uc3QgZmVhdHVyZSA9IGxvYWRGZWF0dXJlKFwic3JjL2NvbXBvbmVudHMvZmVhdHVyZXMvcGF5bWVudHNjcmVlbi5mZWF0dXJlXCIpO1xyXG5kZWZpbmVGZWF0dXJlKGZlYXR1cmUsICh0ZXN0KSA9PiB7XHJcbiAgdGVzdChcIlVzZXIgcGF5cyBmb3Igb2NjdXBpZWQgcGFya2luZyBzcG90XCIsICh7IGdpdmVuLCB0aGVuLCB3aGVuLCBhbmQgfSkgPT4ge1xyXG4gICAgamVzdC5tb2NrKFwicmVhY3Qtcm91dGVyLWRvbVwiLCAoKSA9PiAoe1xyXG4gICAgICAuLi5qZXN0LnJlcXVpcmVBY3R1YWwoXCJyZWFjdC1yb3V0ZXItZG9tXCIpLFxyXG4gICAgICB1c2VMb2NhdGlvbjogamVzdC5mbigpLFxyXG4gICAgfSkpO1xyXG4gICAgY29uc3Qgc3BhY2VEZXRhaWxzID0ge1xyXG4gICAgICByZWdpc3RyYXRpb246IFwiQUJDXCIsXHJcbiAgICAgIHBhcmtpbmdUaW1lOiBcIjE0OjAwXCIsXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc3BhY2UgPSBcIjFcIjtcclxuICAgIGNvbnN0IG1vY2tMb2NhdGlvbiA9IHtcclxuICAgICAgc3RhdGU6IHtcclxuICAgICAgICBzcGFjZURldGFpbHMsXHJcbiAgICAgICAgc3BhY2UsXHJcbiAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgZ2l2ZW4oXCJJIGFtIG9uIHRoZSBQYXltZW50IFNjcmVlblwiLCAoKSA9PiB7XHJcbiAgICAgIHN0b3JlID0gY29uZmlndXJlU3RvcmUoe1xyXG4gICAgICAgIHJlZHVjZXI6IHtcclxuICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IHBhcmtpbmdTbGljZSxcclxuICAgICAgICB9LFxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3Qgc3RhdGUgPSB7XHJcbiAgICAgICAgc3BhY2VEZXRhaWxzOiB7XHJcbiAgICAgICAgICByZWdpc3RyYXRpb246IFwiQUJDMTIzXCIsXHJcbiAgICAgICAgICBwYXJraW5nVGltZTogXCIwODozMFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3BhY2U6IDEsXHJcbiAgICAgIH07XHJcbiAgICAgIGplc3RcclxuICAgICAgICAuc3B5T24ocmVxdWlyZShcInJlYWN0LXJvdXRlci1kb21cIiksIFwidXNlTG9jYXRpb25cIilcclxuICAgICAgICAubW9ja1JldHVyblZhbHVlKG1vY2tMb2NhdGlvbik7XHJcbiAgICAgIHJlbmRlcihcclxuICAgICAgICA8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cclxuICAgICAgICAgIDxNZW1vcnlSb3V0ZXIgaW5pdGlhbEVudHJpZXM9e1tcIi9wYXltZW50XCJdfT5cclxuICAgICAgICAgICAgPFJvdXRlcz5cclxuICAgICAgICAgICAgICA8Um91dGUgcGF0aD1cIi9wYXltZW50XCIgZWxlbWVudD17PFBheW1lbnRTY3JlZW4gLz59IC8+XHJcbiAgICAgICAgICAgIDwvUm91dGVzPlxyXG4gICAgICAgICAgPC9NZW1vcnlSb3V0ZXI+XHJcbiAgICAgICAgPC9Qcm92aWRlcj5cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGFuZChcclxuICAgICAgXCJJIHNlZSB0aGUgdmVoaWNsZSByZWdpc3RyYXRpb24gYW5kIGhvdXJzIHBhcmtlZCBmb3IgdGhlIG9jY3VwaWVkIHBhcmtpbmcgc3BvdFwiLFxyXG4gICAgICBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgc3RvcmUgPSBjb25maWd1cmVTdG9yZSh7XHJcbiAgICAgICAgICByZWR1Y2VyOiB7XHJcbiAgICAgICAgICAgIHBhcmtpbmdTcGFjZXM6IHBhcmtpbmdTbGljZSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3Qgc3BhY2VEZXRhaWxzID0geyByZWdpc3RyYXRpb246IFwiQUJDXCIsIHBhcmtpbmdUaW1lOiBcIjEyOjMwXCIgfTtcclxuICAgICAgICBjb25zdCBzcGFjZSA9IDE7XHJcbiAgICAgICAgamVzdFxyXG4gICAgICAgICAgLnNweU9uKHJlcXVpcmUoXCJyZWFjdC1yb3V0ZXItZG9tXCIpLCBcInVzZUxvY2F0aW9uXCIpXHJcbiAgICAgICAgICAubW9ja1JldHVyblZhbHVlKG1vY2tMb2NhdGlvbik7XHJcblxyXG4gICAgICAgIGNvbnN0IHsgZ2V0QnlUZXN0SWQgfSA9IHJlbmRlcihcclxuICAgICAgICAgIDxQcm92aWRlciBzdG9yZT17c3RvcmV9PlxyXG4gICAgICAgICAgICA8TWVtb3J5Um91dGVyIGluaXRpYWxFbnRyaWVzPXtbYC9wYXltZW50YF19PlxyXG4gICAgICAgICAgICAgIDxSb3V0ZSBwYXRoPVwiL3BheW1lbnQvOnNwYWNlXCI+XHJcbiAgICAgICAgICAgICAgICA8UGF5bWVudFNjcmVlbiAvPlxyXG4gICAgICAgICAgICAgIDwvUm91dGU+XHJcbiAgICAgICAgICAgIDwvTWVtb3J5Um91dGVyPlxyXG4gICAgICAgICAgPC9Qcm92aWRlcj5cclxuICAgICAgICApO1xyXG4gICAgICAgIGV4cGVjdChhd2FpdCBzY3JlZW4uZmluZEJ5VGVzdElkKFwicmVnXCIpKS50b0hhdmVUZXh0Q29udGVudChcclxuICAgICAgICAgIFwiVmVoaWNsZSBSZWdpc3RyYXRpb246IEFCQzEyM1wiXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG4gICAgKTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxjQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQUEsT0FBQTtBQUNBLElBQUFHLFdBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLGFBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLGVBQUEsR0FBQU4sT0FBQTtBQU9BLElBQUFPLGFBQUEsR0FBQVIsc0JBQUEsQ0FBQUMsT0FBQTtBQUE0RCxTQUFBRCx1QkFBQVMsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUFBLFNBQUFHLFlBQUE7RUFBQTtJQUFBQztFQUFBLElBQUFaLE9BQUE7RUFBQVcsV0FBQSxHQUFBQSxDQUFBLEtBQUFDLElBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFDNUQsSUFBSUMsS0FBVTtBQUNkLE1BQU1DLE9BQU8sR0FBRyxJQUFBQyx5QkFBVyxFQUFDLCtDQUErQyxDQUFDO0FBQzVFLElBQUFDLDJCQUFhLEVBQUNGLE9BQU8sRUFBR0csSUFBSSxJQUFLO0VBQy9CQSxJQUFJLENBQUMscUNBQXFDLEVBQUUsQ0FBQztJQUFFQyxLQUFLO0lBQUVDLElBQUk7SUFBRUMsSUFBSTtJQUFFQztFQUFJLENBQUMsS0FBSztJQUMxRVYsV0FBQSxHQUFLVyxJQUFJLENBQUMsa0JBQWtCLEVBQUUsT0FBTztNQUNuQyxHQUFHVixJQUFJLENBQUNXLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQztNQUN6Q0MsV0FBVyxFQUFFWixJQUFJ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