{"version":3,"names":["Node","require","Pair","Scalar","YAMLSeq","resolvePairs","seq","onError","isSeq","i","items","length","item","isPair","isMap","pair","commentBefore","key","comment","cn","value","createPairs","schema","iterable","ctx","replacer","pairs","tag","Symbol","iterator","Object","it","call","String","Array","isArray","TypeError","keys","push","createPair","collection","default","resolve","createNode","exports"],"sources":["pairs.js"],"sourcesContent":["'use strict';\n\nvar Node = require('../../nodes/Node.js');\nvar Pair = require('../../nodes/Pair.js');\nvar Scalar = require('../../nodes/Scalar.js');\nvar YAMLSeq = require('../../nodes/YAMLSeq.js');\n\nfunction resolvePairs(seq, onError) {\n    if (Node.isSeq(seq)) {\n        for (let i = 0; i < seq.items.length; ++i) {\n            let item = seq.items[i];\n            if (Node.isPair(item))\n                continue;\n            else if (Node.isMap(item)) {\n                if (item.items.length > 1)\n                    onError('Each pair must have its own sequence indicator');\n                const pair = item.items[0] || new Pair.Pair(new Scalar.Scalar(null));\n                if (item.commentBefore)\n                    pair.key.commentBefore = pair.key.commentBefore\n                        ? `${item.commentBefore}\\n${pair.key.commentBefore}`\n                        : item.commentBefore;\n                if (item.comment) {\n                    const cn = pair.value ?? pair.key;\n                    cn.comment = cn.comment\n                        ? `${item.comment}\\n${cn.comment}`\n                        : item.comment;\n                }\n                item = pair;\n            }\n            seq.items[i] = Node.isPair(item) ? item : new Pair.Pair(item);\n        }\n    }\n    else\n        onError('Expected a sequence for this tag');\n    return seq;\n}\nfunction createPairs(schema, iterable, ctx) {\n    const { replacer } = ctx;\n    const pairs = new YAMLSeq.YAMLSeq(schema);\n    pairs.tag = 'tag:yaml.org,2002:pairs';\n    let i = 0;\n    if (iterable && Symbol.iterator in Object(iterable))\n        for (let it of iterable) {\n            if (typeof replacer === 'function')\n                it = replacer.call(iterable, String(i++), it);\n            let key, value;\n            if (Array.isArray(it)) {\n                if (it.length === 2) {\n                    key = it[0];\n                    value = it[1];\n                }\n                else\n                    throw new TypeError(`Expected [key, value] tuple: ${it}`);\n            }\n            else if (it && it instanceof Object) {\n                const keys = Object.keys(it);\n                if (keys.length === 1) {\n                    key = keys[0];\n                    value = it[key];\n                }\n                else\n                    throw new TypeError(`Expected { key: value } tuple: ${it}`);\n            }\n            else {\n                key = it;\n            }\n            pairs.items.push(Pair.createPair(key, value, ctx));\n        }\n    return pairs;\n}\nconst pairs = {\n    collection: 'seq',\n    default: false,\n    tag: 'tag:yaml.org,2002:pairs',\n    resolve: resolvePairs,\n    createNode: createPairs\n};\n\nexports.createPairs = createPairs;\nexports.pairs = pairs;\nexports.resolvePairs = resolvePairs;\n"],"mappings":"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"}