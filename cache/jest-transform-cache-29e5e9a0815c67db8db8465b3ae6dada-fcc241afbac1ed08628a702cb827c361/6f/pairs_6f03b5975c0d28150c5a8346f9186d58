4749328e3c7643d65c5962351827daa2
'use strict';

var Node = require('../../nodes/Node.js');
var Pair = require('../../nodes/Pair.js');
var Scalar = require('../../nodes/Scalar.js');
var YAMLSeq = require('../../nodes/YAMLSeq.js');
function resolvePairs(seq, onError) {
  if (Node.isSeq(seq)) {
    for (let i = 0; i < seq.items.length; ++i) {
      let item = seq.items[i];
      if (Node.isPair(item)) continue;else if (Node.isMap(item)) {
        if (item.items.length > 1) onError('Each pair must have its own sequence indicator');
        const pair = item.items[0] || new Pair.Pair(new Scalar.Scalar(null));
        if (item.commentBefore) pair.key.commentBefore = pair.key.commentBefore ? `${item.commentBefore}\n${pair.key.commentBefore}` : item.commentBefore;
        if (item.comment) {
          const cn = pair.value ?? pair.key;
          cn.comment = cn.comment ? `${item.comment}\n${cn.comment}` : item.comment;
        }
        item = pair;
      }
      seq.items[i] = Node.isPair(item) ? item : new Pair.Pair(item);
    }
  } else onError('Expected a sequence for this tag');
  return seq;
}
function createPairs(schema, iterable, ctx) {
  const {
    replacer
  } = ctx;
  const pairs = new YAMLSeq.YAMLSeq(schema);
  pairs.tag = 'tag:yaml.org,2002:pairs';
  let i = 0;
  if (iterable && Symbol.iterator in Object(iterable)) for (let it of iterable) {
    if (typeof replacer === 'function') it = replacer.call(iterable, String(i++), it);
    let key, value;
    if (Array.isArray(it)) {
      if (it.length === 2) {
        key = it[0];
        value = it[1];
      } else throw new TypeError(`Expected [key, value] tuple: ${it}`);
    } else if (it && it instanceof Object) {
      const keys = Object.keys(it);
      if (keys.length === 1) {
        key = keys[0];
        value = it[key];
      } else throw new TypeError(`Expected { key: value } tuple: ${it}`);
    } else {
      key = it;
    }
    pairs.items.push(Pair.createPair(key, value, ctx));
  }
  return pairs;
}
const pairs = {
  collection: 'seq',
  default: false,
  tag: 'tag:yaml.org,2002:pairs',
  resolve: resolvePairs,
  createNode: createPairs
};
exports.createPairs = createPairs;
exports.pairs = pairs;
exports.resolvePairs = resolvePairs;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOb2RlIiwicmVxdWlyZSIsIlBhaXIiLCJTY2FsYXIiLCJZQU1MU2VxIiwicmVzb2x2ZVBhaXJzIiwic2VxIiwib25FcnJvciIsImlzU2VxIiwiaSIsIml0ZW1zIiwibGVuZ3RoIiwiaXRlbSIsImlzUGFpciIsImlzTWFwIiwicGFpciIsImNvbW1lbnRCZWZvcmUiLCJrZXkiLCJjb21tZW50IiwiY24iLCJ2YWx1ZSIsImNyZWF0ZVBhaXJzIiwic2NoZW1hIiwiaXRlcmFibGUiLCJjdHgiLCJyZXBsYWNlciIsInBhaXJzIiwidGFnIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJPYmplY3QiLCJpdCIsImNhbGwiLCJTdHJpbmciLCJBcnJheSIsImlzQXJyYXkiLCJUeXBlRXJyb3IiLCJrZXlzIiwicHVzaCIsImNyZWF0ZVBhaXIiLCJjb2xsZWN0aW9uIiwiZGVmYXVsdCIsInJlc29sdmUiLCJjcmVhdGVOb2RlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInBhaXJzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIE5vZGUgPSByZXF1aXJlKCcuLi8uLi9ub2Rlcy9Ob2RlLmpzJyk7XG52YXIgUGFpciA9IHJlcXVpcmUoJy4uLy4uL25vZGVzL1BhaXIuanMnKTtcbnZhciBTY2FsYXIgPSByZXF1aXJlKCcuLi8uLi9ub2Rlcy9TY2FsYXIuanMnKTtcbnZhciBZQU1MU2VxID0gcmVxdWlyZSgnLi4vLi4vbm9kZXMvWUFNTFNlcS5qcycpO1xuXG5mdW5jdGlvbiByZXNvbHZlUGFpcnMoc2VxLCBvbkVycm9yKSB7XG4gICAgaWYgKE5vZGUuaXNTZXEoc2VxKSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlcS5pdGVtcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBzZXEuaXRlbXNbaV07XG4gICAgICAgICAgICBpZiAoTm9kZS5pc1BhaXIoaXRlbSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBlbHNlIGlmIChOb2RlLmlzTWFwKGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXRlbXMubGVuZ3RoID4gMSlcbiAgICAgICAgICAgICAgICAgICAgb25FcnJvcignRWFjaCBwYWlyIG11c3QgaGF2ZSBpdHMgb3duIHNlcXVlbmNlIGluZGljYXRvcicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhaXIgPSBpdGVtLml0ZW1zWzBdIHx8IG5ldyBQYWlyLlBhaXIobmV3IFNjYWxhci5TY2FsYXIobnVsbCkpO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLmNvbW1lbnRCZWZvcmUpXG4gICAgICAgICAgICAgICAgICAgIHBhaXIua2V5LmNvbW1lbnRCZWZvcmUgPSBwYWlyLmtleS5jb21tZW50QmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGAke2l0ZW0uY29tbWVudEJlZm9yZX1cXG4ke3BhaXIua2V5LmNvbW1lbnRCZWZvcmV9YFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLmNvbW1lbnRCZWZvcmU7XG4gICAgICAgICAgICAgICAgaWYgKGl0ZW0uY29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjbiA9IHBhaXIudmFsdWUgPz8gcGFpci5rZXk7XG4gICAgICAgICAgICAgICAgICAgIGNuLmNvbW1lbnQgPSBjbi5jb21tZW50XG4gICAgICAgICAgICAgICAgICAgICAgICA/IGAke2l0ZW0uY29tbWVudH1cXG4ke2NuLmNvbW1lbnR9YFxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLmNvbW1lbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGl0ZW0gPSBwYWlyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VxLml0ZW1zW2ldID0gTm9kZS5pc1BhaXIoaXRlbSkgPyBpdGVtIDogbmV3IFBhaXIuUGFpcihpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlXG4gICAgICAgIG9uRXJyb3IoJ0V4cGVjdGVkIGEgc2VxdWVuY2UgZm9yIHRoaXMgdGFnJyk7XG4gICAgcmV0dXJuIHNlcTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBhaXJzKHNjaGVtYSwgaXRlcmFibGUsIGN0eCkge1xuICAgIGNvbnN0IHsgcmVwbGFjZXIgfSA9IGN0eDtcbiAgICBjb25zdCBwYWlycyA9IG5ldyBZQU1MU2VxLllBTUxTZXEoc2NoZW1hKTtcbiAgICBwYWlycy50YWcgPSAndGFnOnlhbWwub3JnLDIwMDI6cGFpcnMnO1xuICAgIGxldCBpID0gMDtcbiAgICBpZiAoaXRlcmFibGUgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyYWJsZSkpXG4gICAgICAgIGZvciAobGV0IGl0IG9mIGl0ZXJhYmxlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHJlcGxhY2VyID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIGl0ID0gcmVwbGFjZXIuY2FsbChpdGVyYWJsZSwgU3RyaW5nKGkrKyksIGl0KTtcbiAgICAgICAgICAgIGxldCBrZXksIHZhbHVlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGl0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBpdFswXTtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBpdFsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCBba2V5LCB2YWx1ZV0gdHVwbGU6ICR7aXR9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpdCAmJiBpdCBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhpdCk7XG4gICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IGtleXNbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gaXRba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBFeHBlY3RlZCB7IGtleTogdmFsdWUgfSB0dXBsZTogJHtpdH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleSA9IGl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFpcnMuaXRlbXMucHVzaChQYWlyLmNyZWF0ZVBhaXIoa2V5LCB2YWx1ZSwgY3R4KSk7XG4gICAgICAgIH1cbiAgICByZXR1cm4gcGFpcnM7XG59XG5jb25zdCBwYWlycyA9IHtcbiAgICBjb2xsZWN0aW9uOiAnc2VxJyxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0YWc6ICd0YWc6eWFtbC5vcmcsMjAwMjpwYWlycycsXG4gICAgcmVzb2x2ZTogcmVzb2x2ZVBhaXJzLFxuICAgIGNyZWF0ZU5vZGU6IGNyZWF0ZVBhaXJzXG59O1xuXG5leHBvcnRzLmNyZWF0ZVBhaXJzID0gY3JlYXRlUGFpcnM7XG5leHBvcnRzLnBhaXJzID0gcGFpcnM7XG5leHBvcnRzLnJlc29sdmVQYWlycyA9IHJlc29sdmVQYWlycztcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWixJQUFJQSxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUN6QyxJQUFJQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUN6QyxJQUFJRSxNQUFNLEdBQUdGLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUM3QyxJQUFJRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUUvQyxTQUFTSSxZQUFZQSxDQUFDQyxHQUFHLEVBQUVDLE9BQU8sRUFBRTtF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