3bfe9aa600de739b21bf0563755845a9
"use strict";

// Generated by CoffeeScript 2.4.1
(function () {
  var NodeType,
    XMLAttribute,
    XMLElement,
    XMLNamedNodeMap,
    XMLNode,
    getValue,
    isFunction,
    isObject,
    hasProp = {}.hasOwnProperty;
  ({
    isObject,
    isFunction,
    getValue
  } = require('./Utility'));
  XMLNode = require('./XMLNode');
  NodeType = require('./NodeType');
  XMLAttribute = require('./XMLAttribute');
  XMLNamedNodeMap = require('./XMLNamedNodeMap');

  // Represents an element of the XML document
  module.exports = XMLElement = function () {
    class XMLElement extends XMLNode {
      // Initializes a new instance of `XMLElement`

      // `parent` the parent node
      // `name` element name
      // `attributes` an object containing name/value pairs of attributes
      constructor(parent, name, attributes) {
        var child, j, len, ref;
        super(parent);
        if (name == null) {
          throw new Error("Missing element name. " + this.debugInfo());
        }
        this.name = this.stringify.name(name);
        this.type = NodeType.Element;
        this.attribs = {};
        this.schemaTypeInfo = null;
        if (attributes != null) {
          this.attribute(attributes);
        }
        // set properties if this is the root node
        if (parent.type === NodeType.Document) {
          this.isRoot = true;
          this.documentObject = parent;
          parent.rootObject = this;
          // set dtd name
          if (parent.children) {
            ref = parent.children;
            for (j = 0, len = ref.length; j < len; j++) {
              child = ref[j];
              if (child.type === NodeType.DocType) {
                child.name = this.name;
                break;
              }
            }
          }
        }
      }

      // Creates and returns a deep clone of `this`

      clone() {
        var att, attName, clonedSelf, ref;
        clonedSelf = Object.create(this);
        // remove document element
        if (clonedSelf.isRoot) {
          clonedSelf.documentObject = null;
        }
        // clone attributes
        clonedSelf.attribs = {};
        ref = this.attribs;
        for (attName in ref) {
          if (!hasProp.call(ref, attName)) continue;
          att = ref[attName];
          clonedSelf.attribs[attName] = att.clone();
        }
        // clone child nodes
        clonedSelf.children = [];
        this.children.forEach(function (child) {
          var clonedChild;
          clonedChild = child.clone();
          clonedChild.parent = clonedSelf;
          return clonedSelf.children.push(clonedChild);
        });
        return clonedSelf;
      }

      // Adds or modifies an attribute

      // `name` attribute name
      // `value` attribute value
      attribute(name, value) {
        var attName, attValue;
        if (name != null) {
          name = getValue(name);
        }
        if (isObject(name)) {
          // expand if object
          for (attName in name) {
            if (!hasProp.call(name, attName)) continue;
            attValue = name[attName];
            this.attribute(attName, attValue);
          }
        } else {
          if (isFunction(value)) {
            value = value.apply();
          }
          if (this.options.keepNullAttributes && value == null) {
            this.attribs[name] = new XMLAttribute(this, name, "");
          } else if (value != null) {
            this.attribs[name] = new XMLAttribute(this, name, value);
          }
        }
        return this;
      }

      // Removes an attribute

      // `name` attribute name
      removeAttribute(name) {
        var attName, j, len;
        // Also defined in DOM level 1
        // removeAttribute(name) removes an attribute by name.
        if (name == null) {
          throw new Error("Missing attribute name. " + this.debugInfo());
        }
        name = getValue(name);
        if (Array.isArray(name)) {
          // expand if array
          for (j = 0, len = name.length; j < len; j++) {
            attName = name[j];
            delete this.attribs[attName];
          }
        } else {
          delete this.attribs[name];
        }
        return this;
      }

      // Converts the XML fragment to string

      // `options.pretty` pretty prints the result
      // `options.indent` indentation for pretty print
      // `options.offset` how many indentations to add to every line for pretty print
      // `options.newline` newline sequence for pretty print
      // `options.allowEmpty` do not self close empty element tags
      toString(options) {
        return this.options.writer.element(this, this.options.writer.filterOptions(options));
      }

      // Aliases
      att(name, value) {
        return this.attribute(name, value);
      }
      a(name, value) {
        return this.attribute(name, value);
      }

      // DOM Level 1
      getAttribute(name) {
        if (this.attribs.hasOwnProperty(name)) {
          return this.attribs[name].value;
        } else {
          return null;
        }
      }
      setAttribute(name, value) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getAttributeNode(name) {
        if (this.attribs.hasOwnProperty(name)) {
          return this.attribs[name];
        } else {
          return null;
        }
      }
      setAttributeNode(newAttr) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      removeAttributeNode(oldAttr) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getElementsByTagName(name) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }

      // DOM Level 2
      getAttributeNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      setAttributeNS(namespaceURI, qualifiedName, value) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      removeAttributeNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getAttributeNodeNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      setAttributeNodeNS(newAttr) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getElementsByTagNameNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      hasAttribute(name) {
        return this.attribs.hasOwnProperty(name);
      }
      hasAttributeNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }

      // DOM Level 3
      setIdAttribute(name, isId) {
        if (this.attribs.hasOwnProperty(name)) {
          return this.attribs[name].isId;
        } else {
          return isId;
        }
      }
      setIdAttributeNS(namespaceURI, localName, isId) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      setIdAttributeNode(idAttr, isId) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }

      // DOM Level 4
      getElementsByTagName(tagname) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getElementsByTagNameNS(namespaceURI, localName) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getElementsByClassName(classNames) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      isEqualNode(node) {
        var i, j, ref;
        if (!super.isEqualNode(node)) {
          return false;
        }
        if (node.namespaceURI !== this.namespaceURI) {
          return false;
        }
        if (node.prefix !== this.prefix) {
          return false;
        }
        if (node.localName !== this.localName) {
          return false;
        }
        if (node.attribs.length !== this.attribs.length) {
          return false;
        }
        for (i = j = 0, ref = this.attribs.length - 1; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
          if (!this.attribs[i].isEqualNode(node.attribs[i])) {
            return false;
          }
        }
        return true;
      }
    }
    ;

    // DOM level 1
    Object.defineProperty(XMLElement.prototype, 'tagName', {
      get: function () {
        return this.name;
      }
    });

    // DOM level 4
    Object.defineProperty(XMLElement.prototype, 'namespaceURI', {
      get: function () {
        return '';
      }
    });
    Object.defineProperty(XMLElement.prototype, 'prefix', {
      get: function () {
        return '';
      }
    });
    Object.defineProperty(XMLElement.prototype, 'localName', {
      get: function () {
        return this.name;
      }
    });
    Object.defineProperty(XMLElement.prototype, 'id', {
      get: function () {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
    });
    Object.defineProperty(XMLElement.prototype, 'className', {
      get: function () {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
    });
    Object.defineProperty(XMLElement.prototype, 'classList', {
      get: function () {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
    });
    Object.defineProperty(XMLElement.prototype, 'attributes', {
      get: function () {
        if (!this.attributeMap || !this.attributeMap.nodes) {
          this.attributeMap = new XMLNamedNodeMap(this.attribs);
        }
        return this.attributeMap;
      }
    });
    return XMLElement;
  }.call(this);
}).call(void 0);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOb2RlVHlwZSIsIlhNTEF0dHJpYnV0ZSIsIlhNTEVsZW1lbnQiLCJYTUxOYW1lZE5vZGVNYXAiLCJYTUxOb2RlIiwiZ2V0VmFsdWUiLCJpc0Z1bmN0aW9uIiwiaXNPYmplY3QiLCJoYXNQcm9wIiwiaGFzT3duUHJvcGVydHkiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbnN0cnVjdG9yIiwicGFyZW50IiwibmFtZSIsImF0dHJpYnV0ZXMiLCJjaGlsZCIsImoiLCJsZW4iLCJyZWYiLCJFcnJvciIsImRlYnVnSW5mbyIsInN0cmluZ2lmeSIsInR5cGUiLCJFbGVtZW50IiwiYXR0cmlicyIsInNjaGVtYVR5cGVJbmZvIiwiYXR0cmlidXRlIiwiRG9jdW1lbnQiLCJpc1Jvb3QiLCJkb2N1bWVudE9iamVjdCIsInJvb3RPYmplY3QiLCJjaGlsZHJlbiIsImxlbmd0aCIsIkRvY1R5cGUiLCJjbG9uZSIsImF0dCIsImF0dE5hbWUiLCJjbG9uZWRTZWxmIiwiT2JqZWN0IiwiY3JlYXRlIiwiY2FsbCIsImZvckVhY2giLCJjbG9uZWRDaGlsZCIsInB1c2giLCJ2YWx1ZSIsImF0dFZhbHVlIiwiYXBwbHkiLCJvcHRpb25zIiwia2VlcE51bGxBdHRyaWJ1dGVzIiwicmVtb3ZlQXR0cmlidXRlIiwiQXJyYXkiLCJpc0FycmF5IiwidG9TdHJpbmciLCJ3cml0ZXIiLCJlbGVtZW50IiwiZmlsdGVyT3B0aW9ucyIsImEiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJnZXRBdHRyaWJ1dGVOb2RlIiwic2V0QXR0cmlidXRlTm9kZSIsIm5ld0F0dHIiLCJyZW1vdmVBdHRyaWJ1dGVOb2RlIiwib2xkQXR0ciIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZ2V0QXR0cmlidXRlTlMiLCJuYW1lc3BhY2VVUkkiLCJsb2NhbE5hbWUiLCJzZXRBdHRyaWJ1dGVOUyIsInF1YWxpZmllZE5hbWUiLCJyZW1vdmVBdHRyaWJ1dGVOUyIsImdldEF0dHJpYnV0ZU5vZGVOUyIsInNldEF0dHJpYnV0ZU5vZGVOUyIsImdldEVsZW1lbnRzQnlUYWdOYW1lTlMiLCJoYXNBdHRyaWJ1dGUiLCJoYXNBdHRyaWJ1dGVOUyIsInNldElkQXR0cmlidXRlIiwiaXNJZCIsInNldElkQXR0cmlidXRlTlMiLCJzZXRJZEF0dHJpYnV0ZU5vZGUiLCJpZEF0dHIiLCJ0YWduYW1lIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNsYXNzTmFtZXMiLCJpc0VxdWFsTm9kZSIsIm5vZGUiLCJpIiwicHJlZml4IiwiZGVmaW5lUHJvcGVydHkiLCJwcm90b3R5cGUiLCJnZXQiLCJhdHRyaWJ1dGVNYXAiLCJub2RlcyJdLCJzb3VyY2VzIjpbIlhNTEVsZW1lbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAyLjQuMVxuKGZ1bmN0aW9uKCkge1xuICB2YXIgTm9kZVR5cGUsIFhNTEF0dHJpYnV0ZSwgWE1MRWxlbWVudCwgWE1MTmFtZWROb2RlTWFwLCBYTUxOb2RlLCBnZXRWYWx1ZSwgaXNGdW5jdGlvbiwgaXNPYmplY3QsXG4gICAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG4gICh7aXNPYmplY3QsIGlzRnVuY3Rpb24sIGdldFZhbHVlfSA9IHJlcXVpcmUoJy4vVXRpbGl0eScpKTtcblxuICBYTUxOb2RlID0gcmVxdWlyZSgnLi9YTUxOb2RlJyk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxOYW1lZE5vZGVNYXAgPSByZXF1aXJlKCcuL1hNTE5hbWVkTm9kZU1hcCcpO1xuXG4gIC8vIFJlcHJlc2VudHMgYW4gZWxlbWVudCBvZiB0aGUgWE1MIGRvY3VtZW50XG4gIG1vZHVsZS5leHBvcnRzID0gWE1MRWxlbWVudCA9IChmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBYTUxFbGVtZW50IGV4dGVuZHMgWE1MTm9kZSB7XG4gICAgICAvLyBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiBgWE1MRWxlbWVudGBcblxuICAgICAgLy8gYHBhcmVudGAgdGhlIHBhcmVudCBub2RlXG4gICAgICAvLyBgbmFtZWAgZWxlbWVudCBuYW1lXG4gICAgICAvLyBgYXR0cmlidXRlc2AgYW4gb2JqZWN0IGNvbnRhaW5pbmcgbmFtZS92YWx1ZSBwYWlycyBvZiBhdHRyaWJ1dGVzXG4gICAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIG5hbWUsIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBqLCBsZW4sIHJlZjtcbiAgICAgICAgc3VwZXIocGFyZW50KTtcbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZWxlbWVudCBuYW1lLiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubmFtZSA9IHRoaXMuc3RyaW5naWZ5Lm5hbWUobmFtZSk7XG4gICAgICAgIHRoaXMudHlwZSA9IE5vZGVUeXBlLkVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYXR0cmlicyA9IHt9O1xuICAgICAgICB0aGlzLnNjaGVtYVR5cGVJbmZvID0gbnVsbDtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMgIT0gbnVsbCkge1xuICAgICAgICAgIHRoaXMuYXR0cmlidXRlKGF0dHJpYnV0ZXMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNldCBwcm9wZXJ0aWVzIGlmIHRoaXMgaXMgdGhlIHJvb3Qgbm9kZVxuICAgICAgICBpZiAocGFyZW50LnR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50KSB7XG4gICAgICAgICAgdGhpcy5pc1Jvb3QgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuZG9jdW1lbnRPYmplY3QgPSBwYXJlbnQ7XG4gICAgICAgICAgcGFyZW50LnJvb3RPYmplY3QgPSB0aGlzO1xuICAgICAgICAgIC8vIHNldCBkdGQgbmFtZVxuICAgICAgICAgIGlmIChwYXJlbnQuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJlZiA9IHBhcmVudC5jaGlsZHJlbjtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICBjaGlsZCA9IHJlZltqXTtcbiAgICAgICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkRvY1R5cGUpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5uYW1lID0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZXMgYW5kIHJldHVybnMgYSBkZWVwIGNsb25lIG9mIGB0aGlzYFxuXG4gICAgICBjbG9uZSgpIHtcbiAgICAgICAgdmFyIGF0dCwgYXR0TmFtZSwgY2xvbmVkU2VsZiwgcmVmO1xuICAgICAgICBjbG9uZWRTZWxmID0gT2JqZWN0LmNyZWF0ZSh0aGlzKTtcbiAgICAgICAgLy8gcmVtb3ZlIGRvY3VtZW50IGVsZW1lbnRcbiAgICAgICAgaWYgKGNsb25lZFNlbGYuaXNSb290KSB7XG4gICAgICAgICAgY2xvbmVkU2VsZi5kb2N1bWVudE9iamVjdCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2xvbmUgYXR0cmlidXRlc1xuICAgICAgICBjbG9uZWRTZWxmLmF0dHJpYnMgPSB7fTtcbiAgICAgICAgcmVmID0gdGhpcy5hdHRyaWJzO1xuICAgICAgICBmb3IgKGF0dE5hbWUgaW4gcmVmKSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgYXR0ID0gcmVmW2F0dE5hbWVdO1xuICAgICAgICAgIGNsb25lZFNlbGYuYXR0cmlic1thdHROYW1lXSA9IGF0dC5jbG9uZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNsb25lIGNoaWxkIG5vZGVzXG4gICAgICAgIGNsb25lZFNlbGYuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkKSB7XG4gICAgICAgICAgdmFyIGNsb25lZENoaWxkO1xuICAgICAgICAgIGNsb25lZENoaWxkID0gY2hpbGQuY2xvbmUoKTtcbiAgICAgICAgICBjbG9uZWRDaGlsZC5wYXJlbnQgPSBjbG9uZWRTZWxmO1xuICAgICAgICAgIHJldHVybiBjbG9uZWRTZWxmLmNoaWxkcmVuLnB1c2goY2xvbmVkQ2hpbGQpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGNsb25lZFNlbGY7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZHMgb3IgbW9kaWZpZXMgYW4gYXR0cmlidXRlXG5cbiAgICAgIC8vIGBuYW1lYCBhdHRyaWJ1dGUgbmFtZVxuICAgICAgLy8gYHZhbHVlYCBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgIGF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB2YXIgYXR0TmFtZSwgYXR0VmFsdWU7XG4gICAgICAgIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgICAgICBuYW1lID0gZ2V0VmFsdWUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzT2JqZWN0KG5hbWUpKSB7IC8vIGV4cGFuZCBpZiBvYmplY3RcbiAgICAgICAgICBmb3IgKGF0dE5hbWUgaW4gbmFtZSkge1xuICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwobmFtZSwgYXR0TmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgYXR0VmFsdWUgPSBuYW1lW2F0dE5hbWVdO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGUoYXR0TmFtZSwgYXR0VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5rZWVwTnVsbEF0dHJpYnV0ZXMgJiYgKHZhbHVlID09IG51bGwpKSB7XG4gICAgICAgICAgICB0aGlzLmF0dHJpYnNbbmFtZV0gPSBuZXcgWE1MQXR0cmlidXRlKHRoaXMsIG5hbWUsIFwiXCIpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJzW25hbWVdID0gbmV3IFhNTEF0dHJpYnV0ZSh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmVzIGFuIGF0dHJpYnV0ZVxuXG4gICAgICAvLyBgbmFtZWAgYXR0cmlidXRlIG5hbWVcbiAgICAgIHJlbW92ZUF0dHJpYnV0ZShuYW1lKSB7XG4gICAgICAgIHZhciBhdHROYW1lLCBqLCBsZW47XG4gICAgICAgIC8vIEFsc28gZGVmaW5lZCBpbiBET00gbGV2ZWwgMVxuICAgICAgICAvLyByZW1vdmVBdHRyaWJ1dGUobmFtZSkgcmVtb3ZlcyBhbiBhdHRyaWJ1dGUgYnkgbmFtZS5cbiAgICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgYXR0cmlidXRlIG5hbWUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICAgIH1cbiAgICAgICAgbmFtZSA9IGdldFZhbHVlKG5hbWUpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkgeyAvLyBleHBhbmQgaWYgYXJyYXlcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBuYW1lLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBhdHROYW1lID0gbmFtZVtqXTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbYXR0TmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLmF0dHJpYnNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnZlcnRzIHRoZSBYTUwgZnJhZ21lbnQgdG8gc3RyaW5nXG5cbiAgICAgIC8vIGBvcHRpb25zLnByZXR0eWAgcHJldHR5IHByaW50cyB0aGUgcmVzdWx0XG4gICAgICAvLyBgb3B0aW9ucy5pbmRlbnRgIGluZGVudGF0aW9uIGZvciBwcmV0dHkgcHJpbnRcbiAgICAgIC8vIGBvcHRpb25zLm9mZnNldGAgaG93IG1hbnkgaW5kZW50YXRpb25zIHRvIGFkZCB0byBldmVyeSBsaW5lIGZvciBwcmV0dHkgcHJpbnRcbiAgICAgIC8vIGBvcHRpb25zLm5ld2xpbmVgIG5ld2xpbmUgc2VxdWVuY2UgZm9yIHByZXR0eSBwcmludFxuICAgICAgLy8gYG9wdGlvbnMuYWxsb3dFbXB0eWAgZG8gbm90IHNlbGYgY2xvc2UgZW1wdHkgZWxlbWVudCB0YWdzXG4gICAgICB0b1N0cmluZyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMud3JpdGVyLmVsZW1lbnQodGhpcywgdGhpcy5vcHRpb25zLndyaXRlci5maWx0ZXJPcHRpb25zKG9wdGlvbnMpKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWxpYXNlc1xuICAgICAgYXR0KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGEobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gRE9NIExldmVsIDFcbiAgICAgIGdldEF0dHJpYnV0ZShuYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJzW25hbWVdLnZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG5cbiAgICAgIGdldEF0dHJpYnV0ZU5vZGUobmFtZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlic1tuYW1lXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRBdHRyaWJ1dGVOb2RlKG5ld0F0dHIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICByZW1vdmVBdHRyaWJ1dGVOb2RlKG9sZEF0dHIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBnZXRFbGVtZW50c0J5VGFnTmFtZShuYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgLy8gRE9NIExldmVsIDJcbiAgICAgIGdldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgc2V0QXR0cmlidXRlTlMobmFtZXNwYWNlVVJJLCBxdWFsaWZpZWROYW1lLCB2YWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZUF0dHJpYnV0ZU5TKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgZ2V0QXR0cmlidXRlTm9kZU5TKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgc2V0QXR0cmlidXRlTm9kZU5TKG5ld0F0dHIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBnZXRFbGVtZW50c0J5VGFnTmFtZU5TKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgaGFzQXR0cmlidXRlKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlicy5oYXNPd25Qcm9wZXJ0eShuYW1lKTtcbiAgICAgIH1cblxuICAgICAgaGFzQXR0cmlidXRlTlMobmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBET00gTGV2ZWwgM1xuICAgICAgc2V0SWRBdHRyaWJ1dGUobmFtZSwgaXNJZCkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlic1tuYW1lXS5pc0lkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBpc0lkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHNldElkQXR0cmlidXRlTlMobmFtZXNwYWNlVVJJLCBsb2NhbE5hbWUsIGlzSWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBzZXRJZEF0dHJpYnV0ZU5vZGUoaWRBdHRyLCBpc0lkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgLy8gRE9NIExldmVsIDRcbiAgICAgIGdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ25hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBnZXRFbGVtZW50c0J5VGFnTmFtZU5TKG5hbWVzcGFjZVVSSSwgbG9jYWxOYW1lKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWVzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgaXNFcXVhbE5vZGUobm9kZSkge1xuICAgICAgICB2YXIgaSwgaiwgcmVmO1xuICAgICAgICBpZiAoIXN1cGVyLmlzRXF1YWxOb2RlKG5vZGUpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLm5hbWVzcGFjZVVSSSAhPT0gdGhpcy5uYW1lc3BhY2VVUkkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUucHJlZml4ICE9PSB0aGlzLnByZWZpeCkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5sb2NhbE5hbWUgIT09IHRoaXMubG9jYWxOYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub2RlLmF0dHJpYnMubGVuZ3RoICE9PSB0aGlzLmF0dHJpYnMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IGogPSAwLCByZWYgPSB0aGlzLmF0dHJpYnMubGVuZ3RoIC0gMTsgKDAgPD0gcmVmID8gaiA8PSByZWYgOiBqID49IHJlZik7IGkgPSAwIDw9IHJlZiA/ICsraiA6IC0taikge1xuICAgICAgICAgIGlmICghdGhpcy5hdHRyaWJzW2ldLmlzRXF1YWxOb2RlKG5vZGUuYXR0cmlic1tpXSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICB9O1xuXG4gICAgLy8gRE9NIGxldmVsIDFcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MRWxlbWVudC5wcm90b3R5cGUsICd0YWdOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIERPTSBsZXZlbCA0XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAnbmFtZXNwYWNlVVJJJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAncHJlZml4Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAnbG9jYWxOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxFbGVtZW50LnByb3RvdHlwZSwgJ2lkJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAnY2xhc3NOYW1lJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAnY2xhc3NMaXN0Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTEVsZW1lbnQucHJvdG90eXBlLCAnYXR0cmlidXRlcycsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghdGhpcy5hdHRyaWJ1dGVNYXAgfHwgIXRoaXMuYXR0cmlidXRlTWFwLm5vZGVzKSB7XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGVNYXAgPSBuZXcgWE1MTmFtZWROb2RlTWFwKHRoaXMuYXR0cmlicyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlTWFwO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIFhNTEVsZW1lbnQ7XG5cbiAgfSkuY2FsbCh0aGlzKTtcblxufSkuY2FsbCh0aGlzKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBLENBQUMsWUFBVztFQUNWLElBQUlBLFFBQVE7SUFBRUMsWUFBWTtJQUFFQyxVQUFVO0lBQUVDLGVBQWU7SUFBRUMsT0FBTztJQUFFQyxRQUFRO0lBQUVDLFVBQVU7SUFBRUMsUUFBUTtJQUM5RkMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDQyxjQUFjO0VBRTdCLENBQUM7SUFBQ0YsUUFBUTtJQUFFRCxVQUFVO0lBQUVEO0VBQVEsQ0FBQyxH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