ed7818be924a88c305824ab529836926
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = inlineDiff;
var _diff = require("diff");
var _padRight = _interopRequireDefault(require("pad-right"));
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}
function inlineDiff(actual, expected, colorFns) {
  let msg = errorDiff(actual, expected, colorFns);

  // linenos
  const lines = msg.split('\n');
  if (lines.length > 4) {
    const width = String(lines.length).length;
    msg = lines.map(function (str, i) {
      return (0, _padRight.default)(i + 1, width, ' ') + '|' + ' ' + str;
    }).join('\n');
  }

  // legend
  msg = '\n    ' + colorFns.diffRemoved('actual') + ' ' + colorFns.diffAdded('expected') + '\n\n' + msg.replace(/^/gm, '    ') + '\n';
  return msg;
}
function errorDiff(actual, expected, colorFns) {
  return (0, _diff.diffWordsWithSpace)(actual, expected).map(function (str) {
    if (str.added) {
      return colorFns.diffAdded(str.value);
    }
    if (str.removed) {
      return colorFns.diffRemoved(str.value);
    }
    return str.value;
  }).join('');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJpbmxpbmVEaWZmIiwiX2RpZmYiLCJyZXF1aXJlIiwiX3BhZFJpZ2h0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJhY3R1YWwiLCJleHBlY3RlZCIsImNvbG9yRm5zIiwibXNnIiwiZXJyb3JEaWZmIiwibGluZXMiLCJzcGxpdCIsImxlbmd0aCIsIndpZHRoIiwiU3RyaW5nIiwibWFwIiwic3RyIiwiaSIsImpvaW4iLCJkaWZmUmVtb3ZlZCIsImRpZmZBZGRlZCIsInJlcGxhY2UiLCJkaWZmV29yZHNXaXRoU3BhY2UiLCJhZGRlZCIsInJlbW92ZWQiXSwic291cmNlcyI6WyJpbmxpbmVfZGlmZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7ZXhwb3J0cy5kZWZhdWx0ID0gaW5saW5lRGlmZjt2YXIgX2RpZmYgPSByZXF1aXJlKFwiZGlmZlwiKTtcbnZhciBfcGFkUmlnaHQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCJwYWQtcmlnaHRcIikpO2Z1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7cmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07fVxuXG5mdW5jdGlvbiBpbmxpbmVEaWZmKGFjdHVhbCwgZXhwZWN0ZWQsIGNvbG9yRm5zKSB7XG4gIGxldCBtc2cgPSBlcnJvckRpZmYoYWN0dWFsLCBleHBlY3RlZCwgY29sb3JGbnMpO1xuXG4gIC8vIGxpbmVub3NcbiAgY29uc3QgbGluZXMgPSBtc2cuc3BsaXQoJ1xcbicpO1xuICBpZiAobGluZXMubGVuZ3RoID4gNCkge1xuICAgIGNvbnN0IHdpZHRoID0gU3RyaW5nKGxpbmVzLmxlbmd0aCkubGVuZ3RoO1xuICAgIG1zZyA9IGxpbmVzLlxuICAgIG1hcChmdW5jdGlvbiAoc3RyLCBpKSB7XG4gICAgICByZXR1cm4gKDAsIF9wYWRSaWdodC5kZWZhdWx0KShpICsgMSwgd2lkdGgsICcgJykgKyAnfCcgKyAnICcgKyBzdHI7XG4gICAgfSkuXG4gICAgam9pbignXFxuJyk7XG4gIH1cblxuICAvLyBsZWdlbmRcbiAgbXNnID1cbiAgJ1xcbiAgICAnICtcbiAgY29sb3JGbnMuZGlmZlJlbW92ZWQoJ2FjdHVhbCcpICtcbiAgJyAnICtcbiAgY29sb3JGbnMuZGlmZkFkZGVkKCdleHBlY3RlZCcpICtcbiAgJ1xcblxcbicgK1xuICBtc2cucmVwbGFjZSgvXi9nbSwgJyAgICAnKSArXG4gICdcXG4nO1xuXG4gIHJldHVybiBtc2c7XG59XG5cbmZ1bmN0aW9uIGVycm9yRGlmZihhY3R1YWwsIGV4cGVjdGVkLCBjb2xvckZucykge1xuICByZXR1cm4gKDAsIF9kaWZmLmRpZmZXb3Jkc1dpdGhTcGFjZSkoYWN0dWFsLCBleHBlY3RlZCkuXG4gIG1hcChmdW5jdGlvbiAoc3RyKSB7XG4gICAgaWYgKHN0ci5hZGRlZCkge1xuICAgICAgcmV0dXJuIGNvbG9yRm5zLmRpZmZBZGRlZChzdHIudmFsdWUpO1xuICAgIH1cbiAgICBpZiAoc3RyLnJlbW92ZWQpIHtcbiAgICAgIHJldHVybiBjb2xvckZucy5kaWZmUmVtb3ZlZChzdHIudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyLnZhbHVlO1xuICB9KS5cbiAgam9pbignJyk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUFDQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUFFQyxLQUFLLEVBQUU7QUFBSyxDQUFDLENBQUM7QUFBQ0QsT0FBTyxDQUFDRSxPQUFPLEdBQUdDLFVBQVU7QUFBQyxJQUFJQyxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDbkksSUFBSUMsU0FBUyxHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQUMsU0FBU0Usc0JBQXNCQSxDQUFDQyxHQUFHLEVBQUU7RUFBQyxPQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ0MsVUFBVSxHQUFHRCxHQUFHLEdBQUc7SUFBRU4sT0FBTyxFQUFFTTtFQUFJLENBQUM7QUFBQztBQUV6SixTQUFTTCxVQUFVQSxDQUFDTyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFO0VBQzlDLElBQUlDLEdBQUcsR0FBR0MsU0FBUyxDQUFDSixNQUFNLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxDQUFDOztFQUUvQztFQUNBLE1BQU1HLEtBQUssR0FBR0YsR0FBRyxDQUFDRyxLQUFLLENBQUMsSUFBSSxDQUFDO0VBQzdCLElBQUlELEtBQUssQ0FBQ0UsTUFBTSxHQUFHLENBQUMsRUFBRTtJQUNwQixNQUFNQyxLQUFLLEdBQUdDLE1BQU0sQ0FBQ0osS0FBSyxDQUFDRSxNQUFNLENBQUMsQ0FBQ0EsTUFBTTtJQUN6Q0osR0FBRyxHQUFHRSxLQUFLLENBQ1hLLEdBQUcsQ0FBQyxVQUFVQyxHQUFHLEVBQUVDLENBQUMsRUFBRTtNQUNwQixPQUFPLENBQUMsQ0FBQyxFQUFFaEIsU0FBUyxDQUFDSixPQUFPLEVBQUVvQixDQUFDLEdBQUcsQ0FBQyxFQUFFSixLQUFLLEVBQUUsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBR0csR0FBRztJQUNwRSxDQUFDLENBQUMsQ0FDRkUsSUFBSSxDQUFDLElBQUksQ0FBQztFQUNaOztFQUVBO0VBQ0FWLEdBQUcsR0FDSCxRQUFRLEdBQ1JELFFBQVEsQ0FBQ1ksV0FBVyxDQUFDLFFBQVEsQ0FBQyxHQUM5QixHQUFHLEdBQ0haLFFBQVEsQ0FBQ2EsU0FBUyxDQUFDLFVBQVUsQ0FBQyxHQUM5QixNQUFNLEdBQ05aLEdBQUcsQ0FBQ2EsT0FBTyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsR0FDMUIsSUFBSTtFQUVKLE9BQU9iLEdBQUc7QUFDWjtBQUVBLFNBQVNDLFNBQVNBLENBQUNKLE1BQU0sRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUU7RUFDN0MsT0FBTyxDQUFDLENBQUMsRUFBRVIsS0FBSyxDQUFDdUIsa0JBQWtCLEVBQUVqQixNQUFNLEVBQUVDLFFBQVEsQ0FBQyxDQUN0RFMsR0FBRyxDQUFDLFVBQVVDLEdBQUcsRUFBRTtJQUNqQixJQUFJQSxHQUFHLENBQUNPLEtBQUssRUFBRTtNQUNiLE9BQU9oQixRQUFRLENBQUNhLFNBQVMsQ0FBQ0osR0FBRyxDQUFDcEIsS0FBSyxDQUFDO0lBQ3RDO0lBQ0EsSUFBSW9CLEdBQUcsQ0FBQ1EsT0FBTyxFQUFFO01BQ2YsT0FBT2pCLFFBQVEsQ0FBQ1ksV0FBVyxDQUFDSCxHQUFHLENBQUNwQixLQUFLLENBQUM7SUFDeEM7SUFDQSxPQUFPb0IsR0FBRyxDQUFDcEIsS0FBSztFQUNsQixDQUFDLENBQUMsQ0FDRnNCLElBQUksQ0FBQyxFQUFFLENBQUM7QUFDViJ9