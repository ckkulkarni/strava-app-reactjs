{"version":3,"names":["Object","defineProperty","exports","value","create","default","_isodate","_interopRequireDefault","require","_locale","_isAbsent","_Reference","_schema","obj","__esModule","invalidDate","Date","isDate","prototype","toString","call","DateSchema","constructor","type","withMutation","transform","isType","isNaN","_typeCheck","v","getTime","prepareParam","ref","name","param","isRef","cast","TypeError","min","message","date","limit","test","exclusive","params","resolve","max","INVALID_DATE"],"sources":["date.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = create;\nexports.default = void 0;\n\nvar _isodate = _interopRequireDefault(require(\"./util/isodate\"));\n\nvar _locale = require(\"./locale\");\n\nvar _isAbsent = _interopRequireDefault(require(\"./util/isAbsent\"));\n\nvar _Reference = _interopRequireDefault(require(\"./Reference\"));\n\nvar _schema = _interopRequireDefault(require(\"./schema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// @ts-ignore\nlet invalidDate = new Date('');\n\nlet isDate = obj => Object.prototype.toString.call(obj) === '[object Date]';\n\nfunction create() {\n  return new DateSchema();\n}\n\nclass DateSchema extends _schema.default {\n  constructor() {\n    super({\n      type: 'date'\n    });\n    this.withMutation(() => {\n      this.transform(function (value) {\n        if (this.isType(value)) return value;\n        value = (0, _isodate.default)(value); // 0 is a valid timestamp equivalent to 1970-01-01T00:00:00Z(unix epoch) or before.\n\n        return !isNaN(value) ? new Date(value) : invalidDate;\n      });\n    });\n  }\n\n  _typeCheck(v) {\n    return isDate(v) && !isNaN(v.getTime());\n  }\n\n  prepareParam(ref, name) {\n    let param;\n\n    if (!_Reference.default.isRef(ref)) {\n      let cast = this.cast(ref);\n      if (!this._typeCheck(cast)) throw new TypeError(`\\`${name}\\` must be a Date or a value that can be \\`cast()\\` to a Date`);\n      param = cast;\n    } else {\n      param = ref;\n    }\n\n    return param;\n  }\n\n  min(min, message = _locale.date.min) {\n    let limit = this.prepareParam(min, 'min');\n    return this.test({\n      message,\n      name: 'min',\n      exclusive: true,\n      params: {\n        min\n      },\n\n      test(value) {\n        return (0, _isAbsent.default)(value) || value >= this.resolve(limit);\n      }\n\n    });\n  }\n\n  max(max, message = _locale.date.max) {\n    let limit = this.prepareParam(max, 'max');\n    return this.test({\n      message,\n      name: 'max',\n      exclusive: true,\n      params: {\n        max\n      },\n\n      test(value) {\n        return (0, _isAbsent.default)(value) || value <= this.resolve(limit);\n      }\n\n    });\n  }\n\n}\n\nexports.default = DateSchema;\nDateSchema.INVALID_DATE = invalidDate;\ncreate.prototype = DateSchema.prototype;\ncreate.INVALID_DATE = invalidDate;"],"mappings":"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"}