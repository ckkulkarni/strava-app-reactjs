119bd7d58ec9677c0b12bef4fd1adf0f
"use strict";

// Generated by CoffeeScript 2.4.1
(function () {
  var NodeType,
    WriterState,
    XMLAttribute,
    XMLCData,
    XMLComment,
    XMLDTDAttList,
    XMLDTDElement,
    XMLDTDEntity,
    XMLDTDNotation,
    XMLDeclaration,
    XMLDocType,
    XMLDocument,
    XMLDocumentCB,
    XMLElement,
    XMLProcessingInstruction,
    XMLRaw,
    XMLStringWriter,
    XMLStringifier,
    XMLText,
    getValue,
    isFunction,
    isObject,
    isPlainObject,
    hasProp = {}.hasOwnProperty;
  ({
    isObject,
    isFunction,
    isPlainObject,
    getValue
  } = require('./Utility'));
  NodeType = require('./NodeType');
  XMLDocument = require('./XMLDocument');
  XMLElement = require('./XMLElement');
  XMLCData = require('./XMLCData');
  XMLComment = require('./XMLComment');
  XMLRaw = require('./XMLRaw');
  XMLText = require('./XMLText');
  XMLProcessingInstruction = require('./XMLProcessingInstruction');
  XMLDeclaration = require('./XMLDeclaration');
  XMLDocType = require('./XMLDocType');
  XMLDTDAttList = require('./XMLDTDAttList');
  XMLDTDEntity = require('./XMLDTDEntity');
  XMLDTDElement = require('./XMLDTDElement');
  XMLDTDNotation = require('./XMLDTDNotation');
  XMLAttribute = require('./XMLAttribute');
  XMLStringifier = require('./XMLStringifier');
  XMLStringWriter = require('./XMLStringWriter');
  WriterState = require('./WriterState');

  // Represents an XML builder
  module.exports = XMLDocumentCB = class XMLDocumentCB {
    // Initializes a new instance of `XMLDocumentCB`

    // `options.keepNullNodes` whether nodes with null values will be kept
    //     or ignored: true or false
    // `options.keepNullAttributes` whether attributes with null values will be
    //     kept or ignored: true or false
    // `options.ignoreDecorators` whether decorator strings will be ignored when
    //     converting JS objects: true or false
    // `options.separateArrayItems` whether array items are created as separate
    //     nodes when passed as an object value: true or false
    // `options.noDoubleEncoding` whether existing html entities are encoded:
    //     true or false
    // `options.stringify` a set of functions to use for converting values to
    //     strings
    // `options.writer` the default XML writer to use for converting nodes to
    //     string. If the default writer is not set, the built-in XMLStringWriter
    //     will be used instead.

    // `onData` the function to be called when a new chunk of XML is output. The
    //          string containing the XML chunk is passed to `onData` as its first
    //          argument, and the current indentation level as its second argument.
    // `onEnd`  the function to be called when the XML document is completed with
    //          `end`. `onEnd` does not receive any arguments.
    constructor(options, onData, onEnd) {
      var writerOptions;
      this.name = "?xml";
      this.type = NodeType.Document;
      options || (options = {});
      writerOptions = {};
      if (!options.writer) {
        options.writer = new XMLStringWriter();
      } else if (isPlainObject(options.writer)) {
        writerOptions = options.writer;
        options.writer = new XMLStringWriter();
      }
      this.options = options;
      this.writer = options.writer;
      this.writerOptions = this.writer.filterOptions(writerOptions);
      this.stringify = new XMLStringifier(options);
      this.onDataCallback = onData || function () {};
      this.onEndCallback = onEnd || function () {};
      this.currentNode = null;
      this.currentLevel = -1;
      this.openTags = {};
      this.documentStarted = false;
      this.documentCompleted = false;
      this.root = null;
    }

    // Creates a child element node from the given XMLNode

    // `node` the child node
    createChildNode(node) {
      var att, attName, attributes, child, i, len, ref, ref1;
      switch (node.type) {
        case NodeType.CData:
          this.cdata(node.value);
          break;
        case NodeType.Comment:
          this.comment(node.value);
          break;
        case NodeType.Element:
          attributes = {};
          ref = node.attribs;
          for (attName in ref) {
            if (!hasProp.call(ref, attName)) continue;
            att = ref[attName];
            attributes[attName] = att.value;
          }
          this.node(node.name, attributes);
          break;
        case NodeType.Dummy:
          this.dummy();
          break;
        case NodeType.Raw:
          this.raw(node.value);
          break;
        case NodeType.Text:
          this.text(node.value);
          break;
        case NodeType.ProcessingInstruction:
          this.instruction(node.target, node.value);
          break;
        default:
          throw new Error("This XML node type is not supported in a JS object: " + node.constructor.name);
      }
      ref1 = node.children;
      // write child nodes recursively
      for (i = 0, len = ref1.length; i < len; i++) {
        child = ref1[i];
        this.createChildNode(child);
        if (child.type === NodeType.Element) {
          this.up();
        }
      }
      return this;
    }

    // Creates a dummy node

    dummy() {
      // no-op, just return this
      return this;
    }

    // Creates a node

    // `name` name of the node
    // `attributes` an object containing name/value pairs of attributes
    // `text` element text
    node(name, attributes, text) {
      if (name == null) {
        throw new Error("Missing node name.");
      }
      if (this.root && this.currentLevel === -1) {
        throw new Error("Document can only have one root node. " + this.debugInfo(name));
      }
      this.openCurrent();
      name = getValue(name);
      if (attributes == null) {
        attributes = {};
      }
      attributes = getValue(attributes);
      // swap argument order: text <-> attributes
      if (!isObject(attributes)) {
        [text, attributes] = [attributes, text];
      }
      this.currentNode = new XMLElement(this, name, attributes);
      this.currentNode.children = false;
      this.currentLevel++;
      this.openTags[this.currentLevel] = this.currentNode;
      if (text != null) {
        this.text(text);
      }
      return this;
    }

    // Creates a child element node or an element type declaration when called
    // inside the DTD

    // `name` name of the node
    // `attributes` an object containing name/value pairs of attributes
    // `text` element text
    element(name, attributes, text) {
      var child, i, len, oldValidationFlag, ref, root;
      if (this.currentNode && this.currentNode.type === NodeType.DocType) {
        this.dtdElement(...arguments);
      } else {
        if (Array.isArray(name) || isObject(name) || isFunction(name)) {
          oldValidationFlag = this.options.noValidation;
          this.options.noValidation = true;
          root = new XMLDocument(this.options).element('TEMP_ROOT');
          root.element(name);
          this.options.noValidation = oldValidationFlag;
          ref = root.children;
          for (i = 0, len = ref.length; i < len; i++) {
            child = ref[i];
            this.createChildNode(child);
            if (child.type === NodeType.Element) {
              this.up();
            }
          }
        } else {
          this.node(name, attributes, text);
        }
      }
      return this;
    }

    // Adds or modifies an attribute

    // `name` attribute name
    // `value` attribute value
    attribute(name, value) {
      var attName, attValue;
      if (!this.currentNode || this.currentNode.children) {
        throw new Error("att() can only be used immediately after an ele() call in callback mode. " + this.debugInfo(name));
      }
      if (name != null) {
        name = getValue(name);
      }
      if (isObject(name)) {
        // expand if object
        for (attName in name) {
          if (!hasProp.call(name, attName)) continue;
          attValue = name[attName];
          this.attribute(attName, attValue);
        }
      } else {
        if (isFunction(value)) {
          value = value.apply();
        }
        if (this.options.keepNullAttributes && value == null) {
          this.currentNode.attribs[name] = new XMLAttribute(this, name, "");
        } else if (value != null) {
          this.currentNode.attribs[name] = new XMLAttribute(this, name, value);
        }
      }
      return this;
    }

    // Creates a text node

    // `value` element text
    text(value) {
      var node;
      this.openCurrent();
      node = new XMLText(this, value);
      this.onData(this.writer.text(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates a CDATA node

    // `value` element text without CDATA delimiters
    cdata(value) {
      var node;
      this.openCurrent();
      node = new XMLCData(this, value);
      this.onData(this.writer.cdata(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates a comment node

    // `value` comment text
    comment(value) {
      var node;
      this.openCurrent();
      node = new XMLComment(this, value);
      this.onData(this.writer.comment(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Adds unescaped raw text

    // `value` text
    raw(value) {
      var node;
      this.openCurrent();
      node = new XMLRaw(this, value);
      this.onData(this.writer.raw(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Adds a processing instruction

    // `target` instruction target
    // `value` instruction value
    instruction(target, value) {
      var i, insTarget, insValue, len, node;
      this.openCurrent();
      if (target != null) {
        target = getValue(target);
      }
      if (value != null) {
        value = getValue(value);
      }
      if (Array.isArray(target)) {
        // expand if array
        for (i = 0, len = target.length; i < len; i++) {
          insTarget = target[i];
          this.instruction(insTarget);
        }
      } else if (isObject(target)) {
        // expand if object
        for (insTarget in target) {
          if (!hasProp.call(target, insTarget)) continue;
          insValue = target[insTarget];
          this.instruction(insTarget, insValue);
        }
      } else {
        if (isFunction(value)) {
          value = value.apply();
        }
        node = new XMLProcessingInstruction(this, target, value);
        this.onData(this.writer.processingInstruction(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      }
      return this;
    }

    // Creates the xml declaration

    // `version` A version number string, e.g. 1.0
    // `encoding` Encoding declaration, e.g. UTF-8
    // `standalone` standalone document declaration: true or false
    declaration(version, encoding, standalone) {
      var node;
      this.openCurrent();
      if (this.documentStarted) {
        throw new Error("declaration() must be the first node.");
      }
      node = new XMLDeclaration(this, version, encoding, standalone);
      this.onData(this.writer.declaration(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates the document type declaration

    // `root`  the name of the root node
    // `pubID` the public identifier of the external subset
    // `sysID` the system identifier of the external subset
    doctype(root, pubID, sysID) {
      this.openCurrent();
      if (root == null) {
        throw new Error("Missing root node name.");
      }
      if (this.root) {
        throw new Error("dtd() must come before the root node.");
      }
      this.currentNode = new XMLDocType(this, pubID, sysID);
      this.currentNode.rootNodeName = root;
      this.currentNode.children = false;
      this.currentLevel++;
      this.openTags[this.currentLevel] = this.currentNode;
      return this;
    }

    // Creates an element type declaration

    // `name` element name
    // `value` element content (defaults to #PCDATA)
    dtdElement(name, value) {
      var node;
      this.openCurrent();
      node = new XMLDTDElement(this, name, value);
      this.onData(this.writer.dtdElement(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates an attribute declaration

    // `elementName` the name of the element containing this attribute
    // `attributeName` attribute name
    // `attributeType` type of the attribute (defaults to CDATA)
    // `defaultValueType` default value type (either #REQUIRED, #IMPLIED, #FIXED or
    //                    #DEFAULT) (defaults to #IMPLIED)
    // `defaultValue` default value of the attribute
    //                (only used for #FIXED or #DEFAULT)
    attList(elementName, attributeName, attributeType, defaultValueType, defaultValue) {
      var node;
      this.openCurrent();
      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);
      this.onData(this.writer.dtdAttList(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates a general entity declaration

    // `name` the name of the entity
    // `value` internal entity value or an object with external entity details
    // `value.pubID` public identifier
    // `value.sysID` system identifier
    // `value.nData` notation declaration
    entity(name, value) {
      var node;
      this.openCurrent();
      node = new XMLDTDEntity(this, false, name, value);
      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates a parameter entity declaration

    // `name` the name of the entity
    // `value` internal entity value or an object with external entity details
    // `value.pubID` public identifier
    // `value.sysID` system identifier
    pEntity(name, value) {
      var node;
      this.openCurrent();
      node = new XMLDTDEntity(this, true, name, value);
      this.onData(this.writer.dtdEntity(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Creates a NOTATION declaration

    // `name` the name of the notation
    // `value` an object with external entity details
    // `value.pubID` public identifier
    // `value.sysID` system identifier
    notation(name, value) {
      var node;
      this.openCurrent();
      node = new XMLDTDNotation(this, name, value);
      this.onData(this.writer.dtdNotation(node, this.writerOptions, this.currentLevel + 1), this.currentLevel + 1);
      return this;
    }

    // Gets the parent node
    up() {
      if (this.currentLevel < 0) {
        throw new Error("The document node has no parent.");
      }
      if (this.currentNode) {
        if (this.currentNode.children) {
          this.closeNode(this.currentNode);
        } else {
          this.openNode(this.currentNode);
        }
        this.currentNode = null;
      } else {
        this.closeNode(this.openTags[this.currentLevel]);
      }
      delete this.openTags[this.currentLevel];
      this.currentLevel--;
      return this;
    }

    // Ends the document
    end() {
      while (this.currentLevel >= 0) {
        this.up();
      }
      return this.onEnd();
    }

    // Opens the current parent node
    openCurrent() {
      if (this.currentNode) {
        this.currentNode.children = true;
        return this.openNode(this.currentNode);
      }
    }

    // Writes the opening tag of the current node or the entire node if it has
    // no child nodes
    openNode(node) {
      var att, chunk, name, ref;
      if (!node.isOpen) {
        if (!this.root && this.currentLevel === 0 && node.type === NodeType.Element) {
          this.root = node;
        }
        chunk = '';
        if (node.type === NodeType.Element) {
          this.writerOptions.state = WriterState.OpenTag;
          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<' + node.name;
          ref = node.attribs;
          for (name in ref) {
            if (!hasProp.call(ref, name)) continue;
            att = ref[name];
            chunk += this.writer.attribute(att, this.writerOptions, this.currentLevel);
          }
          chunk += (node.children ? '>' : '/>') + this.writer.endline(node, this.writerOptions, this.currentLevel);
          this.writerOptions.state = WriterState.InsideTag; // if node.type is NodeType.DocType
        } else {
          this.writerOptions.state = WriterState.OpenTag;
          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '<!DOCTYPE ' + node.rootNodeName;

          // external identifier
          if (node.pubID && node.sysID) {
            chunk += ' PUBLIC "' + node.pubID + '" "' + node.sysID + '"';
          } else if (node.sysID) {
            chunk += ' SYSTEM "' + node.sysID + '"';
          }

          // internal subset
          if (node.children) {
            chunk += ' [';
            this.writerOptions.state = WriterState.InsideTag;
          } else {
            this.writerOptions.state = WriterState.CloseTag;
            chunk += '>';
          }
          chunk += this.writer.endline(node, this.writerOptions, this.currentLevel);
        }
        this.onData(chunk, this.currentLevel);
        return node.isOpen = true;
      }
    }

    // Writes the closing tag of the current node
    closeNode(node) {
      var chunk;
      if (!node.isClosed) {
        chunk = '';
        this.writerOptions.state = WriterState.CloseTag;
        if (node.type === NodeType.Element) {
          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + '</' + node.name + '>' + this.writer.endline(node, this.writerOptions, this.currentLevel); // if node.type is NodeType.DocType
        } else {
          chunk = this.writer.indent(node, this.writerOptions, this.currentLevel) + ']>' + this.writer.endline(node, this.writerOptions, this.currentLevel);
        }
        this.writerOptions.state = WriterState.None;
        this.onData(chunk, this.currentLevel);
        return node.isClosed = true;
      }
    }

    // Called when a new chunk of XML is output

    // `chunk` a string containing the XML chunk
    // `level` current indentation level
    onData(chunk, level) {
      this.documentStarted = true;
      return this.onDataCallback(chunk, level + 1);
    }

    // Called when the XML document is completed
    onEnd() {
      this.documentCompleted = true;
      return this.onEndCallback();
    }

    // Returns debug string
    debugInfo(name) {
      if (name == null) {
        return "";
      } else {
        return "node: <" + name + ">";
      }
    }

    // Node aliases
    ele() {
      return this.element(...arguments);
    }
    nod(name, attributes, text) {
      return this.node(name, attributes, text);
    }
    txt(value) {
      return this.text(value);
    }
    dat(value) {
      return this.cdata(value);
    }
    com(value) {
      return this.comment(value);
    }
    ins(target, value) {
      return this.instruction(target, value);
    }
    dec(version, encoding, standalone) {
      return this.declaration(version, encoding, standalone);
    }
    dtd(root, pubID, sysID) {
      return this.doctype(root, pubID, sysID);
    }
    e(name, attributes, text) {
      return this.element(name, attributes, text);
    }
    n(name, attributes, text) {
      return this.node(name, attributes, text);
    }
    t(value) {
      return this.text(value);
    }
    d(value) {
      return this.cdata(value);
    }
    c(value) {
      return this.comment(value);
    }
    r(value) {
      return this.raw(value);
    }
    i(target, value) {
      return this.instruction(target, value);
    }

    // Attribute aliases
    att() {
      if (this.currentNode && this.currentNode.type === NodeType.DocType) {
        return this.attList(...arguments);
      } else {
        return this.attribute(...arguments);
      }
    }
    a() {
      if (this.currentNode && this.currentNode.type === NodeType.DocType) {
        return this.attList(...arguments);
      } else {
        return this.attribute(...arguments);
      }
    }

    // DTD aliases
    // att() and ele() are defined above
    ent(name, value) {
      return this.entity(name, value);
    }
    pent(name, value) {
      return this.pEntity(name, value);
    }
    not(name, value) {
      return this.notation(name, value);
    }
  };
}).call(void 0);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOb2RlVHlwZSIsIldyaXRlclN0YXRlIiwiWE1MQXR0cmlidXRlIiwiWE1MQ0RhdGEiLCJYTUxDb21tZW50IiwiWE1MRFREQXR0TGlzdCIsIlhNTERUREVsZW1lbnQiLCJYTUxEVERFbnRpdHkiLCJYTUxEVEROb3RhdGlvbiIsIlhNTERlY2xhcmF0aW9uIiwiWE1MRG9jVHlwZSIsIlhNTERvY3VtZW50IiwiWE1MRG9jdW1lbnRDQiIsIlhNTEVsZW1lbnQiLCJYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24iLCJYTUxSYXciLCJYTUxTdHJpbmdXcml0ZXIiLCJYTUxTdHJpbmdpZmllciIsIlhNTFRleHQiLCJnZXRWYWx1ZSIsImlzRnVuY3Rpb24iLCJpc09iamVjdCIsImlzUGxhaW5PYmplY3QiLCJoYXNQcm9wIiwiaGFzT3duUHJvcGVydHkiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsIm9uRGF0YSIsIm9uRW5kIiwid3JpdGVyT3B0aW9ucyIsIm5hbWUiLCJ0eXBlIiwiRG9jdW1lbnQiLCJ3cml0ZXIiLCJmaWx0ZXJPcHRpb25zIiwic3RyaW5naWZ5Iiwib25EYXRhQ2FsbGJhY2siLCJvbkVuZENhbGxiYWNrIiwiY3VycmVudE5vZGUiLCJjdXJyZW50TGV2ZWwiLCJvcGVuVGFncyIsImRvY3VtZW50U3RhcnRlZCIsImRvY3VtZW50Q29tcGxldGVkIiwicm9vdCIsImNyZWF0ZUNoaWxkTm9kZSIsIm5vZGUiLCJhdHQiLCJhdHROYW1lIiwiYXR0cmlidXRlcyIsImNoaWxkIiwiaSIsImxlbiIsInJlZiIsInJlZjEiLCJDRGF0YSIsImNkYXRhIiwidmFsdWUiLCJDb21tZW50IiwiY29tbWVudCIsIkVsZW1lbnQiLCJhdHRyaWJzIiwiY2FsbCIsIkR1bW15IiwiZHVtbXkiLCJSYXciLCJyYXciLCJUZXh0IiwidGV4dCIsIlByb2Nlc3NpbmdJbnN0cnVjdGlvbiIsImluc3RydWN0aW9uIiwidGFyZ2V0IiwiRXJyb3IiLCJjaGlsZHJlbiIsImxlbmd0aCIsInVwIiwiZGVidWdJbmZvIiwib3BlbkN1cnJlbnQiLCJlbGVtZW50Iiwib2xkVmFsaWRhdGlvbkZsYWciLCJEb2NUeXBlIiwiZHRkRWxlbWVudCIsImFyZ3VtZW50cyIsIkFycmF5IiwiaXNBcnJheSIsIm5vVmFsaWRhdGlvbiIsImF0dHJpYnV0ZSIsImF0dFZhbHVlIiwiYXBwbHkiLCJrZWVwTnVsbEF0dHJpYnV0ZXMiLCJpbnNUYXJnZXQiLCJpbnNWYWx1ZSIsInByb2Nlc3NpbmdJbnN0cnVjdGlvbiIsImRlY2xhcmF0aW9uIiwidmVyc2lvbiIsImVuY29kaW5nIiwic3RhbmRhbG9uZSIsImRvY3R5cGUiLCJwdWJJRCIsInN5c0lEIiwicm9vdE5vZGVOYW1lIiwiYXR0TGlzdCIsImVsZW1lbnROYW1lIiwiYXR0cmlidXRlTmFtZSIsImF0dHJpYnV0ZVR5cGUiLCJkZWZhdWx0VmFsdWVUeXBlIiwiZGVmYXVsdFZhbHVlIiwiZHRkQXR0TGlzdCIsImVudGl0eSIsImR0ZEVudGl0eSIsInBFbnRpdHkiLCJub3RhdGlvbiIsImR0ZE5vdGF0aW9uIiwiY2xvc2VOb2RlIiwib3Blbk5vZGUiLCJlbmQiLCJjaHVuayIsImlzT3BlbiIsInN0YXRlIiwiT3BlblRhZyIsImluZGVudCIsImVuZGxpbmUiLCJJbnNpZGVUYWciLCJDbG9zZVRhZyIsImlzQ2xvc2VkIiwiTm9uZSIsImxldmVsIiwiZWxlIiwibm9kIiwidHh0IiwiZGF0IiwiY29tIiwiaW5zIiwiZGVjIiwiZHRkIiwiZSIsIm4iLCJ0IiwiZCIsImMiLCJyIiwiYSIsImVudCIsInBlbnQiLCJub3QiXSwic291cmNlcyI6WyJYTUxEb2N1bWVudENCLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMi40LjFcbihmdW5jdGlvbigpIHtcbiAgdmFyIE5vZGVUeXBlLCBXcml0ZXJTdGF0ZSwgWE1MQXR0cmlidXRlLCBYTUxDRGF0YSwgWE1MQ29tbWVudCwgWE1MRFREQXR0TGlzdCwgWE1MRFRERWxlbWVudCwgWE1MRFRERW50aXR5LCBYTUxEVEROb3RhdGlvbiwgWE1MRGVjbGFyYXRpb24sIFhNTERvY1R5cGUsIFhNTERvY3VtZW50LCBYTUxEb2N1bWVudENCLCBYTUxFbGVtZW50LCBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24sIFhNTFJhdywgWE1MU3RyaW5nV3JpdGVyLCBYTUxTdHJpbmdpZmllciwgWE1MVGV4dCwgZ2V0VmFsdWUsIGlzRnVuY3Rpb24sIGlzT2JqZWN0LCBpc1BsYWluT2JqZWN0LFxuICAgIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuICAoe2lzT2JqZWN0LCBpc0Z1bmN0aW9uLCBpc1BsYWluT2JqZWN0LCBnZXRWYWx1ZX0gPSByZXF1aXJlKCcuL1V0aWxpdHknKSk7XG5cbiAgTm9kZVR5cGUgPSByZXF1aXJlKCcuL05vZGVUeXBlJyk7XG5cbiAgWE1MRG9jdW1lbnQgPSByZXF1aXJlKCcuL1hNTERvY3VtZW50Jyk7XG5cbiAgWE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRWxlbWVudCcpO1xuXG4gIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuXG4gIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcblxuICBYTUxSYXcgPSByZXF1aXJlKCcuL1hNTFJhdycpO1xuXG4gIFhNTFRleHQgPSByZXF1aXJlKCcuL1hNTFRleHQnKTtcblxuICBYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24gPSByZXF1aXJlKCcuL1hNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbicpO1xuXG4gIFhNTERlY2xhcmF0aW9uID0gcmVxdWlyZSgnLi9YTUxEZWNsYXJhdGlvbicpO1xuXG4gIFhNTERvY1R5cGUgPSByZXF1aXJlKCcuL1hNTERvY1R5cGUnKTtcblxuICBYTUxEVERBdHRMaXN0ID0gcmVxdWlyZSgnLi9YTUxEVERBdHRMaXN0Jyk7XG5cbiAgWE1MRFRERW50aXR5ID0gcmVxdWlyZSgnLi9YTUxEVERFbnRpdHknKTtcblxuICBYTUxEVERFbGVtZW50ID0gcmVxdWlyZSgnLi9YTUxEVERFbGVtZW50Jyk7XG5cbiAgWE1MRFRETm90YXRpb24gPSByZXF1aXJlKCcuL1hNTERURE5vdGF0aW9uJyk7XG5cbiAgWE1MQXR0cmlidXRlID0gcmVxdWlyZSgnLi9YTUxBdHRyaWJ1dGUnKTtcblxuICBYTUxTdHJpbmdpZmllciA9IHJlcXVpcmUoJy4vWE1MU3RyaW5naWZpZXInKTtcblxuICBYTUxTdHJpbmdXcml0ZXIgPSByZXF1aXJlKCcuL1hNTFN0cmluZ1dyaXRlcicpO1xuXG4gIFdyaXRlclN0YXRlID0gcmVxdWlyZSgnLi9Xcml0ZXJTdGF0ZScpO1xuXG4gIC8vIFJlcHJlc2VudHMgYW4gWE1MIGJ1aWxkZXJcbiAgbW9kdWxlLmV4cG9ydHMgPSBYTUxEb2N1bWVudENCID0gY2xhc3MgWE1MRG9jdW1lbnRDQiB7XG4gICAgLy8gSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgYFhNTERvY3VtZW50Q0JgXG5cbiAgICAvLyBgb3B0aW9ucy5rZWVwTnVsbE5vZGVzYCB3aGV0aGVyIG5vZGVzIHdpdGggbnVsbCB2YWx1ZXMgd2lsbCBiZSBrZXB0XG4gICAgLy8gICAgIG9yIGlnbm9yZWQ6IHRydWUgb3IgZmFsc2VcbiAgICAvLyBgb3B0aW9ucy5rZWVwTnVsbEF0dHJpYnV0ZXNgIHdoZXRoZXIgYXR0cmlidXRlcyB3aXRoIG51bGwgdmFsdWVzIHdpbGwgYmVcbiAgICAvLyAgICAga2VwdCBvciBpZ25vcmVkOiB0cnVlIG9yIGZhbHNlXG4gICAgLy8gYG9wdGlvbnMuaWdub3JlRGVjb3JhdG9yc2Agd2hldGhlciBkZWNvcmF0b3Igc3RyaW5ncyB3aWxsIGJlIGlnbm9yZWQgd2hlblxuICAgIC8vICAgICBjb252ZXJ0aW5nIEpTIG9iamVjdHM6IHRydWUgb3IgZmFsc2VcbiAgICAvLyBgb3B0aW9ucy5zZXBhcmF0ZUFycmF5SXRlbXNgIHdoZXRoZXIgYXJyYXkgaXRlbXMgYXJlIGNyZWF0ZWQgYXMgc2VwYXJhdGVcbiAgICAvLyAgICAgbm9kZXMgd2hlbiBwYXNzZWQgYXMgYW4gb2JqZWN0IHZhbHVlOiB0cnVlIG9yIGZhbHNlXG4gICAgLy8gYG9wdGlvbnMubm9Eb3VibGVFbmNvZGluZ2Agd2hldGhlciBleGlzdGluZyBodG1sIGVudGl0aWVzIGFyZSBlbmNvZGVkOlxuICAgIC8vICAgICB0cnVlIG9yIGZhbHNlXG4gICAgLy8gYG9wdGlvbnMuc3RyaW5naWZ5YCBhIHNldCBvZiBmdW5jdGlvbnMgdG8gdXNlIGZvciBjb252ZXJ0aW5nIHZhbHVlcyB0b1xuICAgIC8vICAgICBzdHJpbmdzXG4gICAgLy8gYG9wdGlvbnMud3JpdGVyYCB0aGUgZGVmYXVsdCBYTUwgd3JpdGVyIHRvIHVzZSBmb3IgY29udmVydGluZyBub2RlcyB0b1xuICAgIC8vICAgICBzdHJpbmcuIElmIHRoZSBkZWZhdWx0IHdyaXRlciBpcyBub3Qgc2V0LCB0aGUgYnVpbHQtaW4gWE1MU3RyaW5nV3JpdGVyXG4gICAgLy8gICAgIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLlxuXG4gICAgLy8gYG9uRGF0YWAgdGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aGVuIGEgbmV3IGNodW5rIG9mIFhNTCBpcyBvdXRwdXQuIFRoZVxuICAgIC8vICAgICAgICAgIHN0cmluZyBjb250YWluaW5nIHRoZSBYTUwgY2h1bmsgaXMgcGFzc2VkIHRvIGBvbkRhdGFgIGFzIGl0cyBmaXJzdFxuICAgIC8vICAgICAgICAgIGFyZ3VtZW50LCBhbmQgdGhlIGN1cnJlbnQgaW5kZW50YXRpb24gbGV2ZWwgYXMgaXRzIHNlY29uZCBhcmd1bWVudC5cbiAgICAvLyBgb25FbmRgICB0aGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gdGhlIFhNTCBkb2N1bWVudCBpcyBjb21wbGV0ZWQgd2l0aFxuICAgIC8vICAgICAgICAgIGBlbmRgLiBgb25FbmRgIGRvZXMgbm90IHJlY2VpdmUgYW55IGFyZ3VtZW50cy5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBvbkRhdGEsIG9uRW5kKSB7XG4gICAgICB2YXIgd3JpdGVyT3B0aW9ucztcbiAgICAgIHRoaXMubmFtZSA9IFwiP3htbFwiO1xuICAgICAgdGhpcy50eXBlID0gTm9kZVR5cGUuRG9jdW1lbnQ7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgd3JpdGVyT3B0aW9ucyA9IHt9O1xuICAgICAgaWYgKCFvcHRpb25zLndyaXRlcikge1xuICAgICAgICBvcHRpb25zLndyaXRlciA9IG5ldyBYTUxTdHJpbmdXcml0ZXIoKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChvcHRpb25zLndyaXRlcikpIHtcbiAgICAgICAgd3JpdGVyT3B0aW9ucyA9IG9wdGlvbnMud3JpdGVyO1xuICAgICAgICBvcHRpb25zLndyaXRlciA9IG5ldyBYTUxTdHJpbmdXcml0ZXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICB0aGlzLndyaXRlciA9IG9wdGlvbnMud3JpdGVyO1xuICAgICAgdGhpcy53cml0ZXJPcHRpb25zID0gdGhpcy53cml0ZXIuZmlsdGVyT3B0aW9ucyh3cml0ZXJPcHRpb25zKTtcbiAgICAgIHRoaXMuc3RyaW5naWZ5ID0gbmV3IFhNTFN0cmluZ2lmaWVyKG9wdGlvbnMpO1xuICAgICAgdGhpcy5vbkRhdGFDYWxsYmFjayA9IG9uRGF0YSB8fCBmdW5jdGlvbigpIHt9O1xuICAgICAgdGhpcy5vbkVuZENhbGxiYWNrID0gb25FbmQgfHwgZnVuY3Rpb24oKSB7fTtcbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBudWxsO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwgPSAtMTtcbiAgICAgIHRoaXMub3BlblRhZ3MgPSB7fTtcbiAgICAgIHRoaXMuZG9jdW1lbnRTdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmRvY3VtZW50Q29tcGxldGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBjaGlsZCBlbGVtZW50IG5vZGUgZnJvbSB0aGUgZ2l2ZW4gWE1MTm9kZVxuXG4gICAgLy8gYG5vZGVgIHRoZSBjaGlsZCBub2RlXG4gICAgY3JlYXRlQ2hpbGROb2RlKG5vZGUpIHtcbiAgICAgIHZhciBhdHQsIGF0dE5hbWUsIGF0dHJpYnV0ZXMsIGNoaWxkLCBpLCBsZW4sIHJlZiwgcmVmMTtcbiAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuQ0RhdGE6XG4gICAgICAgICAgdGhpcy5jZGF0YShub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5Db21tZW50OlxuICAgICAgICAgIHRoaXMuY29tbWVudChub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5FbGVtZW50OlxuICAgICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICByZWYgPSBub2RlLmF0dHJpYnM7XG4gICAgICAgICAgZm9yIChhdHROYW1lIGluIHJlZikge1xuICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwocmVmLCBhdHROYW1lKSkgY29udGludWU7XG4gICAgICAgICAgICBhdHQgPSByZWZbYXR0TmFtZV07XG4gICAgICAgICAgICBhdHRyaWJ1dGVzW2F0dE5hbWVdID0gYXR0LnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm5vZGUobm9kZS5uYW1lLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBOb2RlVHlwZS5EdW1teTpcbiAgICAgICAgICB0aGlzLmR1bW15KCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgTm9kZVR5cGUuUmF3OlxuICAgICAgICAgIHRoaXMucmF3KG5vZGUudmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlRleHQ6XG4gICAgICAgICAgdGhpcy50ZXh0KG5vZGUudmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIE5vZGVUeXBlLlByb2Nlc3NpbmdJbnN0cnVjdGlvbjpcbiAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKG5vZGUudGFyZ2V0LCBub2RlLnZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIFhNTCBub2RlIHR5cGUgaXMgbm90IHN1cHBvcnRlZCBpbiBhIEpTIG9iamVjdDogXCIgKyBub2RlLmNvbnN0cnVjdG9yLm5hbWUpO1xuICAgICAgfVxuICAgICAgcmVmMSA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAvLyB3cml0ZSBjaGlsZCBub2RlcyByZWN1cnNpdmVseVxuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjaGlsZCA9IHJlZjFbaV07XG4gICAgICAgIHRoaXMuY3JlYXRlQ2hpbGROb2RlKGNoaWxkKTtcbiAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnVwKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBkdW1teSBub2RlXG5cbiAgICBkdW1teSgpIHtcbiAgICAgIC8vIG5vLW9wLCBqdXN0IHJldHVybiB0aGlzXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGVzIGEgbm9kZVxuXG4gICAgLy8gYG5hbWVgIG5hbWUgb2YgdGhlIG5vZGVcbiAgICAvLyBgYXR0cmlidXRlc2AgYW4gb2JqZWN0IGNvbnRhaW5pbmcgbmFtZS92YWx1ZSBwYWlycyBvZiBhdHRyaWJ1dGVzXG4gICAgLy8gYHRleHRgIGVsZW1lbnQgdGV4dFxuICAgIG5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIG5vZGUgbmFtZS5cIik7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5yb290ICYmIHRoaXMuY3VycmVudExldmVsID09PSAtMSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEb2N1bWVudCBjYW4gb25seSBoYXZlIG9uZSByb290IG5vZGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgfVxuICAgICAgdGhpcy5vcGVuQ3VycmVudCgpO1xuICAgICAgbmFtZSA9IGdldFZhbHVlKG5hbWUpO1xuICAgICAgaWYgKGF0dHJpYnV0ZXMgPT0gbnVsbCkge1xuICAgICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgICB9XG4gICAgICBhdHRyaWJ1dGVzID0gZ2V0VmFsdWUoYXR0cmlidXRlcyk7XG4gICAgICAvLyBzd2FwIGFyZ3VtZW50IG9yZGVyOiB0ZXh0IDwtPiBhdHRyaWJ1dGVzXG4gICAgICBpZiAoIWlzT2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIFt0ZXh0LCBhdHRyaWJ1dGVzXSA9IFthdHRyaWJ1dGVzLCB0ZXh0XTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBuZXcgWE1MRWxlbWVudCh0aGlzLCBuYW1lLCBhdHRyaWJ1dGVzKTtcbiAgICAgIHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4gPSBmYWxzZTtcbiAgICAgIHRoaXMuY3VycmVudExldmVsKys7XG4gICAgICB0aGlzLm9wZW5UYWdzW3RoaXMuY3VycmVudExldmVsXSA9IHRoaXMuY3VycmVudE5vZGU7XG4gICAgICBpZiAodGV4dCAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMudGV4dCh0ZXh0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBjaGlsZCBlbGVtZW50IG5vZGUgb3IgYW4gZWxlbWVudCB0eXBlIGRlY2xhcmF0aW9uIHdoZW4gY2FsbGVkXG4gICAgLy8gaW5zaWRlIHRoZSBEVERcblxuICAgIC8vIGBuYW1lYCBuYW1lIG9mIHRoZSBub2RlXG4gICAgLy8gYGF0dHJpYnV0ZXNgIGFuIG9iamVjdCBjb250YWluaW5nIG5hbWUvdmFsdWUgcGFpcnMgb2YgYXR0cmlidXRlc1xuICAgIC8vIGB0ZXh0YCBlbGVtZW50IHRleHRcbiAgICBlbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHZhciBjaGlsZCwgaSwgbGVuLCBvbGRWYWxpZGF0aW9uRmxhZywgcmVmLCByb290O1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgIHRoaXMuZHRkRWxlbWVudCguLi5hcmd1bWVudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZSkgfHwgaXNPYmplY3QobmFtZSkgfHwgaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICAgIG9sZFZhbGlkYXRpb25GbGFnID0gdGhpcy5vcHRpb25zLm5vVmFsaWRhdGlvbjtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMubm9WYWxpZGF0aW9uID0gdHJ1ZTtcbiAgICAgICAgICByb290ID0gbmV3IFhNTERvY3VtZW50KHRoaXMub3B0aW9ucykuZWxlbWVudCgnVEVNUF9ST09UJyk7XG4gICAgICAgICAgcm9vdC5lbGVtZW50KG5hbWUpO1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5ub1ZhbGlkYXRpb24gPSBvbGRWYWxpZGF0aW9uRmxhZztcbiAgICAgICAgICByZWYgPSByb290LmNoaWxkcmVuO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2hpbGQgPSByZWZbaV07XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNoaWxkTm9kZShjaGlsZCk7XG4gICAgICAgICAgICBpZiAoY2hpbGQudHlwZSA9PT0gTm9kZVR5cGUuRWxlbWVudCkge1xuICAgICAgICAgICAgICB0aGlzLnVwKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQWRkcyBvciBtb2RpZmllcyBhbiBhdHRyaWJ1dGVcblxuICAgIC8vIGBuYW1lYCBhdHRyaWJ1dGUgbmFtZVxuICAgIC8vIGB2YWx1ZWAgYXR0cmlidXRlIHZhbHVlXG4gICAgYXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgYXR0TmFtZSwgYXR0VmFsdWU7XG4gICAgICBpZiAoIXRoaXMuY3VycmVudE5vZGUgfHwgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhdHQoKSBjYW4gb25seSBiZSB1c2VkIGltbWVkaWF0ZWx5IGFmdGVyIGFuIGVsZSgpIGNhbGwgaW4gY2FsbGJhY2sgbW9kZS4gXCIgKyB0aGlzLmRlYnVnSW5mbyhuYW1lKSk7XG4gICAgICB9XG4gICAgICBpZiAobmFtZSAhPSBudWxsKSB7XG4gICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc09iamVjdChuYW1lKSkgeyAvLyBleHBhbmQgaWYgb2JqZWN0XG4gICAgICAgIGZvciAoYXR0TmFtZSBpbiBuYW1lKSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwobmFtZSwgYXR0TmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICAgIGF0dFZhbHVlID0gbmFtZVthdHROYW1lXTtcbiAgICAgICAgICB0aGlzLmF0dHJpYnV0ZShhdHROYW1lLCBhdHRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmtlZXBOdWxsQXR0cmlidXRlcyAmJiAodmFsdWUgPT0gbnVsbCkpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLmF0dHJpYnNbbmFtZV0gPSBuZXcgWE1MQXR0cmlidXRlKHRoaXMsIG5hbWUsIFwiXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmN1cnJlbnROb2RlLmF0dHJpYnNbbmFtZV0gPSBuZXcgWE1MQXR0cmlidXRlKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlcyBhIHRleHQgbm9kZVxuXG4gICAgLy8gYHZhbHVlYCBlbGVtZW50IHRleHRcbiAgICB0ZXh0KHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci50ZXh0KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBDREFUQSBub2RlXG5cbiAgICAvLyBgdmFsdWVgIGVsZW1lbnQgdGV4dCB3aXRob3V0IENEQVRBIGRlbGltaXRlcnNcbiAgICBjZGF0YSh2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTENEYXRhKHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmNkYXRhKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBjb21tZW50IG5vZGVcblxuICAgIC8vIGB2YWx1ZWAgY29tbWVudCB0ZXh0XG4gICAgY29tbWVudCh2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTENvbW1lbnQodGhpcywgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuY29tbWVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBZGRzIHVuZXNjYXBlZCByYXcgdGV4dFxuXG4gICAgLy8gYHZhbHVlYCB0ZXh0XG4gICAgcmF3KHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MUmF3KHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLnJhdyhub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBBZGRzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvblxuXG4gICAgLy8gYHRhcmdldGAgaW5zdHJ1Y3Rpb24gdGFyZ2V0XG4gICAgLy8gYHZhbHVlYCBpbnN0cnVjdGlvbiB2YWx1ZVxuICAgIGluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgIHZhciBpLCBpbnNUYXJnZXQsIGluc1ZhbHVlLCBsZW4sIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAodGFyZ2V0ICE9IG51bGwpIHtcbiAgICAgICAgdGFyZ2V0ID0gZ2V0VmFsdWUodGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHZhbHVlID0gZ2V0VmFsdWUodmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGFyZ2V0KSkgeyAvLyBleHBhbmQgaWYgYXJyYXlcbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGFyZ2V0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgaW5zVGFyZ2V0ID0gdGFyZ2V0W2ldO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpc09iamVjdCh0YXJnZXQpKSB7IC8vIGV4cGFuZCBpZiBvYmplY3RcbiAgICAgICAgZm9yIChpbnNUYXJnZXQgaW4gdGFyZ2V0KSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwodGFyZ2V0LCBpbnNUYXJnZXQpKSBjb250aW51ZTtcbiAgICAgICAgICBpbnNWYWx1ZSA9IHRhcmdldFtpbnNUYXJnZXRdO1xuICAgICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb24oaW5zVGFyZ2V0LCBpbnNWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlID0gbmV3IFhNTFByb2Nlc3NpbmdJbnN0cnVjdGlvbih0aGlzLCB0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIucHJvY2Vzc2luZ0luc3RydWN0aW9uKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgdGhlIHhtbCBkZWNsYXJhdGlvblxuXG4gICAgLy8gYHZlcnNpb25gIEEgdmVyc2lvbiBudW1iZXIgc3RyaW5nLCBlLmcuIDEuMFxuICAgIC8vIGBlbmNvZGluZ2AgRW5jb2RpbmcgZGVjbGFyYXRpb24sIGUuZy4gVVRGLThcbiAgICAvLyBgc3RhbmRhbG9uZWAgc3RhbmRhbG9uZSBkb2N1bWVudCBkZWNsYXJhdGlvbjogdHJ1ZSBvciBmYWxzZVxuICAgIGRlY2xhcmF0aW9uKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIGlmICh0aGlzLmRvY3VtZW50U3RhcnRlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkZWNsYXJhdGlvbigpIG11c3QgYmUgdGhlIGZpcnN0IG5vZGUuXCIpO1xuICAgICAgfVxuICAgICAgbm9kZSA9IG5ldyBYTUxEZWNsYXJhdGlvbih0aGlzLCB2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kZWNsYXJhdGlvbihub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGVzIHRoZSBkb2N1bWVudCB0eXBlIGRlY2xhcmF0aW9uXG5cbiAgICAvLyBgcm9vdGAgIHRoZSBuYW1lIG9mIHRoZSByb290IG5vZGVcbiAgICAvLyBgcHViSURgIHRoZSBwdWJsaWMgaWRlbnRpZmllciBvZiB0aGUgZXh0ZXJuYWwgc3Vic2V0XG4gICAgLy8gYHN5c0lEYCB0aGUgc3lzdGVtIGlkZW50aWZpZXIgb2YgdGhlIGV4dGVybmFsIHN1YnNldFxuICAgIGRvY3R5cGUocm9vdCwgcHViSUQsIHN5c0lEKSB7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBpZiAocm9vdCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3Npbmcgcm9vdCBub2RlIG5hbWUuXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucm9vdCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkdGQoKSBtdXN0IGNvbWUgYmVmb3JlIHRoZSByb290IG5vZGUuXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJyZW50Tm9kZSA9IG5ldyBYTUxEb2NUeXBlKHRoaXMsIHB1YklELCBzeXNJRCk7XG4gICAgICB0aGlzLmN1cnJlbnROb2RlLnJvb3ROb2RlTmFtZSA9IHJvb3Q7XG4gICAgICB0aGlzLmN1cnJlbnROb2RlLmNoaWxkcmVuID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRMZXZlbCsrO1xuICAgICAgdGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF0gPSB0aGlzLmN1cnJlbnROb2RlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlcyBhbiBlbGVtZW50IHR5cGUgZGVjbGFyYXRpb25cblxuICAgIC8vIGBuYW1lYCBlbGVtZW50IG5hbWVcbiAgICAvLyBgdmFsdWVgIGVsZW1lbnQgY29udGVudCAoZGVmYXVsdHMgdG8gI1BDREFUQSlcbiAgICBkdGRFbGVtZW50KG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFRERWxlbWVudCh0aGlzLCBuYW1lLCB2YWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRFbGVtZW50KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYW4gYXR0cmlidXRlIGRlY2xhcmF0aW9uXG5cbiAgICAvLyBgZWxlbWVudE5hbWVgIHRoZSBuYW1lIG9mIHRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhpcyBhdHRyaWJ1dGVcbiAgICAvLyBgYXR0cmlidXRlTmFtZWAgYXR0cmlidXRlIG5hbWVcbiAgICAvLyBgYXR0cmlidXRlVHlwZWAgdHlwZSBvZiB0aGUgYXR0cmlidXRlIChkZWZhdWx0cyB0byBDREFUQSlcbiAgICAvLyBgZGVmYXVsdFZhbHVlVHlwZWAgZGVmYXVsdCB2YWx1ZSB0eXBlIChlaXRoZXIgI1JFUVVJUkVELCAjSU1QTElFRCwgI0ZJWEVEIG9yXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICNERUZBVUxUKSAoZGVmYXVsdHMgdG8gI0lNUExJRUQpXG4gICAgLy8gYGRlZmF1bHRWYWx1ZWAgZGVmYXVsdCB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlXG4gICAgLy8gICAgICAgICAgICAgICAgKG9ubHkgdXNlZCBmb3IgI0ZJWEVEIG9yICNERUZBVUxUKVxuICAgIGF0dExpc3QoZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGRlZmF1bHRWYWx1ZVR5cGUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREF0dExpc3QodGhpcywgZWxlbWVudE5hbWUsIGF0dHJpYnV0ZU5hbWUsIGF0dHJpYnV0ZVR5cGUsIGRlZmF1bHRWYWx1ZVR5cGUsIGRlZmF1bHRWYWx1ZSk7XG4gICAgICB0aGlzLm9uRGF0YSh0aGlzLndyaXRlci5kdGRBdHRMaXN0KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBnZW5lcmFsIGVudGl0eSBkZWNsYXJhdGlvblxuXG4gICAgLy8gYG5hbWVgIHRoZSBuYW1lIG9mIHRoZSBlbnRpdHlcbiAgICAvLyBgdmFsdWVgIGludGVybmFsIGVudGl0eSB2YWx1ZSBvciBhbiBvYmplY3Qgd2l0aCBleHRlcm5hbCBlbnRpdHkgZGV0YWlsc1xuICAgIC8vIGB2YWx1ZS5wdWJJRGAgcHVibGljIGlkZW50aWZpZXJcbiAgICAvLyBgdmFsdWUuc3lzSURgIHN5c3RlbSBpZGVudGlmaWVyXG4gICAgLy8gYHZhbHVlLm5EYXRhYCBub3RhdGlvbiBkZWNsYXJhdGlvblxuICAgIGVudGl0eShuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERUREVudGl0eSh0aGlzLCBmYWxzZSwgbmFtZSwgdmFsdWUpO1xuICAgICAgdGhpcy5vbkRhdGEodGhpcy53cml0ZXIuZHRkRW50aXR5KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZXMgYSBwYXJhbWV0ZXIgZW50aXR5IGRlY2xhcmF0aW9uXG5cbiAgICAvLyBgbmFtZWAgdGhlIG5hbWUgb2YgdGhlIGVudGl0eVxuICAgIC8vIGB2YWx1ZWAgaW50ZXJuYWwgZW50aXR5IHZhbHVlIG9yIGFuIG9iamVjdCB3aXRoIGV4dGVybmFsIGVudGl0eSBkZXRhaWxzXG4gICAgLy8gYHZhbHVlLnB1YklEYCBwdWJsaWMgaWRlbnRpZmllclxuICAgIC8vIGB2YWx1ZS5zeXNJRGAgc3lzdGVtIGlkZW50aWZpZXJcbiAgICBwRW50aXR5KG5hbWUsIHZhbHVlKSB7XG4gICAgICB2YXIgbm9kZTtcbiAgICAgIHRoaXMub3BlbkN1cnJlbnQoKTtcbiAgICAgIG5vZGUgPSBuZXcgWE1MRFRERW50aXR5KHRoaXMsIHRydWUsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZEVudGl0eShub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsICsgMSksIHRoaXMuY3VycmVudExldmVsICsgMSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBDcmVhdGVzIGEgTk9UQVRJT04gZGVjbGFyYXRpb25cblxuICAgIC8vIGBuYW1lYCB0aGUgbmFtZSBvZiB0aGUgbm90YXRpb25cbiAgICAvLyBgdmFsdWVgIGFuIG9iamVjdCB3aXRoIGV4dGVybmFsIGVudGl0eSBkZXRhaWxzXG4gICAgLy8gYHZhbHVlLnB1YklEYCBwdWJsaWMgaWRlbnRpZmllclxuICAgIC8vIGB2YWx1ZS5zeXNJRGAgc3lzdGVtIGlkZW50aWZpZXJcbiAgICBub3RhdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgICAgdmFyIG5vZGU7XG4gICAgICB0aGlzLm9wZW5DdXJyZW50KCk7XG4gICAgICBub2RlID0gbmV3IFhNTERURE5vdGF0aW9uKHRoaXMsIG5hbWUsIHZhbHVlKTtcbiAgICAgIHRoaXMub25EYXRhKHRoaXMud3JpdGVyLmR0ZE5vdGF0aW9uKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKSwgdGhpcy5jdXJyZW50TGV2ZWwgKyAxKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEdldHMgdGhlIHBhcmVudCBub2RlXG4gICAgdXAoKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50TGV2ZWwgPCAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBkb2N1bWVudCBub2RlIGhhcyBubyBwYXJlbnQuXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICB0aGlzLmNsb3NlTm9kZSh0aGlzLmN1cnJlbnROb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9wZW5Ob2RlKHRoaXMuY3VycmVudE5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VycmVudE5vZGUgPSBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jbG9zZU5vZGUodGhpcy5vcGVuVGFnc1t0aGlzLmN1cnJlbnRMZXZlbF0pO1xuICAgICAgfVxuICAgICAgZGVsZXRlIHRoaXMub3BlblRhZ3NbdGhpcy5jdXJyZW50TGV2ZWxdO1xuICAgICAgdGhpcy5jdXJyZW50TGV2ZWwtLTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEVuZHMgdGhlIGRvY3VtZW50XG4gICAgZW5kKCkge1xuICAgICAgd2hpbGUgKHRoaXMuY3VycmVudExldmVsID49IDApIHtcbiAgICAgICAgdGhpcy51cCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub25FbmQoKTtcbiAgICB9XG5cbiAgICAvLyBPcGVucyB0aGUgY3VycmVudCBwYXJlbnQgbm9kZVxuICAgIG9wZW5DdXJyZW50KCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Tm9kZS5jaGlsZHJlbiA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzLm9wZW5Ob2RlKHRoaXMuY3VycmVudE5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdyaXRlcyB0aGUgb3BlbmluZyB0YWcgb2YgdGhlIGN1cnJlbnQgbm9kZSBvciB0aGUgZW50aXJlIG5vZGUgaWYgaXQgaGFzXG4gICAgLy8gbm8gY2hpbGQgbm9kZXNcbiAgICBvcGVuTm9kZShub2RlKSB7XG4gICAgICB2YXIgYXR0LCBjaHVuaywgbmFtZSwgcmVmO1xuICAgICAgaWYgKCFub2RlLmlzT3Blbikge1xuICAgICAgICBpZiAoIXRoaXMucm9vdCAmJiB0aGlzLmN1cnJlbnRMZXZlbCA9PT0gMCAmJiBub2RlLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLnJvb3QgPSBub2RlO1xuICAgICAgICB9XG4gICAgICAgIGNodW5rID0gJyc7XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICB0aGlzLndyaXRlck9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5PcGVuVGFnO1xuICAgICAgICAgIGNodW5rID0gdGhpcy53cml0ZXIuaW5kZW50KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpICsgJzwnICsgbm9kZS5uYW1lO1xuICAgICAgICAgIHJlZiA9IG5vZGUuYXR0cmlicztcbiAgICAgICAgICBmb3IgKG5hbWUgaW4gcmVmKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChyZWYsIG5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGF0dCA9IHJlZltuYW1lXTtcbiAgICAgICAgICAgIGNodW5rICs9IHRoaXMud3JpdGVyLmF0dHJpYnV0ZShhdHQsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaHVuayArPSAobm9kZS5jaGlsZHJlbiA/ICc+JyA6ICcvPicpICsgdGhpcy53cml0ZXIuZW5kbGluZShub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgICB0aGlzLndyaXRlck9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5JbnNpZGVUYWc7IC8vIGlmIG5vZGUudHlwZSBpcyBOb2RlVHlwZS5Eb2NUeXBlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuT3BlblRhZztcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICc8IURPQ1RZUEUgJyArIG5vZGUucm9vdE5vZGVOYW1lO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIGV4dGVybmFsIGlkZW50aWZpZXJcbiAgICAgICAgICBpZiAobm9kZS5wdWJJRCAmJiBub2RlLnN5c0lEKSB7XG4gICAgICAgICAgICBjaHVuayArPSAnIFBVQkxJQyBcIicgKyBub2RlLnB1YklEICsgJ1wiIFwiJyArIG5vZGUuc3lzSUQgKyAnXCInO1xuICAgICAgICAgIH0gZWxzZSBpZiAobm9kZS5zeXNJRCkge1xuICAgICAgICAgICAgY2h1bmsgKz0gJyBTWVNURU0gXCInICsgbm9kZS5zeXNJRCArICdcIic7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIGludGVybmFsIHN1YnNldFxuICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBjaHVuayArPSAnIFsnO1xuICAgICAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuSW5zaWRlVGFnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlck9wdGlvbnMuc3RhdGUgPSBXcml0ZXJTdGF0ZS5DbG9zZVRhZztcbiAgICAgICAgICAgIGNodW5rICs9ICc+JztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2h1bmsgKz0gdGhpcy53cml0ZXIuZW5kbGluZShub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uRGF0YShjaHVuaywgdGhpcy5jdXJyZW50TGV2ZWwpO1xuICAgICAgICByZXR1cm4gbm9kZS5pc09wZW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdyaXRlcyB0aGUgY2xvc2luZyB0YWcgb2YgdGhlIGN1cnJlbnQgbm9kZVxuICAgIGNsb3NlTm9kZShub2RlKSB7XG4gICAgICB2YXIgY2h1bms7XG4gICAgICBpZiAoIW5vZGUuaXNDbG9zZWQpIHtcbiAgICAgICAgY2h1bmsgPSAnJztcbiAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuQ2xvc2VUYWc7XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09IE5vZGVUeXBlLkVsZW1lbnQpIHtcbiAgICAgICAgICBjaHVuayA9IHRoaXMud3JpdGVyLmluZGVudChub2RlLCB0aGlzLndyaXRlck9wdGlvbnMsIHRoaXMuY3VycmVudExldmVsKSArICc8LycgKyBub2RlLm5hbWUgKyAnPicgKyB0aGlzLndyaXRlci5lbmRsaW5lKG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpOyAvLyBpZiBub2RlLnR5cGUgaXMgTm9kZVR5cGUuRG9jVHlwZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNodW5rID0gdGhpcy53cml0ZXIuaW5kZW50KG5vZGUsIHRoaXMud3JpdGVyT3B0aW9ucywgdGhpcy5jdXJyZW50TGV2ZWwpICsgJ10+JyArIHRoaXMud3JpdGVyLmVuZGxpbmUobm9kZSwgdGhpcy53cml0ZXJPcHRpb25zLCB0aGlzLmN1cnJlbnRMZXZlbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0ZXJPcHRpb25zLnN0YXRlID0gV3JpdGVyU3RhdGUuTm9uZTtcbiAgICAgICAgdGhpcy5vbkRhdGEoY2h1bmssIHRoaXMuY3VycmVudExldmVsKTtcbiAgICAgICAgcmV0dXJuIG5vZGUuaXNDbG9zZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhbGxlZCB3aGVuIGEgbmV3IGNodW5rIG9mIFhNTCBpcyBvdXRwdXRcblxuICAgIC8vIGBjaHVua2AgYSBzdHJpbmcgY29udGFpbmluZyB0aGUgWE1MIGNodW5rXG4gICAgLy8gYGxldmVsYCBjdXJyZW50IGluZGVudGF0aW9uIGxldmVsXG4gICAgb25EYXRhKGNodW5rLCBsZXZlbCkge1xuICAgICAgdGhpcy5kb2N1bWVudFN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMub25EYXRhQ2FsbGJhY2soY2h1bmssIGxldmVsICsgMSk7XG4gICAgfVxuXG4gICAgLy8gQ2FsbGVkIHdoZW4gdGhlIFhNTCBkb2N1bWVudCBpcyBjb21wbGV0ZWRcbiAgICBvbkVuZCgpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMub25FbmRDYWxsYmFjaygpO1xuICAgIH1cblxuICAgIC8vIFJldHVybnMgZGVidWcgc3RyaW5nXG4gICAgZGVidWdJbmZvKG5hbWUpIHtcbiAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gXCJub2RlOiA8XCIgKyBuYW1lICsgXCI+XCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm9kZSBhbGlhc2VzXG4gICAgZWxlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudCguLi5hcmd1bWVudHMpO1xuICAgIH1cblxuICAgIG5vZChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICByZXR1cm4gdGhpcy5ub2RlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgIH1cblxuICAgIHR4dCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZGF0KHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZGF0YSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgY29tKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21tZW50KHZhbHVlKTtcbiAgICB9XG5cbiAgICBpbnModGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgZGVjKHZlcnNpb24sIGVuY29kaW5nLCBzdGFuZGFsb25lKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWNsYXJhdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgfVxuXG4gICAgZHRkKHJvb3QsIHB1YklELCBzeXNJRCkge1xuICAgICAgcmV0dXJuIHRoaXMuZG9jdHlwZShyb290LCBwdWJJRCwgc3lzSUQpO1xuICAgIH1cblxuICAgIGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICB9XG5cbiAgICBuKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgfVxuXG4gICAgdCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgZCh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgIH1cblxuICAgIGModmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbW1lbnQodmFsdWUpO1xuICAgIH1cblxuICAgIHIodmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnJhdyh2YWx1ZSk7XG4gICAgfVxuXG4gICAgaSh0YXJnZXQsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBBdHRyaWJ1dGUgYWxpYXNlc1xuICAgIGF0dCgpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnROb2RlICYmIHRoaXMuY3VycmVudE5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jVHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRMaXN0KC4uLmFyZ3VtZW50cyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGUoLi4uYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhKCkge1xuICAgICAgaWYgKHRoaXMuY3VycmVudE5vZGUgJiYgdGhpcy5jdXJyZW50Tm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dExpc3QoLi4uYXJndW1lbnRzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZSguLi5hcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERURCBhbGlhc2VzXG4gICAgLy8gYXR0KCkgYW5kIGVsZSgpIGFyZSBkZWZpbmVkIGFib3ZlXG4gICAgZW50KG5hbWUsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHBlbnQobmFtZSwgdmFsdWUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBFbnRpdHkobmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICAgIG5vdChuYW1lLCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIHRoaXMubm90YXRpb24obmFtZSwgdmFsdWUpO1xuICAgIH1cblxuICB9O1xuXG59KS5jYWxsKHRoaXMpO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsQ0FBQyxZQUFXO0VBQ1YsSUFBSUEsUUFBUTtJQUFFQyxXQUFXO0lBQUVDLFlBQVk7SUFBRUMsUUFBUTtJQUFFQyxVQUFVO0lBQUVDLGFBQWE7SUFBRUMsYUFBYTtJQUFFQyxZQUFZO0lBQUVDLGNBQWM7SUFBRUMsY0FBYztJQUFFQyxVQUFVO0lBQUVDLFdBQVc7SUFBRUMsYUFBYTtJQUFFQyxVQUFVO0lBQUVDLHdCQUF3QjtJQUFFQyxNQUFNO0lBQUVDLGVBQWU7SUFBRUMsY0FBYztJQUFFQyxPQUFPO0lBQUVDLFFBQVE7SUFBRUMsVUFBVTtJQUFFQyxRQUFRO0lBQUVDLGFBQWE7SUFDdFRDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQ0MsY0FBYztFQUU3QixDQUFDO0lBQUNILFFBQVE7SUFB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