1cb2a1b522f9caeb68c94fbb147bce27
"use strict";

// Generated by CoffeeScript 2.4.1
(function () {
  var DocumentPosition,
    NodeType,
    XMLCData,
    XMLComment,
    XMLDeclaration,
    XMLDocType,
    XMLDummy,
    XMLElement,
    XMLNamedNodeMap,
    XMLNode,
    XMLNodeList,
    XMLProcessingInstruction,
    XMLRaw,
    XMLText,
    getValue,
    isEmpty,
    isFunction,
    isObject,
    hasProp = {}.hasOwnProperty,
    splice = [].splice;
  ({
    isObject,
    isFunction,
    isEmpty,
    getValue
  } = require('./Utility'));
  XMLElement = null;
  XMLCData = null;
  XMLComment = null;
  XMLDeclaration = null;
  XMLDocType = null;
  XMLRaw = null;
  XMLText = null;
  XMLProcessingInstruction = null;
  XMLDummy = null;
  NodeType = null;
  XMLNodeList = null;
  XMLNamedNodeMap = null;
  DocumentPosition = null;

  // Represents a generic XMl element
  module.exports = XMLNode = function () {
    class XMLNode {
      // Initializes a new instance of `XMLNode`

      // `parent` the parent node
      constructor(parent1) {
        this.parent = parent1;
        if (this.parent) {
          this.options = this.parent.options;
          this.stringify = this.parent.stringify;
        }
        this.value = null;
        this.children = [];
        this.baseURI = null;
        // first execution, load dependencies that are otherwise
        // circular (so we can't load them at the top)
        if (!XMLElement) {
          XMLElement = require('./XMLElement');
          XMLCData = require('./XMLCData');
          XMLComment = require('./XMLComment');
          XMLDeclaration = require('./XMLDeclaration');
          XMLDocType = require('./XMLDocType');
          XMLRaw = require('./XMLRaw');
          XMLText = require('./XMLText');
          XMLProcessingInstruction = require('./XMLProcessingInstruction');
          XMLDummy = require('./XMLDummy');
          NodeType = require('./NodeType');
          XMLNodeList = require('./XMLNodeList');
          XMLNamedNodeMap = require('./XMLNamedNodeMap');
          DocumentPosition = require('./DocumentPosition');
        }
      }

      // Sets the parent node of this node and its children recursively

      // `parent` the parent node
      setParent(parent) {
        var child, j, len, ref1, results;
        this.parent = parent;
        if (parent) {
          this.options = parent.options;
          this.stringify = parent.stringify;
        }
        ref1 = this.children;
        results = [];
        for (j = 0, len = ref1.length; j < len; j++) {
          child = ref1[j];
          results.push(child.setParent(this));
        }
        return results;
      }

      // Creates a child element node

      // `name` node name or an object describing the XML tree
      // `attributes` an object containing name/value pairs of attributes
      // `text` element text
      element(name, attributes, text) {
        var childNode, item, j, k, key, lastChild, len, len1, val;
        lastChild = null;
        if (attributes === null && text == null) {
          [attributes, text] = [{}, null];
        }
        if (attributes == null) {
          attributes = {};
        }
        attributes = getValue(attributes);
        // swap argument order: text <-> attributes
        if (!isObject(attributes)) {
          [text, attributes] = [attributes, text];
        }
        if (name != null) {
          name = getValue(name);
        }
        // expand if array
        if (Array.isArray(name)) {
          for (j = 0, len = name.length; j < len; j++) {
            item = name[j];
            lastChild = this.element(item);
          }
          // evaluate if function
        } else if (isFunction(name)) {
          lastChild = this.element(name.apply());
          // expand if object
        } else if (isObject(name)) {
          for (key in name) {
            if (!hasProp.call(name, key)) continue;
            val = name[key];
            if (isFunction(val)) {
              // evaluate if function
              val = val.apply();
            }
            // assign attributes
            if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {
              lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);
              // skip empty arrays
            } else if (!this.options.separateArrayItems && Array.isArray(val) && isEmpty(val)) {
              lastChild = this.dummy();
              // empty objects produce one node
            } else if (isObject(val) && isEmpty(val)) {
              lastChild = this.element(key);
              // skip null and undefined nodes
            } else if (!this.options.keepNullNodes && val == null) {
              lastChild = this.dummy();

              // expand list by creating child nodes
            } else if (!this.options.separateArrayItems && Array.isArray(val)) {
              for (k = 0, len1 = val.length; k < len1; k++) {
                item = val[k];
                childNode = {};
                childNode[key] = item;
                lastChild = this.element(childNode);
              }

              // expand child nodes under parent
            } else if (isObject(val)) {
              // if the key is #text expand child nodes under this node to support mixed content
              if (!this.options.ignoreDecorators && this.stringify.convertTextKey && key.indexOf(this.stringify.convertTextKey) === 0) {
                lastChild = this.element(val);
              } else {
                lastChild = this.element(key);
                lastChild.element(val);
              }
            } else {
              // text node
              lastChild = this.element(key, val);
            }
          }
          // skip null nodes
        } else if (!this.options.keepNullNodes && text === null) {
          lastChild = this.dummy();
        } else {
          // text node
          if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {
            lastChild = this.text(text);
            // cdata node
          } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {
            lastChild = this.cdata(text);
            // comment node
          } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {
            lastChild = this.comment(text);
            // raw text node
          } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {
            lastChild = this.raw(text);
            // processing instruction
          } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {
            lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);
          } else {
            // element node
            lastChild = this.node(name, attributes, text);
          }
        }
        if (lastChild == null) {
          throw new Error("Could not create any elements with: " + name + ". " + this.debugInfo());
        }
        return lastChild;
      }

      // Creates a child element node before the current node

      // `name` node name or an object describing the XML tree
      // `attributes` an object containing name/value pairs of attributes
      // `text` element text
      insertBefore(name, attributes, text) {
        var child, i, newChild, refChild, removed;
        // DOM level 1
        // insertBefore(newChild, refChild) inserts the child node newChild before refChild
        if (name != null ? name.type : void 0) {
          newChild = name;
          refChild = attributes;
          newChild.setParent(this);
          if (refChild) {
            // temporarily remove children starting *with* refChild
            i = children.indexOf(refChild);
            removed = children.splice(i);

            // add the new child
            children.push(newChild);

            // add back removed children after new child
            Array.prototype.push.apply(children, removed);
          } else {
            children.push(newChild);
          }
          return newChild;
        } else {
          if (this.isRoot) {
            throw new Error("Cannot insert elements at root level. " + this.debugInfo(name));
          }

          // temporarily remove children starting *with* this
          i = this.parent.children.indexOf(this);
          removed = this.parent.children.splice(i);

          // add the new child
          child = this.parent.element(name, attributes, text);

          // add back removed children after new child
          Array.prototype.push.apply(this.parent.children, removed);
          return child;
        }
      }

      // Creates a child element node after the current node

      // `name` node name or an object describing the XML tree
      // `attributes` an object containing name/value pairs of attributes
      // `text` element text
      insertAfter(name, attributes, text) {
        var child, i, removed;
        if (this.isRoot) {
          throw new Error("Cannot insert elements at root level. " + this.debugInfo(name));
        }

        // temporarily remove children starting *after* this
        i = this.parent.children.indexOf(this);
        removed = this.parent.children.splice(i + 1);

        // add the new child
        child = this.parent.element(name, attributes, text);

        // add back removed children after new child
        Array.prototype.push.apply(this.parent.children, removed);
        return child;
      }

      // Deletes a child element node

      remove() {
        var i, ref1;
        if (this.isRoot) {
          throw new Error("Cannot remove the root element. " + this.debugInfo());
        }
        i = this.parent.children.indexOf(this);
        splice.apply(this.parent.children, [i, i - i + 1].concat(ref1 = [])), ref1;
        return this.parent;
      }

      // Creates a node

      // `name` name of the node
      // `attributes` an object containing name/value pairs of attributes
      // `text` element text
      node(name, attributes, text) {
        var child;
        if (name != null) {
          name = getValue(name);
        }
        attributes || (attributes = {});
        attributes = getValue(attributes);
        // swap argument order: text <-> attributes
        if (!isObject(attributes)) {
          [text, attributes] = [attributes, text];
        }
        child = new XMLElement(this, name, attributes);
        if (text != null) {
          child.text(text);
        }
        this.children.push(child);
        return child;
      }

      // Creates a text node

      // `value` element text
      text(value) {
        var child;
        if (isObject(value)) {
          this.element(value);
        }
        child = new XMLText(this, value);
        this.children.push(child);
        return this;
      }

      // Creates a CDATA node

      // `value` element text without CDATA delimiters
      cdata(value) {
        var child;
        child = new XMLCData(this, value);
        this.children.push(child);
        return this;
      }

      // Creates a comment node

      // `value` comment text
      comment(value) {
        var child;
        child = new XMLComment(this, value);
        this.children.push(child);
        return this;
      }

      // Creates a comment node before the current node

      // `value` comment text
      commentBefore(value) {
        var child, i, removed;
        // temporarily remove children starting *with* this
        i = this.parent.children.indexOf(this);
        removed = this.parent.children.splice(i);
        // add the new child
        child = this.parent.comment(value);
        // add back removed children after new child
        Array.prototype.push.apply(this.parent.children, removed);
        return this;
      }

      // Creates a comment node after the current node

      // `value` comment text
      commentAfter(value) {
        var child, i, removed;
        // temporarily remove children starting *after* this
        i = this.parent.children.indexOf(this);
        removed = this.parent.children.splice(i + 1);
        // add the new child
        child = this.parent.comment(value);
        // add back removed children after new child
        Array.prototype.push.apply(this.parent.children, removed);
        return this;
      }

      // Adds unescaped raw text

      // `value` text
      raw(value) {
        var child;
        child = new XMLRaw(this, value);
        this.children.push(child);
        return this;
      }

      // Adds a dummy node
      dummy() {
        var child;
        child = new XMLDummy(this);
        // Normally when a new node is created it is added to the child node collection.
        // However, dummy nodes are never added to the XML tree. They are created while
        // converting JS objects to XML nodes in order not to break the recursive function
        // chain. They can be thought of as invisible nodes. They can be traversed through
        // by using prev(), next(), up(), etc. functions but they do not exists in the tree.

        // @children.push child
        return child;
      }

      // Adds a processing instruction

      // `target` instruction target
      // `value` instruction value
      instruction(target, value) {
        var insTarget, insValue, instruction, j, len;
        if (target != null) {
          target = getValue(target);
        }
        if (value != null) {
          value = getValue(value);
        }
        if (Array.isArray(target)) {
          // expand if array
          for (j = 0, len = target.length; j < len; j++) {
            insTarget = target[j];
            this.instruction(insTarget);
          }
        } else if (isObject(target)) {
          // expand if object
          for (insTarget in target) {
            if (!hasProp.call(target, insTarget)) continue;
            insValue = target[insTarget];
            this.instruction(insTarget, insValue);
          }
        } else {
          if (isFunction(value)) {
            value = value.apply();
          }
          instruction = new XMLProcessingInstruction(this, target, value);
          this.children.push(instruction);
        }
        return this;
      }

      // Creates a processing instruction node before the current node

      // `target` instruction target
      // `value` instruction value
      instructionBefore(target, value) {
        var child, i, removed;
        // temporarily remove children starting *with* this
        i = this.parent.children.indexOf(this);
        removed = this.parent.children.splice(i);
        // add the new child
        child = this.parent.instruction(target, value);
        // add back removed children after new child
        Array.prototype.push.apply(this.parent.children, removed);
        return this;
      }

      // Creates a processing instruction node after the current node

      // `target` instruction target
      // `value` instruction value
      instructionAfter(target, value) {
        var child, i, removed;
        // temporarily remove children starting *after* this
        i = this.parent.children.indexOf(this);
        removed = this.parent.children.splice(i + 1);
        // add the new child
        child = this.parent.instruction(target, value);
        // add back removed children after new child
        Array.prototype.push.apply(this.parent.children, removed);
        return this;
      }

      // Creates the xml declaration

      // `version` A version number string, e.g. 1.0
      // `encoding` Encoding declaration, e.g. UTF-8
      // `standalone` standalone document declaration: true or false
      declaration(version, encoding, standalone) {
        var doc, xmldec;
        doc = this.document();
        xmldec = new XMLDeclaration(doc, version, encoding, standalone);
        // Replace XML declaration if exists, otherwise insert at top
        if (doc.children.length === 0) {
          doc.children.unshift(xmldec);
        } else if (doc.children[0].type === NodeType.Declaration) {
          doc.children[0] = xmldec;
        } else {
          doc.children.unshift(xmldec);
        }
        return doc.root() || doc;
      }

      // Creates the document type declaration

      // `pubID` the public identifier of the external subset
      // `sysID` the system identifier of the external subset
      dtd(pubID, sysID) {
        var child, doc, doctype, i, j, k, len, len1, ref1, ref2;
        doc = this.document();
        doctype = new XMLDocType(doc, pubID, sysID);
        ref1 = doc.children;
        // Replace DTD if exists
        for (i = j = 0, len = ref1.length; j < len; i = ++j) {
          child = ref1[i];
          if (child.type === NodeType.DocType) {
            doc.children[i] = doctype;
            return doctype;
          }
        }
        ref2 = doc.children;
        // insert before root node if the root node exists
        for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {
          child = ref2[i];
          if (child.isRoot) {
            doc.children.splice(i, 0, doctype);
            return doctype;
          }
        }
        // otherwise append to end
        doc.children.push(doctype);
        return doctype;
      }

      // Gets the parent node
      up() {
        if (this.isRoot) {
          throw new Error("The root node has no parent. Use doc() if you need to get the document object.");
        }
        return this.parent;
      }

      // Gets the root node
      root() {
        var node;
        node = this;
        while (node) {
          if (node.type === NodeType.Document) {
            return node.rootObject;
          } else if (node.isRoot) {
            return node;
          } else {
            node = node.parent;
          }
        }
      }

      // Gets the node representing the XML document
      document() {
        var node;
        node = this;
        while (node) {
          if (node.type === NodeType.Document) {
            return node;
          } else {
            node = node.parent;
          }
        }
      }

      // Ends the document and converts string
      end(options) {
        return this.document().end(options);
      }

      // Gets the previous node
      prev() {
        var i;
        i = this.parent.children.indexOf(this);
        if (i < 1) {
          throw new Error("Already at the first node. " + this.debugInfo());
        }
        return this.parent.children[i - 1];
      }

      // Gets the next node
      next() {
        var i;
        i = this.parent.children.indexOf(this);
        if (i === -1 || i === this.parent.children.length - 1) {
          throw new Error("Already at the last node. " + this.debugInfo());
        }
        return this.parent.children[i + 1];
      }

      // Imports cloned root from another XML document

      // `doc` the XML document to insert nodes from
      importDocument(doc) {
        var child, clonedRoot, j, len, ref1;
        clonedRoot = doc.root().clone();
        clonedRoot.parent = this;
        clonedRoot.isRoot = false;
        this.children.push(clonedRoot);
        // set properties if imported element becomes the root node
        if (this.type === NodeType.Document) {
          clonedRoot.isRoot = true;
          clonedRoot.documentObject = this;
          this.rootObject = clonedRoot;
          // set dtd name
          if (this.children) {
            ref1 = this.children;
            for (j = 0, len = ref1.length; j < len; j++) {
              child = ref1[j];
              if (child.type === NodeType.DocType) {
                child.name = clonedRoot.name;
                break;
              }
            }
          }
        }
        return this;
      }

      // Returns debug string for this node
      debugInfo(name) {
        var ref1, ref2;
        name = name || this.name;
        if (name == null && !((ref1 = this.parent) != null ? ref1.name : void 0)) {
          return "";
        } else if (name == null) {
          return "parent: <" + this.parent.name + ">";
        } else if (!((ref2 = this.parent) != null ? ref2.name : void 0)) {
          return "node: <" + name + ">";
        } else {
          return "node: <" + name + ">, parent: <" + this.parent.name + ">";
        }
      }

      // Aliases
      ele(name, attributes, text) {
        return this.element(name, attributes, text);
      }
      nod(name, attributes, text) {
        return this.node(name, attributes, text);
      }
      txt(value) {
        return this.text(value);
      }
      dat(value) {
        return this.cdata(value);
      }
      com(value) {
        return this.comment(value);
      }
      ins(target, value) {
        return this.instruction(target, value);
      }
      doc() {
        return this.document();
      }
      dec(version, encoding, standalone) {
        return this.declaration(version, encoding, standalone);
      }
      e(name, attributes, text) {
        return this.element(name, attributes, text);
      }
      n(name, attributes, text) {
        return this.node(name, attributes, text);
      }
      t(value) {
        return this.text(value);
      }
      d(value) {
        return this.cdata(value);
      }
      c(value) {
        return this.comment(value);
      }
      r(value) {
        return this.raw(value);
      }
      i(target, value) {
        return this.instruction(target, value);
      }
      u() {
        return this.up();
      }

      // can be deprecated in a future release
      importXMLBuilder(doc) {
        return this.importDocument(doc);
      }

      // Adds or modifies an attribute.

      // `name` attribute name
      // `value` attribute value
      attribute(name, value) {
        throw new Error("attribute() applies to element nodes only.");
      }
      att(name, value) {
        return this.attribute(name, value);
      }
      a(name, value) {
        return this.attribute(name, value);
      }

      // Removes an attribute

      // `name` attribute name
      removeAttribute(name) {
        throw new Error("attribute() applies to element nodes only.");
      }

      // DOM level 1 functions to be implemented later
      replaceChild(newChild, oldChild) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      removeChild(oldChild) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      appendChild(newChild) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      hasChildNodes() {
        return this.children.length !== 0;
      }
      cloneNode(deep) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      normalize() {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }

      // DOM level 2
      isSupported(feature, version) {
        return true;
      }
      hasAttributes() {
        return this.attribs.length !== 0;
      }

      // DOM level 3 functions to be implemented later
      compareDocumentPosition(other) {
        var ref, res;
        ref = this;
        if (ref === other) {
          return 0;
        } else if (this.document() !== other.document()) {
          res = DocumentPosition.Disconnected | DocumentPosition.ImplementationSpecific;
          if (Math.random() < 0.5) {
            res |= DocumentPosition.Preceding;
          } else {
            res |= DocumentPosition.Following;
          }
          return res;
        } else if (ref.isAncestor(other)) {
          return DocumentPosition.Contains | DocumentPosition.Preceding;
        } else if (ref.isDescendant(other)) {
          return DocumentPosition.Contains | DocumentPosition.Following;
        } else if (ref.isPreceding(other)) {
          return DocumentPosition.Preceding;
        } else {
          return DocumentPosition.Following;
        }
      }
      isSameNode(other) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      lookupPrefix(namespaceURI) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      isDefaultNamespace(namespaceURI) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      lookupNamespaceURI(prefix) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      isEqualNode(node) {
        var i, j, ref1;
        if (node.nodeType !== this.nodeType) {
          return false;
        }
        if (node.children.length !== this.children.length) {
          return false;
        }
        for (i = j = 0, ref1 = this.children.length - 1; 0 <= ref1 ? j <= ref1 : j >= ref1; i = 0 <= ref1 ? ++j : --j) {
          if (!this.children[i].isEqualNode(node.children[i])) {
            return false;
          }
        }
        return true;
      }
      getFeature(feature, version) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      setUserData(key, data, handler) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
      getUserData(key) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }

      // Returns true if other is an inclusive descendant of node,
      // and false otherwise.
      contains(other) {
        if (!other) {
          return false;
        }
        return other === this || this.isDescendant(other);
      }

      // An object A is called a descendant of an object B, if either A is 
      // a child of B or A is a child of an object C that is a descendant of B.
      isDescendant(node) {
        var child, isDescendantChild, j, len, ref1;
        ref1 = this.children;
        for (j = 0, len = ref1.length; j < len; j++) {
          child = ref1[j];
          if (node === child) {
            return true;
          }
          isDescendantChild = child.isDescendant(node);
          if (isDescendantChild) {
            return true;
          }
        }
        return false;
      }

      // An object A is called an ancestor of an object B if and only if
      // B is a descendant of A.
      isAncestor(node) {
        return node.isDescendant(this);
      }

      // An object A is preceding an object B if A and B are in the 
      // same tree and A comes before B in tree order.
      isPreceding(node) {
        var nodePos, thisPos;
        nodePos = this.treePosition(node);
        thisPos = this.treePosition(this);
        if (nodePos === -1 || thisPos === -1) {
          return false;
        } else {
          return nodePos < thisPos;
        }
      }

      // An object A is folllowing an object B if A and B are in the 
      // same tree and A comes after B in tree order.
      isFollowing(node) {
        var nodePos, thisPos;
        nodePos = this.treePosition(node);
        thisPos = this.treePosition(this);
        if (nodePos === -1 || thisPos === -1) {
          return false;
        } else {
          return nodePos > thisPos;
        }
      }

      // Returns the preorder position of the given node in the tree, or -1
      // if the node is not in the tree.
      treePosition(node) {
        var found, pos;
        pos = 0;
        found = false;
        this.foreachTreeNode(this.document(), function (childNode) {
          pos++;
          if (!found && childNode === node) {
            return found = true;
          }
        });
        if (found) {
          return pos;
        } else {
          return -1;
        }
      }

      // Depth-first preorder traversal through the XML tree
      foreachTreeNode(node, func) {
        var child, j, len, ref1, res;
        node || (node = this.document());
        ref1 = node.children;
        for (j = 0, len = ref1.length; j < len; j++) {
          child = ref1[j];
          if (res = func(child)) {
            return res;
          } else {
            res = this.foreachTreeNode(child, func);
            if (res) {
              return res;
            }
          }
        }
      }
    }
    ;

    // DOM level 1
    Object.defineProperty(XMLNode.prototype, 'nodeName', {
      get: function () {
        return this.name;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'nodeType', {
      get: function () {
        return this.type;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'nodeValue', {
      get: function () {
        return this.value;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'parentNode', {
      get: function () {
        return this.parent;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'childNodes', {
      get: function () {
        if (!this.childNodeList || !this.childNodeList.nodes) {
          this.childNodeList = new XMLNodeList(this.children);
        }
        return this.childNodeList;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'firstChild', {
      get: function () {
        return this.children[0] || null;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'lastChild', {
      get: function () {
        return this.children[this.children.length - 1] || null;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'previousSibling', {
      get: function () {
        var i;
        i = this.parent.children.indexOf(this);
        return this.parent.children[i - 1] || null;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'nextSibling', {
      get: function () {
        var i;
        i = this.parent.children.indexOf(this);
        return this.parent.children[i + 1] || null;
      }
    });
    Object.defineProperty(XMLNode.prototype, 'ownerDocument', {
      get: function () {
        return this.document() || null;
      }
    });

    // DOM level 3
    Object.defineProperty(XMLNode.prototype, 'textContent', {
      get: function () {
        var child, j, len, ref1, str;
        if (this.nodeType === NodeType.Element || this.nodeType === NodeType.DocumentFragment) {
          str = '';
          ref1 = this.children;
          for (j = 0, len = ref1.length; j < len; j++) {
            child = ref1[j];
            if (child.textContent) {
              str += child.textContent;
            }
          }
          return str;
        } else {
          return null;
        }
      },
      set: function (value) {
        throw new Error("This DOM method is not implemented." + this.debugInfo());
      }
    });
    return XMLNode;
  }.call(this);
}).call(void 0);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEb2N1bWVudFBvc2l0aW9uIiwiTm9kZVR5cGUiLCJYTUxDRGF0YSIsIlhNTENvbW1lbnQiLCJYTUxEZWNsYXJhdGlvbiIsIlhNTERvY1R5cGUiLCJYTUxEdW1teSIsIlhNTEVsZW1lbnQiLCJYTUxOYW1lZE5vZGVNYXAiLCJYTUxOb2RlIiwiWE1MTm9kZUxpc3QiLCJYTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24iLCJYTUxSYXciLCJYTUxUZXh0IiwiZ2V0VmFsdWUiLCJpc0VtcHR5IiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0IiwiaGFzUHJvcCIsImhhc093blByb3BlcnR5Iiwic3BsaWNlIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJjb25zdHJ1Y3RvciIsInBhcmVudDEiLCJwYXJlbnQiLCJvcHRpb25zIiwic3RyaW5naWZ5IiwidmFsdWUiLCJjaGlsZHJlbiIsImJhc2VVUkkiLCJzZXRQYXJlbnQiLCJjaGlsZCIsImoiLCJsZW4iLCJyZWYxIiwicmVzdWx0cyIsImxlbmd0aCIsInB1c2giLCJlbGVtZW50IiwibmFtZSIsImF0dHJpYnV0ZXMiLCJ0ZXh0IiwiY2hpbGROb2RlIiwiaXRlbSIsImsiLCJrZXkiLCJsYXN0Q2hpbGQiLCJsZW4xIiwidmFsIiwiQXJyYXkiLCJpc0FycmF5IiwiYXBwbHkiLCJjYWxsIiwiaWdub3JlRGVjb3JhdG9ycyIsImNvbnZlcnRBdHRLZXkiLCJpbmRleE9mIiwiYXR0cmlidXRlIiwic3Vic3RyIiwic2VwYXJhdGVBcnJheUl0ZW1zIiwiZHVtbXkiLCJrZWVwTnVsbE5vZGVzIiwiY29udmVydFRleHRLZXkiLCJjb252ZXJ0Q0RhdGFLZXkiLCJjZGF0YSIsImNvbnZlcnRDb21tZW50S2V5IiwiY29tbWVudCIsImNvbnZlcnRSYXdLZXkiLCJyYXciLCJjb252ZXJ0UElLZXkiLCJpbnN0cnVjdGlvbiIsIm5vZGUiLCJFcnJvciIsImRlYnVnSW5mbyIsImluc2VydEJlZm9yZSIsImkiLCJuZXdDaGlsZCIsInJlZkNoaWxkIiwicmVtb3ZlZCIsInR5cGUiLCJwcm90b3R5cGUiLCJpc1Jvb3QiLCJpbnNlcnRBZnRlciIsInJlbW92ZSIsImNvbmNhdCIsImNvbW1lbnRCZWZvcmUiLCJjb21tZW50QWZ0ZXIiLCJ0YXJnZXQiLCJpbnNUYXJnZXQiLCJpbnNWYWx1ZSIsImluc3RydWN0aW9uQmVmb3JlIiwiaW5zdHJ1Y3Rpb25BZnRlciIsImRlY2xhcmF0aW9uIiwidmVyc2lvbiIsImVuY29kaW5nIiwic3RhbmRhbG9uZSIsImRvYyIsInhtbGRlYyIsImRvY3VtZW50IiwidW5zaGlmdCIsIkRlY2xhcmF0aW9uIiwicm9vdCIsImR0ZCIsInB1YklEIiwic3lzSUQiLCJkb2N0eXBlIiwicmVmMiIsIkRvY1R5cGUiLCJ1cCIsIkRvY3VtZW50Iiwicm9vdE9iamVjdCIsImVuZCIsInByZXYiLCJuZXh0IiwiaW1wb3J0RG9jdW1lbnQiLCJjbG9uZWRSb290IiwiY2xvbmUiLCJkb2N1bWVudE9iamVjdCIsImVsZSIsIm5vZCIsInR4dCIsImRhdCIsImNvbSIsImlucyIsImRlYyIsImUiLCJuIiwidCIsImQiLCJjIiwiciIsInUiLCJpbXBvcnRYTUxCdWlsZGVyIiwiYXR0IiwiYSIsInJlbW92ZUF0dHJpYnV0ZSIsInJlcGxhY2VDaGlsZCIsIm9sZENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJhcHBlbmRDaGlsZCIsImhhc0NoaWxkTm9kZXMiLCJjbG9uZU5vZGUiLCJkZWVwIiwibm9ybWFsaXplIiwiaXNTdXBwb3J0ZWQiLCJmZWF0dXJlIiwiaGFzQXR0cmlidXRlcyIsImF0dHJpYnMiLCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvbiIsIm90aGVyIiwicmVmIiwicmVzIiwiRGlzY29ubmVjdGVkIiwiSW1wbGVtZW50YXRpb25TcGVjaWZpYyIsIk1hdGgiLCJyYW5kb20iLCJQcmVjZWRpbmciLCJGb2xsb3dpbmciLCJpc0FuY2VzdG9yIiwiQ29udGFpbnMiLCJpc0Rlc2NlbmRhbnQiLCJpc1ByZWNlZGluZyIsImlzU2FtZU5vZGUiLCJsb29rdXBQcmVmaXgiLCJuYW1lc3BhY2VVUkkiLCJpc0RlZmF1bHROYW1lc3BhY2UiLCJsb29rdXBOYW1lc3BhY2VVUkkiLCJwcmVmaXgiLCJpc0VxdWFsTm9kZSIsIm5vZGVUeXBlIiwiZ2V0RmVhdHVyZSIsInNldFVzZXJEYXRhIiwiZGF0YSIsImhhbmRsZXIiLCJnZXRVc2VyRGF0YSIsImNvbnRhaW5zIiwiaXNEZXNjZW5kYW50Q2hpbGQiLCJub2RlUG9zIiwidGhpc1BvcyIsInRyZWVQb3NpdGlvbiIsImlzRm9sbG93aW5nIiwiZm91bmQiLCJwb3MiLCJmb3JlYWNoVHJlZU5vZGUiLCJmdW5jIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJjaGlsZE5vZGVMaXN0Iiwibm9kZXMiLCJzdHIiLCJFbGVtZW50IiwiRG9jdW1lbnRGcmFnbWVudCIsInRleHRDb250ZW50Iiwic2V0Il0sInNvdXJjZXMiOlsiWE1MTm9kZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDIuNC4xXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBEb2N1bWVudFBvc2l0aW9uLCBOb2RlVHlwZSwgWE1MQ0RhdGEsIFhNTENvbW1lbnQsIFhNTERlY2xhcmF0aW9uLCBYTUxEb2NUeXBlLCBYTUxEdW1teSwgWE1MRWxlbWVudCwgWE1MTmFtZWROb2RlTWFwLCBYTUxOb2RlLCBYTUxOb2RlTGlzdCwgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uLCBYTUxSYXcsIFhNTFRleHQsIGdldFZhbHVlLCBpc0VtcHR5LCBpc0Z1bmN0aW9uLCBpc09iamVjdCxcbiAgICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHksXG4gICAgc3BsaWNlID0gW10uc3BsaWNlO1xuXG4gICh7aXNPYmplY3QsIGlzRnVuY3Rpb24sIGlzRW1wdHksIGdldFZhbHVlfSA9IHJlcXVpcmUoJy4vVXRpbGl0eScpKTtcblxuICBYTUxFbGVtZW50ID0gbnVsbDtcblxuICBYTUxDRGF0YSA9IG51bGw7XG5cbiAgWE1MQ29tbWVudCA9IG51bGw7XG5cbiAgWE1MRGVjbGFyYXRpb24gPSBudWxsO1xuXG4gIFhNTERvY1R5cGUgPSBudWxsO1xuXG4gIFhNTFJhdyA9IG51bGw7XG5cbiAgWE1MVGV4dCA9IG51bGw7XG5cbiAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gbnVsbDtcblxuICBYTUxEdW1teSA9IG51bGw7XG5cbiAgTm9kZVR5cGUgPSBudWxsO1xuXG4gIFhNTE5vZGVMaXN0ID0gbnVsbDtcblxuICBYTUxOYW1lZE5vZGVNYXAgPSBudWxsO1xuXG4gIERvY3VtZW50UG9zaXRpb24gPSBudWxsO1xuXG4gIC8vIFJlcHJlc2VudHMgYSBnZW5lcmljIFhNbCBlbGVtZW50XG4gIG1vZHVsZS5leHBvcnRzID0gWE1MTm9kZSA9IChmdW5jdGlvbigpIHtcbiAgICBjbGFzcyBYTUxOb2RlIHtcbiAgICAgIC8vIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIGBYTUxOb2RlYFxuXG4gICAgICAvLyBgcGFyZW50YCB0aGUgcGFyZW50IG5vZGVcbiAgICAgIGNvbnN0cnVjdG9yKHBhcmVudDEpIHtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQxO1xuICAgICAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLnBhcmVudC5vcHRpb25zO1xuICAgICAgICAgIHRoaXMuc3RyaW5naWZ5ID0gdGhpcy5wYXJlbnQuc3RyaW5naWZ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gICAgICAgIHRoaXMuYmFzZVVSSSA9IG51bGw7XG4gICAgICAgIC8vIGZpcnN0IGV4ZWN1dGlvbiwgbG9hZCBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgb3RoZXJ3aXNlXG4gICAgICAgIC8vIGNpcmN1bGFyIChzbyB3ZSBjYW4ndCBsb2FkIHRoZW0gYXQgdGhlIHRvcClcbiAgICAgICAgaWYgKCFYTUxFbGVtZW50KSB7XG4gICAgICAgICAgWE1MRWxlbWVudCA9IHJlcXVpcmUoJy4vWE1MRWxlbWVudCcpO1xuICAgICAgICAgIFhNTENEYXRhID0gcmVxdWlyZSgnLi9YTUxDRGF0YScpO1xuICAgICAgICAgIFhNTENvbW1lbnQgPSByZXF1aXJlKCcuL1hNTENvbW1lbnQnKTtcbiAgICAgICAgICBYTUxEZWNsYXJhdGlvbiA9IHJlcXVpcmUoJy4vWE1MRGVjbGFyYXRpb24nKTtcbiAgICAgICAgICBYTUxEb2NUeXBlID0gcmVxdWlyZSgnLi9YTUxEb2NUeXBlJyk7XG4gICAgICAgICAgWE1MUmF3ID0gcmVxdWlyZSgnLi9YTUxSYXcnKTtcbiAgICAgICAgICBYTUxUZXh0ID0gcmVxdWlyZSgnLi9YTUxUZXh0Jyk7XG4gICAgICAgICAgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uID0gcmVxdWlyZSgnLi9YTUxQcm9jZXNzaW5nSW5zdHJ1Y3Rpb24nKTtcbiAgICAgICAgICBYTUxEdW1teSA9IHJlcXVpcmUoJy4vWE1MRHVtbXknKTtcbiAgICAgICAgICBOb2RlVHlwZSA9IHJlcXVpcmUoJy4vTm9kZVR5cGUnKTtcbiAgICAgICAgICBYTUxOb2RlTGlzdCA9IHJlcXVpcmUoJy4vWE1MTm9kZUxpc3QnKTtcbiAgICAgICAgICBYTUxOYW1lZE5vZGVNYXAgPSByZXF1aXJlKCcuL1hNTE5hbWVkTm9kZU1hcCcpO1xuICAgICAgICAgIERvY3VtZW50UG9zaXRpb24gPSByZXF1aXJlKCcuL0RvY3VtZW50UG9zaXRpb24nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBcbiAgICAgIC8vIFNldHMgdGhlIHBhcmVudCBub2RlIG9mIHRoaXMgbm9kZSBhbmQgaXRzIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5XG5cbiAgICAgIC8vIGBwYXJlbnRgIHRoZSBwYXJlbnQgbm9kZVxuICAgICAgc2V0UGFyZW50KHBhcmVudCkge1xuICAgICAgICB2YXIgY2hpbGQsIGosIGxlbiwgcmVmMSwgcmVzdWx0cztcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBwYXJlbnQub3B0aW9ucztcbiAgICAgICAgICB0aGlzLnN0cmluZ2lmeSA9IHBhcmVudC5zdHJpbmdpZnk7XG4gICAgICAgIH1cbiAgICAgICAgcmVmMSA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgIGNoaWxkID0gcmVmMVtqXTtcbiAgICAgICAgICByZXN1bHRzLnB1c2goY2hpbGQuc2V0UGFyZW50KHRoaXMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyBhIGNoaWxkIGVsZW1lbnQgbm9kZVxuXG4gICAgICAvLyBgbmFtZWAgbm9kZSBuYW1lIG9yIGFuIG9iamVjdCBkZXNjcmliaW5nIHRoZSBYTUwgdHJlZVxuICAgICAgLy8gYGF0dHJpYnV0ZXNgIGFuIG9iamVjdCBjb250YWluaW5nIG5hbWUvdmFsdWUgcGFpcnMgb2YgYXR0cmlidXRlc1xuICAgICAgLy8gYHRleHRgIGVsZW1lbnQgdGV4dFxuICAgICAgZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICAgIHZhciBjaGlsZE5vZGUsIGl0ZW0sIGosIGssIGtleSwgbGFzdENoaWxkLCBsZW4sIGxlbjEsIHZhbDtcbiAgICAgICAgbGFzdENoaWxkID0gbnVsbDtcbiAgICAgICAgaWYgKGF0dHJpYnV0ZXMgPT09IG51bGwgJiYgKHRleHQgPT0gbnVsbCkpIHtcbiAgICAgICAgICBbYXR0cmlidXRlcywgdGV4dF0gPSBbe30sIG51bGxdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhdHRyaWJ1dGVzID09IG51bGwpIHtcbiAgICAgICAgICBhdHRyaWJ1dGVzID0ge307XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlKGF0dHJpYnV0ZXMpO1xuICAgICAgICAvLyBzd2FwIGFyZ3VtZW50IG9yZGVyOiB0ZXh0IDwtPiBhdHRyaWJ1dGVzXG4gICAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICBbdGV4dCwgYXR0cmlidXRlc10gPSBbYXR0cmlidXRlcywgdGV4dF07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgIG5hbWUgPSBnZXRWYWx1ZShuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBleHBhbmQgaWYgYXJyYXlcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZSkpIHtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSBuYW1lLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBpdGVtID0gbmFtZVtqXTtcbiAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChpdGVtKTtcbiAgICAgICAgICB9XG4gICAgICAgIC8vIGV2YWx1YXRlIGlmIGZ1bmN0aW9uXG4gICAgICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChuYW1lLmFwcGx5KCkpO1xuICAgICAgICAvLyBleHBhbmQgaWYgb2JqZWN0XG4gICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QobmFtZSkpIHtcbiAgICAgICAgICBmb3IgKGtleSBpbiBuYW1lKSB7XG4gICAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChuYW1lLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgICAgIHZhbCA9IG5hbWVba2V5XTtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKHZhbCkpIHtcbiAgICAgICAgICAgICAgLy8gZXZhbHVhdGUgaWYgZnVuY3Rpb25cbiAgICAgICAgICAgICAgdmFsID0gdmFsLmFwcGx5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBhc3NpZ24gYXR0cmlidXRlc1xuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0QXR0S2V5ICYmIGtleS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRBdHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuYXR0cmlidXRlKGtleS5zdWJzdHIodGhpcy5zdHJpbmdpZnkuY29udmVydEF0dEtleS5sZW5ndGgpLCB2YWwpO1xuICAgICAgICAgICAgLy8gc2tpcCBlbXB0eSBhcnJheXNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5zZXBhcmF0ZUFycmF5SXRlbXMgJiYgQXJyYXkuaXNBcnJheSh2YWwpICYmIGlzRW1wdHkodmFsKSkge1xuICAgICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmR1bW15KCk7XG4gICAgICAgICAgICAvLyBlbXB0eSBvYmplY3RzIHByb2R1Y2Ugb25lIG5vZGVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSAmJiBpc0VtcHR5KHZhbCkpIHtcbiAgICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSk7XG4gICAgICAgICAgICAvLyBza2lwIG51bGwgYW5kIHVuZGVmaW5lZCBub2Rlc1xuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmtlZXBOdWxsTm9kZXMgJiYgKHZhbCA9PSBudWxsKSkge1xuICAgICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmR1bW15KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGV4cGFuZCBsaXN0IGJ5IGNyZWF0aW5nIGNoaWxkIG5vZGVzXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuc2VwYXJhdGVBcnJheUl0ZW1zICYmIEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4xID0gdmFsLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSB2YWxba107XG4gICAgICAgICAgICAgICAgY2hpbGROb2RlID0ge307XG4gICAgICAgICAgICAgICAgY2hpbGROb2RlW2tleV0gPSBpdGVtO1xuICAgICAgICAgICAgICAgIGxhc3RDaGlsZCA9IHRoaXMuZWxlbWVudChjaGlsZE5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGV4cGFuZCBjaGlsZCBub2RlcyB1bmRlciBwYXJlbnRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsKSkge1xuICAgICAgICAgICAgICAvLyBpZiB0aGUga2V5IGlzICN0ZXh0IGV4cGFuZCBjaGlsZCBub2RlcyB1bmRlciB0aGlzIG5vZGUgdG8gc3VwcG9ydCBtaXhlZCBjb250ZW50XG4gICAgICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkgJiYga2V5LmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KHZhbCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5lbGVtZW50KGtleSk7XG4gICAgICAgICAgICAgICAgbGFzdENoaWxkLmVsZW1lbnQodmFsKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIHRleHQgbm9kZVxuICAgICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmVsZW1lbnQoa2V5LCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgLy8gc2tpcCBudWxsIG5vZGVzXG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5rZWVwTnVsbE5vZGVzICYmIHRleHQgPT09IG51bGwpIHtcbiAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmR1bW15KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGV4dCBub2RlXG4gICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0VGV4dEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydFRleHRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLnRleHQodGV4dCk7XG4gICAgICAgICAgLy8gY2RhdGEgbm9kZVxuICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5pZ25vcmVEZWNvcmF0b3JzICYmIHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRDRGF0YUtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydENEYXRhS2V5KSA9PT0gMCkge1xuICAgICAgICAgICAgbGFzdENoaWxkID0gdGhpcy5jZGF0YSh0ZXh0KTtcbiAgICAgICAgICAvLyBjb21tZW50IG5vZGVcbiAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuaWdub3JlRGVjb3JhdG9ycyAmJiB0aGlzLnN0cmluZ2lmeS5jb252ZXJ0Q29tbWVudEtleSAmJiBuYW1lLmluZGV4T2YodGhpcy5zdHJpbmdpZnkuY29udmVydENvbW1lbnRLZXkpID09PSAwKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmNvbW1lbnQodGV4dCk7XG4gICAgICAgICAgLy8gcmF3IHRleHQgbm9kZVxuICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5pZ25vcmVEZWNvcmF0b3JzICYmIHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRSYXdLZXkgJiYgbmFtZS5pbmRleE9mKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRSYXdLZXkpID09PSAwKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLnJhdyh0ZXh0KTtcbiAgICAgICAgICAvLyBwcm9jZXNzaW5nIGluc3RydWN0aW9uXG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5vcHRpb25zLmlnbm9yZURlY29yYXRvcnMgJiYgdGhpcy5zdHJpbmdpZnkuY29udmVydFBJS2V5ICYmIG5hbWUuaW5kZXhPZih0aGlzLnN0cmluZ2lmeS5jb252ZXJ0UElLZXkpID09PSAwKSB7XG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLmluc3RydWN0aW9uKG5hbWUuc3Vic3RyKHRoaXMuc3RyaW5naWZ5LmNvbnZlcnRQSUtleS5sZW5ndGgpLCB0ZXh0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZWxlbWVudCBub2RlXG4gICAgICAgICAgICBsYXN0Q2hpbGQgPSB0aGlzLm5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChsYXN0Q2hpbGQgPT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBjcmVhdGUgYW55IGVsZW1lbnRzIHdpdGg6IFwiICsgbmFtZSArIFwiLiBcIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsYXN0Q2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZXMgYSBjaGlsZCBlbGVtZW50IG5vZGUgYmVmb3JlIHRoZSBjdXJyZW50IG5vZGVcblxuICAgICAgLy8gYG5hbWVgIG5vZGUgbmFtZSBvciBhbiBvYmplY3QgZGVzY3JpYmluZyB0aGUgWE1MIHRyZWVcbiAgICAgIC8vIGBhdHRyaWJ1dGVzYCBhbiBvYmplY3QgY29udGFpbmluZyBuYW1lL3ZhbHVlIHBhaXJzIG9mIGF0dHJpYnV0ZXNcbiAgICAgIC8vIGB0ZXh0YCBlbGVtZW50IHRleHRcbiAgICAgIGluc2VydEJlZm9yZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KSB7XG4gICAgICAgIHZhciBjaGlsZCwgaSwgbmV3Q2hpbGQsIHJlZkNoaWxkLCByZW1vdmVkO1xuICAgICAgICAvLyBET00gbGV2ZWwgMVxuICAgICAgICAvLyBpbnNlcnRCZWZvcmUobmV3Q2hpbGQsIHJlZkNoaWxkKSBpbnNlcnRzIHRoZSBjaGlsZCBub2RlIG5ld0NoaWxkIGJlZm9yZSByZWZDaGlsZFxuICAgICAgICBpZiAobmFtZSAhPSBudWxsID8gbmFtZS50eXBlIDogdm9pZCAwKSB7XG4gICAgICAgICAgbmV3Q2hpbGQgPSBuYW1lO1xuICAgICAgICAgIHJlZkNoaWxkID0gYXR0cmlidXRlcztcbiAgICAgICAgICBuZXdDaGlsZC5zZXRQYXJlbnQodGhpcyk7XG4gICAgICAgICAgaWYgKHJlZkNoaWxkKSB7XG4gICAgICAgICAgICAvLyB0ZW1wb3JhcmlseSByZW1vdmUgY2hpbGRyZW4gc3RhcnRpbmcgKndpdGgqIHJlZkNoaWxkXG4gICAgICAgICAgICBpID0gY2hpbGRyZW4uaW5kZXhPZihyZWZDaGlsZCk7XG4gICAgICAgICAgICByZW1vdmVkID0gY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhZGQgdGhlIG5ldyBjaGlsZFxuICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChuZXdDaGlsZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFkZCBiYWNrIHJlbW92ZWQgY2hpbGRyZW4gYWZ0ZXIgbmV3IGNoaWxkXG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShjaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobmV3Q2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3Q2hpbGQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaW5zZXJ0IGVsZW1lbnRzIGF0IHJvb3QgbGV2ZWwuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyB0ZW1wb3JhcmlseSByZW1vdmUgY2hpbGRyZW4gc3RhcnRpbmcgKndpdGgqIHRoaXNcbiAgICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIGFkZCB0aGUgbmV3IGNoaWxkXG4gICAgICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIGFkZCBiYWNrIHJlbW92ZWQgY2hpbGRyZW4gYWZ0ZXIgbmV3IGNoaWxkXG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGVzIGEgY2hpbGQgZWxlbWVudCBub2RlIGFmdGVyIHRoZSBjdXJyZW50IG5vZGVcblxuICAgICAgLy8gYG5hbWVgIG5vZGUgbmFtZSBvciBhbiBvYmplY3QgZGVzY3JpYmluZyB0aGUgWE1MIHRyZWVcbiAgICAgIC8vIGBhdHRyaWJ1dGVzYCBhbiBvYmplY3QgY29udGFpbmluZyBuYW1lL3ZhbHVlIHBhaXJzIG9mIGF0dHJpYnV0ZXNcbiAgICAgIC8vIGB0ZXh0YCBlbGVtZW50IHRleHRcbiAgICAgIGluc2VydEFmdGVyKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgICBpZiAodGhpcy5pc1Jvb3QpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaW5zZXJ0IGVsZW1lbnRzIGF0IHJvb3QgbGV2ZWwuIFwiICsgdGhpcy5kZWJ1Z0luZm8obmFtZSkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyB0ZW1wb3JhcmlseSByZW1vdmUgY2hpbGRyZW4gc3RhcnRpbmcgKmFmdGVyKiB0aGlzXG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCB0aGUgbmV3IGNoaWxkXG4gICAgICAgIGNoaWxkID0gdGhpcy5wYXJlbnQuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBiYWNrIHJlbW92ZWQgY2hpbGRyZW4gYWZ0ZXIgbmV3IGNoaWxkXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCByZW1vdmVkKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfVxuXG4gICAgICAvLyBEZWxldGVzIGEgY2hpbGQgZWxlbWVudCBub2RlXG5cbiAgICAgIHJlbW92ZSgpIHtcbiAgICAgICAgdmFyIGksIHJlZjE7XG4gICAgICAgIGlmICh0aGlzLmlzUm9vdCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZW1vdmUgdGhlIHJvb3QgZWxlbWVudC4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgICAgfVxuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgc3BsaWNlLmFwcGx5KHRoaXMucGFyZW50LmNoaWxkcmVuLCBbaSwgaSAtIGkgKyAxXS5jb25jYXQocmVmMSA9IFtdKSksIHJlZjE7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyBhIG5vZGVcblxuICAgICAgLy8gYG5hbWVgIG5hbWUgb2YgdGhlIG5vZGVcbiAgICAgIC8vIGBhdHRyaWJ1dGVzYCBhbiBvYmplY3QgY29udGFpbmluZyBuYW1lL3ZhbHVlIHBhaXJzIG9mIGF0dHJpYnV0ZXNcbiAgICAgIC8vIGB0ZXh0YCBlbGVtZW50IHRleHRcbiAgICAgIG5vZGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgICB2YXIgY2hpbGQ7XG4gICAgICAgIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgICAgICBuYW1lID0gZ2V0VmFsdWUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYXR0cmlidXRlcyB8fCAoYXR0cmlidXRlcyA9IHt9KTtcbiAgICAgICAgYXR0cmlidXRlcyA9IGdldFZhbHVlKGF0dHJpYnV0ZXMpO1xuICAgICAgICAvLyBzd2FwIGFyZ3VtZW50IG9yZGVyOiB0ZXh0IDwtPiBhdHRyaWJ1dGVzXG4gICAgICAgIGlmICghaXNPYmplY3QoYXR0cmlidXRlcykpIHtcbiAgICAgICAgICBbdGV4dCwgYXR0cmlidXRlc10gPSBbYXR0cmlidXRlcywgdGV4dF07XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBuZXcgWE1MRWxlbWVudCh0aGlzLCBuYW1lLCBhdHRyaWJ1dGVzKTtcbiAgICAgICAgaWYgKHRleHQgIT0gbnVsbCkge1xuICAgICAgICAgIGNoaWxkLnRleHQodGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGVzIGEgdGV4dCBub2RlXG5cbiAgICAgIC8vIGB2YWx1ZWAgZWxlbWVudCB0ZXh0XG4gICAgICB0ZXh0KHZhbHVlKSB7XG4gICAgICAgIHZhciBjaGlsZDtcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgICAgICAgIHRoaXMuZWxlbWVudCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQgPSBuZXcgWE1MVGV4dCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGVzIGEgQ0RBVEEgbm9kZVxuXG4gICAgICAvLyBgdmFsdWVgIGVsZW1lbnQgdGV4dCB3aXRob3V0IENEQVRBIGRlbGltaXRlcnNcbiAgICAgIGNkYXRhKHZhbHVlKSB7XG4gICAgICAgIHZhciBjaGlsZDtcbiAgICAgICAgY2hpbGQgPSBuZXcgWE1MQ0RhdGEodGhpcywgdmFsdWUpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyBhIGNvbW1lbnQgbm9kZVxuXG4gICAgICAvLyBgdmFsdWVgIGNvbW1lbnQgdGV4dFxuICAgICAgY29tbWVudCh2YWx1ZSkge1xuICAgICAgICB2YXIgY2hpbGQ7XG4gICAgICAgIGNoaWxkID0gbmV3IFhNTENvbW1lbnQodGhpcywgdmFsdWUpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyBhIGNvbW1lbnQgbm9kZSBiZWZvcmUgdGhlIGN1cnJlbnQgbm9kZVxuXG4gICAgICAvLyBgdmFsdWVgIGNvbW1lbnQgdGV4dFxuICAgICAgY29tbWVudEJlZm9yZSh2YWx1ZSkge1xuICAgICAgICB2YXIgY2hpbGQsIGksIHJlbW92ZWQ7XG4gICAgICAgIC8vIHRlbXBvcmFyaWx5IHJlbW92ZSBjaGlsZHJlbiBzdGFydGluZyAqd2l0aCogdGhpc1xuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgcmVtb3ZlZCA9IHRoaXMucGFyZW50LmNoaWxkcmVuLnNwbGljZShpKTtcbiAgICAgICAgLy8gYWRkIHRoZSBuZXcgY2hpbGRcbiAgICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5jb21tZW50KHZhbHVlKTtcbiAgICAgICAgLy8gYWRkIGJhY2sgcmVtb3ZlZCBjaGlsZHJlbiBhZnRlciBuZXcgY2hpbGRcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyBhIGNvbW1lbnQgbm9kZSBhZnRlciB0aGUgY3VycmVudCBub2RlXG5cbiAgICAgIC8vIGB2YWx1ZWAgY29tbWVudCB0ZXh0XG4gICAgICBjb21tZW50QWZ0ZXIodmFsdWUpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgICAvLyB0ZW1wb3JhcmlseSByZW1vdmUgY2hpbGRyZW4gc3RhcnRpbmcgKmFmdGVyKiB0aGlzXG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgICAgLy8gYWRkIHRoZSBuZXcgY2hpbGRcbiAgICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5jb21tZW50KHZhbHVlKTtcbiAgICAgICAgLy8gYWRkIGJhY2sgcmVtb3ZlZCBjaGlsZHJlbiBhZnRlciBuZXcgY2hpbGRcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQWRkcyB1bmVzY2FwZWQgcmF3IHRleHRcblxuICAgICAgLy8gYHZhbHVlYCB0ZXh0XG4gICAgICByYXcodmFsdWUpIHtcbiAgICAgICAgdmFyIGNoaWxkO1xuICAgICAgICBjaGlsZCA9IG5ldyBYTUxSYXcodGhpcywgdmFsdWUpO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2hpbGQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQWRkcyBhIGR1bW15IG5vZGVcbiAgICAgIGR1bW15KCkge1xuICAgICAgICB2YXIgY2hpbGQ7XG4gICAgICAgIGNoaWxkID0gbmV3IFhNTER1bW15KHRoaXMpO1xuICAgICAgICAvLyBOb3JtYWxseSB3aGVuIGEgbmV3IG5vZGUgaXMgY3JlYXRlZCBpdCBpcyBhZGRlZCB0byB0aGUgY2hpbGQgbm9kZSBjb2xsZWN0aW9uLlxuICAgICAgICAvLyBIb3dldmVyLCBkdW1teSBub2RlcyBhcmUgbmV2ZXIgYWRkZWQgdG8gdGhlIFhNTCB0cmVlLiBUaGV5IGFyZSBjcmVhdGVkIHdoaWxlXG4gICAgICAgIC8vIGNvbnZlcnRpbmcgSlMgb2JqZWN0cyB0byBYTUwgbm9kZXMgaW4gb3JkZXIgbm90IHRvIGJyZWFrIHRoZSByZWN1cnNpdmUgZnVuY3Rpb25cbiAgICAgICAgLy8gY2hhaW4uIFRoZXkgY2FuIGJlIHRob3VnaHQgb2YgYXMgaW52aXNpYmxlIG5vZGVzLiBUaGV5IGNhbiBiZSB0cmF2ZXJzZWQgdGhyb3VnaFxuICAgICAgICAvLyBieSB1c2luZyBwcmV2KCksIG5leHQoKSwgdXAoKSwgZXRjLiBmdW5jdGlvbnMgYnV0IHRoZXkgZG8gbm90IGV4aXN0cyBpbiB0aGUgdHJlZS5cblxuICAgICAgICAvLyBAY2hpbGRyZW4ucHVzaCBjaGlsZFxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZHMgYSBwcm9jZXNzaW5nIGluc3RydWN0aW9uXG5cbiAgICAgIC8vIGB0YXJnZXRgIGluc3RydWN0aW9uIHRhcmdldFxuICAgICAgLy8gYHZhbHVlYCBpbnN0cnVjdGlvbiB2YWx1ZVxuICAgICAgaW5zdHJ1Y3Rpb24odGFyZ2V0LCB2YWx1ZSkge1xuICAgICAgICB2YXIgaW5zVGFyZ2V0LCBpbnNWYWx1ZSwgaW5zdHJ1Y3Rpb24sIGosIGxlbjtcbiAgICAgICAgaWYgKHRhcmdldCAhPSBudWxsKSB7XG4gICAgICAgICAgdGFyZ2V0ID0gZ2V0VmFsdWUodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlID0gZ2V0VmFsdWUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRhcmdldCkpIHsgLy8gZXhwYW5kIGlmIGFycmF5XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gdGFyZ2V0Lmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBpbnNUYXJnZXQgPSB0YXJnZXRbal07XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRhcmdldCkpIHsgLy8gZXhwYW5kIGlmIG9iamVjdFxuICAgICAgICAgIGZvciAoaW5zVGFyZ2V0IGluIHRhcmdldCkge1xuICAgICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwodGFyZ2V0LCBpbnNUYXJnZXQpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGluc1ZhbHVlID0gdGFyZ2V0W2luc1RhcmdldF07XG4gICAgICAgICAgICB0aGlzLmluc3RydWN0aW9uKGluc1RhcmdldCwgaW5zVmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUuYXBwbHkoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW5zdHJ1Y3Rpb24gPSBuZXcgWE1MUHJvY2Vzc2luZ0luc3RydWN0aW9uKHRoaXMsIHRhcmdldCwgdmFsdWUpO1xuICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChpbnN0cnVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZXMgYSBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGUgYmVmb3JlIHRoZSBjdXJyZW50IG5vZGVcblxuICAgICAgLy8gYHRhcmdldGAgaW5zdHJ1Y3Rpb24gdGFyZ2V0XG4gICAgICAvLyBgdmFsdWVgIGluc3RydWN0aW9uIHZhbHVlXG4gICAgICBpbnN0cnVjdGlvbkJlZm9yZSh0YXJnZXQsIHZhbHVlKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaSwgcmVtb3ZlZDtcbiAgICAgICAgLy8gdGVtcG9yYXJpbHkgcmVtb3ZlIGNoaWxkcmVuIHN0YXJ0aW5nICp3aXRoKiB0aGlzXG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkpO1xuICAgICAgICAvLyBhZGQgdGhlIG5ldyBjaGlsZFxuICAgICAgICBjaGlsZCA9IHRoaXMucGFyZW50Lmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgICAgICAvLyBhZGQgYmFjayByZW1vdmVkIGNoaWxkcmVuIGFmdGVyIG5ldyBjaGlsZFxuICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseSh0aGlzLnBhcmVudC5jaGlsZHJlbiwgcmVtb3ZlZCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGVzIGEgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2RlIGFmdGVyIHRoZSBjdXJyZW50IG5vZGVcblxuICAgICAgLy8gYHRhcmdldGAgaW5zdHJ1Y3Rpb24gdGFyZ2V0XG4gICAgICAvLyBgdmFsdWVgIGluc3RydWN0aW9uIHZhbHVlXG4gICAgICBpbnN0cnVjdGlvbkFmdGVyKHRhcmdldCwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGNoaWxkLCBpLCByZW1vdmVkO1xuICAgICAgICAvLyB0ZW1wb3JhcmlseSByZW1vdmUgY2hpbGRyZW4gc3RhcnRpbmcgKmFmdGVyKiB0aGlzXG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZW1vdmVkID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uc3BsaWNlKGkgKyAxKTtcbiAgICAgICAgLy8gYWRkIHRoZSBuZXcgY2hpbGRcbiAgICAgICAgY2hpbGQgPSB0aGlzLnBhcmVudC5pbnN0cnVjdGlvbih0YXJnZXQsIHZhbHVlKTtcbiAgICAgICAgLy8gYWRkIGJhY2sgcmVtb3ZlZCBjaGlsZHJlbiBhZnRlciBuZXcgY2hpbGRcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5wYXJlbnQuY2hpbGRyZW4sIHJlbW92ZWQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlcyB0aGUgeG1sIGRlY2xhcmF0aW9uXG5cbiAgICAgIC8vIGB2ZXJzaW9uYCBBIHZlcnNpb24gbnVtYmVyIHN0cmluZywgZS5nLiAxLjBcbiAgICAgIC8vIGBlbmNvZGluZ2AgRW5jb2RpbmcgZGVjbGFyYXRpb24sIGUuZy4gVVRGLThcbiAgICAgIC8vIGBzdGFuZGFsb25lYCBzdGFuZGFsb25lIGRvY3VtZW50IGRlY2xhcmF0aW9uOiB0cnVlIG9yIGZhbHNlXG4gICAgICBkZWNsYXJhdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgICB2YXIgZG9jLCB4bWxkZWM7XG4gICAgICAgIGRvYyA9IHRoaXMuZG9jdW1lbnQoKTtcbiAgICAgICAgeG1sZGVjID0gbmV3IFhNTERlY2xhcmF0aW9uKGRvYywgdmVyc2lvbiwgZW5jb2RpbmcsIHN0YW5kYWxvbmUpO1xuICAgICAgICAvLyBSZXBsYWNlIFhNTCBkZWNsYXJhdGlvbiBpZiBleGlzdHMsIG90aGVyd2lzZSBpbnNlcnQgYXQgdG9wXG4gICAgICAgIGlmIChkb2MuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZG9jLmNoaWxkcmVuLnVuc2hpZnQoeG1sZGVjKTtcbiAgICAgICAgfSBlbHNlIGlmIChkb2MuY2hpbGRyZW5bMF0udHlwZSA9PT0gTm9kZVR5cGUuRGVjbGFyYXRpb24pIHtcbiAgICAgICAgICBkb2MuY2hpbGRyZW5bMF0gPSB4bWxkZWM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZG9jLmNoaWxkcmVuLnVuc2hpZnQoeG1sZGVjKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9jLnJvb3QoKSB8fCBkb2M7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZXMgdGhlIGRvY3VtZW50IHR5cGUgZGVjbGFyYXRpb25cblxuICAgICAgLy8gYHB1YklEYCB0aGUgcHVibGljIGlkZW50aWZpZXIgb2YgdGhlIGV4dGVybmFsIHN1YnNldFxuICAgICAgLy8gYHN5c0lEYCB0aGUgc3lzdGVtIGlkZW50aWZpZXIgb2YgdGhlIGV4dGVybmFsIHN1YnNldFxuICAgICAgZHRkKHB1YklELCBzeXNJRCkge1xuICAgICAgICB2YXIgY2hpbGQsIGRvYywgZG9jdHlwZSwgaSwgaiwgaywgbGVuLCBsZW4xLCByZWYxLCByZWYyO1xuICAgICAgICBkb2MgPSB0aGlzLmRvY3VtZW50KCk7XG4gICAgICAgIGRvY3R5cGUgPSBuZXcgWE1MRG9jVHlwZShkb2MsIHB1YklELCBzeXNJRCk7XG4gICAgICAgIHJlZjEgPSBkb2MuY2hpbGRyZW47XG4gICAgICAgIC8vIFJlcGxhY2UgRFREIGlmIGV4aXN0c1xuICAgICAgICBmb3IgKGkgPSBqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjFbaV07XG4gICAgICAgICAgaWYgKGNoaWxkLnR5cGUgPT09IE5vZGVUeXBlLkRvY1R5cGUpIHtcbiAgICAgICAgICAgIGRvYy5jaGlsZHJlbltpXSA9IGRvY3R5cGU7XG4gICAgICAgICAgICByZXR1cm4gZG9jdHlwZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVmMiA9IGRvYy5jaGlsZHJlbjtcbiAgICAgICAgLy8gaW5zZXJ0IGJlZm9yZSByb290IG5vZGUgaWYgdGhlIHJvb3Qgbm9kZSBleGlzdHNcbiAgICAgICAgZm9yIChpID0gayA9IDAsIGxlbjEgPSByZWYyLmxlbmd0aDsgayA8IGxlbjE7IGkgPSArK2spIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjJbaV07XG4gICAgICAgICAgaWYgKGNoaWxkLmlzUm9vdCkge1xuICAgICAgICAgICAgZG9jLmNoaWxkcmVuLnNwbGljZShpLCAwLCBkb2N0eXBlKTtcbiAgICAgICAgICAgIHJldHVybiBkb2N0eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBvdGhlcndpc2UgYXBwZW5kIHRvIGVuZFxuICAgICAgICBkb2MuY2hpbGRyZW4ucHVzaChkb2N0eXBlKTtcbiAgICAgICAgcmV0dXJuIGRvY3R5cGU7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldHMgdGhlIHBhcmVudCBub2RlXG4gICAgICB1cCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSb290KSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHJvb3Qgbm9kZSBoYXMgbm8gcGFyZW50LiBVc2UgZG9jKCkgaWYgeW91IG5lZWQgdG8gZ2V0IHRoZSBkb2N1bWVudCBvYmplY3QuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgIH1cblxuICAgICAgLy8gR2V0cyB0aGUgcm9vdCBub2RlXG4gICAgICByb290KCkge1xuICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgbm9kZSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChub2RlKSB7XG4gICAgICAgICAgaWYgKG5vZGUudHlwZSA9PT0gTm9kZVR5cGUuRG9jdW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBub2RlLnJvb3RPYmplY3Q7XG4gICAgICAgICAgfSBlbHNlIGlmIChub2RlLmlzUm9vdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gR2V0cyB0aGUgbm9kZSByZXByZXNlbnRpbmcgdGhlIFhNTCBkb2N1bWVudFxuICAgICAgZG9jdW1lbnQoKSB7XG4gICAgICAgIHZhciBub2RlO1xuICAgICAgICBub2RlID0gdGhpcztcbiAgICAgICAgd2hpbGUgKG5vZGUpIHtcbiAgICAgICAgICBpZiAobm9kZS50eXBlID09PSBOb2RlVHlwZS5Eb2N1bWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRW5kcyB0aGUgZG9jdW1lbnQgYW5kIGNvbnZlcnRzIHN0cmluZ1xuICAgICAgZW5kKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQoKS5lbmQob3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdldHMgdGhlIHByZXZpb3VzIG5vZGVcbiAgICAgIHByZXYoKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgaWYgKGkgPCAxKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSBhdCB0aGUgZmlyc3Qgbm9kZS4gXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW5baSAtIDFdO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXRzIHRoZSBuZXh0IG5vZGVcbiAgICAgIG5leHQoKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpID0gdGhpcy5wYXJlbnQuY2hpbGRyZW4uaW5kZXhPZih0aGlzKTtcbiAgICAgICAgaWYgKGkgPT09IC0xIHx8IGkgPT09IHRoaXMucGFyZW50LmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IGF0IHRoZSBsYXN0IG5vZGUuIFwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmNoaWxkcmVuW2kgKyAxXTtcbiAgICAgIH1cblxuICAgICAgLy8gSW1wb3J0cyBjbG9uZWQgcm9vdCBmcm9tIGFub3RoZXIgWE1MIGRvY3VtZW50XG5cbiAgICAgIC8vIGBkb2NgIHRoZSBYTUwgZG9jdW1lbnQgdG8gaW5zZXJ0IG5vZGVzIGZyb21cbiAgICAgIGltcG9ydERvY3VtZW50KGRvYykge1xuICAgICAgICB2YXIgY2hpbGQsIGNsb25lZFJvb3QsIGosIGxlbiwgcmVmMTtcbiAgICAgICAgY2xvbmVkUm9vdCA9IGRvYy5yb290KCkuY2xvbmUoKTtcbiAgICAgICAgY2xvbmVkUm9vdC5wYXJlbnQgPSB0aGlzO1xuICAgICAgICBjbG9uZWRSb290LmlzUm9vdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2goY2xvbmVkUm9vdCk7XG4gICAgICAgIC8vIHNldCBwcm9wZXJ0aWVzIGlmIGltcG9ydGVkIGVsZW1lbnQgYmVjb21lcyB0aGUgcm9vdCBub2RlXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50KSB7XG4gICAgICAgICAgY2xvbmVkUm9vdC5pc1Jvb3QgPSB0cnVlO1xuICAgICAgICAgIGNsb25lZFJvb3QuZG9jdW1lbnRPYmplY3QgPSB0aGlzO1xuICAgICAgICAgIHRoaXMucm9vdE9iamVjdCA9IGNsb25lZFJvb3Q7XG4gICAgICAgICAgLy8gc2V0IGR0ZCBuYW1lXG4gICAgICAgICAgaWYgKHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHJlZjEgPSB0aGlzLmNoaWxkcmVuO1xuICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmMS5sZW5ndGg7IGogPCBsZW47IGorKykge1xuICAgICAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgICAgIGlmIChjaGlsZC50eXBlID09PSBOb2RlVHlwZS5Eb2NUeXBlKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQubmFtZSA9IGNsb25lZFJvb3QubmFtZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgXG4gICAgICAvLyBSZXR1cm5zIGRlYnVnIHN0cmluZyBmb3IgdGhpcyBub2RlXG4gICAgICBkZWJ1Z0luZm8obmFtZSkge1xuICAgICAgICB2YXIgcmVmMSwgcmVmMjtcbiAgICAgICAgbmFtZSA9IG5hbWUgfHwgdGhpcy5uYW1lO1xuICAgICAgICBpZiAoKG5hbWUgPT0gbnVsbCkgJiYgISgocmVmMSA9IHRoaXMucGFyZW50KSAhPSBudWxsID8gcmVmMS5uYW1lIDogdm9pZCAwKSkge1xuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBcInBhcmVudDogPFwiICsgdGhpcy5wYXJlbnQubmFtZSArIFwiPlwiO1xuICAgICAgICB9IGVsc2UgaWYgKCEoKHJlZjIgPSB0aGlzLnBhcmVudCkgIT0gbnVsbCA/IHJlZjIubmFtZSA6IHZvaWQgMCkpIHtcbiAgICAgICAgICByZXR1cm4gXCJub2RlOiA8XCIgKyBuYW1lICsgXCI+XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFwibm9kZTogPFwiICsgbmFtZSArIFwiPiwgcGFyZW50OiA8XCIgKyB0aGlzLnBhcmVudC5uYW1lICsgXCI+XCI7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWxpYXNlc1xuICAgICAgZWxlKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudChuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgbm9kKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgdHh0KHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBkYXQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2RhdGEodmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBjb20odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGlucyh0YXJnZXQsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBkb2MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50KCk7XG4gICAgICB9XG5cbiAgICAgIGRlYyh2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWNsYXJhdGlvbih2ZXJzaW9uLCBlbmNvZGluZywgc3RhbmRhbG9uZSk7XG4gICAgICB9XG5cbiAgICAgIGUobmFtZSwgYXR0cmlidXRlcywgdGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50KG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpO1xuICAgICAgfVxuXG4gICAgICBuKG5hbWUsIGF0dHJpYnV0ZXMsIHRleHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZShuYW1lLCBhdHRyaWJ1dGVzLCB0ZXh0KTtcbiAgICAgIH1cblxuICAgICAgdCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jZGF0YSh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGModmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tbWVudCh2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIHIodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3KHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgaSh0YXJnZXQsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluc3RydWN0aW9uKHRhcmdldCwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICB1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy51cCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBjYW4gYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSByZWxlYXNlXG4gICAgICBpbXBvcnRYTUxCdWlsZGVyKGRvYykge1xuICAgICAgICByZXR1cm4gdGhpcy5pbXBvcnREb2N1bWVudChkb2MpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGRzIG9yIG1vZGlmaWVzIGFuIGF0dHJpYnV0ZS5cblxuICAgICAgLy8gYG5hbWVgIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAvLyBgdmFsdWVgIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgYXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcImF0dHJpYnV0ZSgpIGFwcGxpZXMgdG8gZWxlbWVudCBub2RlcyBvbmx5LlwiKTtcbiAgICAgIH1cblxuICAgICAgYXR0KG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIGEobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlcyBhbiBhdHRyaWJ1dGVcblxuICAgICAgLy8gYG5hbWVgIGF0dHJpYnV0ZSBuYW1lXG4gICAgICByZW1vdmVBdHRyaWJ1dGUobmFtZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhdHRyaWJ1dGUoKSBhcHBsaWVzIHRvIGVsZW1lbnQgbm9kZXMgb25seS5cIik7XG4gICAgICB9XG5cbiAgICAgIC8vIERPTSBsZXZlbCAxIGZ1bmN0aW9ucyB0byBiZSBpbXBsZW1lbnRlZCBsYXRlclxuICAgICAgcmVwbGFjZUNoaWxkKG5ld0NoaWxkLCBvbGRDaGlsZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG5cbiAgICAgIHJlbW92ZUNoaWxkKG9sZENoaWxkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgYXBwZW5kQ2hpbGQobmV3Q2hpbGQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBoYXNDaGlsZE5vZGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5sZW5ndGggIT09IDA7XG4gICAgICB9XG5cbiAgICAgIGNsb25lTm9kZShkZWVwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgbm9ybWFsaXplKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIERPTSBsZXZlbCAyXG4gICAgICBpc1N1cHBvcnRlZChmZWF0dXJlLCB2ZXJzaW9uKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBoYXNBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyaWJzLmxlbmd0aCAhPT0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gRE9NIGxldmVsIDMgZnVuY3Rpb25zIHRvIGJlIGltcGxlbWVudGVkIGxhdGVyXG4gICAgICBjb21wYXJlRG9jdW1lbnRQb3NpdGlvbihvdGhlcikge1xuICAgICAgICB2YXIgcmVmLCByZXM7XG4gICAgICAgIHJlZiA9IHRoaXM7XG4gICAgICAgIGlmIChyZWYgPT09IG90aGVyKSB7XG4gICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kb2N1bWVudCgpICE9PSBvdGhlci5kb2N1bWVudCgpKSB7XG4gICAgICAgICAgcmVzID0gRG9jdW1lbnRQb3NpdGlvbi5EaXNjb25uZWN0ZWQgfCBEb2N1bWVudFBvc2l0aW9uLkltcGxlbWVudGF0aW9uU3BlY2lmaWM7XG4gICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjUpIHtcbiAgICAgICAgICAgIHJlcyB8PSBEb2N1bWVudFBvc2l0aW9uLlByZWNlZGluZztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzIHw9IERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZi5pc0FuY2VzdG9yKG90aGVyKSkge1xuICAgICAgICAgIHJldHVybiBEb2N1bWVudFBvc2l0aW9uLkNvbnRhaW5zIHwgRG9jdW1lbnRQb3NpdGlvbi5QcmVjZWRpbmc7XG4gICAgICAgIH0gZWxzZSBpZiAocmVmLmlzRGVzY2VuZGFudChvdGhlcikpIHtcbiAgICAgICAgICByZXR1cm4gRG9jdW1lbnRQb3NpdGlvbi5Db250YWlucyB8IERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHJlZi5pc1ByZWNlZGluZyhvdGhlcikpIHtcbiAgICAgICAgICByZXR1cm4gRG9jdW1lbnRQb3NpdGlvbi5QcmVjZWRpbmc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIERvY3VtZW50UG9zaXRpb24uRm9sbG93aW5nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlzU2FtZU5vZGUob3RoZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBsb29rdXBQcmVmaXgobmFtZXNwYWNlVVJJKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgaXNEZWZhdWx0TmFtZXNwYWNlKG5hbWVzcGFjZVVSSSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG5cbiAgICAgIGxvb2t1cE5hbWVzcGFjZVVSSShwcmVmaXgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBET00gbWV0aG9kIGlzIG5vdCBpbXBsZW1lbnRlZC5cIiArIHRoaXMuZGVidWdJbmZvKCkpO1xuICAgICAgfVxuXG4gICAgICBpc0VxdWFsTm9kZShub2RlKSB7XG4gICAgICAgIHZhciBpLCBqLCByZWYxO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSAhPT0gdGhpcy5ub2RlVHlwZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggIT09IHRoaXMuY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IGogPSAwLCByZWYxID0gdGhpcy5jaGlsZHJlbi5sZW5ndGggLSAxOyAoMCA8PSByZWYxID8gaiA8PSByZWYxIDogaiA+PSByZWYxKTsgaSA9IDAgPD0gcmVmMSA/ICsraiA6IC0taikge1xuICAgICAgICAgIGlmICghdGhpcy5jaGlsZHJlbltpXS5pc0VxdWFsTm9kZShub2RlLmNoaWxkcmVuW2ldKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZ2V0RmVhdHVyZShmZWF0dXJlLCB2ZXJzaW9uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgc2V0VXNlckRhdGEoa2V5LCBkYXRhLCBoYW5kbGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgZ2V0VXNlckRhdGEoa2V5KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgRE9NIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQuXCIgKyB0aGlzLmRlYnVnSW5mbygpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJucyB0cnVlIGlmIG90aGVyIGlzIGFuIGluY2x1c2l2ZSBkZXNjZW5kYW50IG9mIG5vZGUsXG4gICAgICAvLyBhbmQgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAgY29udGFpbnMob3RoZXIpIHtcbiAgICAgICAgaWYgKCFvdGhlcikge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3RoZXIgPT09IHRoaXMgfHwgdGhpcy5pc0Rlc2NlbmRhbnQob3RoZXIpO1xuICAgICAgfVxuXG4gICAgICAvLyBBbiBvYmplY3QgQSBpcyBjYWxsZWQgYSBkZXNjZW5kYW50IG9mIGFuIG9iamVjdCBCLCBpZiBlaXRoZXIgQSBpcyBcbiAgICAgIC8vIGEgY2hpbGQgb2YgQiBvciBBIGlzIGEgY2hpbGQgb2YgYW4gb2JqZWN0IEMgdGhhdCBpcyBhIGRlc2NlbmRhbnQgb2YgQi5cbiAgICAgIGlzRGVzY2VuZGFudChub2RlKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaXNEZXNjZW5kYW50Q2hpbGQsIGosIGxlbiwgcmVmMTtcbiAgICAgICAgcmVmMSA9IHRoaXMuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgaWYgKG5vZGUgPT09IGNoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNEZXNjZW5kYW50Q2hpbGQgPSBjaGlsZC5pc0Rlc2NlbmRhbnQobm9kZSk7XG4gICAgICAgICAgaWYgKGlzRGVzY2VuZGFudENoaWxkKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBBbiBvYmplY3QgQSBpcyBjYWxsZWQgYW4gYW5jZXN0b3Igb2YgYW4gb2JqZWN0IEIgaWYgYW5kIG9ubHkgaWZcbiAgICAgIC8vIEIgaXMgYSBkZXNjZW5kYW50IG9mIEEuXG4gICAgICBpc0FuY2VzdG9yKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuaXNEZXNjZW5kYW50KHRoaXMpO1xuICAgICAgfVxuXG4gICAgICAvLyBBbiBvYmplY3QgQSBpcyBwcmVjZWRpbmcgYW4gb2JqZWN0IEIgaWYgQSBhbmQgQiBhcmUgaW4gdGhlIFxuICAgICAgLy8gc2FtZSB0cmVlIGFuZCBBIGNvbWVzIGJlZm9yZSBCIGluIHRyZWUgb3JkZXIuXG4gICAgICBpc1ByZWNlZGluZyhub2RlKSB7XG4gICAgICAgIHZhciBub2RlUG9zLCB0aGlzUG9zO1xuICAgICAgICBub2RlUG9zID0gdGhpcy50cmVlUG9zaXRpb24obm9kZSk7XG4gICAgICAgIHRoaXNQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbih0aGlzKTtcbiAgICAgICAgaWYgKG5vZGVQb3MgPT09IC0xIHx8IHRoaXNQb3MgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBub2RlUG9zIDwgdGhpc1BvcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBbiBvYmplY3QgQSBpcyBmb2xsbG93aW5nIGFuIG9iamVjdCBCIGlmIEEgYW5kIEIgYXJlIGluIHRoZSBcbiAgICAgIC8vIHNhbWUgdHJlZSBhbmQgQSBjb21lcyBhZnRlciBCIGluIHRyZWUgb3JkZXIuXG4gICAgICBpc0ZvbGxvd2luZyhub2RlKSB7XG4gICAgICAgIHZhciBub2RlUG9zLCB0aGlzUG9zO1xuICAgICAgICBub2RlUG9zID0gdGhpcy50cmVlUG9zaXRpb24obm9kZSk7XG4gICAgICAgIHRoaXNQb3MgPSB0aGlzLnRyZWVQb3NpdGlvbih0aGlzKTtcbiAgICAgICAgaWYgKG5vZGVQb3MgPT09IC0xIHx8IHRoaXNQb3MgPT09IC0xKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBub2RlUG9zID4gdGhpc1BvcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm5zIHRoZSBwcmVvcmRlciBwb3NpdGlvbiBvZiB0aGUgZ2l2ZW4gbm9kZSBpbiB0aGUgdHJlZSwgb3IgLTFcbiAgICAgIC8vIGlmIHRoZSBub2RlIGlzIG5vdCBpbiB0aGUgdHJlZS5cbiAgICAgIHRyZWVQb3NpdGlvbihub2RlKSB7XG4gICAgICAgIHZhciBmb3VuZCwgcG9zO1xuICAgICAgICBwb3MgPSAwO1xuICAgICAgICBmb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmZvcmVhY2hUcmVlTm9kZSh0aGlzLmRvY3VtZW50KCksIGZ1bmN0aW9uKGNoaWxkTm9kZSkge1xuICAgICAgICAgIHBvcysrO1xuICAgICAgICAgIGlmICghZm91bmQgJiYgY2hpbGROb2RlID09PSBub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gZm91bmQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIFxuICAgICAgLy8gRGVwdGgtZmlyc3QgcHJlb3JkZXIgdHJhdmVyc2FsIHRocm91Z2ggdGhlIFhNTCB0cmVlXG4gICAgICBmb3JlYWNoVHJlZU5vZGUobm9kZSwgZnVuYykge1xuICAgICAgICB2YXIgY2hpbGQsIGosIGxlbiwgcmVmMSwgcmVzO1xuICAgICAgICBub2RlIHx8IChub2RlID0gdGhpcy5kb2N1bWVudCgpKTtcbiAgICAgICAgcmVmMSA9IG5vZGUuY2hpbGRyZW47XG4gICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcbiAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgaWYgKHJlcyA9IGZ1bmMoY2hpbGQpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMgPSB0aGlzLmZvcmVhY2hUcmVlTm9kZShjaGlsZCwgZnVuYyk7XG4gICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICB9O1xuXG4gICAgLy8gRE9NIGxldmVsIDFcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdub2RlTmFtZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdub2RlVHlwZScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdub2RlVmFsdWUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ3BhcmVudE5vZGUnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdjaGlsZE5vZGVzJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNoaWxkTm9kZUxpc3QgfHwgIXRoaXMuY2hpbGROb2RlTGlzdC5ub2Rlcykge1xuICAgICAgICAgIHRoaXMuY2hpbGROb2RlTGlzdCA9IG5ldyBYTUxOb2RlTGlzdCh0aGlzLmNoaWxkcmVuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZE5vZGVMaXN0O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFhNTE5vZGUucHJvdG90eXBlLCAnZmlyc3RDaGlsZCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuWzBdIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdsYXN0Q2hpbGQnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlsZHJlblt0aGlzLmNoaWxkcmVuLmxlbmd0aCAtIDFdIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdwcmV2aW91c1NpYmxpbmcnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaSA9IHRoaXMucGFyZW50LmNoaWxkcmVuLmluZGV4T2YodGhpcyk7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZHJlbltpIC0gMV0gfHwgbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShYTUxOb2RlLnByb3RvdHlwZSwgJ25leHRTaWJsaW5nJywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGkgPSB0aGlzLnBhcmVudC5jaGlsZHJlbi5pbmRleE9mKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuY2hpbGRyZW5baSArIDFdIHx8IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICdvd25lckRvY3VtZW50Jywge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQoKSB8fCBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRE9NIGxldmVsIDNcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoWE1MTm9kZS5wcm90b3R5cGUsICd0ZXh0Q29udGVudCcsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjaGlsZCwgaiwgbGVuLCByZWYxLCBzdHI7XG4gICAgICAgIGlmICh0aGlzLm5vZGVUeXBlID09PSBOb2RlVHlwZS5FbGVtZW50IHx8IHRoaXMubm9kZVR5cGUgPT09IE5vZGVUeXBlLkRvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICBzdHIgPSAnJztcbiAgICAgICAgICByZWYxID0gdGhpcy5jaGlsZHJlbjtcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYxLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XG4gICAgICAgICAgICBjaGlsZCA9IHJlZjFbal07XG4gICAgICAgICAgICBpZiAoY2hpbGQudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgc3RyICs9IGNoaWxkLnRleHRDb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIERPTSBtZXRob2QgaXMgbm90IGltcGxlbWVudGVkLlwiICsgdGhpcy5kZWJ1Z0luZm8oKSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gWE1MTm9kZTtcblxuICB9KS5jYWxsKHRoaXMpO1xuXG59KS5jYWxsKHRoaXMpO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0EsQ0FBQyxZQUFXO0VBQ1YsSUFBSUEsZ0JBQWdCO0lBQUVDLFFBQVE7SUFBRUMsUUFBUTtJQUFFQyxVQUFVO0lBQUVDLGNBQWM7SUFBRUMsVUFBVTtJQUFFQyxRQUFRO0lBQUVDLFVBQVU7SUFBRUMsZUFBZTtJQUFFQyxPQUFPO0lBQUVDLFdBQVc7SUFBRUMsd0JBQXdCO0lBQUVDLE1BQU07SUFBRUMsT0FBTztJQUFFQyxRQUFRO0lBQUVDLE9BQU87SUFBRUMsVUFBVTtJQUFFQyxRQUFRO0lBQy9OQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUNDLGNBQWM7SUFDM0JDLE1BQU0sR0FBRyxFQUFFLENBQUNBLE1BQU07RUFFcEIsQ0FBQztJQUFDSCxRQUFRO0lBQUVELFVBQVU7SUFBRUQsT0FBTztJQUFFRDtFQUFRLENBQUMsR0FBR08sT0FBTyxDQUFDLFdBQVcsQ0FBQztFQUVqRWQsVUFBVSxHQUFHLElBQUk7RUFFakJMLFFBQVEsR0FBRyxJQUFJO0VBRWZDLFVBQVUsR0FBRyxJQUFJO0VBRWpCQyxjQUFjLEdBQUcsSUFBSTtFQUVyQkMsVUFBVSxHQUFHLElBQUk7RUFFakJPLE1BQU0sR0FBRyxJQUFJO0VBRWJDLE9BQU8sR0FBRyxJQUFJO0VBRWRGLHdCQUF3QixHQUFHLElBQUk7RUFFL0JMLFFBQVEsR0FBRyxJQUFJO0VBRWZMLFFBQVEsR0FBRyxJQUFJO0VBRWZTLFdBQVcsR0FBRyxJQUFJO0VBRWxCRixlQUFlLEdBQUcsSUFBSTtFQUV0QlIsZ0JBQWdCLEdBQUcsSUFBSTs7RUFFdkI7RUFDQXNCLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHZCxPQUFPLEdBQUksWUFBVztJQUNyQyxNQUFNQSxPQUFPLENBQUM7TUFDWjs7TUFFQTtNQUNBZSxXQUFXQSxDQUFDQyxP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