{"version":3,"names":["Scalar","require","map","seq","intIdentify","value","Number","isInteger","stringifyJSON","JSON","stringify","jsonScalars","identify","default","tag","resolve","str","createNode","test","_onError","intAsBigInt","BigInt","parseInt","toString","parseFloat","jsonError","onError","schema","concat","exports"],"sources":["schema.js"],"sourcesContent":["'use strict';\n\nvar Scalar = require('../../nodes/Scalar.js');\nvar map = require('../common/map.js');\nvar seq = require('../common/seq.js');\n\nfunction intIdentify(value) {\n    return typeof value === 'bigint' || Number.isInteger(value);\n}\nconst stringifyJSON = ({ value }) => JSON.stringify(value);\nconst jsonScalars = [\n    {\n        identify: value => typeof value === 'string',\n        default: true,\n        tag: 'tag:yaml.org,2002:str',\n        resolve: str => str,\n        stringify: stringifyJSON\n    },\n    {\n        identify: value => value == null,\n        createNode: () => new Scalar.Scalar(null),\n        default: true,\n        tag: 'tag:yaml.org,2002:null',\n        test: /^null$/,\n        resolve: () => null,\n        stringify: stringifyJSON\n    },\n    {\n        identify: value => typeof value === 'boolean',\n        default: true,\n        tag: 'tag:yaml.org,2002:bool',\n        test: /^true|false$/,\n        resolve: str => str === 'true',\n        stringify: stringifyJSON\n    },\n    {\n        identify: intIdentify,\n        default: true,\n        tag: 'tag:yaml.org,2002:int',\n        test: /^-?(?:0|[1-9][0-9]*)$/,\n        resolve: (str, _onError, { intAsBigInt }) => intAsBigInt ? BigInt(str) : parseInt(str, 10),\n        stringify: ({ value }) => intIdentify(value) ? value.toString() : JSON.stringify(value)\n    },\n    {\n        identify: value => typeof value === 'number',\n        default: true,\n        tag: 'tag:yaml.org,2002:float',\n        test: /^-?(?:0|[1-9][0-9]*)(?:\\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,\n        resolve: str => parseFloat(str),\n        stringify: stringifyJSON\n    }\n];\nconst jsonError = {\n    default: true,\n    tag: '',\n    test: /^/,\n    resolve(str, onError) {\n        onError(`Unresolved plain scalar ${JSON.stringify(str)}`);\n        return str;\n    }\n};\nconst schema = [map.map, seq.seq].concat(jsonScalars, jsonError);\n\nexports.schema = schema;\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,MAAM,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAC7C,IAAIC,GAAG,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AACrC,IAAIE,GAAG,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AAErC,SAASG,WAAWA,CAACC,KAAK,EAAE;EACxB,OAAO,OAAOA,KAAK,KAAK,QAAQ,IAAIC,MAAM,CAACC,SAAS,CAACF,KAAK,CAAC;AAC/D;AACA,MAAMG,aAAa,GAAGA,CAAC;EAAEH;AAAM,CAAC,KAAKI,IAAI,CAACC,SAAS,CAACL,KAAK,CAAC;AAC1D,MAAMM,WAAW,GAAG,CAChB;EACIC,QAAQ,EAAEP,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ;EAC5CQ,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,uBAAuB;EAC5BC,OAAO,EAAEC,GAAG,IAAIA,GAAG;EACnBN,SAAS,EAAEF;AACf,CAAC,EACD;EACII,QAAQ,EAAEP,KAAK,IAAIA,KAAK,IAAI,IAAI;EAChCY,UAAU,EAAEA,CAAA,KAAM,IAAIjB,MAAM,CAACA,MAAM,CAAC,IAAI,CAAC;EACzCa,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,wBAAwB;EAC7BI,IAAI,EAAE,QAAQ;EACdH,OAAO,EAAEA,CAAA,KAAM,IAAI;EACnBL,SAAS,EAAEF;AACf,CAAC,EACD;EACII,QAAQ,EAAEP,KAAK,IAAI,OAAOA,KAAK,KAAK,SAAS;EAC7CQ,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,wBAAwB;EAC7BI,IAAI,EAAE,cAAc;EACpBH,OAAO,EAAEC,GAAG,IAAIA,GAAG,KAAK,MAAM;EAC9BN,SAAS,EAAEF;AACf,CAAC,EACD;EACII,QAAQ,EAAER,WAAW;EACrBS,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,uBAAuB;EAC5BI,IAAI,EAAE,uBAAuB;EAC7BH,OAAO,EAAEA,CAACC,GAAG,EAAEG,QAAQ,EAAE;IAAEC;EAAY,CAAC,KAAKA,WAAW,GAAGC,MAAM,CAACL,GAAG,CAAC,GAAGM,QAAQ,CAACN,GAAG,EAAE,EAAE,CAAC;EAC1FN,SAAS,EAAEA,CAAC;IAAEL;EAAM,CAAC,KAAKD,WAAW,CAACC,KAAK,CAAC,GAAGA,KAAK,CAACkB,QAAQ,EAAE,GAAGd,IAAI,CAACC,SAAS,CAACL,KAAK;AAC1F,CAAC,EACD;EACIO,QAAQ,EAAEP,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ;EAC5CQ,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,yBAAyB;EAC9BI,IAAI,EAAE,wDAAwD;EAC9DH,OAAO,EAAEC,GAAG,IAAIQ,UAAU,CAACR,GAAG,CAAC;EAC/BN,SAAS,EAAEF;AACf,CAAC,CACJ;AACD,MAAMiB,SAAS,GAAG;EACdZ,OAAO,EAAE,IAAI;EACbC,GAAG,EAAE,EAAE;EACPI,IAAI,EAAE,GAAG;EACTH,OAAOA,CAACC,GAAG,EAAEU,OAAO,EAAE;IAClBA,OAAO,CAAE,2BAA0BjB,IAAI,CAACC,SAAS,CAACM,GAAG,CAAE,EAAC,CAAC;IACzD,OAAOA,GAAG;EACd;AACJ,CAAC;AACD,MAAMW,MAAM,GAAG,CAACzB,GAAG,CAACA,GAAG,EAAEC,GAAG,CAACA,GAAG,CAAC,CAACyB,MAAM,CAACjB,WAAW,EAAEc,SAAS,CAAC;AAEhEI,OAAO,CAACF,MAAM,GAAGA,MAAM"}