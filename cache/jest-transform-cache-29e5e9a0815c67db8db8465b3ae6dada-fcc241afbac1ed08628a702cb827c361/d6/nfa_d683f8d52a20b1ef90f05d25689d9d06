52ec0a2f0a2cb007efb3fe70c44b40b7
/**
 * The MIT License (MIT)
 * Copyright (c) 2017-present Dmitry Soshnikov <dmitry.soshnikov@gmail.com>
 */

'use strict';

var _slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;
    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);
        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }
    return _arr;
  }
  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();
var _createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];
      descriptor.enumerable = descriptor.enumerable || false;
      descriptor.configurable = true;
      if ("value" in descriptor) descriptor.writable = true;
      Object.defineProperty(target, descriptor.key, descriptor);
    }
  }
  return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);
    if (staticProps) defineProperties(Constructor, staticProps);
    return Constructor;
  };
}();
function _toConsumableArray(arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {
      arr2[i] = arr[i];
    }
    return arr2;
  } else {
    return Array.from(arr);
  }
}
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}
var _require = require('../special-symbols'),
  EPSILON = _require.EPSILON,
  EPSILON_CLOSURE = _require.EPSILON_CLOSURE;

/**
 * NFA fragment.
 *
 * NFA sub-fragments can be combined to a larger NFAs building
 * the resulting machine. Combining the fragments is done by patching
 * edges of the in- and out-states.
 *
 * 2-states implementation, `in`, and `out`. Eventually all transitions
 * go to the same `out`, which can further be connected via Îµ-transition
 * with other fragment.
 */

var NFA = function () {
  function NFA(inState, outState) {
    _classCallCheck(this, NFA);
    this.in = inState;
    this.out = outState;
  }

  /**
   * Tries to recognize a string based on this NFA fragment.
   */

  _createClass(NFA, [{
    key: 'matches',
    value: function matches(string) {
      return this.in.matches(string);
    }

    /**
     * Returns an alphabet for this NFA.
     */
  }, {
    key: 'getAlphabet',
    value: function getAlphabet() {
      if (!this._alphabet) {
        this._alphabet = new Set();
        var table = this.getTransitionTable();
        for (var state in table) {
          var transitions = table[state];
          for (var symbol in transitions) {
            if (symbol !== EPSILON_CLOSURE) {
              this._alphabet.add(symbol);
            }
          }
        }
      }
      return this._alphabet;
    }

    /**
     * Returns set of accepting states.
     */
  }, {
    key: 'getAcceptingStates',
    value: function getAcceptingStates() {
      if (!this._acceptingStates) {
        // States are determined during table construction.
        this.getTransitionTable();
      }
      return this._acceptingStates;
    }

    /**
     * Returns accepting state numbers.
     */
  }, {
    key: 'getAcceptingStateNumbers',
    value: function getAcceptingStateNumbers() {
      if (!this._acceptingStateNumbers) {
        this._acceptingStateNumbers = new Set();
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;
        try {
          for (var _iterator = this.getAcceptingStates()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            var acceptingState = _step.value;
            this._acceptingStateNumbers.add(acceptingState.number);
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator.return) {
              _iterator.return();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      }
      return this._acceptingStateNumbers;
    }

    /**
     * Builds and returns transition table.
     */
  }, {
    key: 'getTransitionTable',
    value: function getTransitionTable() {
      var _this = this;
      if (!this._transitionTable) {
        this._transitionTable = {};
        this._acceptingStates = new Set();
        var visited = new Set();
        var symbols = new Set();
        var visitState = function visitState(state) {
          if (visited.has(state)) {
            return;
          }
          visited.add(state);
          state.number = visited.size;
          _this._transitionTable[state.number] = {};
          if (state.accepting) {
            _this._acceptingStates.add(state);
          }
          var transitions = state.getTransitions();
          var _iteratorNormalCompletion2 = true;
          var _didIteratorError2 = false;
          var _iteratorError2 = undefined;
          try {
            for (var _iterator2 = transitions[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
              var _ref = _step2.value;
              var _ref2 = _slicedToArray(_ref, 2);
              var symbol = _ref2[0];
              var symbolTransitions = _ref2[1];
              var combinedState = [];
              symbols.add(symbol);
              var _iteratorNormalCompletion3 = true;
              var _didIteratorError3 = false;
              var _iteratorError3 = undefined;
              try {
                for (var _iterator3 = symbolTransitions[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                  var nextState = _step3.value;
                  visitState(nextState);
                  combinedState.push(nextState.number);
                }
              } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
              } finally {
                try {
                  if (!_iteratorNormalCompletion3 && _iterator3.return) {
                    _iterator3.return();
                  }
                } finally {
                  if (_didIteratorError3) {
                    throw _iteratorError3;
                  }
                }
              }
              _this._transitionTable[state.number][symbol] = combinedState;
            }
          } catch (err) {
            _didIteratorError2 = true;
            _iteratorError2 = err;
          } finally {
            try {
              if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
              }
            } finally {
              if (_didIteratorError2) {
                throw _iteratorError2;
              }
            }
          }
        };

        // Traverse the graph starting from the `in`.
        visitState(this.in);

        // Append epsilon-closure column.
        visited.forEach(function (state) {
          delete _this._transitionTable[state.number][EPSILON];
          _this._transitionTable[state.number][EPSILON_CLOSURE] = [].concat(_toConsumableArray(state.getEpsilonClosure())).map(function (s) {
            return s.number;
          });
        });
      }
      return this._transitionTable;
    }
  }]);
  return NFA;
}();
module.exports = NFA;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2xpY2VkVG9BcnJheSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJpIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsInVuZGVmaW5lZCIsIl9pIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJfcyIsIm5leHQiLCJkb25lIiwicHVzaCIsInZhbHVlIiwibGVuZ3RoIiwiZXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiT2JqZWN0IiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiQ29uc3RydWN0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIyIiwiZnJvbSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiX3JlcXVpcmUiLCJyZXF1aXJlIiwiRVBTSUxPTiIsIkVQU0lMT05fQ0xPU1VSRSIsIk5GQSIsImluU3RhdGUiLCJvdXRTdGF0ZSIsImluIiwib3V0IiwibWF0Y2hlcyIsInN0cmluZyIsImdldEFscGhhYmV0IiwiX2FscGhhYmV0IiwiU2V0IiwidGFibGUiLCJnZXRUcmFuc2l0aW9uVGFibGUiLCJzdGF0ZSIsInRyYW5zaXRpb25zIiwic3ltYm9sIiwiYWRkIiwiZ2V0QWNjZXB0aW5nU3RhdGVzIiwiX2FjY2VwdGluZ1N0YXRlcyIsImdldEFjY2VwdGluZ1N0YXRlTnVtYmVycyIsIl9hY2NlcHRpbmdTdGF0ZU51bWJlcnMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvciIsIl9zdGVwIiwiYWNjZXB0aW5nU3RhdGUiLCJudW1iZXIiLCJyZXR1cm4iLCJfdGhpcyIsIl90cmFuc2l0aW9uVGFibGUiLCJ2aXNpdGVkIiwic3ltYm9scyIsInZpc2l0U3RhdGUiLCJoYXMiLCJzaXplIiwiYWNjZXB0aW5nIiwiZ2V0VHJhbnNpdGlvbnMiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiIsIl9kaWRJdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvckVycm9yMiIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJfcmVmIiwiX3JlZjIiLCJzeW1ib2xUcmFuc2l0aW9ucyIsImNvbWJpbmVkU3RhdGUiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvcjMiLCJfc3RlcDMiLCJuZXh0U3RhdGUiLCJmb3JFYWNoIiwiY29uY2F0IiwiZ2V0RXBzaWxvbkNsb3N1cmUiLCJtYXAiLCJzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIm5mYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBNSVQgTGljZW5zZSAoTUlUKVxuICogQ29weXJpZ2h0IChjKSAyMDE3LXByZXNlbnQgRG1pdHJ5IFNvc2huaWtvdiA8ZG1pdHJ5LnNvc2huaWtvdkBnbWFpbC5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3NsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7IHZhciBfYXJyID0gW107IHZhciBfbiA9IHRydWU7IHZhciBfZCA9IGZhbHNlOyB2YXIgX2UgPSB1bmRlZmluZWQ7IHRyeSB7IGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHsgX2Fyci5wdXNoKF9zLnZhbHVlKTsgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrOyB9IH0gY2F0Y2ggKGVycikgeyBfZCA9IHRydWU7IF9lID0gZXJyOyB9IGZpbmFsbHkgeyB0cnkgeyBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpOyB9IGZpbmFsbHkgeyBpZiAoX2QpIHRocm93IF9lOyB9IH0gcmV0dXJuIF9hcnI7IH0gcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyByZXR1cm4gYXJyOyB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkgeyByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpOyB9IGVsc2UgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTsgfSB9OyB9KCk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgeyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IEFycmF5KGFyci5sZW5ndGgpOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH0gZWxzZSB7IHJldHVybiBBcnJheS5mcm9tKGFycik7IH0gfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgX3JlcXVpcmUgPSByZXF1aXJlKCcuLi9zcGVjaWFsLXN5bWJvbHMnKSxcbiAgICBFUFNJTE9OID0gX3JlcXVpcmUuRVBTSUxPTixcbiAgICBFUFNJTE9OX0NMT1NVUkUgPSBfcmVxdWlyZS5FUFNJTE9OX0NMT1NVUkU7XG5cbi8qKlxuICogTkZBIGZyYWdtZW50LlxuICpcbiAqIE5GQSBzdWItZnJhZ21lbnRzIGNhbiBiZSBjb21iaW5lZCB0byBhIGxhcmdlciBORkFzIGJ1aWxkaW5nXG4gKiB0aGUgcmVzdWx0aW5nIG1hY2hpbmUuIENvbWJpbmluZyB0aGUgZnJhZ21lbnRzIGlzIGRvbmUgYnkgcGF0Y2hpbmdcbiAqIGVkZ2VzIG9mIHRoZSBpbi0gYW5kIG91dC1zdGF0ZXMuXG4gKlxuICogMi1zdGF0ZXMgaW1wbGVtZW50YXRpb24sIGBpbmAsIGFuZCBgb3V0YC4gRXZlbnR1YWxseSBhbGwgdHJhbnNpdGlvbnNcbiAqIGdvIHRvIHRoZSBzYW1lIGBvdXRgLCB3aGljaCBjYW4gZnVydGhlciBiZSBjb25uZWN0ZWQgdmlhIM61LXRyYW5zaXRpb25cbiAqIHdpdGggb3RoZXIgZnJhZ21lbnQuXG4gKi9cblxuXG52YXIgTkZBID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBORkEoaW5TdGF0ZSwgb3V0U3RhdGUpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTkZBKTtcblxuICAgIHRoaXMuaW4gPSBpblN0YXRlO1xuICAgIHRoaXMub3V0ID0gb3V0U3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogVHJpZXMgdG8gcmVjb2duaXplIGEgc3RyaW5nIGJhc2VkIG9uIHRoaXMgTkZBIGZyYWdtZW50LlxuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhORkEsIFt7XG4gICAga2V5OiAnbWF0Y2hlcycsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIG1hdGNoZXMoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gdGhpcy5pbi5tYXRjaGVzKHN0cmluZyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhbHBoYWJldCBmb3IgdGhpcyBORkEuXG4gICAgICovXG5cbiAgfSwge1xuICAgIGtleTogJ2dldEFscGhhYmV0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWxwaGFiZXQoKSB7XG4gICAgICBpZiAoIXRoaXMuX2FscGhhYmV0KSB7XG4gICAgICAgIHRoaXMuX2FscGhhYmV0ID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgdGFibGUgPSB0aGlzLmdldFRyYW5zaXRpb25UYWJsZSgpO1xuICAgICAgICBmb3IgKHZhciBzdGF0ZSBpbiB0YWJsZSkge1xuICAgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IHRhYmxlW3N0YXRlXTtcbiAgICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgIGlmIChzeW1ib2wgIT09IEVQU0lMT05fQ0xPU1VSRSkge1xuICAgICAgICAgICAgICB0aGlzLl9hbHBoYWJldC5hZGQoc3ltYm9sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9hbHBoYWJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNldCBvZiBhY2NlcHRpbmcgc3RhdGVzLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdnZXRBY2NlcHRpbmdTdGF0ZXMnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRBY2NlcHRpbmdTdGF0ZXMoKSB7XG4gICAgICBpZiAoIXRoaXMuX2FjY2VwdGluZ1N0YXRlcykge1xuICAgICAgICAvLyBTdGF0ZXMgYXJlIGRldGVybWluZWQgZHVyaW5nIHRhYmxlIGNvbnN0cnVjdGlvbi5cbiAgICAgICAgdGhpcy5nZXRUcmFuc2l0aW9uVGFibGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9hY2NlcHRpbmdTdGF0ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhY2NlcHRpbmcgc3RhdGUgbnVtYmVycy5cbiAgICAgKi9cblxuICB9LCB7XG4gICAga2V5OiAnZ2V0QWNjZXB0aW5nU3RhdGVOdW1iZXJzJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0QWNjZXB0aW5nU3RhdGVOdW1iZXJzKCkge1xuICAgICAgaWYgKCF0aGlzLl9hY2NlcHRpbmdTdGF0ZU51bWJlcnMpIHtcbiAgICAgICAgdGhpcy5fYWNjZXB0aW5nU3RhdGVOdW1iZXJzID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLmdldEFjY2VwdGluZ1N0YXRlcygpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIGFjY2VwdGluZ1N0YXRlID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgIHRoaXMuX2FjY2VwdGluZ1N0YXRlTnVtYmVycy5hZGQoYWNjZXB0aW5nU3RhdGUubnVtYmVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fYWNjZXB0aW5nU3RhdGVOdW1iZXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJ1aWxkcyBhbmQgcmV0dXJucyB0cmFuc2l0aW9uIHRhYmxlLlxuICAgICAqL1xuXG4gIH0sIHtcbiAgICBrZXk6ICdnZXRUcmFuc2l0aW9uVGFibGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uVGFibGUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAoIXRoaXMuX3RyYW5zaXRpb25UYWJsZSkge1xuICAgICAgICB0aGlzLl90cmFuc2l0aW9uVGFibGUgPSB7fTtcbiAgICAgICAgdGhpcy5fYWNjZXB0aW5nU3RhdGVzID0gbmV3IFNldCgpO1xuXG4gICAgICAgIHZhciB2aXNpdGVkID0gbmV3IFNldCgpO1xuICAgICAgICB2YXIgc3ltYm9scyA9IG5ldyBTZXQoKTtcblxuICAgICAgICB2YXIgdmlzaXRTdGF0ZSA9IGZ1bmN0aW9uIHZpc2l0U3RhdGUoc3RhdGUpIHtcbiAgICAgICAgICBpZiAodmlzaXRlZC5oYXMoc3RhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmlzaXRlZC5hZGQoc3RhdGUpO1xuICAgICAgICAgIHN0YXRlLm51bWJlciA9IHZpc2l0ZWQuc2l6ZTtcbiAgICAgICAgICBfdGhpcy5fdHJhbnNpdGlvblRhYmxlW3N0YXRlLm51bWJlcl0gPSB7fTtcblxuICAgICAgICAgIGlmIChzdGF0ZS5hY2NlcHRpbmcpIHtcbiAgICAgICAgICAgIF90aGlzLl9hY2NlcHRpbmdTdGF0ZXMuYWRkKHN0YXRlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdHJhbnNpdGlvbnMgPSBzdGF0ZS5nZXRUcmFuc2l0aW9ucygpO1xuXG4gICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdHJhbnNpdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgdmFyIF9yZWYgPSBfc3RlcDIudmFsdWU7XG5cbiAgICAgICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMik7XG5cbiAgICAgICAgICAgICAgdmFyIHN5bWJvbCA9IF9yZWYyWzBdO1xuICAgICAgICAgICAgICB2YXIgc3ltYm9sVHJhbnNpdGlvbnMgPSBfcmVmMlsxXTtcblxuICAgICAgICAgICAgICB2YXIgY29tYmluZWRTdGF0ZSA9IFtdO1xuICAgICAgICAgICAgICBzeW1ib2xzLmFkZChzeW1ib2wpO1xuICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSB0cnVlO1xuICAgICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvcjMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IzID0gc3ltYm9sVHJhbnNpdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgIHZhciBuZXh0U3RhdGUgPSBfc3RlcDMudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgIHZpc2l0U3RhdGUobmV4dFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgIGNvbWJpbmVkU3RhdGUucHVzaChuZXh0U3RhdGUubnVtYmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMyA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IzID0gZXJyO1xuICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zICYmIF9pdGVyYXRvcjMucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IzO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIF90aGlzLl90cmFuc2l0aW9uVGFibGVbc3RhdGUubnVtYmVyXVtzeW1ib2xdID0gY29tYmluZWRTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFRyYXZlcnNlIHRoZSBncmFwaCBzdGFydGluZyBmcm9tIHRoZSBgaW5gLlxuICAgICAgICB2aXNpdFN0YXRlKHRoaXMuaW4pO1xuXG4gICAgICAgIC8vIEFwcGVuZCBlcHNpbG9uLWNsb3N1cmUgY29sdW1uLlxuICAgICAgICB2aXNpdGVkLmZvckVhY2goZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgICAgICAgZGVsZXRlIF90aGlzLl90cmFuc2l0aW9uVGFibGVbc3RhdGUubnVtYmVyXVtFUFNJTE9OXTtcbiAgICAgICAgICBfdGhpcy5fdHJhbnNpdGlvblRhYmxlW3N0YXRlLm51bWJlcl1bRVBTSUxPTl9DTE9TVVJFXSA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc3RhdGUuZ2V0RXBzaWxvbkNsb3N1cmUoKSkpLm1hcChmdW5jdGlvbiAocykge1xuICAgICAgICAgICAgcmV0dXJuIHMubnVtYmVyO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zaXRpb25UYWJsZTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gTkZBO1xufSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE5GQTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFlBQVk7O0FBRVosSUFBSUEsY0FBYyxHQUFHLFlBQVk7RUFBRSxTQUFTQyxhQUFhQSxDQUFDQyxHQUFHLEVBQUVDLENBQUMsRUFBRTtJQUFFLElBQUlDLElBQUksR0FBRyxFQUFFO0lBQUUsSUFBSUMsRUFBRSxHQUFHLElBQUk7SUFBRSxJQUFJQyxFQUFFLEdBQUcsS0FBSztJQUFFLElBQUlDLEVBQUUsR0FBR0MsU0FBUztJQUFFLElBQUk7TUFBRSxLQUFLLElBQUlDLEVBQUUsR0FBR1AsR0FBRyxDQUFDUSxNQUFNLENBQUNDLFFBQVEsQ0FBQyxFQUFFLEVBQUVDLEVBQUUsRUFBRSxFQUFFUCxFQUFFLEdBQUcsQ0FBQ08sRUFBRSxHQUFHSCxFQUFFLENBQUNJLElBQUksRUFBRSxFQUFFQyxJQUFJLENBQUMsRUFBRVQsRUFBRSxHQUFHLElBQUksRUFBRTtRQUFFRCxJQUFJLENBQUNXLElBQUksQ0FBQ0gsRUFBRSxDQUFDSSxLQUFLLENBQUM7UUFBRSxJ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