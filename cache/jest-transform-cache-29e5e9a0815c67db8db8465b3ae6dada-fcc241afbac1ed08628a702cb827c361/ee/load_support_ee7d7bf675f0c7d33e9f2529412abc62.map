{"version":3,"names":["messages_1","require","paths_1","support_1","environment_1","console_logger_1","loadSupport","options","environment","cwd","stderr","debug","mergeEnvironment","logger","ConsoleLogger","newId","IdGenerator","uuid","requirePaths","importPaths","resolvePaths","sources","support","getSupportCodeLibrary","requireModules","exports"],"sources":["../../src/api/load_support.ts"],"sourcesContent":["import { IdGenerator } from '@cucumber/messages'\nimport { ILoadSupportOptions, IRunEnvironment } from './types'\nimport { resolvePaths } from './paths'\nimport { getSupportCodeLibrary } from './support'\nimport { mergeEnvironment } from './environment'\nimport { ISupportCodeLibrary } from '../support_code_library_builder/types'\nimport { ILogger } from '../logger'\nimport { ConsoleLogger } from './console_logger'\n\n/**\n * Load support code for use in test runs.\n *\n * @public\n * @param options - Subset of `IRunnableConfiguration` required to find the support code.\n * @param environment - Project environment.\n */\nexport async function loadSupport(\n  options: ILoadSupportOptions,\n  environment: IRunEnvironment = {}\n): Promise<ISupportCodeLibrary> {\n  const { cwd, stderr, debug } = mergeEnvironment(environment)\n  const logger: ILogger = new ConsoleLogger(stderr, debug)\n  const newId = IdGenerator.uuid()\n  const { requirePaths, importPaths } = await resolvePaths(\n    logger,\n    cwd,\n    options.sources,\n    options.support\n  )\n  return await getSupportCodeLibrary({\n    cwd,\n    newId,\n    requireModules: options.support.requireModules,\n    requirePaths,\n    importPaths,\n  })\n}\n"],"mappings":";;;;;;AAAA,MAAAA,UAAA,GAAAC,OAAA;AAEA,MAAAC,OAAA,GAAAD,OAAA;AACA,MAAAE,SAAA,GAAAF,OAAA;AACA,MAAAG,aAAA,GAAAH,OAAA;AAGA,MAAAI,gBAAA,GAAAJ,OAAA;AAEA;;;;;;;AAOO,eAAeK,WAAWA,CAC/BC,OAA4B,EAC5BC,WAAA,GAA+B,EAAE;EAEjC,MAAM;IAAEC,GAAG;IAAEC,MAAM;IAAEC;EAAK,CAAE,GAAG,IAAAP,aAAA,CAAAQ,gBAAgB,EAACJ,WAAW,CAAC;EAC5D,MAAMK,MAAM,GAAY,IAAIR,gBAAA,CAAAS,aAAa,CAACJ,MAAM,EAAEC,KAAK,CAAC;EACxD,MAAMI,KAAK,GAAGf,UAAA,CAAAgB,WAAW,CAACC,IAAI,EAAE;EAChC,MAAM;IAAEC,YAAY;IAAEC;EAAW,CAAE,GAAG,MAAM,IAAAjB,OAAA,CAAAkB,YAAY,EACtDP,MAAM,EACNJ,GAAG,EACHF,OAAO,CAACc,OAAO,EACfd,OAAO,CAACe,OAAO,CAChB;EACD,OAAO,MAAM,IAAAnB,SAAA,CAAAoB,qBAAqB,EAAC;IACjCd,GAAG;IACHM,KAAK;IACLS,cAAc,EAAEjB,OAAO,CAACe,OAAO,CAACE,cAAc;IAC9CN,YAAY;IACZC;GACD,CAAC;AACJ;AApBAM,OAAA,CAAAnB,WAAA,GAAAA,WAAA"}