52ed4373f29b870848a94088ac60333a
"use strict";

const assert = require("assert");
const path = require("path");
const fs = require("fs");
let glob = undefined;
try {
  glob = require("glob");
} catch (_err) {
  // treat glob as optional.
}
const defaultGlobOpts = {
  nosort: true,
  silent: true
};

// for EMFILE handling
let timeout = 0;
const isWindows = process.platform === "win32";
const defaults = options => {
  const methods = ['unlink', 'chmod', 'stat', 'lstat', 'rmdir', 'readdir'];
  methods.forEach(m => {
    options[m] = options[m] || fs[m];
    m = m + 'Sync';
    options[m] = options[m] || fs[m];
  });
  options.maxBusyTries = options.maxBusyTries || 3;
  options.emfileWait = options.emfileWait || 1000;
  if (options.glob === false) {
    options.disableGlob = true;
  }
  if (options.disableGlob !== true && glob === undefined) {
    throw Error('glob dependency not found, set `options.disableGlob = true` if intentional');
  }
  options.disableGlob = options.disableGlob || false;
  options.glob = options.glob || defaultGlobOpts;
};
const rimraf = (p, options, cb) => {
  if (typeof options === 'function') {
    cb = options;
    options = {};
  }
  assert(p, 'rimraf: missing path');
  assert.equal(typeof p, 'string', 'rimraf: path should be a string');
  assert.equal(typeof cb, 'function', 'rimraf: callback function required');
  assert(options, 'rimraf: invalid options argument provided');
  assert.equal(typeof options, 'object', 'rimraf: options should be object');
  defaults(options);
  let busyTries = 0;
  let errState = null;
  let n = 0;
  const next = er => {
    errState = errState || er;
    if (--n === 0) cb(errState);
  };
  const afterGlob = (er, results) => {
    if (er) return cb(er);
    n = results.length;
    if (n === 0) return cb();
    results.forEach(p => {
      const CB = er => {
        if (er) {
          if ((er.code === "EBUSY" || er.code === "ENOTEMPTY" || er.code === "EPERM") && busyTries < options.maxBusyTries) {
            busyTries++;
            // try again, with the same exact callback as this one.
            return setTimeout(() => rimraf_(p, options, CB), busyTries * 100);
          }

          // this one won't happen if graceful-fs is used.
          if (er.code === "EMFILE" && timeout < options.emfileWait) {
            return setTimeout(() => rimraf_(p, options, CB), timeout++);
          }

          // already gone
          if (er.code === "ENOENT") er = null;
        }
        timeout = 0;
        next(er);
      };
      rimraf_(p, options, CB);
    });
  };
  if (options.disableGlob || !glob.hasMagic(p)) return afterGlob(null, [p]);
  options.lstat(p, (er, stat) => {
    if (!er) return afterGlob(null, [p]);
    glob(p, options.glob, afterGlob);
  });
};

// Two possible strategies.
// 1. Assume it's a file.  unlink it, then do the dir stuff on EPERM or EISDIR
// 2. Assume it's a directory.  readdir, then do the file stuff on ENOTDIR
//
// Both result in an extra syscall when you guess wrong.  However, there
// are likely far more normal files in the world than directories.  This
// is based on the assumption that a the average number of files per
// directory is >= 1.
//
// If anyone ever complains about this, then I guess the strategy could
// be made configurable somehow.  But until then, YAGNI.
const rimraf_ = (p, options, cb) => {
  assert(p);
  assert(options);
  assert(typeof cb === 'function');

  // sunos lets the root user unlink directories, which is... weird.
  // so we have to lstat here and make sure it's not a dir.
  options.lstat(p, (er, st) => {
    if (er && er.code === "ENOENT") return cb(null);

    // Windows can EPERM on stat.  Life is suffering.
    if (er && er.code === "EPERM" && isWindows) fixWinEPERM(p, options, er, cb);
    if (st && st.isDirectory()) return rmdir(p, options, er, cb);
    options.unlink(p, er => {
      if (er) {
        if (er.code === "ENOENT") return cb(null);
        if (er.code === "EPERM") return isWindows ? fixWinEPERM(p, options, er, cb) : rmdir(p, options, er, cb);
        if (er.code === "EISDIR") return rmdir(p, options, er, cb);
      }
      return cb(er);
    });
  });
};
const fixWinEPERM = (p, options, er, cb) => {
  assert(p);
  assert(options);
  assert(typeof cb === 'function');
  options.chmod(p, 0o666, er2 => {
    if (er2) cb(er2.code === "ENOENT" ? null : er);else options.stat(p, (er3, stats) => {
      if (er3) cb(er3.code === "ENOENT" ? null : er);else if (stats.isDirectory()) rmdir(p, options, er, cb);else options.unlink(p, cb);
    });
  });
};
const fixWinEPERMSync = (p, options, er) => {
  assert(p);
  assert(options);
  try {
    options.chmodSync(p, 0o666);
  } catch (er2) {
    if (er2.code === "ENOENT") return;else throw er;
  }
  let stats;
  try {
    stats = options.statSync(p);
  } catch (er3) {
    if (er3.code === "ENOENT") return;else throw er;
  }
  if (stats.isDirectory()) rmdirSync(p, options, er);else options.unlinkSync(p);
};
const rmdir = (p, options, originalEr, cb) => {
  assert(p);
  assert(options);
  assert(typeof cb === 'function');

  // try to rmdir first, and only readdir on ENOTEMPTY or EEXIST (SunOS)
  // if we guessed wrong, and it's not a directory, then
  // raise the original error.
  options.rmdir(p, er => {
    if (er && (er.code === "ENOTEMPTY" || er.code === "EEXIST" || er.code === "EPERM")) rmkids(p, options, cb);else if (er && er.code === "ENOTDIR") cb(originalEr);else cb(er);
  });
};
const rmkids = (p, options, cb) => {
  assert(p);
  assert(options);
  assert(typeof cb === 'function');
  options.readdir(p, (er, files) => {
    if (er) return cb(er);
    let n = files.length;
    if (n === 0) return options.rmdir(p, cb);
    let errState;
    files.forEach(f => {
      rimraf(path.join(p, f), options, er => {
        if (errState) return;
        if (er) return cb(errState = er);
        if (--n === 0) options.rmdir(p, cb);
      });
    });
  });
};

// this looks simpler, and is strictly *faster*, but will
// tie up the JavaScript thread and fail on excessively
// deep directory trees.
const rimrafSync = (p, options) => {
  options = options || {};
  defaults(options);
  assert(p, 'rimraf: missing path');
  assert.equal(typeof p, 'string', 'rimraf: path should be a string');
  assert(options, 'rimraf: missing options');
  assert.equal(typeof options, 'object', 'rimraf: options should be object');
  let results;
  if (options.disableGlob || !glob.hasMagic(p)) {
    results = [p];
  } else {
    try {
      options.lstatSync(p);
      results = [p];
    } catch (er) {
      results = glob.sync(p, options.glob);
    }
  }
  if (!results.length) return;
  for (let i = 0; i < results.length; i++) {
    const p = results[i];
    let st;
    try {
      st = options.lstatSync(p);
    } catch (er) {
      if (er.code === "ENOENT") return;

      // Windows can EPERM on stat.  Life is suffering.
      if (er.code === "EPERM" && isWindows) fixWinEPERMSync(p, options, er);
    }
    try {
      // sunos lets the root user unlink directories, which is... weird.
      if (st && st.isDirectory()) rmdirSync(p, options, null);else options.unlinkSync(p);
    } catch (er) {
      if (er.code === "ENOENT") return;
      if (er.code === "EPERM") return isWindows ? fixWinEPERMSync(p, options, er) : rmdirSync(p, options, er);
      if (er.code !== "EISDIR") throw er;
      rmdirSync(p, options, er);
    }
  }
};
const rmdirSync = (p, options, originalEr) => {
  assert(p);
  assert(options);
  try {
    options.rmdirSync(p);
  } catch (er) {
    if (er.code === "ENOENT") return;
    if (er.code === "ENOTDIR") throw originalEr;
    if (er.code === "ENOTEMPTY" || er.code === "EEXIST" || er.code === "EPERM") rmkidsSync(p, options);
  }
};
const rmkidsSync = (p, options) => {
  assert(p);
  assert(options);
  options.readdirSync(p).forEach(f => rimrafSync(path.join(p, f), options));

  // We only end up here once we got ENOTEMPTY at least once, and
  // at this point, we are guaranteed to have removed all the kids.
  // So, we know that it won't be ENOENT or ENOTDIR or anything else.
  // try really hard to delete stuff on windows, because it has a
  // PROFOUNDLY annoying habit of not closing handles promptly when
  // files are deleted, resulting in spurious ENOTEMPTY errors.
  const retries = isWindows ? 100 : 1;
  let i = 0;
  do {
    let threw = true;
    try {
      const ret = options.rmdirSync(p, options);
      threw = false;
      return ret;
    } finally {
      if (++i < retries && threw) continue;
    }
  } while (true);
};
module.exports = rimraf;
rimraf.sync = rimrafSync;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3NlcnQiLCJyZXF1aXJlIiwicGF0aCIsImZzIiwiZ2xvYiIsInVuZGVmaW5lZCIsIl9lcnIiLCJkZWZhdWx0R2xvYk9wdHMiLCJub3NvcnQiLCJzaWxlbnQiLCJ0aW1lb3V0IiwiaXNXaW5kb3dzIiwicHJvY2VzcyIsInBsYXRmb3JtIiwiZGVmYXVsdHMiLCJvcHRpb25zIiwibWV0aG9kcyIsImZvckVhY2giLCJtIiwibWF4QnVzeVRyaWVzIiwiZW1maWxlV2FpdCIsImRpc2FibGVHbG9iIiwiRXJyb3IiLCJyaW1yYWYiLCJwIiwiY2IiLCJlcXVhbCIsImJ1c3lUcmllcyIsImVyclN0YXRlIiwibiIsIm5leHQiLCJlciIsImFmdGVyR2xvYiIsInJlc3VsdHMiLCJsZW5ndGgiLCJDQiIsImNvZGUiLCJzZXRUaW1lb3V0IiwicmltcmFmXyIsImhhc01hZ2ljIiwibHN0YXQiLCJzdGF0Iiwic3QiLCJmaXhXaW5FUEVSTSIsImlzRGlyZWN0b3J5Iiwicm1kaXIiLCJ1bmxpbmsiLCJjaG1vZCIsImVyMiIsImVyMyIsInN0YXRzIiwiZml4V2luRVBFUk1TeW5jIiwiY2htb2RTeW5jIiwic3RhdFN5bmMiLCJybWRpclN5bmMiLCJ1bmxpbmtTeW5jIiwib3JpZ2luYWxFciIsInJta2lkcyIsInJlYWRkaXIiLCJmaWxlcyIsImYiLCJqb2luIiwicmltcmFmU3luYyIsImxzdGF0U3luYyIsInN5bmMiLCJpIiwicm1raWRzU3luYyIsInJlYWRkaXJTeW5jIiwicmV0cmllcyIsInRocmV3IiwicmV0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbInJpbXJhZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhc3NlcnQgPSByZXF1aXJlKFwiYXNzZXJ0XCIpXG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIilcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpXG5sZXQgZ2xvYiA9IHVuZGVmaW5lZFxudHJ5IHtcbiAgZ2xvYiA9IHJlcXVpcmUoXCJnbG9iXCIpXG59IGNhdGNoIChfZXJyKSB7XG4gIC8vIHRyZWF0IGdsb2IgYXMgb3B0aW9uYWwuXG59XG5cbmNvbnN0IGRlZmF1bHRHbG9iT3B0cyA9IHtcbiAgbm9zb3J0OiB0cnVlLFxuICBzaWxlbnQ6IHRydWVcbn1cblxuLy8gZm9yIEVNRklMRSBoYW5kbGluZ1xubGV0IHRpbWVvdXQgPSAwXG5cbmNvbnN0IGlzV2luZG93cyA9IChwcm9jZXNzLnBsYXRmb3JtID09PSBcIndpbjMyXCIpXG5cbmNvbnN0IGRlZmF1bHRzID0gb3B0aW9ucyA9PiB7XG4gIGNvbnN0IG1ldGhvZHMgPSBbXG4gICAgJ3VubGluaycsXG4gICAgJ2NobW9kJyxcbiAgICAnc3RhdCcsXG4gICAgJ2xzdGF0JyxcbiAgICAncm1kaXInLFxuICAgICdyZWFkZGlyJ1xuICBdXG4gIG1ldGhvZHMuZm9yRWFjaChtID0+IHtcbiAgICBvcHRpb25zW21dID0gb3B0aW9uc1ttXSB8fCBmc1ttXVxuICAgIG0gPSBtICsgJ1N5bmMnXG4gICAgb3B0aW9uc1ttXSA9IG9wdGlvbnNbbV0gfHwgZnNbbV1cbiAgfSlcblxuICBvcHRpb25zLm1heEJ1c3lUcmllcyA9IG9wdGlvbnMubWF4QnVzeVRyaWVzIHx8IDNcbiAgb3B0aW9ucy5lbWZpbGVXYWl0ID0gb3B0aW9ucy5lbWZpbGVXYWl0IHx8IDEwMDBcbiAgaWYgKG9wdGlvbnMuZ2xvYiA9PT0gZmFsc2UpIHtcbiAgICBvcHRpb25zLmRpc2FibGVHbG9iID0gdHJ1ZVxuICB9XG4gIGlmIChvcHRpb25zLmRpc2FibGVHbG9iICE9PSB0cnVlICYmIGdsb2IgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IEVycm9yKCdnbG9iIGRlcGVuZGVuY3kgbm90IGZvdW5kLCBzZXQgYG9wdGlvbnMuZGlzYWJsZUdsb2IgPSB0cnVlYCBpZiBpbnRlbnRpb25hbCcpXG4gIH1cbiAgb3B0aW9ucy5kaXNhYmxlR2xvYiA9IG9wdGlvbnMuZGlzYWJsZUdsb2IgfHwgZmFsc2VcbiAgb3B0aW9ucy5nbG9iID0gb3B0aW9ucy5nbG9iIHx8IGRlZmF1bHRHbG9iT3B0c1xufVxuXG5jb25zdCByaW1yYWYgPSAocCwgb3B0aW9ucywgY2IpID0+IHtcbiAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgY2IgPSBvcHRpb25zXG4gICAgb3B0aW9ucyA9IHt9XG4gIH1cblxuICBhc3NlcnQocCwgJ3JpbXJhZjogbWlzc2luZyBwYXRoJylcbiAgYXNzZXJ0LmVxdWFsKHR5cGVvZiBwLCAnc3RyaW5nJywgJ3JpbXJhZjogcGF0aCBzaG91bGQgYmUgYSBzdHJpbmcnKVxuICBhc3NlcnQuZXF1YWwodHlwZW9mIGNiLCAnZnVuY3Rpb24nLCAncmltcmFmOiBjYWxsYmFjayBmdW5jdGlvbiByZXF1aXJlZCcpXG4gIGFzc2VydChvcHRpb25zLCAncmltcmFmOiBpbnZhbGlkIG9wdGlvbnMgYXJndW1lbnQgcHJvdmlkZWQnKVxuICBhc3NlcnQuZXF1YWwodHlwZW9mIG9wdGlvbnMsICdvYmplY3QnLCAncmltcmFmOiBvcHRpb25zIHNob3VsZCBiZSBvYmplY3QnKVxuXG4gIGRlZmF1bHRzKG9wdGlvbnMpXG5cbiAgbGV0IGJ1c3lUcmllcyA9IDBcbiAgbGV0IGVyclN0YXRlID0gbnVsbFxuICBsZXQgbiA9IDBcblxuICBjb25zdCBuZXh0ID0gKGVyKSA9PiB7XG4gICAgZXJyU3RhdGUgPSBlcnJTdGF0ZSB8fCBlclxuICAgIGlmICgtLW4gPT09IDApXG4gICAgICBjYihlcnJTdGF0ZSlcbiAgfVxuXG4gIGNvbnN0IGFmdGVyR2xvYiA9IChlciwgcmVzdWx0cykgPT4ge1xuICAgIGlmIChlcilcbiAgICAgIHJldHVybiBjYihlcilcblxuICAgIG4gPSByZXN1bHRzLmxlbmd0aFxuICAgIGlmIChuID09PSAwKVxuICAgICAgcmV0dXJuIGNiKClcblxuICAgIHJlc3VsdHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGNvbnN0IENCID0gKGVyKSA9PiB7XG4gICAgICAgIGlmIChlcikge1xuICAgICAgICAgIGlmICgoZXIuY29kZSA9PT0gXCJFQlVTWVwiIHx8IGVyLmNvZGUgPT09IFwiRU5PVEVNUFRZXCIgfHwgZXIuY29kZSA9PT0gXCJFUEVSTVwiKSAmJlxuICAgICAgICAgICAgICBidXN5VHJpZXMgPCBvcHRpb25zLm1heEJ1c3lUcmllcykge1xuICAgICAgICAgICAgYnVzeVRyaWVzICsrXG4gICAgICAgICAgICAvLyB0cnkgYWdhaW4sIHdpdGggdGhlIHNhbWUgZXhhY3QgY2FsbGJhY2sgYXMgdGhpcyBvbmUuXG4gICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dCgoKSA9PiByaW1yYWZfKHAsIG9wdGlvbnMsIENCKSwgYnVzeVRyaWVzICogMTAwKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHRoaXMgb25lIHdvbid0IGhhcHBlbiBpZiBncmFjZWZ1bC1mcyBpcyB1c2VkLlxuICAgICAgICAgIGlmIChlci5jb2RlID09PSBcIkVNRklMRVwiICYmIHRpbWVvdXQgPCBvcHRpb25zLmVtZmlsZVdhaXQpIHtcbiAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KCgpID0+IHJpbXJhZl8ocCwgb3B0aW9ucywgQ0IpLCB0aW1lb3V0ICsrKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGFscmVhZHkgZ29uZVxuICAgICAgICAgIGlmIChlci5jb2RlID09PSBcIkVOT0VOVFwiKSBlciA9IG51bGxcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWVvdXQgPSAwXG4gICAgICAgIG5leHQoZXIpXG4gICAgICB9XG4gICAgICByaW1yYWZfKHAsIG9wdGlvbnMsIENCKVxuICAgIH0pXG4gIH1cblxuICBpZiAob3B0aW9ucy5kaXNhYmxlR2xvYiB8fCAhZ2xvYi5oYXNNYWdpYyhwKSlcbiAgICByZXR1cm4gYWZ0ZXJHbG9iKG51bGwsIFtwXSlcblxuICBvcHRpb25zLmxzdGF0KHAsIChlciwgc3RhdCkgPT4ge1xuICAgIGlmICghZXIpXG4gICAgICByZXR1cm4gYWZ0ZXJHbG9iKG51bGwsIFtwXSlcblxuICAgIGdsb2IocCwgb3B0aW9ucy5nbG9iLCBhZnRlckdsb2IpXG4gIH0pXG5cbn1cblxuLy8gVHdvIHBvc3NpYmxlIHN0cmF0ZWdpZXMuXG4vLyAxLiBBc3N1bWUgaXQncyBhIGZpbGUuICB1bmxpbmsgaXQsIHRoZW4gZG8gdGhlIGRpciBzdHVmZiBvbiBFUEVSTSBvciBFSVNESVJcbi8vIDIuIEFzc3VtZSBpdCdzIGEgZGlyZWN0b3J5LiAgcmVhZGRpciwgdGhlbiBkbyB0aGUgZmlsZSBzdHVmZiBvbiBFTk9URElSXG4vL1xuLy8gQm90aCByZXN1bHQgaW4gYW4gZXh0cmEgc3lzY2FsbCB3aGVuIHlvdSBndWVzcyB3cm9uZy4gIEhvd2V2ZXIsIHRoZXJlXG4vLyBhcmUgbGlrZWx5IGZhciBtb3JlIG5vcm1hbCBmaWxlcyBpbiB0aGUgd29ybGQgdGhhbiBkaXJlY3Rvcmllcy4gIFRoaXNcbi8vIGlzIGJhc2VkIG9uIHRoZSBhc3N1bXB0aW9uIHRoYXQgYSB0aGUgYXZlcmFnZSBudW1iZXIgb2YgZmlsZXMgcGVyXG4vLyBkaXJlY3RvcnkgaXMgPj0gMS5cbi8vXG4vLyBJZiBhbnlvbmUgZXZlciBjb21wbGFpbnMgYWJvdXQgdGhpcywgdGhlbiBJIGd1ZXNzIHRoZSBzdHJhdGVneSBjb3VsZFxuLy8gYmUgbWFkZSBjb25maWd1cmFibGUgc29tZWhvdy4gIEJ1dCB1bnRpbCB0aGVuLCBZQUdOSS5cbmNvbnN0IHJpbXJhZl8gPSAocCwgb3B0aW9ucywgY2IpID0+IHtcbiAgYXNzZXJ0KHApXG4gIGFzc2VydChvcHRpb25zKVxuICBhc3NlcnQodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKVxuXG4gIC8vIHN1bm9zIGxldHMgdGhlIHJvb3QgdXNlciB1bmxpbmsgZGlyZWN0b3JpZXMsIHdoaWNoIGlzLi4uIHdlaXJkLlxuICAvLyBzbyB3ZSBoYXZlIHRvIGxzdGF0IGhlcmUgYW5kIG1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpci5cbiAgb3B0aW9ucy5sc3RhdChwLCAoZXIsIHN0KSA9PiB7XG4gICAgaWYgKGVyICYmIGVyLmNvZGUgPT09IFwiRU5PRU5UXCIpXG4gICAgICByZXR1cm4gY2IobnVsbClcblxuICAgIC8vIFdpbmRvd3MgY2FuIEVQRVJNIG9uIHN0YXQuICBMaWZlIGlzIHN1ZmZlcmluZy5cbiAgICBpZiAoZXIgJiYgZXIuY29kZSA9PT0gXCJFUEVSTVwiICYmIGlzV2luZG93cylcbiAgICAgIGZpeFdpbkVQRVJNKHAsIG9wdGlvbnMsIGVyLCBjYilcblxuICAgIGlmIChzdCAmJiBzdC5pc0RpcmVjdG9yeSgpKVxuICAgICAgcmV0dXJuIHJtZGlyKHAsIG9wdGlvbnMsIGVyLCBjYilcblxuICAgIG9wdGlvbnMudW5saW5rKHAsIGVyID0+IHtcbiAgICAgIGlmIChlcikge1xuICAgICAgICBpZiAoZXIuY29kZSA9PT0gXCJFTk9FTlRcIilcbiAgICAgICAgICByZXR1cm4gY2IobnVsbClcbiAgICAgICAgaWYgKGVyLmNvZGUgPT09IFwiRVBFUk1cIilcbiAgICAgICAgICByZXR1cm4gKGlzV2luZG93cylcbiAgICAgICAgICAgID8gZml4V2luRVBFUk0ocCwgb3B0aW9ucywgZXIsIGNiKVxuICAgICAgICAgICAgOiBybWRpcihwLCBvcHRpb25zLCBlciwgY2IpXG4gICAgICAgIGlmIChlci5jb2RlID09PSBcIkVJU0RJUlwiKVxuICAgICAgICAgIHJldHVybiBybWRpcihwLCBvcHRpb25zLCBlciwgY2IpXG4gICAgICB9XG4gICAgICByZXR1cm4gY2IoZXIpXG4gICAgfSlcbiAgfSlcbn1cblxuY29uc3QgZml4V2luRVBFUk0gPSAocCwgb3B0aW9ucywgZXIsIGNiKSA9PiB7XG4gIGFzc2VydChwKVxuICBhc3NlcnQob3B0aW9ucylcbiAgYXNzZXJ0KHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJylcblxuICBvcHRpb25zLmNobW9kKHAsIDBvNjY2LCBlcjIgPT4ge1xuICAgIGlmIChlcjIpXG4gICAgICBjYihlcjIuY29kZSA9PT0gXCJFTk9FTlRcIiA/IG51bGwgOiBlcilcbiAgICBlbHNlXG4gICAgICBvcHRpb25zLnN0YXQocCwgKGVyMywgc3RhdHMpID0+IHtcbiAgICAgICAgaWYgKGVyMylcbiAgICAgICAgICBjYihlcjMuY29kZSA9PT0gXCJFTk9FTlRcIiA/IG51bGwgOiBlcilcbiAgICAgICAgZWxzZSBpZiAoc3RhdHMuaXNEaXJlY3RvcnkoKSlcbiAgICAgICAgICBybWRpcihwLCBvcHRpb25zLCBlciwgY2IpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBvcHRpb25zLnVubGluayhwLCBjYilcbiAgICAgIH0pXG4gIH0pXG59XG5cbmNvbnN0IGZpeFdpbkVQRVJNU3luYyA9IChwLCBvcHRpb25zLCBlcikgPT4ge1xuICBhc3NlcnQocClcbiAgYXNzZXJ0KG9wdGlvbnMpXG5cbiAgdHJ5IHtcbiAgICBvcHRpb25zLmNobW9kU3luYyhwLCAwbzY2NilcbiAgfSBjYXRjaCAoZXIyKSB7XG4gICAgaWYgKGVyMi5jb2RlID09PSBcIkVOT0VOVFwiKVxuICAgICAgcmV0dXJuXG4gICAgZWxzZVxuICAgICAgdGhyb3cgZXJcbiAgfVxuXG4gIGxldCBzdGF0c1xuICB0cnkge1xuICAgIHN0YXRzID0gb3B0aW9ucy5zdGF0U3luYyhwKVxuICB9IGNhdGNoIChlcjMpIHtcbiAgICBpZiAoZXIzLmNvZGUgPT09IFwiRU5PRU5UXCIpXG4gICAgICByZXR1cm5cbiAgICBlbHNlXG4gICAgICB0aHJvdyBlclxuICB9XG5cbiAgaWYgKHN0YXRzLmlzRGlyZWN0b3J5KCkpXG4gICAgcm1kaXJTeW5jKHAsIG9wdGlvbnMsIGVyKVxuICBlbHNlXG4gICAgb3B0aW9ucy51bmxpbmtTeW5jKHApXG59XG5cbmNvbnN0IHJtZGlyID0gKHAsIG9wdGlvbnMsIG9yaWdpbmFsRXIsIGNiKSA9PiB7XG4gIGFzc2VydChwKVxuICBhc3NlcnQob3B0aW9ucylcbiAgYXNzZXJ0KHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJylcblxuICAvLyB0cnkgdG8gcm1kaXIgZmlyc3QsIGFuZCBvbmx5IHJlYWRkaXIgb24gRU5PVEVNUFRZIG9yIEVFWElTVCAoU3VuT1MpXG4gIC8vIGlmIHdlIGd1ZXNzZWQgd3JvbmcsIGFuZCBpdCdzIG5vdCBhIGRpcmVjdG9yeSwgdGhlblxuICAvLyByYWlzZSB0aGUgb3JpZ2luYWwgZXJyb3IuXG4gIG9wdGlvbnMucm1kaXIocCwgZXIgPT4ge1xuICAgIGlmIChlciAmJiAoZXIuY29kZSA9PT0gXCJFTk9URU1QVFlcIiB8fCBlci5jb2RlID09PSBcIkVFWElTVFwiIHx8IGVyLmNvZGUgPT09IFwiRVBFUk1cIikpXG4gICAgICBybWtpZHMocCwgb3B0aW9ucywgY2IpXG4gICAgZWxzZSBpZiAoZXIgJiYgZXIuY29kZSA9PT0gXCJFTk9URElSXCIpXG4gICAgICBjYihvcmlnaW5hbEVyKVxuICAgIGVsc2VcbiAgICAgIGNiKGVyKVxuICB9KVxufVxuXG5jb25zdCBybWtpZHMgPSAocCwgb3B0aW9ucywgY2IpID0+IHtcbiAgYXNzZXJ0KHApXG4gIGFzc2VydChvcHRpb25zKVxuICBhc3NlcnQodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKVxuXG4gIG9wdGlvbnMucmVhZGRpcihwLCAoZXIsIGZpbGVzKSA9PiB7XG4gICAgaWYgKGVyKVxuICAgICAgcmV0dXJuIGNiKGVyKVxuICAgIGxldCBuID0gZmlsZXMubGVuZ3RoXG4gICAgaWYgKG4gPT09IDApXG4gICAgICByZXR1cm4gb3B0aW9ucy5ybWRpcihwLCBjYilcbiAgICBsZXQgZXJyU3RhdGVcbiAgICBmaWxlcy5mb3JFYWNoKGYgPT4ge1xuICAgICAgcmltcmFmKHBhdGguam9pbihwLCBmKSwgb3B0aW9ucywgZXIgPT4ge1xuICAgICAgICBpZiAoZXJyU3RhdGUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIGlmIChlcilcbiAgICAgICAgICByZXR1cm4gY2IoZXJyU3RhdGUgPSBlcilcbiAgICAgICAgaWYgKC0tbiA9PT0gMClcbiAgICAgICAgICBvcHRpb25zLnJtZGlyKHAsIGNiKVxuICAgICAgfSlcbiAgICB9KVxuICB9KVxufVxuXG4vLyB0aGlzIGxvb2tzIHNpbXBsZXIsIGFuZCBpcyBzdHJpY3RseSAqZmFzdGVyKiwgYnV0IHdpbGxcbi8vIHRpZSB1cCB0aGUgSmF2YVNjcmlwdCB0aHJlYWQgYW5kIGZhaWwgb24gZXhjZXNzaXZlbHlcbi8vIGRlZXAgZGlyZWN0b3J5IHRyZWVzLlxuY29uc3QgcmltcmFmU3luYyA9IChwLCBvcHRpb25zKSA9PiB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gIGRlZmF1bHRzKG9wdGlvbnMpXG5cbiAgYXNzZXJ0KHAsICdyaW1yYWY6IG1pc3NpbmcgcGF0aCcpXG4gIGFzc2VydC5lcXVhbCh0eXBlb2YgcCwgJ3N0cmluZycsICdyaW1yYWY6IHBhdGggc2hvdWxkIGJlIGEgc3RyaW5nJylcbiAgYXNzZXJ0KG9wdGlvbnMsICdyaW1yYWY6IG1pc3Npbmcgb3B0aW9ucycpXG4gIGFzc2VydC5lcXVhbCh0eXBlb2Ygb3B0aW9ucywgJ29iamVjdCcsICdyaW1yYWY6IG9wdGlvbnMgc2hvdWxkIGJlIG9iamVjdCcpXG5cbiAgbGV0IHJlc3VsdHNcblxuICBpZiAob3B0aW9ucy5kaXNhYmxlR2xvYiB8fCAhZ2xvYi5oYXNNYWdpYyhwKSkge1xuICAgIHJlc3VsdHMgPSBbcF1cbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgb3B0aW9ucy5sc3RhdFN5bmMocClcbiAgICAgIHJlc3VsdHMgPSBbcF1cbiAgICB9IGNhdGNoIChlcikge1xuICAgICAgcmVzdWx0cyA9IGdsb2Iuc3luYyhwLCBvcHRpb25zLmdsb2IpXG4gICAgfVxuICB9XG5cbiAgaWYgKCFyZXN1bHRzLmxlbmd0aClcbiAgICByZXR1cm5cblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBwID0gcmVzdWx0c1tpXVxuXG4gICAgbGV0IHN0XG4gICAgdHJ5IHtcbiAgICAgIHN0ID0gb3B0aW9ucy5sc3RhdFN5bmMocClcbiAgICB9IGNhdGNoIChlcikge1xuICAgICAgaWYgKGVyLmNvZGUgPT09IFwiRU5PRU5UXCIpXG4gICAgICAgIHJldHVyblxuXG4gICAgICAvLyBXaW5kb3dzIGNhbiBFUEVSTSBvbiBzdGF0LiAgTGlmZSBpcyBzdWZmZXJpbmcuXG4gICAgICBpZiAoZXIuY29kZSA9PT0gXCJFUEVSTVwiICYmIGlzV2luZG93cylcbiAgICAgICAgZml4V2luRVBFUk1TeW5jKHAsIG9wdGlvbnMsIGVyKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBzdW5vcyBsZXRzIHRoZSByb290IHVzZXIgdW5saW5rIGRpcmVjdG9yaWVzLCB3aGljaCBpcy4uLiB3ZWlyZC5cbiAgICAgIGlmIChzdCAmJiBzdC5pc0RpcmVjdG9yeSgpKVxuICAgICAgICBybWRpclN5bmMocCwgb3B0aW9ucywgbnVsbClcbiAgICAgIGVsc2VcbiAgICAgICAgb3B0aW9ucy51bmxpbmtTeW5jKHApXG4gICAgfSBjYXRjaCAoZXIpIHtcbiAgICAgIGlmIChlci5jb2RlID09PSBcIkVOT0VOVFwiKVxuICAgICAgICByZXR1cm5cbiAgICAgIGlmIChlci5jb2RlID09PSBcIkVQRVJNXCIpXG4gICAgICAgIHJldHVybiBpc1dpbmRvd3MgPyBmaXhXaW5FUEVSTVN5bmMocCwgb3B0aW9ucywgZXIpIDogcm1kaXJTeW5jKHAsIG9wdGlvbnMsIGVyKVxuICAgICAgaWYgKGVyLmNvZGUgIT09IFwiRUlTRElSXCIpXG4gICAgICAgIHRocm93IGVyXG5cbiAgICAgIHJtZGlyU3luYyhwLCBvcHRpb25zLCBlcilcbiAgICB9XG4gIH1cbn1cblxuY29uc3Qgcm1kaXJTeW5jID0gKHAsIG9wdGlvbnMsIG9yaWdpbmFsRXIpID0+IHtcbiAgYXNzZXJ0KHApXG4gIGFzc2VydChvcHRpb25zKVxuXG4gIHRyeSB7XG4gICAgb3B0aW9ucy5ybWRpclN5bmMocClcbiAgfSBjYXRjaCAoZXIpIHtcbiAgICBpZiAoZXIuY29kZSA9PT0gXCJFTk9FTlRcIilcbiAgICAgIHJldHVyblxuICAgIGlmIChlci5jb2RlID09PSBcIkVOT1RESVJcIilcbiAgICAgIHRocm93IG9yaWdpbmFsRXJcbiAgICBpZiAoZXIuY29kZSA9PT0gXCJFTk9URU1QVFlcIiB8fCBlci5jb2RlID09PSBcIkVFWElTVFwiIHx8IGVyLmNvZGUgPT09IFwiRVBFUk1cIilcbiAgICAgIHJta2lkc1N5bmMocCwgb3B0aW9ucylcbiAgfVxufVxuXG5jb25zdCBybWtpZHNTeW5jID0gKHAsIG9wdGlvbnMpID0+IHtcbiAgYXNzZXJ0KHApXG4gIGFzc2VydChvcHRpb25zKVxuICBvcHRpb25zLnJlYWRkaXJTeW5jKHApLmZvckVhY2goZiA9PiByaW1yYWZTeW5jKHBhdGguam9pbihwLCBmKSwgb3B0aW9ucykpXG5cbiAgLy8gV2Ugb25seSBlbmQgdXAgaGVyZSBvbmNlIHdlIGdvdCBFTk9URU1QVFkgYXQgbGVhc3Qgb25jZSwgYW5kXG4gIC8vIGF0IHRoaXMgcG9pbnQsIHdlIGFyZSBndWFyYW50ZWVkIHRvIGhhdmUgcmVtb3ZlZCBhbGwgdGhlIGtpZHMuXG4gIC8vIFNvLCB3ZSBrbm93IHRoYXQgaXQgd29uJ3QgYmUgRU5PRU5UIG9yIEVOT1RESVIgb3IgYW55dGhpbmcgZWxzZS5cbiAgLy8gdHJ5IHJlYWxseSBoYXJkIHRvIGRlbGV0ZSBzdHVmZiBvbiB3aW5kb3dzLCBiZWNhdXNlIGl0IGhhcyBhXG4gIC8vIFBST0ZPVU5ETFkgYW5ub3lpbmcgaGFiaXQgb2Ygbm90IGNsb3NpbmcgaGFuZGxlcyBwcm9tcHRseSB3aGVuXG4gIC8vIGZpbGVzIGFyZSBkZWxldGVkLCByZXN1bHRpbmcgaW4gc3B1cmlvdXMgRU5PVEVNUFRZIGVycm9ycy5cbiAgY29uc3QgcmV0cmllcyA9IGlzV2luZG93cyA/IDEwMCA6IDFcbiAgbGV0IGkgPSAwXG4gIGRvIHtcbiAgICBsZXQgdGhyZXcgPSB0cnVlXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJldCA9IG9wdGlvbnMucm1kaXJTeW5jKHAsIG9wdGlvbnMpXG4gICAgICB0aHJldyA9IGZhbHNlXG4gICAgICByZXR1cm4gcmV0XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmICgrK2kgPCByZXRyaWVzICYmIHRocmV3KVxuICAgICAgICBjb250aW51ZVxuICAgIH1cbiAgfSB3aGlsZSAodHJ1ZSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByaW1yYWZcbnJpbXJhZi5zeW5jID0gcmltcmFmU3luY1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTUUsRUFBRSxHQUFHRixPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLElBQUlHLElBQUksR0FBR0MsU0FBUztBQUNwQixJQUFJO0VBQ0ZELElBQUksR0FBR0gsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUN4QixDQUFDLENBQUMsT0FBT0ssSUFBSSxFQUFFO0VBQ2I7QUFBQTtBQUdGLE1BQU1DLGVBQWUsR0FBRztFQUN0QkMsTUFBTSxFQUFFLElBQUk7RUFDWkMsTUFBTSxFQUFFO0FBQ1YsQ0FBQzs7QUFFRDtBQUNBLElBQUlDLE9BQU8sR0FBRyxDQUFDO0FBRWYsTUFBTUMsU0FBUyxHQUFJQyxPQUFPLENBQUNDLFFBQVEsS0FBSyxPQUFRO0FBRWhELE1BQU1DLFFBQVEsR0FBR0MsT0FBTyxJQUFJO0VBQzFCLE1BQU1DLE9BQU8sR0FBRyxDQUNkLFFBQVEsRUFDUixPQUFPLEVBQ1AsTUFBTSxFQUNOLE9BQU8sRUFDUCxPQUFPLEVBQ1AsU0FBUyxDQUNWO0VBQ0RBLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxDQUFDLElBQUk7SUFDbkJILE9BQU8sQ0FBQ0csQ0FBQyxDQUFDLEdBQUdILE9BQU8sQ0FBQ0csQ0FBQyxDQUFDLElBQUlmLEVBQUUsQ0FBQ2UsQ0FBQyxDQUFDO0lBQ2hDQSxDQUFDLEdBQUdBLENBQUMsR0FBRyxNQUFNO0lBQ2RILE9BQU8sQ0FBQ0csQ0FBQyxDQUFDLEdBQUdILE9BQU8sQ0FBQ0csQ0FBQyxDQUFDLElBQUlmLEVBQUUsQ0FB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