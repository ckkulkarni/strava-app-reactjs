{"version":3,"names":["UPPER_A_CP","codePointAt","UPPER_Z_CP","LOWER_A_CP","LOWER_Z_CP","DIGIT_0_CP","DIGIT_9_CP","module","exports","Char","path","node","parent","isNaN","codePoint","kind","type","isSimpleRange","isPrintableASCIIChar","symbol","String","fromCodePoint","newChar","value","needsEscape","escaped","replace","classRange","from","to","parentType","test"],"sources":["char-code-to-simple-char-transform.js"],"sourcesContent":["/**\n * The MIT License (MIT)\n * Copyright (c) 2017-present Dmitry Soshnikov <dmitry.soshnikov@gmail.com>\n */\n\n'use strict';\n\nvar UPPER_A_CP = 'A'.codePointAt(0);\nvar UPPER_Z_CP = 'Z'.codePointAt(0);\nvar LOWER_A_CP = 'a'.codePointAt(0);\nvar LOWER_Z_CP = 'z'.codePointAt(0);\nvar DIGIT_0_CP = '0'.codePointAt(0);\nvar DIGIT_9_CP = '9'.codePointAt(0);\n\n/**\n * A regexp-tree plugin to transform coded chars into simple chars.\n *\n * \\u0061 -> a\n */\nmodule.exports = {\n  Char: function Char(path) {\n    var node = path.node,\n        parent = path.parent;\n\n    if (isNaN(node.codePoint) || node.kind === 'simple') {\n      return;\n    }\n\n    if (parent.type === 'ClassRange') {\n      if (!isSimpleRange(parent)) {\n        return;\n      }\n    }\n\n    if (!isPrintableASCIIChar(node.codePoint)) {\n      return;\n    }\n\n    var symbol = String.fromCodePoint(node.codePoint);\n    var newChar = {\n      type: 'Char',\n      kind: 'simple',\n      value: symbol,\n      symbol: symbol,\n      codePoint: node.codePoint\n    };\n    if (needsEscape(symbol, parent.type)) {\n      newChar.escaped = true;\n    }\n    path.replace(newChar);\n  }\n};\n\n/**\n * Checks if a range is included either in 0-9, a-z or A-Z\n * @param classRange\n * @returns {boolean}\n */\nfunction isSimpleRange(classRange) {\n  var from = classRange.from,\n      to = classRange.to;\n\n  return from.codePoint >= DIGIT_0_CP && from.codePoint <= DIGIT_9_CP && to.codePoint >= DIGIT_0_CP && to.codePoint <= DIGIT_9_CP || from.codePoint >= UPPER_A_CP && from.codePoint <= UPPER_Z_CP && to.codePoint >= UPPER_A_CP && to.codePoint <= UPPER_Z_CP || from.codePoint >= LOWER_A_CP && from.codePoint <= LOWER_Z_CP && to.codePoint >= LOWER_A_CP && to.codePoint <= LOWER_Z_CP;\n}\n\n/**\n * Checks if a code point in the range of printable ASCII chars\n * (DEL char excluded)\n * @param codePoint\n * @returns {boolean}\n */\nfunction isPrintableASCIIChar(codePoint) {\n  return codePoint >= 0x20 && codePoint <= 0x7e;\n}\n\nfunction needsEscape(symbol, parentType) {\n  if (parentType === 'ClassRange' || parentType === 'CharacterClass') {\n    return (/[\\]\\\\^-]/.test(symbol)\n    );\n  }\n\n  return (/[*[()+?^$./\\\\|{}]/.test(symbol)\n  );\n}"],"mappings":"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"}