8e27c749f42eb3fcaf75f4a5c8c0891a
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useButton;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var React = _interopRequireWildcard(require("react"));
var _utils = require("@mui/utils");
var _extractEventHandlers = _interopRequireDefault(require("../utils/extractEventHandlers"));
function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function (nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}
function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }
  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }
  var cache = _getRequireWildcardCache(nodeInterop);
  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }
  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;
  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;
      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }
  newObj.default = obj;
  if (cache) {
    cache.set(obj, newObj);
  }
  return newObj;
}
/**
 *
 * Demos:
 *
 * - [Unstyled Button](https://mui.com/base/react-button/#hook)
 *
 * API:
 *
 * - [useButton API](https://mui.com/base/api/use-button/)
 */
function useButton(parameters) {
  const {
    disabled = false,
    focusableWhenDisabled,
    href,
    ref: externalRef,
    tabIndex,
    to,
    type
  } = parameters;
  const buttonRef = React.useRef();
  const [active, setActive] = React.useState(false);
  const {
    isFocusVisibleRef,
    onFocus: handleFocusVisible,
    onBlur: handleBlurVisible,
    ref: focusVisibleRef
  } = (0, _utils.unstable_useIsFocusVisible)();
  const [focusVisible, setFocusVisible] = React.useState(false);
  if (disabled && !focusableWhenDisabled && focusVisible) {
    setFocusVisible(false);
  }
  React.useEffect(() => {
    isFocusVisibleRef.current = focusVisible;
  }, [focusVisible, isFocusVisibleRef]);
  const [hostElementName, setHostElementName] = React.useState('');
  const createHandleMouseLeave = otherHandlers => event => {
    var _otherHandlers$onMous;
    if (focusVisible) {
      event.preventDefault();
    }
    (_otherHandlers$onMous = otherHandlers.onMouseLeave) == null ? void 0 : _otherHandlers$onMous.call(otherHandlers, event);
  };
  const createHandleBlur = otherHandlers => event => {
    var _otherHandlers$onBlur;
    handleBlurVisible(event);
    if (isFocusVisibleRef.current === false) {
      setFocusVisible(false);
    }
    (_otherHandlers$onBlur = otherHandlers.onBlur) == null ? void 0 : _otherHandlers$onBlur.call(otherHandlers, event);
  };
  const createHandleFocus = otherHandlers => event => {
    var _otherHandlers$onFocu2;
    // Fix for https://github.com/facebook/react/issues/7769
    if (!buttonRef.current) {
      buttonRef.current = event.currentTarget;
    }
    handleFocusVisible(event);
    if (isFocusVisibleRef.current === true) {
      var _otherHandlers$onFocu;
      setFocusVisible(true);
      (_otherHandlers$onFocu = otherHandlers.onFocusVisible) == null ? void 0 : _otherHandlers$onFocu.call(otherHandlers, event);
    }
    (_otherHandlers$onFocu2 = otherHandlers.onFocus) == null ? void 0 : _otherHandlers$onFocu2.call(otherHandlers, event);
  };
  const isNativeButton = () => {
    const button = buttonRef.current;
    return hostElementName === 'BUTTON' || hostElementName === 'INPUT' && ['button', 'submit', 'reset'].includes(button == null ? void 0 : button.type) || hostElementName === 'A' && (button == null ? void 0 : button.href);
  };
  const createHandleClick = otherHandlers => event => {
    if (!disabled) {
      var _otherHandlers$onClic;
      (_otherHandlers$onClic = otherHandlers.onClick) == null ? void 0 : _otherHandlers$onClic.call(otherHandlers, event);
    }
  };
  const createHandleMouseDown = otherHandlers => event => {
    var _otherHandlers$onMous2;
    if (!disabled) {
      setActive(true);
      document.addEventListener('mouseup', () => {
        setActive(false);
      }, {
        once: true
      });
    }
    (_otherHandlers$onMous2 = otherHandlers.onMouseDown) == null ? void 0 : _otherHandlers$onMous2.call(otherHandlers, event);
  };
  const createHandleKeyDown = otherHandlers => event => {
    var _otherHandlers$onKeyD;
    (_otherHandlers$onKeyD = otherHandlers.onKeyDown) == null ? void 0 : _otherHandlers$onKeyD.call(otherHandlers, event);
    if (event.defaultPrevented) {
      return;
    }
    if (event.target === event.currentTarget && !isNativeButton() && event.key === ' ') {
      event.preventDefault();
    }
    if (event.target === event.currentTarget && event.key === ' ' && !disabled) {
      setActive(true);
    }

    // Keyboard accessibility for non interactive elements
    if (event.target === event.currentTarget && !isNativeButton() && event.key === 'Enter' && !disabled) {
      var _otherHandlers$onClic2;
      (_otherHandlers$onClic2 = otherHandlers.onClick) == null ? void 0 : _otherHandlers$onClic2.call(otherHandlers, event);
      event.preventDefault();
    }
  };
  const createHandleKeyUp = otherHandlers => event => {
    var _otherHandlers$onKeyU;
    // calling preventDefault in keyUp on a <button> will not dispatch a click event if Space is pressed
    // https://codesandbox.io/s/button-keyup-preventdefault-dn7f0

    if (event.target === event.currentTarget) {
      setActive(false);
    }
    (_otherHandlers$onKeyU = otherHandlers.onKeyUp) == null ? void 0 : _otherHandlers$onKeyU.call(otherHandlers, event);

    // Keyboard accessibility for non interactive elements
    if (event.target === event.currentTarget && !isNativeButton() && !disabled && event.key === ' ' && !event.defaultPrevented) {
      var _otherHandlers$onClic3;
      (_otherHandlers$onClic3 = otherHandlers.onClick) == null ? void 0 : _otherHandlers$onClic3.call(otherHandlers, event);
    }
  };
  const updateHostElementName = React.useCallback(instance => {
    var _instance$tagName;
    setHostElementName((_instance$tagName = instance == null ? void 0 : instance.tagName) != null ? _instance$tagName : '');
  }, []);
  const handleRef = (0, _utils.unstable_useForkRef)(updateHostElementName, externalRef, focusVisibleRef, buttonRef);
  const buttonProps = {};
  if (hostElementName === 'BUTTON') {
    buttonProps.type = type != null ? type : 'button';
    if (focusableWhenDisabled) {
      buttonProps['aria-disabled'] = disabled;
    } else {
      buttonProps.disabled = disabled;
    }
  } else if (hostElementName !== '') {
    if (!href && !to) {
      buttonProps.role = 'button';
      buttonProps.tabIndex = tabIndex != null ? tabIndex : 0;
    }
    if (disabled) {
      buttonProps['aria-disabled'] = disabled;
      buttonProps.tabIndex = focusableWhenDisabled ? tabIndex != null ? tabIndex : 0 : -1;
    }
  }
  const getRootProps = (otherHandlers = {}) => {
    const propsEventHandlers = (0, _extractEventHandlers.default)(parameters);
    const externalEventHandlers = (0, _extends2.default)({}, propsEventHandlers, otherHandlers);

    // onFocusVisible can be present on the props, but since it's not a valid React event handler,
    // it must not be forwarded to the inner component.
    delete externalEventHandlers.onFocusVisible;
    return (0, _extends2.default)({
      type
    }, externalEventHandlers, buttonProps, {
      onBlur: createHandleBlur(externalEventHandlers),
      onClick: createHandleClick(externalEventHandlers),
      onFocus: createHandleFocus(externalEventHandlers),
      onKeyDown: createHandleKeyDown(externalEventHandlers),
      onKeyUp: createHandleKeyUp(externalEventHandlers),
      onMouseDown: createHandleMouseDown(externalEventHandlers),
      onMouseLeave: createHandleMouseLeave(externalEventHandlers),
      ref: handleRef
    });
  };
  return {
    getRootProps,
    focusVisible,
    setFocusVisible,
    disabled,
    active
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsInVzZUJ1dHRvbiIsIl9leHRlbmRzMiIsIlJlYWN0IiwiX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiLCJfdXRpbHMiLCJfZXh0cmFjdEV2ZW50SGFuZGxlcnMiLCJfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUiLCJub2RlSW50ZXJvcCIsIldlYWtNYXAiLCJjYWNoZUJhYmVsSW50ZXJvcCIsImNhY2hlTm9kZUludGVyb3AiLCJvYmoiLCJfX2VzTW9kdWxlIiwiY2FjaGUiLCJoYXMiLCJnZXQiLCJuZXdPYmoiLCJoYXNQcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwicGFyYW1ldGVycyIsImRpc2FibGVkIiwiZm9jdXNhYmxlV2hlbkRpc2FibGVkIiwiaHJlZiIsInJlZiIsImV4dGVybmFsUmVmIiwidGFiSW5kZXgiLCJ0byIsInR5cGUiLCJidXR0b25SZWYiLCJ1c2VSZWYiLCJhY3RpdmUiLCJzZXRBY3RpdmUiLCJ1c2VTdGF0ZSIsImlzRm9jdXNWaXNpYmxlUmVmIiwib25Gb2N1cyIsImhhbmRsZUZvY3VzVmlzaWJsZSIsIm9uQmx1ciIsImhhbmRsZUJsdXJWaXNpYmxlIiwiZm9jdXNWaXNpYmxlUmVmIiwidW5zdGFibGVfdXNlSXNGb2N1c1Zpc2libGUiLCJmb2N1c1Zpc2libGUiLCJzZXRGb2N1c1Zpc2libGUiLCJ1c2VFZmZlY3QiLCJjdXJyZW50IiwiaG9zdEVsZW1lbnROYW1lIiwic2V0SG9zdEVsZW1lbnROYW1lIiwiY3JlYXRlSGFuZGxlTW91c2VMZWF2ZSIsIm90aGVySGFuZGxlcnMiLCJldmVudCIsIl9vdGhlckhhbmRsZXJzJG9uTW91cyIsInByZXZlbnREZWZhdWx0Iiwib25Nb3VzZUxlYXZlIiwiY3JlYXRlSGFuZGxlQmx1ciIsIl9vdGhlckhhbmRsZXJzJG9uQmx1ciIsImNyZWF0ZUhhbmRsZUZvY3VzIiwiX290aGVySGFuZGxlcnMkb25Gb2N1MiIsImN1cnJlbnRUYXJnZXQiLCJfb3RoZXJIYW5kbGVycyRvbkZvY3UiLCJvbkZvY3VzVmlzaWJsZSIsImlzTmF0aXZlQnV0dG9uIiwiYnV0dG9uIiwiaW5jbHVkZXMiLCJjcmVhdGVIYW5kbGVDbGljayIsIl9vdGhlckhhbmRsZXJzJG9uQ2xpYyIsIm9uQ2xpY2siLCJjcmVhdGVIYW5kbGVNb3VzZURvd24iLCJfb3RoZXJIYW5kbGVycyRvbk1vdXMyIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsIm9uTW91c2VEb3duIiwiY3JlYXRlSGFuZGxlS2V5RG93biIsIl9vdGhlckhhbmRsZXJzJG9uS2V5RCIsIm9uS2V5RG93biIsImRlZmF1bHRQcmV2ZW50ZWQiLCJ0YXJnZXQiLCJfb3RoZXJIYW5kbGVycyRvbkNsaWMyIiwiY3JlYXRlSGFuZGxlS2V5VXAiLCJfb3RoZXJIYW5kbGVycyRvbktleVUiLCJvbktleVVwIiwiX290aGVySGFuZGxlcnMkb25DbGljMyIsInVwZGF0ZUhvc3RFbGVtZW50TmFtZSIsInVzZUNhbGxiYWNrIiwiaW5zdGFuY2UiLCJfaW5zdGFuY2UkdGFnTmFtZSIsInRhZ05hbWUiLCJoYW5kbGVSZWYiLCJ1bnN0YWJsZV91c2VGb3JrUmVmIiwiYnV0dG9uUHJvcHMiLCJyb2xlIiwiZ2V0Um9vdFByb3BzIiwicHJvcHNFdmVudEhhbmRsZXJzIiwiZXh0ZXJuYWxFdmVudEhhbmRsZXJzIl0sInNvdXJjZXMiOlsidXNlQnV0dG9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdFwiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSB1c2VCdXR0b247XG52YXIgX2V4dGVuZHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9leHRlbmRzXCIpKTtcbnZhciBSZWFjdCA9IF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIkBtdWkvdXRpbHNcIik7XG52YXIgX2V4dHJhY3RFdmVudEhhbmRsZXJzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vdXRpbHMvZXh0cmFjdEV2ZW50SGFuZGxlcnNcIikpO1xuZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7IGlmICh0eXBlb2YgV2Vha01hcCAhPT0gXCJmdW5jdGlvblwiKSByZXR1cm4gbnVsbDsgdmFyIGNhY2hlQmFiZWxJbnRlcm9wID0gbmV3IFdlYWtNYXAoKTsgdmFyIGNhY2hlTm9kZUludGVyb3AgPSBuZXcgV2Vha01hcCgpOyByZXR1cm4gKF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSA9IGZ1bmN0aW9uIChub2RlSW50ZXJvcCkgeyByZXR1cm4gbm9kZUludGVyb3AgPyBjYWNoZU5vZGVJbnRlcm9wIDogY2FjaGVCYWJlbEludGVyb3A7IH0pKG5vZGVJbnRlcm9wKTsgfVxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlV2lsZGNhcmQob2JqLCBub2RlSW50ZXJvcCkgeyBpZiAoIW5vZGVJbnRlcm9wICYmIG9iaiAmJiBvYmouX19lc01vZHVsZSkgeyByZXR1cm4gb2JqOyB9IGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgZGVmYXVsdDogb2JqIH07IH0gdmFyIGNhY2hlID0gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKTsgaWYgKGNhY2hlICYmIGNhY2hlLmhhcyhvYmopKSB7IHJldHVybiBjYWNoZS5nZXQob2JqKTsgfSB2YXIgbmV3T2JqID0ge307IHZhciBoYXNQcm9wZXJ0eURlc2NyaXB0b3IgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkgJiYgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjsgZm9yICh2YXIga2V5IGluIG9iaikgeyBpZiAoa2V5ICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7IHZhciBkZXNjID0gaGFzUHJvcGVydHlEZXNjcmlwdG9yID8gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSkgOiBudWxsOyBpZiAoZGVzYyAmJiAoZGVzYy5nZXQgfHwgZGVzYy5zZXQpKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXdPYmosIGtleSwgZGVzYyk7IH0gZWxzZSB7IG5ld09ialtrZXldID0gb2JqW2tleV07IH0gfSB9IG5ld09iai5kZWZhdWx0ID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG4vKipcbiAqXG4gKiBEZW1vczpcbiAqXG4gKiAtIFtVbnN0eWxlZCBCdXR0b25dKGh0dHBzOi8vbXVpLmNvbS9iYXNlL3JlYWN0LWJ1dHRvbi8jaG9vaylcbiAqXG4gKiBBUEk6XG4gKlxuICogLSBbdXNlQnV0dG9uIEFQSV0oaHR0cHM6Ly9tdWkuY29tL2Jhc2UvYXBpL3VzZS1idXR0b24vKVxuICovXG5mdW5jdGlvbiB1c2VCdXR0b24ocGFyYW1ldGVycykge1xuICBjb25zdCB7XG4gICAgZGlzYWJsZWQgPSBmYWxzZSxcbiAgICBmb2N1c2FibGVXaGVuRGlzYWJsZWQsXG4gICAgaHJlZixcbiAgICByZWY6IGV4dGVybmFsUmVmLFxuICAgIHRhYkluZGV4LFxuICAgIHRvLFxuICAgIHR5cGVcbiAgfSA9IHBhcmFtZXRlcnM7XG4gIGNvbnN0IGJ1dHRvblJlZiA9IFJlYWN0LnVzZVJlZigpO1xuICBjb25zdCBbYWN0aXZlLCBzZXRBY3RpdmVdID0gUmVhY3QudXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCB7XG4gICAgaXNGb2N1c1Zpc2libGVSZWYsXG4gICAgb25Gb2N1czogaGFuZGxlRm9jdXNWaXNpYmxlLFxuICAgIG9uQmx1cjogaGFuZGxlQmx1clZpc2libGUsXG4gICAgcmVmOiBmb2N1c1Zpc2libGVSZWZcbiAgfSA9ICgwLCBfdXRpbHMudW5zdGFibGVfdXNlSXNGb2N1c1Zpc2libGUpKCk7XG4gIGNvbnN0IFtmb2N1c1Zpc2libGUsIHNldEZvY3VzVmlzaWJsZV0gPSBSZWFjdC51c2VTdGF0ZShmYWxzZSk7XG4gIGlmIChkaXNhYmxlZCAmJiAhZm9jdXNhYmxlV2hlbkRpc2FibGVkICYmIGZvY3VzVmlzaWJsZSkge1xuICAgIHNldEZvY3VzVmlzaWJsZShmYWxzZSk7XG4gIH1cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICBpc0ZvY3VzVmlzaWJsZVJlZi5jdXJyZW50ID0gZm9jdXNWaXNpYmxlO1xuICB9LCBbZm9jdXNWaXNpYmxlLCBpc0ZvY3VzVmlzaWJsZVJlZl0pO1xuICBjb25zdCBbaG9zdEVsZW1lbnROYW1lLCBzZXRIb3N0RWxlbWVudE5hbWVdID0gUmVhY3QudXNlU3RhdGUoJycpO1xuICBjb25zdCBjcmVhdGVIYW5kbGVNb3VzZUxlYXZlID0gb3RoZXJIYW5kbGVycyA9PiBldmVudCA9PiB7XG4gICAgdmFyIF9vdGhlckhhbmRsZXJzJG9uTW91cztcbiAgICBpZiAoZm9jdXNWaXNpYmxlKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICAoX290aGVySGFuZGxlcnMkb25Nb3VzID0gb3RoZXJIYW5kbGVycy5vbk1vdXNlTGVhdmUpID09IG51bGwgPyB2b2lkIDAgOiBfb3RoZXJIYW5kbGVycyRvbk1vdXMuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUhhbmRsZUJsdXIgPSBvdGhlckhhbmRsZXJzID0+IGV2ZW50ID0+IHtcbiAgICB2YXIgX290aGVySGFuZGxlcnMkb25CbHVyO1xuICAgIGhhbmRsZUJsdXJWaXNpYmxlKGV2ZW50KTtcbiAgICBpZiAoaXNGb2N1c1Zpc2libGVSZWYuY3VycmVudCA9PT0gZmFsc2UpIHtcbiAgICAgIHNldEZvY3VzVmlzaWJsZShmYWxzZSk7XG4gICAgfVxuICAgIChfb3RoZXJIYW5kbGVycyRvbkJsdXIgPSBvdGhlckhhbmRsZXJzLm9uQmx1cikgPT0gbnVsbCA/IHZvaWQgMCA6IF9vdGhlckhhbmRsZXJzJG9uQmx1ci5jYWxsKG90aGVySGFuZGxlcnMsIGV2ZW50KTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlSGFuZGxlRm9jdXMgPSBvdGhlckhhbmRsZXJzID0+IGV2ZW50ID0+IHtcbiAgICB2YXIgX290aGVySGFuZGxlcnMkb25Gb2N1MjtcbiAgICAvLyBGaXggZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvNzc2OVxuICAgIGlmICghYnV0dG9uUmVmLmN1cnJlbnQpIHtcbiAgICAgIGJ1dHRvblJlZi5jdXJyZW50ID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICB9XG4gICAgaGFuZGxlRm9jdXNWaXNpYmxlKGV2ZW50KTtcbiAgICBpZiAoaXNGb2N1c1Zpc2libGVSZWYuY3VycmVudCA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIF9vdGhlckhhbmRsZXJzJG9uRm9jdTtcbiAgICAgIHNldEZvY3VzVmlzaWJsZSh0cnVlKTtcbiAgICAgIChfb3RoZXJIYW5kbGVycyRvbkZvY3UgPSBvdGhlckhhbmRsZXJzLm9uRm9jdXNWaXNpYmxlKSA9PSBudWxsID8gdm9pZCAwIDogX290aGVySGFuZGxlcnMkb25Gb2N1LmNhbGwob3RoZXJIYW5kbGVycywgZXZlbnQpO1xuICAgIH1cbiAgICAoX290aGVySGFuZGxlcnMkb25Gb2N1MiA9IG90aGVySGFuZGxlcnMub25Gb2N1cykgPT0gbnVsbCA/IHZvaWQgMCA6IF9vdGhlckhhbmRsZXJzJG9uRm9jdTIuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG4gIH07XG4gIGNvbnN0IGlzTmF0aXZlQnV0dG9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGJ1dHRvblJlZi5jdXJyZW50O1xuICAgIHJldHVybiBob3N0RWxlbWVudE5hbWUgPT09ICdCVVRUT04nIHx8IGhvc3RFbGVtZW50TmFtZSA9PT0gJ0lOUFVUJyAmJiBbJ2J1dHRvbicsICdzdWJtaXQnLCAncmVzZXQnXS5pbmNsdWRlcyhidXR0b24gPT0gbnVsbCA/IHZvaWQgMCA6IGJ1dHRvbi50eXBlKSB8fCBob3N0RWxlbWVudE5hbWUgPT09ICdBJyAmJiAoYnV0dG9uID09IG51bGwgPyB2b2lkIDAgOiBidXR0b24uaHJlZik7XG4gIH07XG4gIGNvbnN0IGNyZWF0ZUhhbmRsZUNsaWNrID0gb3RoZXJIYW5kbGVycyA9PiBldmVudCA9PiB7XG4gICAgaWYgKCFkaXNhYmxlZCkge1xuICAgICAgdmFyIF9vdGhlckhhbmRsZXJzJG9uQ2xpYztcbiAgICAgIChfb3RoZXJIYW5kbGVycyRvbkNsaWMgPSBvdGhlckhhbmRsZXJzLm9uQ2xpY2spID09IG51bGwgPyB2b2lkIDAgOiBfb3RoZXJIYW5kbGVycyRvbkNsaWMuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVIYW5kbGVNb3VzZURvd24gPSBvdGhlckhhbmRsZXJzID0+IGV2ZW50ID0+IHtcbiAgICB2YXIgX290aGVySGFuZGxlcnMkb25Nb3VzMjtcbiAgICBpZiAoIWRpc2FibGVkKSB7XG4gICAgICBzZXRBY3RpdmUodHJ1ZSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKCkgPT4ge1xuICAgICAgICBzZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgfSwge1xuICAgICAgICBvbmNlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gICAgKF9vdGhlckhhbmRsZXJzJG9uTW91czIgPSBvdGhlckhhbmRsZXJzLm9uTW91c2VEb3duKSA9PSBudWxsID8gdm9pZCAwIDogX290aGVySGFuZGxlcnMkb25Nb3VzMi5jYWxsKG90aGVySGFuZGxlcnMsIGV2ZW50KTtcbiAgfTtcbiAgY29uc3QgY3JlYXRlSGFuZGxlS2V5RG93biA9IG90aGVySGFuZGxlcnMgPT4gZXZlbnQgPT4ge1xuICAgIHZhciBfb3RoZXJIYW5kbGVycyRvbktleUQ7XG4gICAgKF9vdGhlckhhbmRsZXJzJG9uS2V5RCA9IG90aGVySGFuZGxlcnMub25LZXlEb3duKSA9PSBudWxsID8gdm9pZCAwIDogX290aGVySGFuZGxlcnMkb25LZXlELmNhbGwob3RoZXJIYW5kbGVycywgZXZlbnQpO1xuICAgIGlmIChldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQgJiYgIWlzTmF0aXZlQnV0dG9uKCkgJiYgZXZlbnQua2V5ID09PSAnICcpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQgJiYgZXZlbnQua2V5ID09PSAnICcgJiYgIWRpc2FibGVkKSB7XG4gICAgICBzZXRBY3RpdmUodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gS2V5Ym9hcmQgYWNjZXNzaWJpbGl0eSBmb3Igbm9uIGludGVyYWN0aXZlIGVsZW1lbnRzXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gZXZlbnQuY3VycmVudFRhcmdldCAmJiAhaXNOYXRpdmVCdXR0b24oKSAmJiBldmVudC5rZXkgPT09ICdFbnRlcicgJiYgIWRpc2FibGVkKSB7XG4gICAgICB2YXIgX290aGVySGFuZGxlcnMkb25DbGljMjtcbiAgICAgIChfb3RoZXJIYW5kbGVycyRvbkNsaWMyID0gb3RoZXJIYW5kbGVycy5vbkNsaWNrKSA9PSBudWxsID8gdm9pZCAwIDogX290aGVySGFuZGxlcnMkb25DbGljMi5jYWxsKG90aGVySGFuZGxlcnMsIGV2ZW50KTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjcmVhdGVIYW5kbGVLZXlVcCA9IG90aGVySGFuZGxlcnMgPT4gZXZlbnQgPT4ge1xuICAgIHZhciBfb3RoZXJIYW5kbGVycyRvbktleVU7XG4gICAgLy8gY2FsbGluZyBwcmV2ZW50RGVmYXVsdCBpbiBrZXlVcCBvbiBhIDxidXR0b24+IHdpbGwgbm90IGRpc3BhdGNoIGEgY2xpY2sgZXZlbnQgaWYgU3BhY2UgaXMgcHJlc3NlZFxuICAgIC8vIGh0dHBzOi8vY29kZXNhbmRib3guaW8vcy9idXR0b24ta2V5dXAtcHJldmVudGRlZmF1bHQtZG43ZjBcblxuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHNldEFjdGl2ZShmYWxzZSk7XG4gICAgfVxuICAgIChfb3RoZXJIYW5kbGVycyRvbktleVUgPSBvdGhlckhhbmRsZXJzLm9uS2V5VXApID09IG51bGwgPyB2b2lkIDAgOiBfb3RoZXJIYW5kbGVycyRvbktleVUuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG5cbiAgICAvLyBLZXlib2FyZCBhY2Nlc3NpYmlsaXR5IGZvciBub24gaW50ZXJhY3RpdmUgZWxlbWVudHNcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0ICYmICFpc05hdGl2ZUJ1dHRvbigpICYmICFkaXNhYmxlZCAmJiBldmVudC5rZXkgPT09ICcgJyAmJiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgdmFyIF9vdGhlckhhbmRsZXJzJG9uQ2xpYzM7XG4gICAgICAoX290aGVySGFuZGxlcnMkb25DbGljMyA9IG90aGVySGFuZGxlcnMub25DbGljaykgPT0gbnVsbCA/IHZvaWQgMCA6IF9vdGhlckhhbmRsZXJzJG9uQ2xpYzMuY2FsbChvdGhlckhhbmRsZXJzLCBldmVudCk7XG4gICAgfVxuICB9O1xuICBjb25zdCB1cGRhdGVIb3N0RWxlbWVudE5hbWUgPSBSZWFjdC51c2VDYWxsYmFjayhpbnN0YW5jZSA9PiB7XG4gICAgdmFyIF9pbnN0YW5jZSR0YWdOYW1lO1xuICAgIHNldEhvc3RFbGVtZW50TmFtZSgoX2luc3RhbmNlJHRhZ05hbWUgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudGFnTmFtZSkgIT0gbnVsbCA/IF9pbnN0YW5jZSR0YWdOYW1lIDogJycpO1xuICB9LCBbXSk7XG4gIGNvbnN0IGhhbmRsZVJlZiA9ICgwLCBfdXRpbHMudW5zdGFibGVfdXNlRm9ya1JlZikodXBkYXRlSG9zdEVsZW1lbnROYW1lLCBleHRlcm5hbFJlZiwgZm9jdXNWaXNpYmxlUmVmLCBidXR0b25SZWYpO1xuICBjb25zdCBidXR0b25Qcm9wcyA9IHt9O1xuICBpZiAoaG9zdEVsZW1lbnROYW1lID09PSAnQlVUVE9OJykge1xuICAgIGJ1dHRvblByb3BzLnR5cGUgPSB0eXBlICE9IG51bGwgPyB0eXBlIDogJ2J1dHRvbic7XG4gICAgaWYgKGZvY3VzYWJsZVdoZW5EaXNhYmxlZCkge1xuICAgICAgYnV0dG9uUHJvcHNbJ2FyaWEtZGlzYWJsZWQnXSA9IGRpc2FibGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25Qcm9wcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xuICAgIH1cbiAgfSBlbHNlIGlmIChob3N0RWxlbWVudE5hbWUgIT09ICcnKSB7XG4gICAgaWYgKCFocmVmICYmICF0bykge1xuICAgICAgYnV0dG9uUHJvcHMucm9sZSA9ICdidXR0b24nO1xuICAgICAgYnV0dG9uUHJvcHMudGFiSW5kZXggPSB0YWJJbmRleCAhPSBudWxsID8gdGFiSW5kZXggOiAwO1xuICAgIH1cbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIGJ1dHRvblByb3BzWydhcmlhLWRpc2FibGVkJ10gPSBkaXNhYmxlZDtcbiAgICAgIGJ1dHRvblByb3BzLnRhYkluZGV4ID0gZm9jdXNhYmxlV2hlbkRpc2FibGVkID8gdGFiSW5kZXggIT0gbnVsbCA/IHRhYkluZGV4IDogMCA6IC0xO1xuICAgIH1cbiAgfVxuICBjb25zdCBnZXRSb290UHJvcHMgPSAob3RoZXJIYW5kbGVycyA9IHt9KSA9PiB7XG4gICAgY29uc3QgcHJvcHNFdmVudEhhbmRsZXJzID0gKDAsIF9leHRyYWN0RXZlbnRIYW5kbGVycy5kZWZhdWx0KShwYXJhbWV0ZXJzKTtcbiAgICBjb25zdCBleHRlcm5hbEV2ZW50SGFuZGxlcnMgPSAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBwcm9wc0V2ZW50SGFuZGxlcnMsIG90aGVySGFuZGxlcnMpO1xuXG4gICAgLy8gb25Gb2N1c1Zpc2libGUgY2FuIGJlIHByZXNlbnQgb24gdGhlIHByb3BzLCBidXQgc2luY2UgaXQncyBub3QgYSB2YWxpZCBSZWFjdCBldmVudCBoYW5kbGVyLFxuICAgIC8vIGl0IG11c3Qgbm90IGJlIGZvcndhcmRlZCB0byB0aGUgaW5uZXIgY29tcG9uZW50LlxuICAgIGRlbGV0ZSBleHRlcm5hbEV2ZW50SGFuZGxlcnMub25Gb2N1c1Zpc2libGU7XG4gICAgcmV0dXJuICgwLCBfZXh0ZW5kczIuZGVmYXVsdCkoe1xuICAgICAgdHlwZVxuICAgIH0sIGV4dGVybmFsRXZlbnRIYW5kbGVycywgYnV0dG9uUHJvcHMsIHtcbiAgICAgIG9uQmx1cjogY3JlYXRlSGFuZGxlQmx1cihleHRlcm5hbEV2ZW50SGFuZGxlcnMpLFxuICAgICAgb25DbGljazogY3JlYXRlSGFuZGxlQ2xpY2soZXh0ZXJuYWxFdmVudEhhbmRsZXJzKSxcbiAgICAgIG9uRm9jdXM6IGNyZWF0ZUhhbmRsZUZvY3VzKGV4dGVybmFsRXZlbnRIYW5kbGVycyksXG4gICAgICBvbktleURvd246IGNyZWF0ZUhhbmRsZUtleURvd24oZXh0ZXJuYWxFdmVudEhhbmRsZXJzKSxcbiAgICAgIG9uS2V5VXA6IGNyZWF0ZUhhbmRsZUtleVVwKGV4dGVybmFsRXZlbnRIYW5kbGVycyksXG4gICAgICBvbk1vdXNlRG93bjogY3JlYXRlSGFuZGxlTW91c2VEb3duKGV4dGVybmFsRXZlbnRIYW5kbGVycyksXG4gICAgICBvbk1vdXNlTGVhdmU6IGNyZWF0ZUhhbmRsZU1vdXNlTGVhdmUoZXh0ZXJuYWxFdmVudEhhbmRsZXJzKSxcbiAgICAgIHJlZjogaGFuZGxlUmVmXG4gICAgfSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ2V0Um9vdFByb3BzLFxuICAgIGZvY3VzVmlzaWJsZSxcbiAgICBzZXRGb2N1c1Zpc2libGUsXG4gICAgZGlzYWJsZWQsXG4gICAgYWN0aXZlXG4gIH07XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsOENBQThDLENBQUM7QUFDcEZDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxPQUFPLEdBQUdDLFNBQVM7QUFDM0IsSUFBSUMsU0FBUyxHQUFHUixzQkFBc0IsQ0FBQ0MsT0FBTyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7QUFDakYsSUFBSVEsS0FBSyxHQUFHQyx1QkFBdUIsQ0FBQ1QsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3JELElBQUlVLE1BQU0sR0FBR1YsT0FBTyxDQUFDLFlBQVksQ0FBQztBQUNsQyxJQUFJVyxxQkFBcUIsR0FBR1osc0JBQXNCLENBQUNDLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQzVGLFNBQVNZLHdCQUF3QkEsQ0FBQ0MsV0FBVyxFQUFFO0VBQUUsSUFBSSxPQUFPQyxPQUFPLEtBQUssVUFBVSxFQUFFLE9BQU8sSUFBSTtFQUFFLElBQUlDLGlCQUFpQixH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