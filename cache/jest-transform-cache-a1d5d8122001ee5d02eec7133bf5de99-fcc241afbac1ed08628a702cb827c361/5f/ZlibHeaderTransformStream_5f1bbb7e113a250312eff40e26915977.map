{"version":3,"names":["Object","defineProperty","exports","value","default","_stream","_interopRequireDefault","require","obj","__esModule","ZlibHeaderTransformStream","stream","Transform","__transform","chunk","encoding","callback","push","_transform","length","header","Buffer","alloc","_default"],"sources":["ZlibHeaderTransformStream.js"],"sourcesContent":["\"use strict\";\n\nimport stream from \"stream\";\n\nclass ZlibHeaderTransformStream extends stream.Transform {\n  __transform(chunk, encoding, callback) {\n    this.push(chunk);\n    callback();\n  }\n\n  _transform(chunk, encoding, callback) {\n    if (chunk.length !== 0) {\n      this._transform = this.__transform;\n\n      // Add Default Compression headers if no zlib headers are present\n      if (chunk[0] !== 120) { // Hex: 78\n        const header = Buffer.alloc(2);\n        header[0] = 120; // Hex: 78\n        header[1] = 156; // Hex: 9C \n        this.push(header, encoding);\n      }\n    }\n\n    this.__transform(chunk, encoding, callback);\n  }\n}\n\nexport default ZlibHeaderTransformStream;\n"],"mappings":"AAAA,YAAY;;AAACA,MAAA,CAAAC,cAAA,CAAAC,OAAA;EAAAC,KAAA;AAAA;AAAAD,OAAA,CAAAE,OAAA;AAEb,IAAAC,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA4B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAJ,OAAA,EAAAI,GAAA;AAE5B,MAAME,yBAAyB,SAASC,eAAM,CAACC,SAAS,CAAC;EACvDC,WAAWA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IACrC,IAAI,CAACC,IAAI,CAACH,KAAK,CAAC;IAChBE,QAAQ,EAAE;EACZ;EAEAE,UAAUA,CAACJ,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IACpC,IAAIF,KAAK,CAACK,MAAM,KAAK,CAAC,EAAE;MACtB,IAAI,CAACD,UAAU,GAAG,IAAI,CAACL,WAAW;;MAElC;MACA,IAAIC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;QAAE;QACtB,MAAMM,MAAM,GAAGC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;QAC9BF,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QACjBA,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;QACjB,IAAI,CAACH,IAAI,CAACG,MAAM,EAAEL,QAAQ,CAAC;MAC7B;IACF;IAEA,IAAI,CAACF,WAAW,CAACC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,CAAC;EAC7C;AACF;AAAC,IAAAO,QAAA,GAEcb,yBAAyB;AAAAR,OAAA,CAAAE,OAAA,GAAAmB,QAAA"}