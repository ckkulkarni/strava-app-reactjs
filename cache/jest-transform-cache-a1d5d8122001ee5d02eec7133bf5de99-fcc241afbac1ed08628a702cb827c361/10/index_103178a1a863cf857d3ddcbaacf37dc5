8467aaa0454600e883419b5a7cf6b098
"use strict";

var url = require("url");
var URL = url.URL;
var http = require("http");
var https = require("https");
var Writable = require("stream").Writable;
var assert = require("assert");
var debug = require("./debug");

// Create handlers that pass events from native requests
var events = ["abort", "aborted", "connect", "error", "socket", "timeout"];
var eventHandlers = Object.create(null);
events.forEach(function (event) {
  eventHandlers[event] = function (arg1, arg2, arg3) {
    this._redirectable.emit(event, arg1, arg2, arg3);
  };
});
var InvalidUrlError = createErrorType("ERR_INVALID_URL", "Invalid URL", TypeError);
// Error types with codes
var RedirectionError = createErrorType("ERR_FR_REDIRECTION_FAILURE", "Redirected request failed");
var TooManyRedirectsError = createErrorType("ERR_FR_TOO_MANY_REDIRECTS", "Maximum number of redirects exceeded");
var MaxBodyLengthExceededError = createErrorType("ERR_FR_MAX_BODY_LENGTH_EXCEEDED", "Request body larger than maxBodyLength limit");
var WriteAfterEndError = createErrorType("ERR_STREAM_WRITE_AFTER_END", "write after end");

// An HTTP(S) request that can be redirected
function RedirectableRequest(options, responseCallback) {
  // Initialize the request
  Writable.call(this);
  this._sanitizeOptions(options);
  this._options = options;
  this._ended = false;
  this._ending = false;
  this._redirectCount = 0;
  this._redirects = [];
  this._requestBodyLength = 0;
  this._requestBodyBuffers = [];

  // Attach a callback if passed
  if (responseCallback) {
    this.on("response", responseCallback);
  }

  // React to responses of native requests
  var self = this;
  this._onNativeResponse = function (response) {
    self._processResponse(response);
  };

  // Perform the first request
  this._performRequest();
}
RedirectableRequest.prototype = Object.create(Writable.prototype);
RedirectableRequest.prototype.abort = function () {
  abortRequest(this._currentRequest);
  this.emit("abort");
};

// Writes buffered data to the current native request
RedirectableRequest.prototype.write = function (data, encoding, callback) {
  // Writing is not allowed if end has been called
  if (this._ending) {
    throw new WriteAfterEndError();
  }

  // Validate input and shift parameters if necessary
  if (!isString(data) && !isBuffer(data)) {
    throw new TypeError("data should be a string, Buffer or Uint8Array");
  }
  if (isFunction(encoding)) {
    callback = encoding;
    encoding = null;
  }

  // Ignore empty buffers, since writing them doesn't invoke the callback
  // https://github.com/nodejs/node/issues/22066
  if (data.length === 0) {
    if (callback) {
      callback();
    }
    return;
  }
  // Only write when we don't exceed the maximum body length
  if (this._requestBodyLength + data.length <= this._options.maxBodyLength) {
    this._requestBodyLength += data.length;
    this._requestBodyBuffers.push({
      data: data,
      encoding: encoding
    });
    this._currentRequest.write(data, encoding, callback);
  }
  // Error when we exceed the maximum body length
  else {
    this.emit("error", new MaxBodyLengthExceededError());
    this.abort();
  }
};

// Ends the current native request
RedirectableRequest.prototype.end = function (data, encoding, callback) {
  // Shift parameters if necessary
  if (isFunction(data)) {
    callback = data;
    data = encoding = null;
  } else if (isFunction(encoding)) {
    callback = encoding;
    encoding = null;
  }

  // Write data if needed and end
  if (!data) {
    this._ended = this._ending = true;
    this._currentRequest.end(null, null, callback);
  } else {
    var self = this;
    var currentRequest = this._currentRequest;
    this.write(data, encoding, function () {
      self._ended = true;
      currentRequest.end(null, null, callback);
    });
    this._ending = true;
  }
};

// Sets a header value on the current native request
RedirectableRequest.prototype.setHeader = function (name, value) {
  this._options.headers[name] = value;
  this._currentRequest.setHeader(name, value);
};

// Clears a header value on the current native request
RedirectableRequest.prototype.removeHeader = function (name) {
  delete this._options.headers[name];
  this._currentRequest.removeHeader(name);
};

// Global timeout for all underlying requests
RedirectableRequest.prototype.setTimeout = function (msecs, callback) {
  var self = this;

  // Destroys the socket on timeout
  function destroyOnTimeout(socket) {
    socket.setTimeout(msecs);
    socket.removeListener("timeout", socket.destroy);
    socket.addListener("timeout", socket.destroy);
  }

  // Sets up a timer to trigger a timeout event
  function startTimer(socket) {
    if (self._timeout) {
      clearTimeout(self._timeout);
    }
    self._timeout = setTimeout(function () {
      self.emit("timeout");
      clearTimer();
    }, msecs);
    destroyOnTimeout(socket);
  }

  // Stops a timeout from triggering
  function clearTimer() {
    // Clear the timeout
    if (self._timeout) {
      clearTimeout(self._timeout);
      self._timeout = null;
    }

    // Clean up all attached listeners
    self.removeListener("abort", clearTimer);
    self.removeListener("error", clearTimer);
    self.removeListener("response", clearTimer);
    if (callback) {
      self.removeListener("timeout", callback);
    }
    if (!self.socket) {
      self._currentRequest.removeListener("socket", startTimer);
    }
  }

  // Attach callback if passed
  if (callback) {
    this.on("timeout", callback);
  }

  // Start the timer if or when the socket is opened
  if (this.socket) {
    startTimer(this.socket);
  } else {
    this._currentRequest.once("socket", startTimer);
  }

  // Clean up on events
  this.on("socket", destroyOnTimeout);
  this.on("abort", clearTimer);
  this.on("error", clearTimer);
  this.on("response", clearTimer);
  return this;
};

// Proxy all other public ClientRequest methods
["flushHeaders", "getHeader", "setNoDelay", "setSocketKeepAlive"].forEach(function (method) {
  RedirectableRequest.prototype[method] = function (a, b) {
    return this._currentRequest[method](a, b);
  };
});

// Proxy all public ClientRequest properties
["aborted", "connection", "socket"].forEach(function (property) {
  Object.defineProperty(RedirectableRequest.prototype, property, {
    get: function () {
      return this._currentRequest[property];
    }
  });
});
RedirectableRequest.prototype._sanitizeOptions = function (options) {
  // Ensure headers are always present
  if (!options.headers) {
    options.headers = {};
  }

  // Since http.request treats host as an alias of hostname,
  // but the url module interprets host as hostname plus port,
  // eliminate the host property to avoid confusion.
  if (options.host) {
    // Use hostname if set, because it has precedence
    if (!options.hostname) {
      options.hostname = options.host;
    }
    delete options.host;
  }

  // Complete the URL object when necessary
  if (!options.pathname && options.path) {
    var searchPos = options.path.indexOf("?");
    if (searchPos < 0) {
      options.pathname = options.path;
    } else {
      options.pathname = options.path.substring(0, searchPos);
      options.search = options.path.substring(searchPos);
    }
  }
};

// Executes the next native request (initial or redirect)
RedirectableRequest.prototype._performRequest = function () {
  // Load the native protocol
  var protocol = this._options.protocol;
  var nativeProtocol = this._options.nativeProtocols[protocol];
  if (!nativeProtocol) {
    this.emit("error", new TypeError("Unsupported protocol " + protocol));
    return;
  }

  // If specified, use the agent corresponding to the protocol
  // (HTTP and HTTPS use different types of agents)
  if (this._options.agents) {
    var scheme = protocol.slice(0, -1);
    this._options.agent = this._options.agents[scheme];
  }

  // Create the native request and set up its event handlers
  var request = this._currentRequest = nativeProtocol.request(this._options, this._onNativeResponse);
  request._redirectable = this;
  for (var event of events) {
    request.on(event, eventHandlers[event]);
  }

  // RFC7230§5.3.1: When making a request directly to an origin server, […]
  // a client MUST send only the absolute path […] as the request-target.
  this._currentUrl = /^\//.test(this._options.path) ? url.format(this._options) :
  // When making a request to a proxy, […]
  // a client MUST send the target URI in absolute-form […].
  this._options.path;

  // End a redirected request
  // (The first request must be ended explicitly with RedirectableRequest#end)
  if (this._isRedirect) {
    // Write the request entity and end
    var i = 0;
    var self = this;
    var buffers = this._requestBodyBuffers;
    (function writeNext(error) {
      // Only write if this request has not been redirected yet
      /* istanbul ignore else */
      if (request === self._currentRequest) {
        // Report any write errors
        /* istanbul ignore if */
        if (error) {
          self.emit("error", error);
        }
        // Write the next buffer if there are still left
        else if (i < buffers.length) {
          var buffer = buffers[i++];
          /* istanbul ignore else */
          if (!request.finished) {
            request.write(buffer.data, buffer.encoding, writeNext);
          }
        }
        // End the request if `end` has been called on us
        else if (self._ended) {
          request.end();
        }
      }
    })();
  }
};

// Processes a response from the current native request
RedirectableRequest.prototype._processResponse = function (response) {
  // Store the redirected response
  var statusCode = response.statusCode;
  if (this._options.trackRedirects) {
    this._redirects.push({
      url: this._currentUrl,
      headers: response.headers,
      statusCode: statusCode
    });
  }

  // RFC7231§6.4: The 3xx (Redirection) class of status code indicates
  // that further action needs to be taken by the user agent in order to
  // fulfill the request. If a Location header field is provided,
  // the user agent MAY automatically redirect its request to the URI
  // referenced by the Location field value,
  // even if the specific status code is not understood.

  // If the response is not a redirect; return it as-is
  var location = response.headers.location;
  if (!location || this._options.followRedirects === false || statusCode < 300 || statusCode >= 400) {
    response.responseUrl = this._currentUrl;
    response.redirects = this._redirects;
    this.emit("response", response);

    // Clean up
    this._requestBodyBuffers = [];
    return;
  }

  // The response is a redirect, so abort the current request
  abortRequest(this._currentRequest);
  // Discard the remainder of the response to avoid waiting for data
  response.destroy();

  // RFC7231§6.4: A client SHOULD detect and intervene
  // in cyclical redirections (i.e., "infinite" redirection loops).
  if (++this._redirectCount > this._options.maxRedirects) {
    this.emit("error", new TooManyRedirectsError());
    return;
  }

  // Store the request headers if applicable
  var requestHeaders;
  var beforeRedirect = this._options.beforeRedirect;
  if (beforeRedirect) {
    requestHeaders = Object.assign({
      // The Host header was set by nativeProtocol.request
      Host: response.req.getHeader("host")
    }, this._options.headers);
  }

  // RFC7231§6.4: Automatic redirection needs to done with
  // care for methods not known to be safe, […]
  // RFC7231§6.4.2–3: For historical reasons, a user agent MAY change
  // the request method from POST to GET for the subsequent request.
  var method = this._options.method;
  if ((statusCode === 301 || statusCode === 302) && this._options.method === "POST" ||
  // RFC7231§6.4.4: The 303 (See Other) status code indicates that
  // the server is redirecting the user agent to a different resource […]
  // A user agent can perform a retrieval request targeting that URI
  // (a GET or HEAD request if using HTTP) […]
  statusCode === 303 && !/^(?:GET|HEAD)$/.test(this._options.method)) {
    this._options.method = "GET";
    // Drop a possible entity and headers related to it
    this._requestBodyBuffers = [];
    removeMatchingHeaders(/^content-/i, this._options.headers);
  }

  // Drop the Host header, as the redirect might lead to a different host
  var currentHostHeader = removeMatchingHeaders(/^host$/i, this._options.headers);

  // If the redirect is relative, carry over the host of the last request
  var currentUrlParts = url.parse(this._currentUrl);
  var currentHost = currentHostHeader || currentUrlParts.host;
  var currentUrl = /^\w+:/.test(location) ? this._currentUrl : url.format(Object.assign(currentUrlParts, {
    host: currentHost
  }));

  // Determine the URL of the redirection
  var redirectUrl;
  try {
    redirectUrl = url.resolve(currentUrl, location);
  } catch (cause) {
    this.emit("error", new RedirectionError({
      cause: cause
    }));
    return;
  }

  // Create the redirected request
  debug("redirecting to", redirectUrl);
  this._isRedirect = true;
  var redirectUrlParts = url.parse(redirectUrl);
  Object.assign(this._options, redirectUrlParts);

  // Drop confidential headers when redirecting to a less secure protocol
  // or to a different domain that is not a superdomain
  if (redirectUrlParts.protocol !== currentUrlParts.protocol && redirectUrlParts.protocol !== "https:" || redirectUrlParts.host !== currentHost && !isSubdomain(redirectUrlParts.host, currentHost)) {
    removeMatchingHeaders(/^(?:authorization|cookie)$/i, this._options.headers);
  }

  // Evaluate the beforeRedirect callback
  if (isFunction(beforeRedirect)) {
    var responseDetails = {
      headers: response.headers,
      statusCode: statusCode
    };
    var requestDetails = {
      url: currentUrl,
      method: method,
      headers: requestHeaders
    };
    try {
      beforeRedirect(this._options, responseDetails, requestDetails);
    } catch (err) {
      this.emit("error", err);
      return;
    }
    this._sanitizeOptions(this._options);
  }

  // Perform the redirected request
  try {
    this._performRequest();
  } catch (cause) {
    this.emit("error", new RedirectionError({
      cause: cause
    }));
  }
};

// Wraps the key/value object of protocols with redirect functionality
function wrap(protocols) {
  // Default settings
  var exports = {
    maxRedirects: 21,
    maxBodyLength: 10 * 1024 * 1024
  };

  // Wrap each protocol
  var nativeProtocols = {};
  Object.keys(protocols).forEach(function (scheme) {
    var protocol = scheme + ":";
    var nativeProtocol = nativeProtocols[protocol] = protocols[scheme];
    var wrappedProtocol = exports[scheme] = Object.create(nativeProtocol);

    // Executes a request, following redirects
    function request(input, options, callback) {
      // Parse parameters
      if (isString(input)) {
        var parsed;
        try {
          parsed = urlToOptions(new URL(input));
        } catch (err) {
          /* istanbul ignore next */
          parsed = url.parse(input);
        }
        if (!isString(parsed.protocol)) {
          throw new InvalidUrlError({
            input
          });
        }
        input = parsed;
      } else if (URL && input instanceof URL) {
        input = urlToOptions(input);
      } else {
        callback = options;
        options = input;
        input = {
          protocol: protocol
        };
      }
      if (isFunction(options)) {
        callback = options;
        options = null;
      }

      // Set defaults
      options = Object.assign({
        maxRedirects: exports.maxRedirects,
        maxBodyLength: exports.maxBodyLength
      }, input, options);
      options.nativeProtocols = nativeProtocols;
      if (!isString(options.host) && !isString(options.hostname)) {
        options.hostname = "::1";
      }
      assert.equal(options.protocol, protocol, "protocol mismatch");
      debug("options", options);
      return new RedirectableRequest(options, callback);
    }

    // Executes a GET request, following redirects
    function get(input, options, callback) {
      var wrappedRequest = wrappedProtocol.request(input, options, callback);
      wrappedRequest.end();
      return wrappedRequest;
    }

    // Expose the properties on the wrapped protocol
    Object.defineProperties(wrappedProtocol, {
      request: {
        value: request,
        configurable: true,
        enumerable: true,
        writable: true
      },
      get: {
        value: get,
        configurable: true,
        enumerable: true,
        writable: true
      }
    });
  });
  return exports;
}

/* istanbul ignore next */
function noop() {/* empty */}

// from https://github.com/nodejs/node/blob/master/lib/internal/url.js
function urlToOptions(urlObject) {
  var options = {
    protocol: urlObject.protocol,
    hostname: urlObject.hostname.startsWith("[") ? /* istanbul ignore next */
    urlObject.hostname.slice(1, -1) : urlObject.hostname,
    hash: urlObject.hash,
    search: urlObject.search,
    pathname: urlObject.pathname,
    path: urlObject.pathname + urlObject.search,
    href: urlObject.href
  };
  if (urlObject.port !== "") {
    options.port = Number(urlObject.port);
  }
  return options;
}
function removeMatchingHeaders(regex, headers) {
  var lastValue;
  for (var header in headers) {
    if (regex.test(header)) {
      lastValue = headers[header];
      delete headers[header];
    }
  }
  return lastValue === null || typeof lastValue === "undefined" ? undefined : String(lastValue).trim();
}
function createErrorType(code, message, baseClass) {
  // Create constructor
  function CustomError(properties) {
    Error.captureStackTrace(this, this.constructor);
    Object.assign(this, properties || {});
    this.code = code;
    this.message = this.cause ? message + ": " + this.cause.message : message;
  }

  // Attach constructor and set default properties
  CustomError.prototype = new (baseClass || Error)();
  CustomError.prototype.constructor = CustomError;
  CustomError.prototype.name = "Error [" + code + "]";
  return CustomError;
}
function abortRequest(request) {
  for (var event of events) {
    request.removeListener(event, eventHandlers[event]);
  }
  request.on("error", noop);
  request.abort();
}
function isSubdomain(subdomain, domain) {
  assert(isString(subdomain) && isString(domain));
  var dot = subdomain.length - domain.length - 1;
  return dot > 0 && subdomain[dot] === "." && subdomain.endsWith(domain);
}
function isString(value) {
  return typeof value === "string" || value instanceof String;
}
function isFunction(value) {
  return typeof value === "function";
}
function isBuffer(value) {
  return typeof value === "object" && "length" in value;
}

// Exports
module.exports = wrap({
  http: http,
  https: https
});
module.exports.wrap = wrap;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ1cmwiLCJyZXF1aXJlIiwiVVJMIiwiaHR0cCIsImh0dHBzIiwiV3JpdGFibGUiLCJhc3NlcnQiLCJkZWJ1ZyIsImV2ZW50cyIsImV2ZW50SGFuZGxlcnMiLCJPYmplY3QiLCJjcmVhdGUiLCJmb3JFYWNoIiwiZXZlbnQiLCJhcmcxIiwiYXJnMiIsImFyZzMiLCJfcmVkaXJlY3RhYmxlIiwiZW1pdCIsIkludmFsaWRVcmxFcnJvciIsImNyZWF0ZUVycm9yVHlwZSIsIlR5cGVFcnJvciIsIlJlZGlyZWN0aW9uRXJyb3IiLCJUb29NYW55UmVkaXJlY3RzRXJyb3IiLCJNYXhCb2R5TGVuZ3RoRXhjZWVkZWRFcnJvciIsIldyaXRlQWZ0ZXJFbmRFcnJvciIsIlJlZGlyZWN0YWJsZVJlcXVlc3QiLCJvcHRpb25zIiwicmVzcG9uc2VDYWxsYmFjayIsImNhbGwiLCJfc2FuaXRpemVPcHRpb25zIiwiX29wdGlvbnMiLCJfZW5kZWQiLCJfZW5kaW5nIiwiX3JlZGlyZWN0Q291bnQiLCJfcmVkaXJlY3RzIiwiX3JlcXVlc3RCb2R5TGVuZ3RoIiwiX3JlcXVlc3RCb2R5QnVmZmVycyIsIm9uIiwic2VsZiIsIl9vbk5hdGl2ZVJlc3BvbnNlIiwicmVzcG9uc2UiLCJfcHJvY2Vzc1Jlc3BvbnNlIiwiX3BlcmZvcm1SZXF1ZXN0IiwicHJvdG90eXBlIiwiYWJvcnQiLCJhYm9ydFJlcXVlc3QiLCJfY3VycmVudFJlcXVlc3QiLCJ3cml0ZSIsImRhdGEiLCJlbmNvZGluZyIsImNhbGxiYWNrIiwiaXNTdHJpbmciLCJpc0J1ZmZlciIsImlzRnVuY3Rpb24iLCJsZW5ndGgiLCJtYXhCb2R5TGVuZ3RoIiwicHVzaCIsImVuZCIsImN1cnJlbnRSZXF1ZXN0Iiwic2V0SGVhZGVyIiwibmFtZSIsInZhbHVlIiwiaGVhZGVycyIsInJlbW92ZUhlYWRlciIsInNldFRpbWVvdXQiLCJtc2VjcyIsImRlc3Ryb3lPblRpbWVvdXQiLCJzb2NrZXQiLCJyZW1vdmVMaXN0ZW5lciIsImRlc3Ryb3kiLCJhZGRMaXN0ZW5lciIsInN0YXJ0VGltZXIiLCJfdGltZW91dCIsImNsZWFyVGltZW91dCIsImNsZWFyVGltZXIiLCJvbmNlIiwibWV0aG9kIiwiYSIsImIiLCJwcm9wZXJ0eSIsImRlZmluZVByb3BlcnR5IiwiZ2V0IiwiaG9zdCIsImhvc3RuYW1lIiwicGF0aG5hbWUiLCJwYXRoIiwic2VhcmNoUG9zIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsInNlYXJjaCIsInByb3RvY29sIiwibmF0aXZlUHJvdG9jb2wiLCJuYXRpdmVQcm90b2NvbHMiLCJhZ2VudHMiLCJzY2hlbWUiLCJzbGljZSIsImFnZW50IiwicmVxdWVzdCIsIl9jdXJyZW50VXJsIiwidGVzdCIsImZvcm1hdCIsIl9pc1JlZGlyZWN0IiwiaSIsImJ1ZmZlcnMiLCJ3cml0ZU5leHQiLCJlcnJvciIsImJ1ZmZlciIsImZpbmlzaGVkIiwic3RhdHVzQ29kZSIsInRyYWNrUmVkaXJlY3RzIiwibG9jYXRpb24iLCJmb2xsb3dSZWRpcmVjdHMiLCJyZXNwb25zZVVybCIsInJlZGlyZWN0cyIsIm1heFJlZGlyZWN0cyIsInJlcXVlc3RIZWFkZXJzIiwiYmVmb3JlUmVkaXJlY3QiLCJhc3NpZ24iLCJIb3N0IiwicmVxIiwiZ2V0SGVhZGVyIiwicmVtb3ZlTWF0Y2hpbmdIZWFkZXJzIiwiY3VycmVudEhvc3RIZWFkZXIiLCJjdXJyZW50VXJsUGFydHMiLCJwYXJzZSIsImN1cnJlbnRIb3N0IiwiY3VycmVudFVybCIsInJlZGlyZWN0VXJsIiwicmVzb2x2ZSIsImNhdXNlIiwicmVkaXJlY3RVcmxQYXJ0cyIsImlzU3ViZG9tYWluIiwicmVzcG9uc2VEZXRhaWxzIiwicmVxdWVzdERldGFpbHMiLCJlcnIiLCJ3cmFwIiwicHJvdG9jb2xzIiwiZXhwb3J0cyIsImtleXMiLCJ3cmFwcGVkUHJvdG9jb2wiLCJpbnB1dCIsInBhcnNlZCIsInVybFRvT3B0aW9ucyIsImVxdWFsIiwid3JhcHBlZFJlcXVlc3QiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwibm9vcCIsInVybE9iamVjdCIsInN0YXJ0c1dpdGgiLCJoYXNoIiwiaHJlZiIsInBvcnQiLCJOdW1iZXIiLCJyZWdleCIsImxhc3RWYWx1ZSIsImhlYWRlciIsInVuZGVmaW5lZCIsIlN0cmluZyIsInRyaW0iLCJjb2RlIiwibWVzc2FnZSIsImJhc2VDbGFzcyIsIkN1c3RvbUVycm9yIiwicHJvcGVydGllcyIsIkVycm9yIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJjb25zdHJ1Y3RvciIsInN1YmRvbWFpbiIsImRvbWFpbiIsImRvdCIsImVuZHNXaXRoIiwibW9kdWxlIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHVybCA9IHJlcXVpcmUoXCJ1cmxcIik7XG52YXIgVVJMID0gdXJsLlVSTDtcbnZhciBodHRwID0gcmVxdWlyZShcImh0dHBcIik7XG52YXIgaHR0cHMgPSByZXF1aXJlKFwiaHR0cHNcIik7XG52YXIgV3JpdGFibGUgPSByZXF1aXJlKFwic3RyZWFtXCIpLldyaXRhYmxlO1xudmFyIGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG52YXIgZGVidWcgPSByZXF1aXJlKFwiLi9kZWJ1Z1wiKTtcblxuLy8gQ3JlYXRlIGhhbmRsZXJzIHRoYXQgcGFzcyBldmVudHMgZnJvbSBuYXRpdmUgcmVxdWVzdHNcbnZhciBldmVudHMgPSBbXCJhYm9ydFwiLCBcImFib3J0ZWRcIiwgXCJjb25uZWN0XCIsIFwiZXJyb3JcIiwgXCJzb2NrZXRcIiwgXCJ0aW1lb3V0XCJdO1xudmFyIGV2ZW50SGFuZGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gIGV2ZW50SGFuZGxlcnNbZXZlbnRdID0gZnVuY3Rpb24gKGFyZzEsIGFyZzIsIGFyZzMpIHtcbiAgICB0aGlzLl9yZWRpcmVjdGFibGUuZW1pdChldmVudCwgYXJnMSwgYXJnMiwgYXJnMyk7XG4gIH07XG59KTtcblxudmFyIEludmFsaWRVcmxFcnJvciA9IGNyZWF0ZUVycm9yVHlwZShcbiAgXCJFUlJfSU5WQUxJRF9VUkxcIixcbiAgXCJJbnZhbGlkIFVSTFwiLFxuICBUeXBlRXJyb3Jcbik7XG4vLyBFcnJvciB0eXBlcyB3aXRoIGNvZGVzXG52YXIgUmVkaXJlY3Rpb25FcnJvciA9IGNyZWF0ZUVycm9yVHlwZShcbiAgXCJFUlJfRlJfUkVESVJFQ1RJT05fRkFJTFVSRVwiLFxuICBcIlJlZGlyZWN0ZWQgcmVxdWVzdCBmYWlsZWRcIlxuKTtcbnZhciBUb29NYW55UmVkaXJlY3RzRXJyb3IgPSBjcmVhdGVFcnJvclR5cGUoXG4gIFwiRVJSX0ZSX1RPT19NQU5ZX1JFRElSRUNUU1wiLFxuICBcIk1heGltdW0gbnVtYmVyIG9mIHJlZGlyZWN0cyBleGNlZWRlZFwiXG4pO1xudmFyIE1heEJvZHlMZW5ndGhFeGNlZWRlZEVycm9yID0gY3JlYXRlRXJyb3JUeXBlKFxuICBcIkVSUl9GUl9NQVhfQk9EWV9MRU5HVEhfRVhDRUVERURcIixcbiAgXCJSZXF1ZXN0IGJvZHkgbGFyZ2VyIHRoYW4gbWF4Qm9keUxlbmd0aCBsaW1pdFwiXG4pO1xudmFyIFdyaXRlQWZ0ZXJFbmRFcnJvciA9IGNyZWF0ZUVycm9yVHlwZShcbiAgXCJFUlJfU1RSRUFNX1dSSVRFX0FGVEVSX0VORFwiLFxuICBcIndyaXRlIGFmdGVyIGVuZFwiXG4pO1xuXG4vLyBBbiBIVFRQKFMpIHJlcXVlc3QgdGhhdCBjYW4gYmUgcmVkaXJlY3RlZFxuZnVuY3Rpb24gUmVkaXJlY3RhYmxlUmVxdWVzdChvcHRpb25zLCByZXNwb25zZUNhbGxiYWNrKSB7XG4gIC8vIEluaXRpYWxpemUgdGhlIHJlcXVlc3RcbiAgV3JpdGFibGUuY2FsbCh0aGlzKTtcbiAgdGhpcy5fc2FuaXRpemVPcHRpb25zKG9wdGlvbnMpO1xuICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy5fZW5kZWQgPSBmYWxzZTtcbiAgdGhpcy5fZW5kaW5nID0gZmFsc2U7XG4gIHRoaXMuX3JlZGlyZWN0Q291bnQgPSAwO1xuICB0aGlzLl9yZWRpcmVjdHMgPSBbXTtcbiAgdGhpcy5fcmVxdWVzdEJvZHlMZW5ndGggPSAwO1xuICB0aGlzLl9yZXF1ZXN0Qm9keUJ1ZmZlcnMgPSBbXTtcblxuICAvLyBBdHRhY2ggYSBjYWxsYmFjayBpZiBwYXNzZWRcbiAgaWYgKHJlc3BvbnNlQ2FsbGJhY2spIHtcbiAgICB0aGlzLm9uKFwicmVzcG9uc2VcIiwgcmVzcG9uc2VDYWxsYmFjayk7XG4gIH1cblxuICAvLyBSZWFjdCB0byByZXNwb25zZXMgb2YgbmF0aXZlIHJlcXVlc3RzXG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5fb25OYXRpdmVSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgIHNlbGYuX3Byb2Nlc3NSZXNwb25zZShyZXNwb25zZSk7XG4gIH07XG5cbiAgLy8gUGVyZm9ybSB0aGUgZmlyc3QgcmVxdWVzdFxuICB0aGlzLl9wZXJmb3JtUmVxdWVzdCgpO1xufVxuUmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFdyaXRhYmxlLnByb3RvdHlwZSk7XG5cblJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICBhYm9ydFJlcXVlc3QodGhpcy5fY3VycmVudFJlcXVlc3QpO1xuICB0aGlzLmVtaXQoXCJhYm9ydFwiKTtcbn07XG5cbi8vIFdyaXRlcyBidWZmZXJlZCBkYXRhIHRvIHRoZSBjdXJyZW50IG5hdGl2ZSByZXF1ZXN0XG5SZWRpcmVjdGFibGVSZXF1ZXN0LnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIChkYXRhLCBlbmNvZGluZywgY2FsbGJhY2spIHtcbiAgLy8gV3JpdGluZyBpcyBub3QgYWxsb3dlZCBpZiBlbmQgaGFzIGJlZW4gY2FsbGVkXG4gIGlmICh0aGlzLl9lbmRpbmcpIHtcbiAgICB0aHJvdyBuZXcgV3JpdGVBZnRlckVuZEVycm9yKCk7XG4gIH1cblxuICAvLyBWYWxpZGF0ZSBpbnB1dCBhbmQgc2hpZnQgcGFyYW1ldGVycyBpZiBuZWNlc3NhcnlcbiAgaWYgKCFpc1N0cmluZyhkYXRhKSAmJiAhaXNCdWZmZXIoZGF0YSkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiZGF0YSBzaG91bGQgYmUgYSBzdHJpbmcsIEJ1ZmZlciBvciBVaW50OEFycmF5XCIpO1xuICB9XG4gIGlmIChpc0Z1bmN0aW9uKGVuY29kaW5nKSkge1xuICAgIGNhbGxiYWNrID0gZW5jb2Rpbmc7XG4gICAgZW5jb2RpbmcgPSBudWxsO1xuICB9XG5cbiAgLy8gSWdub3JlIGVtcHR5IGJ1ZmZlcnMsIHNpbmNlIHdyaXRpbmcgdGhlbSBkb2Vzbid0IGludm9rZSB0aGUgY2FsbGJhY2tcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy9ub2RlL2lzc3Vlcy8yMjA2NlxuICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICAvLyBPbmx5IHdyaXRlIHdoZW4gd2UgZG9uJ3QgZXhjZWVkIHRoZSBtYXhpbXVtIGJvZHkgbGVuZ3RoXG4gIGlmICh0aGlzLl9yZXF1ZXN0Qm9keUxlbmd0aCArIGRhdGEubGVuZ3RoIDw9IHRoaXMuX29wdGlvbnMubWF4Qm9keUxlbmd0aCkge1xuICAgIHRoaXMuX3JlcXVlc3RCb2R5TGVuZ3RoICs9IGRhdGEubGVuZ3RoO1xuICAgIHRoaXMuX3JlcXVlc3RCb2R5QnVmZmVycy5wdXNoKHsgZGF0YTogZGF0YSwgZW5jb2Rpbmc6IGVuY29kaW5nIH0pO1xuICAgIHRoaXMuX2N1cnJlbnRSZXF1ZXN0LndyaXRlKGRhdGEsIGVuY29kaW5nLCBjYWxsYmFjayk7XG4gIH1cbiAgLy8gRXJyb3Igd2hlbiB3ZSBleGNlZWQgdGhlIG1heGltdW0gYm9keSBsZW5ndGhcbiAgZWxzZSB7XG4gICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgbmV3IE1heEJvZHlMZW5ndGhFeGNlZWRlZEVycm9yKCkpO1xuICAgIHRoaXMuYWJvcnQoKTtcbiAgfVxufTtcblxuLy8gRW5kcyB0aGUgY3VycmVudCBuYXRpdmUgcmVxdWVzdFxuUmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24gKGRhdGEsIGVuY29kaW5nLCBjYWxsYmFjaykge1xuICAvLyBTaGlmdCBwYXJhbWV0ZXJzIGlmIG5lY2Vzc2FyeVxuICBpZiAoaXNGdW5jdGlvbihkYXRhKSkge1xuICAgIGNhbGxiYWNrID0gZGF0YTtcbiAgICBkYXRhID0gZW5jb2RpbmcgPSBudWxsO1xuICB9XG4gIGVsc2UgaWYgKGlzRnVuY3Rpb24oZW5jb2RpbmcpKSB7XG4gICAgY2FsbGJhY2sgPSBlbmNvZGluZztcbiAgICBlbmNvZGluZyA9IG51bGw7XG4gIH1cblxuICAvLyBXcml0ZSBkYXRhIGlmIG5lZWRlZCBhbmQgZW5kXG4gIGlmICghZGF0YSkge1xuICAgIHRoaXMuX2VuZGVkID0gdGhpcy5fZW5kaW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9jdXJyZW50UmVxdWVzdC5lbmQobnVsbCwgbnVsbCwgY2FsbGJhY2spO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY3VycmVudFJlcXVlc3QgPSB0aGlzLl9jdXJyZW50UmVxdWVzdDtcbiAgICB0aGlzLndyaXRlKGRhdGEsIGVuY29kaW5nLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLl9lbmRlZCA9IHRydWU7XG4gICAgICBjdXJyZW50UmVxdWVzdC5lbmQobnVsbCwgbnVsbCwgY2FsbGJhY2spO1xuICAgIH0pO1xuICAgIHRoaXMuX2VuZGluZyA9IHRydWU7XG4gIH1cbn07XG5cbi8vIFNldHMgYSBoZWFkZXIgdmFsdWUgb24gdGhlIGN1cnJlbnQgbmF0aXZlIHJlcXVlc3RcblJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLnNldEhlYWRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICB0aGlzLl9vcHRpb25zLmhlYWRlcnNbbmFtZV0gPSB2YWx1ZTtcbiAgdGhpcy5fY3VycmVudFJlcXVlc3Quc2V0SGVhZGVyKG5hbWUsIHZhbHVlKTtcbn07XG5cbi8vIENsZWFycyBhIGhlYWRlciB2YWx1ZSBvbiB0aGUgY3VycmVudCBuYXRpdmUgcmVxdWVzdFxuUmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUucmVtb3ZlSGVhZGVyID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgZGVsZXRlIHRoaXMuX29wdGlvbnMuaGVhZGVyc1tuYW1lXTtcbiAgdGhpcy5fY3VycmVudFJlcXVlc3QucmVtb3ZlSGVhZGVyKG5hbWUpO1xufTtcblxuLy8gR2xvYmFsIHRpbWVvdXQgZm9yIGFsbCB1bmRlcmx5aW5nIHJlcXVlc3RzXG5SZWRpcmVjdGFibGVSZXF1ZXN0LnByb3RvdHlwZS5zZXRUaW1lb3V0ID0gZnVuY3Rpb24gKG1zZWNzLCBjYWxsYmFjaykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgLy8gRGVzdHJveXMgdGhlIHNvY2tldCBvbiB0aW1lb3V0XG4gIGZ1bmN0aW9uIGRlc3Ryb3lPblRpbWVvdXQoc29ja2V0KSB7XG4gICAgc29ja2V0LnNldFRpbWVvdXQobXNlY3MpO1xuICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcihcInRpbWVvdXRcIiwgc29ja2V0LmRlc3Ryb3kpO1xuICAgIHNvY2tldC5hZGRMaXN0ZW5lcihcInRpbWVvdXRcIiwgc29ja2V0LmRlc3Ryb3kpO1xuICB9XG5cbiAgLy8gU2V0cyB1cCBhIHRpbWVyIHRvIHRyaWdnZXIgYSB0aW1lb3V0IGV2ZW50XG4gIGZ1bmN0aW9uIHN0YXJ0VGltZXIoc29ja2V0KSB7XG4gICAgaWYgKHNlbGYuX3RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLl90aW1lb3V0KTtcbiAgICB9XG4gICAgc2VsZi5fdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5lbWl0KFwidGltZW91dFwiKTtcbiAgICAgIGNsZWFyVGltZXIoKTtcbiAgICB9LCBtc2Vjcyk7XG4gICAgZGVzdHJveU9uVGltZW91dChzb2NrZXQpO1xuICB9XG5cbiAgLy8gU3RvcHMgYSB0aW1lb3V0IGZyb20gdHJpZ2dlcmluZ1xuICBmdW5jdGlvbiBjbGVhclRpbWVyKCkge1xuICAgIC8vIENsZWFyIHRoZSB0aW1lb3V0XG4gICAgaWYgKHNlbGYuX3RpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzZWxmLl90aW1lb3V0KTtcbiAgICAgIHNlbGYuX3RpbWVvdXQgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIENsZWFuIHVwIGFsbCBhdHRhY2hlZCBsaXN0ZW5lcnNcbiAgICBzZWxmLnJlbW92ZUxpc3RlbmVyKFwiYWJvcnRcIiwgY2xlYXJUaW1lcik7XG4gICAgc2VsZi5yZW1vdmVMaXN0ZW5lcihcImVycm9yXCIsIGNsZWFyVGltZXIpO1xuICAgIHNlbGYucmVtb3ZlTGlzdGVuZXIoXCJyZXNwb25zZVwiLCBjbGVhclRpbWVyKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHNlbGYucmVtb3ZlTGlzdGVuZXIoXCJ0aW1lb3V0XCIsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgaWYgKCFzZWxmLnNvY2tldCkge1xuICAgICAgc2VsZi5fY3VycmVudFJlcXVlc3QucmVtb3ZlTGlzdGVuZXIoXCJzb2NrZXRcIiwgc3RhcnRUaW1lcik7XG4gICAgfVxuICB9XG5cbiAgLy8gQXR0YWNoIGNhbGxiYWNrIGlmIHBhc3NlZFxuICBpZiAoY2FsbGJhY2spIHtcbiAgICB0aGlzLm9uKFwidGltZW91dFwiLCBjYWxsYmFjayk7XG4gIH1cblxuICAvLyBTdGFydCB0aGUgdGltZXIgaWYgb3Igd2hlbiB0aGUgc29ja2V0IGlzIG9wZW5lZFxuICBpZiAodGhpcy5zb2NrZXQpIHtcbiAgICBzdGFydFRpbWVyKHRoaXMuc29ja2V0KTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLl9jdXJyZW50UmVxdWVzdC5vbmNlKFwic29ja2V0XCIsIHN0YXJ0VGltZXIpO1xuICB9XG5cbiAgLy8gQ2xlYW4gdXAgb24gZXZlbnRzXG4gIHRoaXMub24oXCJzb2NrZXRcIiwgZGVzdHJveU9uVGltZW91dCk7XG4gIHRoaXMub24oXCJhYm9ydFwiLCBjbGVhclRpbWVyKTtcbiAgdGhpcy5vbihcImVycm9yXCIsIGNsZWFyVGltZXIpO1xuICB0aGlzLm9uKFwicmVzcG9uc2VcIiwgY2xlYXJUaW1lcik7XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBQcm94eSBhbGwgb3RoZXIgcHVibGljIENsaWVudFJlcXVlc3QgbWV0aG9kc1xuW1xuICBcImZsdXNoSGVhZGVyc1wiLCBcImdldEhlYWRlclwiLFxuICBcInNldE5vRGVsYXlcIiwgXCJzZXRTb2NrZXRLZWVwQWxpdmVcIixcbl0uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIFJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiB0aGlzLl9jdXJyZW50UmVxdWVzdFttZXRob2RdKGEsIGIpO1xuICB9O1xufSk7XG5cbi8vIFByb3h5IGFsbCBwdWJsaWMgQ2xpZW50UmVxdWVzdCBwcm9wZXJ0aWVzXG5bXCJhYm9ydGVkXCIsIFwiY29ubmVjdGlvblwiLCBcInNvY2tldFwiXS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wZXJ0eSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUsIHByb3BlcnR5LCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9jdXJyZW50UmVxdWVzdFtwcm9wZXJ0eV07IH0sXG4gIH0pO1xufSk7XG5cblJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLl9zYW5pdGl6ZU9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAvLyBFbnN1cmUgaGVhZGVycyBhcmUgYWx3YXlzIHByZXNlbnRcbiAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICBvcHRpb25zLmhlYWRlcnMgPSB7fTtcbiAgfVxuXG4gIC8vIFNpbmNlIGh0dHAucmVxdWVzdCB0cmVhdHMgaG9zdCBhcyBhbiBhbGlhcyBvZiBob3N0bmFtZSxcbiAgLy8gYnV0IHRoZSB1cmwgbW9kdWxlIGludGVycHJldHMgaG9zdCBhcyBob3N0bmFtZSBwbHVzIHBvcnQsXG4gIC8vIGVsaW1pbmF0ZSB0aGUgaG9zdCBwcm9wZXJ0eSB0byBhdm9pZCBjb25mdXNpb24uXG4gIGlmIChvcHRpb25zLmhvc3QpIHtcbiAgICAvLyBVc2UgaG9zdG5hbWUgaWYgc2V0LCBiZWNhdXNlIGl0IGhhcyBwcmVjZWRlbmNlXG4gICAgaWYgKCFvcHRpb25zLmhvc3RuYW1lKSB7XG4gICAgICBvcHRpb25zLmhvc3RuYW1lID0gb3B0aW9ucy5ob3N0O1xuICAgIH1cbiAgICBkZWxldGUgb3B0aW9ucy5ob3N0O1xuICB9XG5cbiAgLy8gQ29tcGxldGUgdGhlIFVSTCBvYmplY3Qgd2hlbiBuZWNlc3NhcnlcbiAgaWYgKCFvcHRpb25zLnBhdGhuYW1lICYmIG9wdGlvbnMucGF0aCkge1xuICAgIHZhciBzZWFyY2hQb3MgPSBvcHRpb25zLnBhdGguaW5kZXhPZihcIj9cIik7XG4gICAgaWYgKHNlYXJjaFBvcyA8IDApIHtcbiAgICAgIG9wdGlvbnMucGF0aG5hbWUgPSBvcHRpb25zLnBhdGg7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgb3B0aW9ucy5wYXRobmFtZSA9IG9wdGlvbnMucGF0aC5zdWJzdHJpbmcoMCwgc2VhcmNoUG9zKTtcbiAgICAgIG9wdGlvbnMuc2VhcmNoID0gb3B0aW9ucy5wYXRoLnN1YnN0cmluZyhzZWFyY2hQb3MpO1xuICAgIH1cbiAgfVxufTtcblxuXG4vLyBFeGVjdXRlcyB0aGUgbmV4dCBuYXRpdmUgcmVxdWVzdCAoaW5pdGlhbCBvciByZWRpcmVjdClcblJlZGlyZWN0YWJsZVJlcXVlc3QucHJvdG90eXBlLl9wZXJmb3JtUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9hZCB0aGUgbmF0aXZlIHByb3RvY29sXG4gIHZhciBwcm90b2NvbCA9IHRoaXMuX29wdGlvbnMucHJvdG9jb2w7XG4gIHZhciBuYXRpdmVQcm90b2NvbCA9IHRoaXMuX29wdGlvbnMubmF0aXZlUHJvdG9jb2xzW3Byb3RvY29sXTtcbiAgaWYgKCFuYXRpdmVQcm90b2NvbCkge1xuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIG5ldyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBwcm90b2NvbCBcIiArIHByb3RvY29sKSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gSWYgc3BlY2lmaWVkLCB1c2UgdGhlIGFnZW50IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3RvY29sXG4gIC8vIChIVFRQIGFuZCBIVFRQUyB1c2UgZGlmZmVyZW50IHR5cGVzIG9mIGFnZW50cylcbiAgaWYgKHRoaXMuX29wdGlvbnMuYWdlbnRzKSB7XG4gICAgdmFyIHNjaGVtZSA9IHByb3RvY29sLnNsaWNlKDAsIC0xKTtcbiAgICB0aGlzLl9vcHRpb25zLmFnZW50ID0gdGhpcy5fb3B0aW9ucy5hZ2VudHNbc2NoZW1lXTtcbiAgfVxuXG4gIC8vIENyZWF0ZSB0aGUgbmF0aXZlIHJlcXVlc3QgYW5kIHNldCB1cCBpdHMgZXZlbnQgaGFuZGxlcnNcbiAgdmFyIHJlcXVlc3QgPSB0aGlzLl9jdXJyZW50UmVxdWVzdCA9XG4gICAgICAgIG5hdGl2ZVByb3RvY29sLnJlcXVlc3QodGhpcy5fb3B0aW9ucywgdGhpcy5fb25OYXRpdmVSZXNwb25zZSk7XG4gIHJlcXVlc3QuX3JlZGlyZWN0YWJsZSA9IHRoaXM7XG4gIGZvciAodmFyIGV2ZW50IG9mIGV2ZW50cykge1xuICAgIHJlcXVlc3Qub24oZXZlbnQsIGV2ZW50SGFuZGxlcnNbZXZlbnRdKTtcbiAgfVxuXG4gIC8vIFJGQzcyMzDCpzUuMy4xOiBXaGVuIG1ha2luZyBhIHJlcXVlc3QgZGlyZWN0bHkgdG8gYW4gb3JpZ2luIHNlcnZlciwgW+KApl1cbiAgLy8gYSBjbGllbnQgTVVTVCBzZW5kIG9ubHkgdGhlIGFic29sdXRlIHBhdGggW+KApl0gYXMgdGhlIHJlcXVlc3QtdGFyZ2V0LlxuICB0aGlzLl9jdXJyZW50VXJsID0gL15cXC8vLnRlc3QodGhpcy5fb3B0aW9ucy5wYXRoKSA/XG4gICAgdXJsLmZvcm1hdCh0aGlzLl9vcHRpb25zKSA6XG4gICAgLy8gV2hlbiBtYWtpbmcgYSByZXF1ZXN0IHRvIGEgcHJveHksIFvigKZdXG4gICAgLy8gYSBjbGllbnQgTVVTVCBzZW5kIHRoZSB0YXJnZXQgVVJJIGluIGFic29sdXRlLWZvcm0gW+KApl0uXG4gICAgdGhpcy5fb3B0aW9ucy5wYXRoO1xuXG4gIC8vIEVuZCBhIHJlZGlyZWN0ZWQgcmVxdWVzdFxuICAvLyAoVGhlIGZpcnN0IHJlcXVlc3QgbXVzdCBiZSBlbmRlZCBleHBsaWNpdGx5IHdpdGggUmVkaXJlY3RhYmxlUmVxdWVzdCNlbmQpXG4gIGlmICh0aGlzLl9pc1JlZGlyZWN0KSB7XG4gICAgLy8gV3JpdGUgdGhlIHJlcXVlc3QgZW50aXR5IGFuZCBlbmRcbiAgICB2YXIgaSA9IDA7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBidWZmZXJzID0gdGhpcy5fcmVxdWVzdEJvZHlCdWZmZXJzO1xuICAgIChmdW5jdGlvbiB3cml0ZU5leHQoZXJyb3IpIHtcbiAgICAgIC8vIE9ubHkgd3JpdGUgaWYgdGhpcyByZXF1ZXN0IGhhcyBub3QgYmVlbiByZWRpcmVjdGVkIHlldFxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgIGlmIChyZXF1ZXN0ID09PSBzZWxmLl9jdXJyZW50UmVxdWVzdCkge1xuICAgICAgICAvLyBSZXBvcnQgYW55IHdyaXRlIGVycm9yc1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgc2VsZi5lbWl0KFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdyaXRlIHRoZSBuZXh0IGJ1ZmZlciBpZiB0aGVyZSBhcmUgc3RpbGwgbGVmdFxuICAgICAgICBlbHNlIGlmIChpIDwgYnVmZmVycy5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgYnVmZmVyID0gYnVmZmVyc1tpKytdO1xuICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgaWYgKCFyZXF1ZXN0LmZpbmlzaGVkKSB7XG4gICAgICAgICAgICByZXF1ZXN0LndyaXRlKGJ1ZmZlci5kYXRhLCBidWZmZXIuZW5jb2RpbmcsIHdyaXRlTmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEVuZCB0aGUgcmVxdWVzdCBpZiBgZW5kYCBoYXMgYmVlbiBjYWxsZWQgb24gdXNcbiAgICAgICAgZWxzZSBpZiAoc2VsZi5fZW5kZWQpIHtcbiAgICAgICAgICByZXF1ZXN0LmVuZCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSgpKTtcbiAgfVxufTtcblxuLy8gUHJvY2Vzc2VzIGEgcmVzcG9uc2UgZnJvbSB0aGUgY3VycmVudCBuYXRpdmUgcmVxdWVzdFxuUmVkaXJlY3RhYmxlUmVxdWVzdC5wcm90b3R5cGUuX3Byb2Nlc3NSZXNwb25zZSA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAvLyBTdG9yZSB0aGUgcmVkaXJlY3RlZCByZXNwb25zZVxuICB2YXIgc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1c0NvZGU7XG4gIGlmICh0aGlzLl9vcHRpb25zLnRyYWNrUmVkaXJlY3RzKSB7XG4gICAgdGhpcy5fcmVkaXJlY3RzLnB1c2goe1xuICAgICAgdXJsOiB0aGlzLl9jdXJyZW50VXJsLFxuICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIHN0YXR1c0NvZGU6IHN0YXR1c0NvZGUsXG4gICAgfSk7XG4gIH1cblxuICAvLyBSRkM3MjMxwqc2LjQ6IFRoZSAzeHggKFJlZGlyZWN0aW9uKSBjbGFzcyBvZiBzdGF0dXMgY29kZSBpbmRpY2F0ZXNcbiAgLy8gdGhhdCBmdXJ0aGVyIGFjdGlvbiBuZWVkcyB0byBiZSB0YWtlbiBieSB0aGUgdXNlciBhZ2VudCBpbiBvcmRlciB0b1xuICAvLyBmdWxmaWxsIHRoZSByZXF1ZXN0LiBJZiBhIExvY2F0aW9uIGhlYWRlciBmaWVsZCBpcyBwcm92aWRlZCxcbiAgLy8gdGhlIHVzZXIgYWdlbnQgTUFZIGF1dG9tYXRpY2FsbHkgcmVkaXJlY3QgaXRzIHJlcXVlc3QgdG8gdGhlIFVSSVxuICAvLyByZWZlcmVuY2VkIGJ5IHRoZSBMb2NhdGlvbiBmaWVsZCB2YWx1ZSxcbiAgLy8gZXZlbiBpZiB0aGUgc3BlY2lmaWMgc3RhdHVzIGNvZGUgaXMgbm90IHVuZGVyc3Rvb2QuXG5cbiAgLy8gSWYgdGhlIHJlc3BvbnNlIGlzIG5vdCBhIHJlZGlyZWN0OyByZXR1cm4gaXQgYXMtaXNcbiAgdmFyIGxvY2F0aW9uID0gcmVzcG9uc2UuaGVhZGVycy5sb2NhdGlvbjtcbiAgaWYgKCFsb2NhdGlvbiB8fCB0aGlzLl9vcHRpb25zLmZvbGxvd1JlZGlyZWN0cyA9PT0gZmFsc2UgfHxcbiAgICAgIHN0YXR1c0NvZGUgPCAzMDAgfHwgc3RhdHVzQ29kZSA+PSA0MDApIHtcbiAgICByZXNwb25zZS5yZXNwb25zZVVybCA9IHRoaXMuX2N1cnJlbnRVcmw7XG4gICAgcmVzcG9uc2UucmVkaXJlY3RzID0gdGhpcy5fcmVkaXJlY3RzO1xuICAgIHRoaXMuZW1pdChcInJlc3BvbnNlXCIsIHJlc3BvbnNlKTtcblxuICAgIC8vIENsZWFuIHVwXG4gICAgdGhpcy5fcmVxdWVzdEJvZHlCdWZmZXJzID0gW107XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVGhlIHJlc3BvbnNlIGlzIGEgcmVkaXJlY3QsIHNvIGFib3J0IHRoZSBjdXJyZW50IHJlcXVlc3RcbiAgYWJvcnRSZXF1ZXN0KHRoaXMuX2N1cnJlbnRSZXF1ZXN0KTtcbiAgLy8gRGlzY2FyZCB0aGUgcmVtYWluZGVyIG9mIHRoZSByZXNwb25zZSB0byBhdm9pZCB3YWl0aW5nIGZvciBkYXRhXG4gIHJlc3BvbnNlLmRlc3Ryb3koKTtcblxuICAvLyBSRkM3MjMxwqc2LjQ6IEEgY2xpZW50IFNIT1VMRCBkZXRlY3QgYW5kIGludGVydmVuZVxuICAvLyBpbiBjeWNsaWNhbCByZWRpcmVjdGlvbnMgKGkuZS4sIFwiaW5maW5pdGVcIiByZWRpcmVjdGlvbiBsb29wcykuXG4gIGlmICgrK3RoaXMuX3JlZGlyZWN0Q291bnQgPiB0aGlzLl9vcHRpb25zLm1heFJlZGlyZWN0cykge1xuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIG5ldyBUb29NYW55UmVkaXJlY3RzRXJyb3IoKSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gU3RvcmUgdGhlIHJlcXVlc3QgaGVhZGVycyBpZiBhcHBsaWNhYmxlXG4gIHZhciByZXF1ZXN0SGVhZGVycztcbiAgdmFyIGJlZm9yZVJlZGlyZWN0ID0gdGhpcy5fb3B0aW9ucy5iZWZvcmVSZWRpcmVjdDtcbiAgaWYgKGJlZm9yZVJlZGlyZWN0KSB7XG4gICAgcmVxdWVzdEhlYWRlcnMgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgIC8vIFRoZSBIb3N0IGhlYWRlciB3YXMgc2V0IGJ5IG5hdGl2ZVByb3RvY29sLnJlcXVlc3RcbiAgICAgIEhvc3Q6IHJlc3BvbnNlLnJlcS5nZXRIZWFkZXIoXCJob3N0XCIpLFxuICAgIH0sIHRoaXMuX29wdGlvbnMuaGVhZGVycyk7XG4gIH1cblxuICAvLyBSRkM3MjMxwqc2LjQ6IEF1dG9tYXRpYyByZWRpcmVjdGlvbiBuZWVkcyB0byBkb25lIHdpdGhcbiAgLy8gY2FyZSBmb3IgbWV0aG9kcyBub3Qga25vd24gdG8gYmUgc2FmZSwgW+KApl1cbiAgLy8gUkZDNzIzMcKnNi40LjLigJMzOiBGb3IgaGlzdG9yaWNhbCByZWFzb25zLCBhIHVzZXIgYWdlbnQgTUFZIGNoYW5nZVxuICAvLyB0aGUgcmVxdWVzdCBtZXRob2QgZnJvbSBQT1NUIHRvIEdFVCBmb3IgdGhlIHN1YnNlcXVlbnQgcmVxdWVzdC5cbiAgdmFyIG1ldGhvZCA9IHRoaXMuX29wdGlvbnMubWV0aG9kO1xuICBpZiAoKHN0YXR1c0NvZGUgPT09IDMwMSB8fCBzdGF0dXNDb2RlID09PSAzMDIpICYmIHRoaXMuX29wdGlvbnMubWV0aG9kID09PSBcIlBPU1RcIiB8fFxuICAgICAgLy8gUkZDNzIzMcKnNi40LjQ6IFRoZSAzMDMgKFNlZSBPdGhlcikgc3RhdHVzIGNvZGUgaW5kaWNhdGVzIHRoYXRcbiAgICAgIC8vIHRoZSBzZXJ2ZXIgaXMgcmVkaXJlY3RpbmcgdGhlIHVzZXIgYWdlbnQgdG8gYSBkaWZmZXJlbnQgcmVzb3VyY2UgW+KApl1cbiAgICAgIC8vIEEgdXNlciBhZ2VudCBjYW4gcGVyZm9ybSBhIHJldHJpZXZhbCByZXF1ZXN0IHRhcmdldGluZyB0aGF0IFVSSVxuICAgICAgLy8gKGEgR0VUIG9yIEhFQUQgcmVxdWVzdCBpZiB1c2luZyBIVFRQKSBb4oCmXVxuICAgICAgKHN0YXR1c0NvZGUgPT09IDMwMykgJiYgIS9eKD86R0VUfEhFQUQpJC8udGVzdCh0aGlzLl9vcHRpb25zLm1ldGhvZCkpIHtcbiAgICB0aGlzLl9vcHRpb25zLm1ldGhvZCA9IFwiR0VUXCI7XG4gICAgLy8gRHJvcCBhIHBvc3NpYmxlIGVudGl0eSBhbmQgaGVhZGVycyByZWxhdGVkIHRvIGl0XG4gICAgdGhpcy5fcmVxdWVzdEJvZHlCdWZmZXJzID0gW107XG4gICAgcmVtb3ZlTWF0Y2hpbmdIZWFkZXJzKC9eY29udGVudC0vaSwgdGhpcy5fb3B0aW9ucy5oZWFkZXJzKTtcbiAgfVxuXG4gIC8vIERyb3AgdGhlIEhvc3QgaGVhZGVyLCBhcyB0aGUgcmVkaXJlY3QgbWlnaHQgbGVhZCB0byBhIGRpZmZlcmVudCBob3N0XG4gIHZhciBjdXJyZW50SG9zdEhlYWRlciA9IHJlbW92ZU1hdGNoaW5nSGVhZGVycygvXmhvc3QkL2ksIHRoaXMuX29wdGlvbnMuaGVhZGVycyk7XG5cbiAgLy8gSWYgdGhlIHJlZGlyZWN0IGlzIHJlbGF0aXZlLCBjYXJyeSBvdmVyIHRoZSBob3N0IG9mIHRoZSBsYXN0IHJlcXVlc3RcbiAgdmFyIGN1cnJlbnRVcmxQYXJ0cyA9IHVybC5wYXJzZSh0aGlzLl9jdXJyZW50VXJsKTtcbiAgdmFyIGN1cnJlbnRIb3N0ID0gY3VycmVudEhvc3RIZWFkZXIgfHwgY3VycmVudFVybFBhcnRzLmhvc3Q7XG4gIHZhciBjdXJyZW50VXJsID0gL15cXHcrOi8udGVzdChsb2NhdGlvbikgPyB0aGlzLl9jdXJyZW50VXJsIDpcbiAgICB1cmwuZm9ybWF0KE9iamVjdC5hc3NpZ24oY3VycmVudFVybFBhcnRzLCB7IGhvc3Q6IGN1cnJlbnRIb3N0IH0pKTtcblxuICAvLyBEZXRlcm1pbmUgdGhlIFVSTCBvZiB0aGUgcmVkaXJlY3Rpb25cbiAgdmFyIHJlZGlyZWN0VXJsO1xuICB0cnkge1xuICAgIHJlZGlyZWN0VXJsID0gdXJsLnJlc29sdmUoY3VycmVudFVybCwgbG9jYXRpb24pO1xuICB9XG4gIGNhdGNoIChjYXVzZSkge1xuICAgIHRoaXMuZW1pdChcImVycm9yXCIsIG5ldyBSZWRpcmVjdGlvbkVycm9yKHsgY2F1c2U6IGNhdXNlIH0pKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBDcmVhdGUgdGhlIHJlZGlyZWN0ZWQgcmVxdWVzdFxuICBkZWJ1ZyhcInJlZGlyZWN0aW5nIHRvXCIsIHJlZGlyZWN0VXJsKTtcbiAgdGhpcy5faXNSZWRpcmVjdCA9IHRydWU7XG4gIHZhciByZWRpcmVjdFVybFBhcnRzID0gdXJsLnBhcnNlKHJlZGlyZWN0VXJsKTtcbiAgT2JqZWN0LmFzc2lnbih0aGlzLl9vcHRpb25zLCByZWRpcmVjdFVybFBhcnRzKTtcblxuICAvLyBEcm9wIGNvbmZpZGVudGlhbCBoZWFkZXJzIHdoZW4gcmVkaXJlY3RpbmcgdG8gYSBsZXNzIHNlY3VyZSBwcm90b2NvbFxuICAvLyBvciB0byBhIGRpZmZlcmVudCBkb21haW4gdGhhdCBpcyBub3QgYSBzdXBlcmRvbWFpblxuICBpZiAocmVkaXJlY3RVcmxQYXJ0cy5wcm90b2NvbCAhPT0gY3VycmVudFVybFBhcnRzLnByb3RvY29sICYmXG4gICAgIHJlZGlyZWN0VXJsUGFydHMucHJvdG9jb2wgIT09IFwiaHR0cHM6XCIgfHxcbiAgICAgcmVkaXJlY3RVcmxQYXJ0cy5ob3N0ICE9PSBjdXJyZW50SG9zdCAmJlxuICAgICAhaXNTdWJkb21haW4ocmVkaXJlY3RVcmxQYXJ0cy5ob3N0LCBjdXJyZW50SG9zdCkpIHtcbiAgICByZW1vdmVNYXRjaGluZ0hlYWRlcnMoL14oPzphdXRob3JpemF0aW9ufGNvb2tpZSkkL2ksIHRoaXMuX29wdGlvbnMuaGVhZGVycyk7XG4gIH1cblxuICAvLyBFdmFsdWF0ZSB0aGUgYmVmb3JlUmVkaXJlY3QgY2FsbGJhY2tcbiAgaWYgKGlzRnVuY3Rpb24oYmVmb3JlUmVkaXJlY3QpKSB7XG4gICAgdmFyIHJlc3BvbnNlRGV0YWlscyA9IHtcbiAgICAgIGhlYWRlcnM6IHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBzdGF0dXNDb2RlOiBzdGF0dXNDb2RlLFxuICAgIH07XG4gICAgdmFyIHJlcXVlc3REZXRhaWxzID0ge1xuICAgICAgdXJsOiBjdXJyZW50VXJsLFxuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBoZWFkZXJzOiByZXF1ZXN0SGVhZGVycyxcbiAgICB9O1xuICAgIHRyeSB7XG4gICAgICBiZWZvcmVSZWRpcmVjdCh0aGlzLl9vcHRpb25zLCByZXNwb25zZURldGFpbHMsIHJlcXVlc3REZXRhaWxzKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgdGhpcy5lbWl0KFwiZXJyb3JcIiwgZXJyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fc2FuaXRpemVPcHRpb25zKHRoaXMuX29wdGlvbnMpO1xuICB9XG5cbiAgLy8gUGVyZm9ybSB0aGUgcmVkaXJlY3RlZCByZXF1ZXN0XG4gIHRyeSB7XG4gICAgdGhpcy5fcGVyZm9ybVJlcXVlc3QoKTtcbiAgfVxuICBjYXRjaCAoY2F1c2UpIHtcbiAgICB0aGlzLmVtaXQoXCJlcnJvclwiLCBuZXcgUmVkaXJlY3Rpb25FcnJvcih7IGNhdXNlOiBjYXVzZSB9KSk7XG4gIH1cbn07XG5cbi8vIFdyYXBzIHRoZSBrZXkvdmFsdWUgb2JqZWN0IG9mIHByb3RvY29scyB3aXRoIHJlZGlyZWN0IGZ1bmN0aW9uYWxpdHlcbmZ1bmN0aW9uIHdyYXAocHJvdG9jb2xzKSB7XG4gIC8vIERlZmF1bHQgc2V0dGluZ3NcbiAgdmFyIGV4cG9ydHMgPSB7XG4gICAgbWF4UmVkaXJlY3RzOiAyMSxcbiAgICBtYXhCb2R5TGVuZ3RoOiAxMCAqIDEwMjQgKiAxMDI0LFxuICB9O1xuXG4gIC8vIFdyYXAgZWFjaCBwcm90b2NvbFxuICB2YXIgbmF0aXZlUHJvdG9jb2xzID0ge307XG4gIE9iamVjdC5rZXlzKHByb3RvY29scykuZm9yRWFjaChmdW5jdGlvbiAoc2NoZW1lKSB7XG4gICAgdmFyIHByb3RvY29sID0gc2NoZW1lICsgXCI6XCI7XG4gICAgdmFyIG5hdGl2ZVByb3RvY29sID0gbmF0aXZlUHJvdG9jb2xzW3Byb3RvY29sXSA9IHByb3RvY29sc1tzY2hlbWVdO1xuICAgIHZhciB3cmFwcGVkUHJvdG9jb2wgPSBleHBvcnRzW3NjaGVtZV0gPSBPYmplY3QuY3JlYXRlKG5hdGl2ZVByb3RvY29sKTtcblxuICAgIC8vIEV4ZWN1dGVzIGEgcmVxdWVzdCwgZm9sbG93aW5nIHJlZGlyZWN0c1xuICAgIGZ1bmN0aW9uIHJlcXVlc3QoaW5wdXQsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgICAvLyBQYXJzZSBwYXJhbWV0ZXJzXG4gICAgICBpZiAoaXNTdHJpbmcoaW5wdXQpKSB7XG4gICAgICAgIHZhciBwYXJzZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcGFyc2VkID0gdXJsVG9PcHRpb25zKG5ldyBVUkwoaW5wdXQpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAgICAgICBwYXJzZWQgPSB1cmwucGFyc2UoaW5wdXQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaXNTdHJpbmcocGFyc2VkLnByb3RvY29sKSkge1xuICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkVXJsRXJyb3IoeyBpbnB1dCB9KTtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCA9IHBhcnNlZDtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKFVSTCAmJiAoaW5wdXQgaW5zdGFuY2VvZiBVUkwpKSB7XG4gICAgICAgIGlucHV0ID0gdXJsVG9PcHRpb25zKGlucHV0KTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICAgIG9wdGlvbnMgPSBpbnB1dDtcbiAgICAgICAgaW5wdXQgPSB7IHByb3RvY29sOiBwcm90b2NvbCB9O1xuICAgICAgfVxuICAgICAgaWYgKGlzRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBvcHRpb25zO1xuICAgICAgICBvcHRpb25zID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IGRlZmF1bHRzXG4gICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgIG1heFJlZGlyZWN0czogZXhwb3J0cy5tYXhSZWRpcmVjdHMsXG4gICAgICAgIG1heEJvZHlMZW5ndGg6IGV4cG9ydHMubWF4Qm9keUxlbmd0aCxcbiAgICAgIH0sIGlucHV0LCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMubmF0aXZlUHJvdG9jb2xzID0gbmF0aXZlUHJvdG9jb2xzO1xuICAgICAgaWYgKCFpc1N0cmluZyhvcHRpb25zLmhvc3QpICYmICFpc1N0cmluZyhvcHRpb25zLmhvc3RuYW1lKSkge1xuICAgICAgICBvcHRpb25zLmhvc3RuYW1lID0gXCI6OjFcIjtcbiAgICAgIH1cblxuICAgICAgYXNzZXJ0LmVxdWFsKG9wdGlvbnMucHJvdG9jb2wsIHByb3RvY29sLCBcInByb3RvY29sIG1pc21hdGNoXCIpO1xuICAgICAgZGVidWcoXCJvcHRpb25zXCIsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG5ldyBSZWRpcmVjdGFibGVSZXF1ZXN0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICAvLyBFeGVjdXRlcyBhIEdFVCByZXF1ZXN0LCBmb2xsb3dpbmcgcmVkaXJlY3RzXG4gICAgZnVuY3Rpb24gZ2V0KGlucHV0LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHdyYXBwZWRSZXF1ZXN0ID0gd3JhcHBlZFByb3RvY29sLnJlcXVlc3QoaW5wdXQsIG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgIHdyYXBwZWRSZXF1ZXN0LmVuZCgpO1xuICAgICAgcmV0dXJuIHdyYXBwZWRSZXF1ZXN0O1xuICAgIH1cblxuICAgIC8vIEV4cG9zZSB0aGUgcHJvcGVydGllcyBvbiB0aGUgd3JhcHBlZCBwcm90b2NvbFxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHdyYXBwZWRQcm90b2NvbCwge1xuICAgICAgcmVxdWVzdDogeyB2YWx1ZTogcmVxdWVzdCwgY29uZmlndXJhYmxlOiB0cnVlLCBlbnVtZXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9LFxuICAgICAgZ2V0OiB7IHZhbHVlOiBnZXQsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSxcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBleHBvcnRzO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gbm9vcCgpIHsgLyogZW1wdHkgKi8gfVxuXG4vLyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvbm9kZS9ibG9iL21hc3Rlci9saWIvaW50ZXJuYWwvdXJsLmpzXG5mdW5jdGlvbiB1cmxUb09wdGlvbnModXJsT2JqZWN0KSB7XG4gIHZhciBvcHRpb25zID0ge1xuICAgIHByb3RvY29sOiB1cmxPYmplY3QucHJvdG9jb2wsXG4gICAgaG9zdG5hbWU6IHVybE9iamVjdC5ob3N0bmFtZS5zdGFydHNXaXRoKFwiW1wiKSA/XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgICAgdXJsT2JqZWN0Lmhvc3RuYW1lLnNsaWNlKDEsIC0xKSA6XG4gICAgICB1cmxPYmplY3QuaG9zdG5hbWUsXG4gICAgaGFzaDogdXJsT2JqZWN0Lmhhc2gsXG4gICAgc2VhcmNoOiB1cmxPYmplY3Quc2VhcmNoLFxuICAgIHBhdGhuYW1lOiB1cmxPYmplY3QucGF0aG5hbWUsXG4gICAgcGF0aDogdXJsT2JqZWN0LnBhdGhuYW1lICsgdXJsT2JqZWN0LnNlYXJjaCxcbiAgICBocmVmOiB1cmxPYmplY3QuaHJlZixcbiAgfTtcbiAgaWYgKHVybE9iamVjdC5wb3J0ICE9PSBcIlwiKSB7XG4gICAgb3B0aW9ucy5wb3J0ID0gTnVtYmVyKHVybE9iamVjdC5wb3J0KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gcmVtb3ZlTWF0Y2hpbmdIZWFkZXJzKHJlZ2V4LCBoZWFkZXJzKSB7XG4gIHZhciBsYXN0VmFsdWU7XG4gIGZvciAodmFyIGhlYWRlciBpbiBoZWFkZXJzKSB7XG4gICAgaWYgKHJlZ2V4LnRlc3QoaGVhZGVyKSkge1xuICAgICAgbGFzdFZhbHVlID0gaGVhZGVyc1toZWFkZXJdO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbaGVhZGVyXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIChsYXN0VmFsdWUgPT09IG51bGwgfHwgdHlwZW9mIGxhc3RWYWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikgP1xuICAgIHVuZGVmaW5lZCA6IFN0cmluZyhsYXN0VmFsdWUpLnRyaW0oKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRXJyb3JUeXBlKGNvZGUsIG1lc3NhZ2UsIGJhc2VDbGFzcykge1xuICAvLyBDcmVhdGUgY29uc3RydWN0b3JcbiAgZnVuY3Rpb24gQ3VzdG9tRXJyb3IocHJvcGVydGllcykge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICAgIE9iamVjdC5hc3NpZ24odGhpcywgcHJvcGVydGllcyB8fCB7fSk7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmNhdXNlID8gbWVzc2FnZSArIFwiOiBcIiArIHRoaXMuY2F1c2UubWVzc2FnZSA6IG1lc3NhZ2U7XG4gIH1cblxuICAvLyBBdHRhY2ggY29uc3RydWN0b3IgYW5kIHNldCBkZWZhdWx0IHByb3BlcnRpZXNcbiAgQ3VzdG9tRXJyb3IucHJvdG90eXBlID0gbmV3IChiYXNlQ2xhc3MgfHwgRXJyb3IpKCk7XG4gIEN1c3RvbUVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEN1c3RvbUVycm9yO1xuICBDdXN0b21FcnJvci5wcm90b3R5cGUubmFtZSA9IFwiRXJyb3IgW1wiICsgY29kZSArIFwiXVwiO1xuICByZXR1cm4gQ3VzdG9tRXJyb3I7XG59XG5cbmZ1bmN0aW9uIGFib3J0UmVxdWVzdChyZXF1ZXN0KSB7XG4gIGZvciAodmFyIGV2ZW50IG9mIGV2ZW50cykge1xuICAgIHJlcXVlc3QucmVtb3ZlTGlzdGVuZXIoZXZlbnQsIGV2ZW50SGFuZGxlcnNbZXZlbnRdKTtcbiAgfVxuICByZXF1ZXN0Lm9uKFwiZXJyb3JcIiwgbm9vcCk7XG4gIHJlcXVlc3QuYWJvcnQoKTtcbn1cblxuZnVuY3Rpb24gaXNTdWJkb21haW4oc3ViZG9tYWluLCBkb21haW4pIHtcbiAgYXNzZXJ0KGlzU3RyaW5nKHN1YmRvbWFpbikgJiYgaXNTdHJpbmcoZG9tYWluKSk7XG4gIHZhciBkb3QgPSBzdWJkb21haW4ubGVuZ3RoIC0gZG9tYWluLmxlbmd0aCAtIDE7XG4gIHJldHVybiBkb3QgPiAwICYmIHN1YmRvbWFpbltkb3RdID09PSBcIi5cIiAmJiBzdWJkb21haW4uZW5kc1dpdGgoZG9tYWluKTtcbn1cblxuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiB8fCB2YWx1ZSBpbnN0YW5jZW9mIFN0cmluZztcbn1cblxuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbmZ1bmN0aW9uIGlzQnVmZmVyKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgKFwibGVuZ3RoXCIgaW4gdmFsdWUpO1xufVxuXG4vLyBFeHBvcnRzXG5tb2R1bGUuZXhwb3J0cyA9IHdyYXAoeyBodHRwOiBodHRwLCBodHRwczogaHR0cHMgfSk7XG5tb2R1bGUuZXhwb3J0cy53cmFwID0gd3JhcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxHQUFHLEdBQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUM7QUFDeEIsSUFBSUMsR0FBRyxHQUFHRixHQUFHLENBQUNFLEdBQUc7QUFDakIsSUFBSUMsSUFBSSxHQUFHRixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzFCLElBQUlHLEtBQUssR0FBR0gsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM1QixJQUFJSSxRQUFRLEdBQUdKLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQ0ksUUFBUTtBQUN6QyxJQUFJQyxNQUFNLEdBQUdMLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDOUIsSUFBSU0sS0FBSyxHQUFHTixPQUFPLENBQUMsU0FBUyxDQUFDOztBQUU5QjtBQUNBLElBQUlPLE1BQU0sR0FBRyxDQUFDLE9BQU8sRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUyxDQUFDO0FBQzFFLElBQUlDLGFBQWEsR0FBR0MsTUFBTSxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ3ZDSCxNQUFNLENBQUNJLE9BQU8sQ0FBQyxVQUFVQyxLQUFLLEVBQUU7RUFDOUJKLGFBQWEsQ0FBQ0ksS0FBSyxDQUFDLEdBQUcsVUFBVUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRTtJQUNqRCxJQUFJLENBQUND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