{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","useMenuItem","_extends2","React","_interopRequireWildcard","_utils","_MenuUnstyled","_useButton","_useForcedRerendering","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","props","_itemState$disabled","disabled","ref","label","id","unstable_useId","menuContext","useContext","MenuUnstyledContext","itemRef","useRef","handleRef","unstable_useForkRef","Error","registerItem","unregisterItem","open","registerHighlightChangeHandler","useEffect","undefined","getRootProps","getButtonProps","focusVisible","focusableWhenDisabled","focusRequested","requestFocus","useState","focusIfRequested","useCallback","current","focus","useDebugValue","itemState","getItemState","highlighted","rerender","updateHighlightedState","highlightedItemId","otherHandlers","role","optionProps","getItemProps","tabIndex"],"sources":["useMenuItem.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useMenuItem;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _utils = require(\"@mui/utils\");\nvar _MenuUnstyled = require(\"../MenuUnstyled\");\nvar _useButton = _interopRequireDefault(require(\"../useButton\"));\nvar _useForcedRerendering = _interopRequireDefault(require(\"../utils/useForcedRerendering\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/**\n *\n * Demos:\n *\n * - [Unstyled Menu](https://mui.com/base/react-menu/#hooks)\n *\n * API:\n *\n * - [useMenuItem API](https://mui.com/base/api/use-menu-item/)\n */\nfunction useMenuItem(props) {\n  var _itemState$disabled;\n  const {\n    disabled = false,\n    ref,\n    label\n  } = props;\n  const id = (0, _utils.unstable_useId)();\n  const menuContext = React.useContext(_MenuUnstyled.MenuUnstyledContext);\n  const itemRef = React.useRef(null);\n  const handleRef = (0, _utils.unstable_useForkRef)(itemRef, ref);\n  if (menuContext === null) {\n    throw new Error('MenuItemUnstyled must be used within a MenuUnstyled');\n  }\n  const {\n    registerItem,\n    unregisterItem,\n    open,\n    registerHighlightChangeHandler\n  } = menuContext;\n  React.useEffect(() => {\n    if (id === undefined) {\n      return undefined;\n    }\n    registerItem(id, {\n      disabled,\n      id,\n      ref: itemRef,\n      label\n    });\n    return () => unregisterItem(id);\n  }, [id, registerItem, unregisterItem, disabled, ref, label]);\n  const {\n    getRootProps: getButtonProps,\n    focusVisible\n  } = (0, _useButton.default)({\n    disabled,\n    focusableWhenDisabled: true,\n    ref: handleRef\n  });\n\n  // Ensure the menu item is focused when highlighted\n  const [focusRequested, requestFocus] = React.useState(false);\n  const focusIfRequested = React.useCallback(() => {\n    if (focusRequested && itemRef.current != null) {\n      itemRef.current.focus();\n      requestFocus(false);\n    }\n  }, [focusRequested]);\n  React.useEffect(() => {\n    focusIfRequested();\n  });\n  React.useDebugValue({\n    id,\n    disabled,\n    label\n  });\n  const itemState = menuContext.getItemState(id != null ? id : '');\n  const {\n    highlighted\n  } = itemState != null ? itemState : {\n    highlighted: false\n  };\n  const rerender = (0, _useForcedRerendering.default)();\n  React.useEffect(() => {\n    function updateHighlightedState(highlightedItemId) {\n      if (highlightedItemId === id && !highlighted) {\n        rerender();\n      } else if (highlightedItemId !== id && highlighted) {\n        rerender();\n      }\n    }\n    return registerHighlightChangeHandler(updateHighlightedState);\n  });\n  React.useEffect(() => {\n    // TODO: this should be handled by the MenuButton\n    requestFocus(highlighted && open);\n  }, [highlighted, open]);\n  if (id === undefined) {\n    return {\n      getRootProps: (otherHandlers = {}) => (0, _extends2.default)({}, otherHandlers, getButtonProps(otherHandlers), {\n        role: 'menuitem'\n      }),\n      disabled: false,\n      focusVisible,\n      highlighted: false\n    };\n  }\n  return {\n    getRootProps: (otherHandlers = {}) => {\n      const optionProps = menuContext.getItemProps(id, otherHandlers);\n      return (0, _extends2.default)({}, otherHandlers, getButtonProps(otherHandlers), {\n        tabIndex: optionProps.tabIndex,\n        id: optionProps.id,\n        role: 'menuitem'\n      });\n    },\n    disabled: (_itemState$disabled = itemState == null ? void 0 : itemState.disabled) != null ? _itemState$disabled : false,\n    focusVisible,\n    highlighted\n  };\n}"],"mappings":"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"}