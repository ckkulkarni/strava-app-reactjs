{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","useListbox","_extends2","React","_interopRequireWildcard","_utils","_useListbox","_defaultListboxReducer","_useControllableReducer","_areArraysEqual","_useLatest","_useTextNavigation","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","defaultOptionComparer","optionA","optionB","defaultIsOptionDisabled","defaultOptionStringifier","option","String","props","_props$optionIdGenera","disabledItemsFocusable","disableListWrap","focusManagement","id","idProp","isOptionDisabled","listboxRef","externalListboxRef","optionComparer","optionStringifier","options","stateReducer","externalReducer","valueParam","selectionLimit","unstable_useId","defaultIdGenerator","useCallback","_","index","optionIdGenerator","propsWithDefaults","useRef","handleRef","unstable_useForkRef","highlightedValue","selectedValues","selectedValue","dispatch","handleTextNavigation","searchString","event","type","ActionTypes","textNavigation","useEffect","undefined","setValue","highlightedIndex","useMemo","findIndex","latestSelectedValue","latestHighlightedIndex","previousOptions","current","optionsChange","setSelectedValue","values","setHighlightedValue","setHighlight","highlight","createHandleOptionClick","other","_other$onClick","onClick","defaultPrevented","preventDefault","optionClick","createHandleOptionPointerOver","_other$onMouseOver","onMouseOver","optionHover","createHandleKeyDown","_other$onKeyDown","onKeyDown","keysToPreventDefault","push","includes","keyDown","createHandleBlur","_other$onBlur","_listboxRef$current","onBlur","contains","document","activeElement","blur","getRootProps","otherHandlers","role","tabIndex","ref","getOptionState","_latestSelectedValue$","opt","selected","some","disabled","highlighted","getOptionTabIndex","optionState","getOptionProps","onPointerOver","useDebugValue","highlightedOption","selectedOption"],"sources":["useListbox.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useListbox;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _utils = require(\"@mui/utils\");\nvar _useListbox = require(\"./useListbox.types\");\nvar _defaultListboxReducer = _interopRequireDefault(require(\"./defaultListboxReducer\"));\nvar _useControllableReducer = _interopRequireDefault(require(\"./useControllableReducer\"));\nvar _areArraysEqual = _interopRequireDefault(require(\"../utils/areArraysEqual\"));\nvar _useLatest = _interopRequireDefault(require(\"../utils/useLatest\"));\nvar _useTextNavigation = _interopRequireDefault(require(\"../utils/useTextNavigation\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nconst defaultOptionComparer = (optionA, optionB) => optionA === optionB;\nconst defaultIsOptionDisabled = () => false;\nconst defaultOptionStringifier = option => typeof option === 'string' ? option : String(option);\n\n/**\n * @ignore - internal hook.\n *\n * The useListbox is a lower-level utility that is used to build a listbox component.\n * It's used to manage the state of the listbox and its options.\n * Contains the logic for keyboard navigation, selection, and focus management.\n */\nfunction useListbox(props) {\n  var _props$optionIdGenera;\n  const {\n    disabledItemsFocusable = false,\n    disableListWrap = false,\n    focusManagement = 'activeDescendant',\n    id: idProp,\n    isOptionDisabled = defaultIsOptionDisabled,\n    listboxRef: externalListboxRef,\n    optionComparer = defaultOptionComparer,\n    optionStringifier = defaultOptionStringifier,\n    options,\n    stateReducer: externalReducer,\n    value: valueParam,\n    selectionLimit = null\n  } = props;\n  const id = (0, _utils.unstable_useId)(idProp);\n  const defaultIdGenerator = React.useCallback((_, index) => `${id}-option-${index}`, [id]);\n  const optionIdGenerator = (_props$optionIdGenera = props.optionIdGenerator) != null ? _props$optionIdGenera : defaultIdGenerator;\n  const propsWithDefaults = (0, _useLatest.default)((0, _extends2.default)({}, props, {\n    disabledItemsFocusable,\n    disableListWrap,\n    focusManagement,\n    isOptionDisabled,\n    optionComparer,\n    optionStringifier,\n    selectionLimit\n  }), [props]);\n  const listboxRef = React.useRef(null);\n  const handleRef = (0, _utils.unstable_useForkRef)(externalListboxRef, listboxRef);\n  const [{\n    highlightedValue,\n    selectedValues: selectedValue\n  }, dispatch] = (0, _useControllableReducer.default)(_defaultListboxReducer.default, externalReducer, propsWithDefaults);\n  const handleTextNavigation = (0, _useTextNavigation.default)((searchString, event) => dispatch({\n    type: _useListbox.ActionTypes.textNavigation,\n    event,\n    searchString\n  }));\n  React.useEffect(() => {\n    // if a controlled value changes, we need to update the state to keep things in sync\n    if (valueParam !== undefined && valueParam !== selectedValue) {\n      dispatch({\n        type: _useListbox.ActionTypes.setValue,\n        event: null,\n        value: valueParam\n      });\n    }\n  }, [valueParam, selectedValue, dispatch]);\n  const highlightedIndex = React.useMemo(() => {\n    return highlightedValue == null ? -1 : options.findIndex(option => optionComparer(option, highlightedValue));\n  }, [highlightedValue, options, optionComparer]);\n\n  // introducing refs to avoid recreating the getOptionState function on each change.\n  const latestSelectedValue = (0, _useLatest.default)(selectedValue);\n  const latestHighlightedIndex = (0, _useLatest.default)(highlightedIndex);\n  const previousOptions = React.useRef([]);\n  React.useEffect(() => {\n    if ((0, _areArraysEqual.default)(previousOptions.current, options, optionComparer)) {\n      return;\n    }\n    dispatch({\n      type: _useListbox.ActionTypes.optionsChange,\n      event: null,\n      options,\n      previousOptions: previousOptions.current\n    });\n    previousOptions.current = options;\n  }, [options, optionComparer, dispatch]);\n  const setSelectedValue = React.useCallback(values => {\n    dispatch({\n      type: _useListbox.ActionTypes.setValue,\n      event: null,\n      value: values\n    });\n  }, [dispatch]);\n  const setHighlightedValue = React.useCallback(option => {\n    dispatch({\n      type: _useListbox.ActionTypes.setHighlight,\n      event: null,\n      highlight: option\n    });\n  }, [dispatch]);\n  const createHandleOptionClick = React.useCallback((option, other) => event => {\n    var _other$onClick;\n    (_other$onClick = other.onClick) == null ? void 0 : _other$onClick.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    event.preventDefault();\n    dispatch({\n      type: _useListbox.ActionTypes.optionClick,\n      option,\n      event\n    });\n  }, [dispatch]);\n  const createHandleOptionPointerOver = React.useCallback((option, other) => event => {\n    var _other$onMouseOver;\n    (_other$onMouseOver = other.onMouseOver) == null ? void 0 : _other$onMouseOver.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    dispatch({\n      type: _useListbox.ActionTypes.optionHover,\n      option,\n      event\n    });\n  }, [dispatch]);\n  const createHandleKeyDown = other => event => {\n    var _other$onKeyDown;\n    (_other$onKeyDown = other.onKeyDown) == null ? void 0 : _other$onKeyDown.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    const keysToPreventDefault = ['ArrowUp', 'ArrowDown', 'Home', 'End', 'PageUp', 'PageDown'];\n    if (focusManagement === 'activeDescendant') {\n      // When the child element is focused using the activeDescendant attribute,\n      // the listbox handles keyboard events on its behalf.\n      // We have to `preventDefault()` is this case to prevent the browser from\n      // scrolling the view when space is pressed or submitting forms when enter is pressed.\n      keysToPreventDefault.push(' ', 'Enter');\n    }\n    if (keysToPreventDefault.includes(event.key)) {\n      event.preventDefault();\n    }\n    dispatch({\n      type: _useListbox.ActionTypes.keyDown,\n      event\n    });\n    handleTextNavigation(event);\n  };\n  const createHandleBlur = other => event => {\n    var _other$onBlur, _listboxRef$current;\n    (_other$onBlur = other.onBlur) == null ? void 0 : _other$onBlur.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    if ((_listboxRef$current = listboxRef.current) != null && _listboxRef$current.contains(document.activeElement)) {\n      // focus is within the listbox\n      return;\n    }\n    dispatch({\n      type: _useListbox.ActionTypes.blur,\n      event\n    });\n  };\n  const getRootProps = (otherHandlers = {}) => {\n    return (0, _extends2.default)({}, otherHandlers, {\n      'aria-activedescendant': focusManagement === 'activeDescendant' && highlightedValue != null ? optionIdGenerator(highlightedValue, highlightedIndex) : undefined,\n      id,\n      onBlur: createHandleBlur(otherHandlers),\n      onKeyDown: createHandleKeyDown(otherHandlers),\n      role: 'listbox',\n      tabIndex: focusManagement === 'DOM' ? -1 : 0,\n      ref: handleRef\n    });\n  };\n  const getOptionState = React.useCallback(option => {\n    var _latestSelectedValue$;\n    const index = options.findIndex(opt => optionComparer(opt, option));\n    const selected = ((_latestSelectedValue$ = latestSelectedValue.current) != null ? _latestSelectedValue$ : []).some(value => value != null && optionComparer(option, value));\n    const disabled = isOptionDisabled(option, index);\n    const highlighted = latestHighlightedIndex.current === index && index !== -1;\n    return {\n      disabled,\n      highlighted,\n      index,\n      selected\n    };\n  }, [options, isOptionDisabled, optionComparer, latestSelectedValue, latestHighlightedIndex]);\n  const getOptionTabIndex = React.useCallback(optionState => {\n    if (focusManagement === 'activeDescendant') {\n      return undefined;\n    }\n    if (!optionState.highlighted) {\n      return -1;\n    }\n    if (optionState.disabled && !disabledItemsFocusable) {\n      return -1;\n    }\n    return 0;\n  }, [focusManagement, disabledItemsFocusable]);\n  const getOptionProps = React.useCallback((option, otherHandlers = {}) => {\n    const optionState = getOptionState(option);\n    return (0, _extends2.default)({}, otherHandlers, {\n      'aria-disabled': optionState.disabled || undefined,\n      'aria-selected': optionState.selected,\n      id: optionIdGenerator(option, optionState.index),\n      onClick: createHandleOptionClick(option, otherHandlers),\n      onPointerOver: createHandleOptionPointerOver(option, otherHandlers),\n      role: 'option',\n      tabIndex: getOptionTabIndex(optionState)\n    });\n  }, [optionIdGenerator, createHandleOptionClick, createHandleOptionPointerOver, getOptionTabIndex, getOptionState]);\n  React.useDebugValue({\n    highlightedOption: highlightedValue,\n    selectedOption: selectedValue\n  });\n  return {\n    getRootProps,\n    getOptionProps,\n    getOptionState,\n    highlightedOption: highlightedValue,\n    selectedOption: selectedValue,\n    setSelectedValue,\n    setHighlightedValue\n  };\n}"],"mappings":"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"}