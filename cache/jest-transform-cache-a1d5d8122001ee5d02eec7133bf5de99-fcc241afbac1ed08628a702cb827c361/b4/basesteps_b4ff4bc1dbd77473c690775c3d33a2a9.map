{"version":3,"names":["_getJestObj","mock","_jestCucumber","require","_react","_Base","_interopRequireDefault","_react2","router","_interopRequireWildcard","_reactRouterDom","_axios","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","jest","feature","loadFeature","defineFeature","test","given","when","then","and","navigate","fn","beforeEach","spyOn","mockImplementation","axios","mockResolvedValueOnce","data","Title","Year","Rated","Released","Runtime","Genre","Director","Writer","Actors","Plot","Language","Poster","Ratings","Source","Value","imdbRating","imdbVotes","imdbID","screen","render","createElement","MemoryRouter","initialEntries","Routes","Route","path","element","expect","toBeDefined","movieTab","getByRole","name","fireEvent","click","movieSearch","getByTestId","querySelector","toBeInTheDocument","change","target","value","submitButton","waitFor","movieTitle","getByText","movieRating","toBeTruthy","movieCard","toHaveBeenCalled"],"sources":["base.steps.tsx"],"sourcesContent":["import { defineFeature, loadFeature } from \"jest-cucumber\";\r\nimport { fireEvent, render, waitFor } from \"@testing-library/react\";\r\nimport Base from \"../../Base\";\r\nimport React from \"react\";\r\nimport \"@testing-library/jest-dom/extend-expect\";\r\nimport * as router from \"react-router\";\r\nimport \"text-encoding\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Routes,\r\n  Route,\r\n  MemoryRouter,\r\n} from \"react-router-dom\";\r\nconst feature = loadFeature(\"src/components/features/base.feature\");\r\nimport axios from \"axios\";\r\nimport { act } from \"react-dom/test-utils\";\r\njest.mock(\"axios\");\r\ndefineFeature(feature, (test) => {\r\n  test(\"Search for a movie\", ({ given, when, then, and }) => {\r\n    const navigate = jest.fn();\r\n    beforeEach(() => {\r\n      jest.spyOn(router, \"useNavigate\").mockImplementation(() => navigate);\r\n    });\r\n    (axios.get as jest.Mock).mockResolvedValueOnce({\r\n      data: {\r\n        Title: \"Manmadhudu\",\r\n        Year: \"2002\",\r\n        Rated: \"N/A\",\r\n        Released: \"20 Dec 2002\",\r\n        Runtime: \"142 min\",\r\n        Genre: \"Comedy, Romance\",\r\n        Director: \"Vijay K. Bhaskar\",\r\n        Writer: \"Vijay K. Bhaskar, Trivikram Srinivas\",\r\n        Actors: \"Nagarjuna Akkineni, Sonali Bendre, Anshu\",\r\n        Plot: \"A misogynist is forced by circumstances to work with a woman.\",\r\n        Language: \"Telugu\",\r\n        Poster:\r\n          \"https://m.media-amazon.com/images/M/MV5BOTE1M2IwMzktNjI1Mi00ZTFkLTg4MmMtNTZmMjk4YTdhODlkXkEyXkFqcGdeQXVyNjE2NTgxOTE@._V1_SX300.jpg\",\r\n        Ratings: [{ Source: \"Internet Movie Database\", Value: \"8.3/10\" }],\r\n        imdbRating: \"8.3\",\r\n        imdbVotes: \"4,096\",\r\n        imdbID: \"tt0355742\",\r\n      },\r\n    });\r\n\r\n    const screen = render(\r\n      <MemoryRouter initialEntries={[\"/\"]}>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Base />} />\r\n        </Routes>\r\n      </MemoryRouter>\r\n    );\r\n    given(\"I am on the search page\", () => {\r\n      expect(screen).toBeDefined();\r\n    });\r\n    when('I select the \"Movie\" tab', () => {\r\n      const movieTab = screen.getByRole(\"tab\", { name: \"Movie\" });\r\n      fireEvent.click(movieTab);\r\n    });\r\n    and('I enter \"Manmadhudu\" in the search input and hit submit', async () => {\r\n      const movieSearch = screen\r\n        .getByTestId(\"search-movies\")\r\n        .querySelector(\"input\")!;\r\n      expect(movieSearch).toBeInTheDocument();\r\n\r\n      fireEvent.change(movieSearch, { target: { value: \"Manmadhudu\" } });\r\n      const submitButton = screen.getByRole(\"button\", { name: \"Submit\" });\r\n      fireEvent.click(submitButton);\r\n    });\r\n\r\n    then(\"I should see the search results card\", async () => {\r\n      await waitFor(() => {\r\n        const movieTitle = screen.getByText(\"Manmadhudu\");\r\n        const movieRating = screen.getByText(\"Rating: N/A\");\r\n        expect(movieTitle).toBeTruthy();\r\n        expect(movieRating).toBeTruthy();\r\n      });\r\n    });\r\n    and(\"I should be able to click the card to view more details\", async () => {\r\n      const movieCard = screen.getByTestId(\"movie-card\");\r\n      fireEvent.click(movieCard);\r\n      expect(navigate).toHaveBeenCalled();\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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"}