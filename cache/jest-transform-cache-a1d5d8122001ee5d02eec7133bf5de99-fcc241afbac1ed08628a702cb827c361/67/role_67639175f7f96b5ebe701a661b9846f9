c43c13056ba7012df37882ba38cf2ad5
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.queryByRole = exports.queryAllByRole = exports.getByRole = exports.getAllByRole = exports.findByRole = exports.findAllByRole = void 0;
var _domAccessibilityApi = require("dom-accessibility-api");
var _ariaQuery = require("aria-query");
var _roleHelpers = require("../role-helpers");
var _queryHelpers = require("../query-helpers");
var _helpers = require("../helpers");
var _allUtils = require("./all-utils");
const queryAllByRole = (container, role, {
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description,
  queryFallbacks = false,
  selected,
  checked,
  pressed,
  current,
  level,
  expanded
} = {}) => {
  (0, _helpers.checkContainerType)(container);
  if (selected !== undefined) {
    var _allRoles$get;
    // guard against unknown roles
    if (((_allRoles$get = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get.props['aria-selected']) === undefined) {
      throw new Error(`"aria-selected" is not supported on role "${role}".`);
    }
  }
  if (checked !== undefined) {
    var _allRoles$get2;
    // guard against unknown roles
    if (((_allRoles$get2 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get2.props['aria-checked']) === undefined) {
      throw new Error(`"aria-checked" is not supported on role "${role}".`);
    }
  }
  if (pressed !== undefined) {
    var _allRoles$get3;
    // guard against unknown roles
    if (((_allRoles$get3 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get3.props['aria-pressed']) === undefined) {
      throw new Error(`"aria-pressed" is not supported on role "${role}".`);
    }
  }
  if (current !== undefined) {
    var _allRoles$get4;
    /* istanbul ignore next */
    // guard against unknown roles
    // All currently released ARIA versions support `aria-current` on all roles.
    // Leaving this for symetry and forward compatibility
    if (((_allRoles$get4 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get4.props['aria-current']) === undefined) {
      throw new Error(`"aria-current" is not supported on role "${role}".`);
    }
  }
  if (level !== undefined) {
    // guard against using `level` option with any role other than `heading`
    if (role !== 'heading') {
      throw new Error(`Role "${role}" cannot have "level" property.`);
    }
  }
  if (expanded !== undefined) {
    var _allRoles$get5;
    // guard against unknown roles
    if (((_allRoles$get5 = _ariaQuery.roles.get(role)) == null ? void 0 : _allRoles$get5.props['aria-expanded']) === undefined) {
      throw new Error(`"aria-expanded" is not supported on role "${role}".`);
    }
  }
  const subtreeIsInaccessibleCache = new WeakMap();
  function cachedIsSubtreeInaccessible(element) {
    if (!subtreeIsInaccessibleCache.has(element)) {
      subtreeIsInaccessibleCache.set(element, (0, _roleHelpers.isSubtreeInaccessible)(element));
    }
    return subtreeIsInaccessibleCache.get(element);
  }
  return Array.from(container.querySelectorAll(
  // Only query elements that can be matched by the following filters
  makeRoleSelector(role))).filter(node => {
    const isRoleSpecifiedExplicitly = node.hasAttribute('role');
    if (isRoleSpecifiedExplicitly) {
      const roleValue = node.getAttribute('role');
      if (queryFallbacks) {
        return roleValue.split(' ').filter(Boolean).some(roleAttributeToken => roleAttributeToken === role);
      }
      // other wise only send the first token to match
      const [firstRoleAttributeToken] = roleValue.split(' ');
      return firstRoleAttributeToken === role;
    }
    const implicitRoles = (0, _roleHelpers.getImplicitAriaRoles)(node);
    return implicitRoles.some(implicitRole => {
      return implicitRole === role;
    });
  }).filter(element => {
    if (selected !== undefined) {
      return selected === (0, _roleHelpers.computeAriaSelected)(element);
    }
    if (checked !== undefined) {
      return checked === (0, _roleHelpers.computeAriaChecked)(element);
    }
    if (pressed !== undefined) {
      return pressed === (0, _roleHelpers.computeAriaPressed)(element);
    }
    if (current !== undefined) {
      return current === (0, _roleHelpers.computeAriaCurrent)(element);
    }
    if (expanded !== undefined) {
      return expanded === (0, _roleHelpers.computeAriaExpanded)(element);
    }
    if (level !== undefined) {
      return level === (0, _roleHelpers.computeHeadingLevel)(element);
    }
    // don't care if aria attributes are unspecified
    return true;
  }).filter(element => {
    if (name === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleName)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, name, text => text);
  }).filter(element => {
    if (description === undefined) {
      // Don't care
      return true;
    }
    return (0, _allUtils.matches)((0, _domAccessibilityApi.computeAccessibleDescription)(element, {
      computedStyleSupportsPseudoElements: (0, _allUtils.getConfig)().computedStyleSupportsPseudoElements
    }), element, description, text => text);
  }).filter(element => {
    return hidden === false ? (0, _roleHelpers.isInaccessible)(element, {
      isSubtreeInaccessible: cachedIsSubtreeInaccessible
    }) === false : true;
  });
};
function makeRoleSelector(role) {
  const explicitRoleSelector = `*[role~="${role}"]`;
  const roleRelations = _ariaQuery.roleElements.get(role) ?? new Set();
  const implicitRoleSelectors = new Set(Array.from(roleRelations).map(({
    name
  }) => name));

  // Current transpilation config sometimes assumes `...` is always applied to arrays.
  // `...` is equivalent to `Array.prototype.concat` for arrays.
  // If you replace this code with `[explicitRoleSelector, ...implicitRoleSelectors]`, make sure every transpilation target retains the `...` in favor of `Array.prototype.concat`.
  return [explicitRoleSelector].concat(Array.from(implicitRoleSelectors)).join(',');
}
const getNameHint = name => {
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  return nameHint;
};
const getMultipleError = (c, role, {
  name
} = {}) => {
  return `Found multiple elements with the role "${role}"${getNameHint(name)}`;
};
const getMissingError = (container, role, {
  hidden = (0, _allUtils.getConfig)().defaultHidden,
  name,
  description
} = {}) => {
  if ((0, _allUtils.getConfig)()._disableExpensiveErrorDiagnostics) {
    return `Unable to find role="${role}"${getNameHint(name)}`;
  }
  let roles = '';
  Array.from(container.children).forEach(childElement => {
    roles += (0, _roleHelpers.prettyRoles)(childElement, {
      hidden,
      includeDescription: description !== undefined
    });
  });
  let roleMessage;
  if (roles.length === 0) {
    if (hidden === false) {
      roleMessage = 'There are no accessible roles. But there might be some inaccessible roles. ' + 'If you wish to access them, then set the `hidden` option to `true`. ' + 'Learn more about this here: https://testing-library.com/docs/dom-testing-library/api-queries#byrole';
    } else {
      roleMessage = 'There are no available roles.';
    }
  } else {
    roleMessage = `
Here are the ${hidden === false ? 'accessible' : 'available'} roles:

  ${roles.replace(/\n/g, '\n  ').replace(/\n\s\s\n/g, '\n\n')}
`.trim();
  }
  let nameHint = '';
  if (name === undefined) {
    nameHint = '';
  } else if (typeof name === 'string') {
    nameHint = ` and name "${name}"`;
  } else {
    nameHint = ` and name \`${name}\``;
  }
  let descriptionHint = '';
  if (description === undefined) {
    descriptionHint = '';
  } else if (typeof description === 'string') {
    descriptionHint = ` and description "${description}"`;
  } else {
    descriptionHint = ` and description \`${description}\``;
  }
  return `
Unable to find an ${hidden === false ? 'accessible ' : ''}element with the role "${role}"${nameHint}${descriptionHint}

${roleMessage}`.trim();
};
const queryAllByRoleWithSuggestions = (0, _queryHelpers.wrapAllByQueryWithSuggestion)(queryAllByRole, queryAllByRole.name, 'queryAll');
exports.queryAllByRole = queryAllByRoleWithSuggestions;
const [queryByRole, getAllByRole, getByRole, findAllByRole, findByRole] = (0, _allUtils.buildQueries)(queryAllByRole, getMultipleError, getMissingError);
exports.findByRole = findByRole;
exports.findAllByRole = findAllByRole;
exports.getByRole = getByRole;
exports.getAllByRole = getAllByRole;
exports.queryByRole = queryByRole;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInF1ZXJ5QnlSb2xlIiwicXVlcnlBbGxCeVJvbGUiLCJnZXRCeVJvbGUiLCJnZXRBbGxCeVJvbGUiLCJmaW5kQnlSb2xlIiwiZmluZEFsbEJ5Um9sZSIsIl9kb21BY2Nlc3NpYmlsaXR5QXBpIiwicmVxdWlyZSIsIl9hcmlhUXVlcnkiLCJfcm9sZUhlbHBlcnMiLCJfcXVlcnlIZWxwZXJzIiwiX2hlbHBlcnMiLCJfYWxsVXRpbHMiLCJjb250YWluZXIiLCJyb2xlIiwiaGlkZGVuIiwiZ2V0Q29uZmlnIiwiZGVmYXVsdEhpZGRlbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInF1ZXJ5RmFsbGJhY2tzIiwic2VsZWN0ZWQiLCJjaGVja2VkIiwicHJlc3NlZCIsImN1cnJlbnQiLCJsZXZlbCIsImV4cGFuZGVkIiwiY2hlY2tDb250YWluZXJUeXBlIiwidW5kZWZpbmVkIiwiX2FsbFJvbGVzJGdldCIsInJvbGVzIiwiZ2V0IiwicHJvcHMiLCJFcnJvciIsIl9hbGxSb2xlcyRnZXQyIiwiX2FsbFJvbGVzJGdldDMiLCJfYWxsUm9sZXMkZ2V0NCIsIl9hbGxSb2xlcyRnZXQ1Iiwic3VidHJlZUlzSW5hY2Nlc3NpYmxlQ2FjaGUiLCJXZWFrTWFwIiwiY2FjaGVkSXNTdWJ0cmVlSW5hY2Nlc3NpYmxlIiwiZWxlbWVudCIsImhhcyIsInNldCIsImlzU3VidHJlZUluYWNjZXNzaWJsZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJtYWtlUm9sZVNlbGVjdG9yIiwiZmlsdGVyIiwibm9kZSIsImlzUm9sZVNwZWNpZmllZEV4cGxpY2l0bHkiLCJoYXNBdHRyaWJ1dGUiLCJyb2xlVmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsIkJvb2xlYW4iLCJzb21lIiwicm9sZUF0dHJpYnV0ZVRva2VuIiwiZmlyc3RSb2xlQXR0cmlidXRlVG9rZW4iLCJpbXBsaWNpdFJvbGVzIiwiZ2V0SW1wbGljaXRBcmlhUm9sZXMiLCJpbXBsaWNpdFJvbGUiLCJjb21wdXRlQXJpYVNlbGVjdGVkIiwiY29tcHV0ZUFyaWFDaGVja2VkIiwiY29tcHV0ZUFyaWFQcmVzc2VkIiwiY29tcHV0ZUFyaWFDdXJyZW50IiwiY29tcHV0ZUFyaWFFeHBhbmRlZCIsImNvbXB1dGVIZWFkaW5nTGV2ZWwiLCJtYXRjaGVzIiwiY29tcHV0ZUFjY2Vzc2libGVOYW1lIiwiY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHMiLCJ0ZXh0IiwiY29tcHV0ZUFjY2Vzc2libGVEZXNjcmlwdGlvbiIsImlzSW5hY2Nlc3NpYmxlIiwiZXhwbGljaXRSb2xlU2VsZWN0b3IiLCJyb2xlUmVsYXRpb25zIiwicm9sZUVsZW1lbnRzIiwiU2V0IiwiaW1wbGljaXRSb2xlU2VsZWN0b3JzIiwibWFwIiwiY29uY2F0Iiwiam9pbiIsImdldE5hbWVIaW50IiwibmFtZUhpbnQiLCJnZXRNdWx0aXBsZUVycm9yIiwiYyIsImdldE1pc3NpbmdFcnJvciIsIl9kaXNhYmxlRXhwZW5zaXZlRXJyb3JEaWFnbm9zdGljcyIsImNoaWxkcmVuIiwiZm9yRWFjaCIsImNoaWxkRWxlbWVudCIsInByZXR0eVJvbGVzIiwiaW5jbHVkZURlc2NyaXB0aW9uIiwicm9sZU1lc3NhZ2UiLCJsZW5ndGgiLCJyZXBsYWNlIiwidHJpbSIsImRlc2NyaXB0aW9uSGludCIsInF1ZXJ5QWxsQnlSb2xlV2l0aFN1Z2dlc3Rpb25zIiwid3JhcEFsbEJ5UXVlcnlXaXRoU3VnZ2VzdGlvbiIsImJ1aWxkUXVlcmllcyJdLCJzb3VyY2VzIjpbInJvbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnF1ZXJ5QnlSb2xlID0gZXhwb3J0cy5xdWVyeUFsbEJ5Um9sZSA9IGV4cG9ydHMuZ2V0QnlSb2xlID0gZXhwb3J0cy5nZXRBbGxCeVJvbGUgPSBleHBvcnRzLmZpbmRCeVJvbGUgPSBleHBvcnRzLmZpbmRBbGxCeVJvbGUgPSB2b2lkIDA7XG52YXIgX2RvbUFjY2Vzc2liaWxpdHlBcGkgPSByZXF1aXJlKFwiZG9tLWFjY2Vzc2liaWxpdHktYXBpXCIpO1xudmFyIF9hcmlhUXVlcnkgPSByZXF1aXJlKFwiYXJpYS1xdWVyeVwiKTtcbnZhciBfcm9sZUhlbHBlcnMgPSByZXF1aXJlKFwiLi4vcm9sZS1oZWxwZXJzXCIpO1xudmFyIF9xdWVyeUhlbHBlcnMgPSByZXF1aXJlKFwiLi4vcXVlcnktaGVscGVyc1wiKTtcbnZhciBfaGVscGVycyA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzXCIpO1xudmFyIF9hbGxVdGlscyA9IHJlcXVpcmUoXCIuL2FsbC11dGlsc1wiKTtcbmNvbnN0IHF1ZXJ5QWxsQnlSb2xlID0gKGNvbnRhaW5lciwgcm9sZSwge1xuICBoaWRkZW4gPSAoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5kZWZhdWx0SGlkZGVuLFxuICBuYW1lLFxuICBkZXNjcmlwdGlvbixcbiAgcXVlcnlGYWxsYmFja3MgPSBmYWxzZSxcbiAgc2VsZWN0ZWQsXG4gIGNoZWNrZWQsXG4gIHByZXNzZWQsXG4gIGN1cnJlbnQsXG4gIGxldmVsLFxuICBleHBhbmRlZFxufSA9IHt9KSA9PiB7XG4gICgwLCBfaGVscGVycy5jaGVja0NvbnRhaW5lclR5cGUpKGNvbnRhaW5lcik7XG4gIGlmIChzZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQ7XG4gICAgLy8gZ3VhcmQgYWdhaW5zdCB1bmtub3duIHJvbGVzXG4gICAgaWYgKCgoX2FsbFJvbGVzJGdldCA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldC5wcm9wc1snYXJpYS1zZWxlY3RlZCddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1zZWxlY3RlZFwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgaWYgKGNoZWNrZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBfYWxsUm9sZXMkZ2V0MjtcbiAgICAvLyBndWFyZCBhZ2FpbnN0IHVua25vd24gcm9sZXNcbiAgICBpZiAoKChfYWxsUm9sZXMkZ2V0MiA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldDIucHJvcHNbJ2FyaWEtY2hlY2tlZCddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1jaGVja2VkXCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAocHJlc3NlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQzO1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQzID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0My5wcm9wc1snYXJpYS1wcmVzc2VkJ10pID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgXCJhcmlhLXByZXNzZWRcIiBpcyBub3Qgc3VwcG9ydGVkIG9uIHJvbGUgXCIke3JvbGV9XCIuYCk7XG4gICAgfVxuICB9XG4gIGlmIChjdXJyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgX2FsbFJvbGVzJGdldDQ7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICAvLyBndWFyZCBhZ2FpbnN0IHVua25vd24gcm9sZXNcbiAgICAvLyBBbGwgY3VycmVudGx5IHJlbGVhc2VkIEFSSUEgdmVyc2lvbnMgc3VwcG9ydCBgYXJpYS1jdXJyZW50YCBvbiBhbGwgcm9sZXMuXG4gICAgLy8gTGVhdmluZyB0aGlzIGZvciBzeW1ldHJ5IGFuZCBmb3J3YXJkIGNvbXBhdGliaWxpdHlcbiAgICBpZiAoKChfYWxsUm9sZXMkZ2V0NCA9IF9hcmlhUXVlcnkucm9sZXMuZ2V0KHJvbGUpKSA9PSBudWxsID8gdm9pZCAwIDogX2FsbFJvbGVzJGdldDQucHJvcHNbJ2FyaWEtY3VycmVudCddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1jdXJyZW50XCIgaXMgbm90IHN1cHBvcnRlZCBvbiByb2xlIFwiJHtyb2xlfVwiLmApO1xuICAgIH1cbiAgfVxuICBpZiAobGV2ZWwgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdXNpbmcgYGxldmVsYCBvcHRpb24gd2l0aCBhbnkgcm9sZSBvdGhlciB0aGFuIGBoZWFkaW5nYFxuICAgIGlmIChyb2xlICE9PSAnaGVhZGluZycpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUm9sZSBcIiR7cm9sZX1cIiBjYW5ub3QgaGF2ZSBcImxldmVsXCIgcHJvcGVydHkuYCk7XG4gICAgfVxuICB9XG4gIGlmIChleHBhbmRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIF9hbGxSb2xlcyRnZXQ1O1xuICAgIC8vIGd1YXJkIGFnYWluc3QgdW5rbm93biByb2xlc1xuICAgIGlmICgoKF9hbGxSb2xlcyRnZXQ1ID0gX2FyaWFRdWVyeS5yb2xlcy5nZXQocm9sZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYWxsUm9sZXMkZ2V0NS5wcm9wc1snYXJpYS1leHBhbmRlZCddKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiYXJpYS1leHBhbmRlZFwiIGlzIG5vdCBzdXBwb3J0ZWQgb24gcm9sZSBcIiR7cm9sZX1cIi5gKTtcbiAgICB9XG4gIH1cbiAgY29uc3Qgc3VidHJlZUlzSW5hY2Nlc3NpYmxlQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuICBmdW5jdGlvbiBjYWNoZWRJc1N1YnRyZWVJbmFjY2Vzc2libGUoZWxlbWVudCkge1xuICAgIGlmICghc3VidHJlZUlzSW5hY2Nlc3NpYmxlQ2FjaGUuaGFzKGVsZW1lbnQpKSB7XG4gICAgICBzdWJ0cmVlSXNJbmFjY2Vzc2libGVDYWNoZS5zZXQoZWxlbWVudCwgKDAsIF9yb2xlSGVscGVycy5pc1N1YnRyZWVJbmFjY2Vzc2libGUpKGVsZW1lbnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1YnRyZWVJc0luYWNjZXNzaWJsZUNhY2hlLmdldChlbGVtZW50KTtcbiAgfVxuICByZXR1cm4gQXJyYXkuZnJvbShjb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcbiAgLy8gT25seSBxdWVyeSBlbGVtZW50cyB0aGF0IGNhbiBiZSBtYXRjaGVkIGJ5IHRoZSBmb2xsb3dpbmcgZmlsdGVyc1xuICBtYWtlUm9sZVNlbGVjdG9yKHJvbGUpKSkuZmlsdGVyKG5vZGUgPT4ge1xuICAgIGNvbnN0IGlzUm9sZVNwZWNpZmllZEV4cGxpY2l0bHkgPSBub2RlLmhhc0F0dHJpYnV0ZSgncm9sZScpO1xuICAgIGlmIChpc1JvbGVTcGVjaWZpZWRFeHBsaWNpdGx5KSB7XG4gICAgICBjb25zdCByb2xlVmFsdWUgPSBub2RlLmdldEF0dHJpYnV0ZSgncm9sZScpO1xuICAgICAgaWYgKHF1ZXJ5RmFsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiByb2xlVmFsdWUuc3BsaXQoJyAnKS5maWx0ZXIoQm9vbGVhbikuc29tZShyb2xlQXR0cmlidXRlVG9rZW4gPT4gcm9sZUF0dHJpYnV0ZVRva2VuID09PSByb2xlKTtcbiAgICAgIH1cbiAgICAgIC8vIG90aGVyIHdpc2Ugb25seSBzZW5kIHRoZSBmaXJzdCB0b2tlbiB0byBtYXRjaFxuICAgICAgY29uc3QgW2ZpcnN0Um9sZUF0dHJpYnV0ZVRva2VuXSA9IHJvbGVWYWx1ZS5zcGxpdCgnICcpO1xuICAgICAgcmV0dXJuIGZpcnN0Um9sZUF0dHJpYnV0ZVRva2VuID09PSByb2xlO1xuICAgIH1cbiAgICBjb25zdCBpbXBsaWNpdFJvbGVzID0gKDAsIF9yb2xlSGVscGVycy5nZXRJbXBsaWNpdEFyaWFSb2xlcykobm9kZSk7XG4gICAgcmV0dXJuIGltcGxpY2l0Um9sZXMuc29tZShpbXBsaWNpdFJvbGUgPT4ge1xuICAgICAgcmV0dXJuIGltcGxpY2l0Um9sZSA9PT0gcm9sZTtcbiAgICB9KTtcbiAgfSkuZmlsdGVyKGVsZW1lbnQgPT4ge1xuICAgIGlmIChzZWxlY3RlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gc2VsZWN0ZWQgPT09ICgwLCBfcm9sZUhlbHBlcnMuY29tcHV0ZUFyaWFTZWxlY3RlZCkoZWxlbWVudCk7XG4gICAgfVxuICAgIGlmIChjaGVja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjaGVja2VkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhQ2hlY2tlZCkoZWxlbWVudCk7XG4gICAgfVxuICAgIGlmIChwcmVzc2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBwcmVzc2VkID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhUHJlc3NlZCkoZWxlbWVudCk7XG4gICAgfVxuICAgIGlmIChjdXJyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBjdXJyZW50ID09PSAoMCwgX3JvbGVIZWxwZXJzLmNvbXB1dGVBcmlhQ3VycmVudCkoZWxlbWVudCk7XG4gICAgfVxuICAgIGlmIChleHBhbmRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZXhwYW5kZWQgPT09ICgwLCBfcm9sZUhlbHBlcnMuY29tcHV0ZUFyaWFFeHBhbmRlZCkoZWxlbWVudCk7XG4gICAgfVxuICAgIGlmIChsZXZlbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gbGV2ZWwgPT09ICgwLCBfcm9sZUhlbHBlcnMuY29tcHV0ZUhlYWRpbmdMZXZlbCkoZWxlbWVudCk7XG4gICAgfVxuICAgIC8vIGRvbid0IGNhcmUgaWYgYXJpYSBhdHRyaWJ1dGVzIGFyZSB1bnNwZWNpZmllZFxuICAgIHJldHVybiB0cnVlO1xuICB9KS5maWx0ZXIoZWxlbWVudCA9PiB7XG4gICAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gRG9uJ3QgY2FyZVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiAoMCwgX2FsbFV0aWxzLm1hdGNoZXMpKCgwLCBfZG9tQWNjZXNzaWJpbGl0eUFwaS5jb21wdXRlQWNjZXNzaWJsZU5hbWUpKGVsZW1lbnQsIHtcbiAgICAgIGNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzOiAoMCwgX2FsbFV0aWxzLmdldENvbmZpZykoKS5jb21wdXRlZFN0eWxlU3VwcG9ydHNQc2V1ZG9FbGVtZW50c1xuICAgIH0pLCBlbGVtZW50LCBuYW1lLCB0ZXh0ID0+IHRleHQpO1xuICB9KS5maWx0ZXIoZWxlbWVudCA9PiB7XG4gICAgaWYgKGRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIERvbid0IGNhcmVcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gKDAsIF9hbGxVdGlscy5tYXRjaGVzKSgoMCwgX2RvbUFjY2Vzc2liaWxpdHlBcGkuY29tcHV0ZUFjY2Vzc2libGVEZXNjcmlwdGlvbikoZWxlbWVudCwge1xuICAgICAgY29tcHV0ZWRTdHlsZVN1cHBvcnRzUHNldWRvRWxlbWVudHM6ICgwLCBfYWxsVXRpbHMuZ2V0Q29uZmlnKSgpLmNvbXB1dGVkU3R5bGVTdXBwb3J0c1BzZXVkb0VsZW1lbnRzXG4gICAgfSksIGVsZW1lbnQsIGRlc2NyaXB0aW9uLCB0ZXh0ID0+IHRleHQpO1xuICB9KS5maWx0ZXIoZWxlbWVudCA9PiB7XG4gICAgcmV0dXJuIGhpZGRlbiA9PT0gZmFsc2UgPyAoMCwgX3JvbGVIZWxwZXJzLmlzSW5hY2Nlc3NpYmxlKShlbGVtZW50LCB7XG4gICAgICBpc1N1YnRyZWVJbmFjY2Vzc2libGU6IGNhY2hlZElzU3VidHJlZUluYWNjZXNzaWJsZVxuICAgIH0pID09PSBmYWxzZSA6IHRydWU7XG4gIH0pO1xufTtcbmZ1bmN0aW9uIG1ha2VSb2xlU2VsZWN0b3Iocm9sZSkge1xuICBjb25zdCBleHBsaWNpdFJvbGVTZWxlY3RvciA9IGAqW3JvbGV+PVwiJHtyb2xlfVwiXWA7XG4gIGNvbnN0IHJvbGVSZWxhdGlvbnMgPSBfYXJpYVF1ZXJ5LnJvbGVFbGVtZW50cy5nZXQocm9sZSkgPz8gbmV3IFNldCgpO1xuICBjb25zdCBpbXBsaWNpdFJvbGVTZWxlY3RvcnMgPSBuZXcgU2V0KEFycmF5LmZyb20ocm9sZVJlbGF0aW9ucykubWFwKCh7XG4gICAgbmFtZVxuICB9KSA9PiBuYW1lKSk7XG5cbiAgLy8gQ3VycmVudCB0cmFuc3BpbGF0aW9uIGNvbmZpZyBzb21ldGltZXMgYXNzdW1lcyBgLi4uYCBpcyBhbHdheXMgYXBwbGllZCB0byBhcnJheXMuXG4gIC8vIGAuLi5gIGlzIGVxdWl2YWxlbnQgdG8gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGZvciBhcnJheXMuXG4gIC8vIElmIHlvdSByZXBsYWNlIHRoaXMgY29kZSB3aXRoIGBbZXhwbGljaXRSb2xlU2VsZWN0b3IsIC4uLmltcGxpY2l0Um9sZVNlbGVjdG9yc11gLCBtYWtlIHN1cmUgZXZlcnkgdHJhbnNwaWxhdGlvbiB0YXJnZXQgcmV0YWlucyB0aGUgYC4uLmAgaW4gZmF2b3Igb2YgYEFycmF5LnByb3RvdHlwZS5jb25jYXRgLlxuICByZXR1cm4gW2V4cGxpY2l0Um9sZVNlbGVjdG9yXS5jb25jYXQoQXJyYXkuZnJvbShpbXBsaWNpdFJvbGVTZWxlY3RvcnMpKS5qb2luKCcsJyk7XG59XG5jb25zdCBnZXROYW1lSGludCA9IG5hbWUgPT4ge1xuICBsZXQgbmFtZUhpbnQgPSAnJztcbiAgaWYgKG5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgIG5hbWVIaW50ID0gJyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgbmFtZUhpbnQgPSBgIGFuZCBuYW1lIFwiJHtuYW1lfVwiYDtcbiAgfSBlbHNlIHtcbiAgICBuYW1lSGludCA9IGAgYW5kIG5hbWUgXFxgJHtuYW1lfVxcYGA7XG4gIH1cbiAgcmV0dXJuIG5hbWVIaW50O1xufTtcbmNvbnN0IGdldE11bHRpcGxlRXJyb3IgPSAoYywgcm9sZSwge1xuICBuYW1lXG59ID0ge30pID0+IHtcbiAgcmV0dXJuIGBGb3VuZCBtdWx0aXBsZSBlbGVtZW50cyB3aXRoIHRoZSByb2xlIFwiJHtyb2xlfVwiJHtnZXROYW1lSGludChuYW1lKX1gO1xufTtcbmNvbnN0IGdldE1pc3NpbmdFcnJvciA9IChjb250YWluZXIsIHJvbGUsIHtcbiAgaGlkZGVuID0gKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuZGVmYXVsdEhpZGRlbixcbiAgbmFtZSxcbiAgZGVzY3JpcHRpb25cbn0gPSB7fSkgPT4ge1xuICBpZiAoKDAsIF9hbGxVdGlscy5nZXRDb25maWcpKCkuX2Rpc2FibGVFeHBlbnNpdmVFcnJvckRpYWdub3N0aWNzKSB7XG4gICAgcmV0dXJuIGBVbmFibGUgdG8gZmluZCByb2xlPVwiJHtyb2xlfVwiJHtnZXROYW1lSGludChuYW1lKX1gO1xuICB9XG4gIGxldCByb2xlcyA9ICcnO1xuICBBcnJheS5mcm9tKGNvbnRhaW5lci5jaGlsZHJlbikuZm9yRWFjaChjaGlsZEVsZW1lbnQgPT4ge1xuICAgIHJvbGVzICs9ICgwLCBfcm9sZUhlbHBlcnMucHJldHR5Um9sZXMpKGNoaWxkRWxlbWVudCwge1xuICAgICAgaGlkZGVuLFxuICAgICAgaW5jbHVkZURlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiAhPT0gdW5kZWZpbmVkXG4gICAgfSk7XG4gIH0pO1xuICBsZXQgcm9sZU1lc3NhZ2U7XG4gIGlmIChyb2xlcy5sZW5ndGggPT09IDApIHtcbiAgICBpZiAoaGlkZGVuID09PSBmYWxzZSkge1xuICAgICAgcm9sZU1lc3NhZ2UgPSAnVGhlcmUgYXJlIG5vIGFjY2Vzc2libGUgcm9sZXMuIEJ1dCB0aGVyZSBtaWdodCBiZSBzb21lIGluYWNjZXNzaWJsZSByb2xlcy4gJyArICdJZiB5b3Ugd2lzaCB0byBhY2Nlc3MgdGhlbSwgdGhlbiBzZXQgdGhlIGBoaWRkZW5gIG9wdGlvbiB0byBgdHJ1ZWAuICcgKyAnTGVhcm4gbW9yZSBhYm91dCB0aGlzIGhlcmU6IGh0dHBzOi8vdGVzdGluZy1saWJyYXJ5LmNvbS9kb2NzL2RvbS10ZXN0aW5nLWxpYnJhcnkvYXBpLXF1ZXJpZXMjYnlyb2xlJztcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sZU1lc3NhZ2UgPSAnVGhlcmUgYXJlIG5vIGF2YWlsYWJsZSByb2xlcy4nO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByb2xlTWVzc2FnZSA9IGBcbkhlcmUgYXJlIHRoZSAke2hpZGRlbiA9PT0gZmFsc2UgPyAnYWNjZXNzaWJsZScgOiAnYXZhaWxhYmxlJ30gcm9sZXM6XG5cbiAgJHtyb2xlcy5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgJykucmVwbGFjZSgvXFxuXFxzXFxzXFxuL2csICdcXG5cXG4nKX1cbmAudHJpbSgpO1xuICB9XG4gIGxldCBuYW1lSGludCA9ICcnO1xuICBpZiAobmFtZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbmFtZUhpbnQgPSAnJztcbiAgfSBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICBuYW1lSGludCA9IGAgYW5kIG5hbWUgXCIke25hbWV9XCJgO1xuICB9IGVsc2Uge1xuICAgIG5hbWVIaW50ID0gYCBhbmQgbmFtZSBcXGAke25hbWV9XFxgYDtcbiAgfVxuICBsZXQgZGVzY3JpcHRpb25IaW50ID0gJyc7XG4gIGlmIChkZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZGVzY3JpcHRpb25IaW50ID0gJyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgIGRlc2NyaXB0aW9uSGludCA9IGAgYW5kIGRlc2NyaXB0aW9uIFwiJHtkZXNjcmlwdGlvbn1cImA7XG4gIH0gZWxzZSB7XG4gICAgZGVzY3JpcHRpb25IaW50ID0gYCBhbmQgZGVzY3JpcHRpb24gXFxgJHtkZXNjcmlwdGlvbn1cXGBgO1xuICB9XG4gIHJldHVybiBgXG5VbmFibGUgdG8gZmluZCBhbiAke2hpZGRlbiA9PT0gZmFsc2UgPyAnYWNjZXNzaWJsZSAnIDogJyd9ZWxlbWVudCB3aXRoIHRoZSByb2xlIFwiJHtyb2xlfVwiJHtuYW1lSGludH0ke2Rlc2NyaXB0aW9uSGludH1cblxuJHtyb2xlTWVzc2FnZX1gLnRyaW0oKTtcbn07XG5jb25zdCBxdWVyeUFsbEJ5Um9sZVdpdGhTdWdnZXN0aW9ucyA9ICgwLCBfcXVlcnlIZWxwZXJzLndyYXBBbGxCeVF1ZXJ5V2l0aFN1Z2dlc3Rpb24pKHF1ZXJ5QWxsQnlSb2xlLCBxdWVyeUFsbEJ5Um9sZS5uYW1lLCAncXVlcnlBbGwnKTtcbmV4cG9ydHMucXVlcnlBbGxCeVJvbGUgPSBxdWVyeUFsbEJ5Um9sZVdpdGhTdWdnZXN0aW9ucztcbmNvbnN0IFtxdWVyeUJ5Um9sZSwgZ2V0QWxsQnlSb2xlLCBnZXRCeVJvbGUsIGZpbmRBbGxCeVJvbGUsIGZpbmRCeVJvbGVdID0gKDAsIF9hbGxVdGlscy5idWlsZFF1ZXJpZXMpKHF1ZXJ5QWxsQnlSb2xlLCBnZXRNdWx0aXBsZUVycm9yLCBnZXRNaXNzaW5nRXJyb3IpO1xuZXhwb3J0cy5maW5kQnlSb2xlID0gZmluZEJ5Um9sZTtcbmV4cG9ydHMuZmluZEFsbEJ5Um9sZSA9IGZpbmRBbGxCeVJvbGU7XG5leHBvcnRzLmdldEJ5Um9sZSA9IGdldEJ5Um9sZTtcbmV4cG9ydHMuZ2V0QWxsQnlSb2xlID0gZ2V0QWxsQnlSb2xlO1xuZXhwb3J0cy5xdWVyeUJ5Um9sZSA9IHF1ZXJ5QnlSb2xlOyJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWkEsTUFBTSxDQUFDQyxjQUFjLENBQUNDLE9BQU8sRUFBRSxZQUFZLEVBQUU7RUFDM0NDLEtBQUssRUFBRTtBQUNULENBQUMsQ0FBQztBQUNG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