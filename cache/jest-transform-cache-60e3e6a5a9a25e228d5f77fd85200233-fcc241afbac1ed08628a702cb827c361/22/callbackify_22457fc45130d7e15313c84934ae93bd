72f34417074d8f1f05a4871191068246
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _utils = _interopRequireDefault(require("../utils.js"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
const callbackify = (fn, reducer) => {
  return _utils.default.isAsyncFn(fn) ? function (...args) {
    const cb = args.pop();
    fn.apply(this, args).then(value => {
      try {
        reducer ? cb(null, ...reducer(value)) : cb(null, value);
      } catch (err) {
        cb(err);
      }
    }, cb);
  } : fn;
};
var _default = callbackify;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdXRpbHMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY2FsbGJhY2tpZnkiLCJmbiIsInJlZHVjZXIiLCJ1dGlscyIsImlzQXN5bmNGbiIsImFyZ3MiLCJjYiIsInBvcCIsImFwcGx5IiwidGhlbiIsInZhbHVlIiwiZXJyIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiY2FsbGJhY2tpZnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHV0aWxzIGZyb20gXCIuLi91dGlscy5qc1wiO1xuXG5jb25zdCBjYWxsYmFja2lmeSA9IChmbiwgcmVkdWNlcikgPT4ge1xuICByZXR1cm4gdXRpbHMuaXNBc3luY0ZuKGZuKSA/IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgY29uc3QgY2IgPSBhcmdzLnBvcCgpO1xuICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpLnRoZW4oKHZhbHVlKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICByZWR1Y2VyID8gY2IobnVsbCwgLi4ucmVkdWNlcih2YWx1ZSkpIDogY2IobnVsbCwgdmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNiKGVycik7XG4gICAgICB9XG4gICAgfSwgY2IpO1xuICB9IDogZm47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNhbGxiYWNraWZ5O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFBZ0MsU0FBQUQsdUJBQUFFLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxLQUFBRSxPQUFBLEVBQUFGLEdBQUE7QUFFaEMsTUFBTUcsV0FBVyxHQUFHQSxDQUFDQyxFQUFFLEVBQUVDLE9BQU8sS0FBSztFQUNuQyxPQUFPQyxjQUFLLENBQUNDLFNBQVMsQ0FBQ0gsRUFBRSxDQUFDLEdBQUcsVUFBVSxHQUFHSSxJQUFJLEVBQUU7SUFDOUMsTUFBTUMsRUFBRSxHQUFHRCxJQUFJLENBQUNFLEdBQUcsRUFBRTtJQUNyQk4sRUFBRSxDQUFDTyxLQUFLLENBQUMsSUFBSSxFQUFFSCxJQUFJLENBQUMsQ0FBQ0ksSUFBSSxDQUFFQyxLQUFLLElBQUs7TUFDbkMsSUFBSTtRQUNGUixPQUFPLEdBQUdJLEVBQUUsQ0FBQyxJQUFJLEVBQUUsR0FBR0osT0FBTyxDQUFDUSxLQUFLLENBQUMsQ0FBQyxHQUFHSixFQUFFLENBQUMsSUFBSSxFQUFFSSxLQUFLLENBQUM7TUFDekQsQ0FBQyxDQUFDLE9BQU9DLEdBQUcsRUFBRTtRQUNaTCxFQUFFLENBQUNLLEdBQUcsQ0FBQztNQUNUO0lBQ0YsQ0FBQyxFQUFFTCxFQUFFLENBQUM7RUFDUixDQUFDLEdBQUdMLEVBQUU7QUFDUixDQUFDO0FBQUEsSUFBQVcsUUFBQSxHQUVjWixXQUFXO0FBQUFhLE9BQUEsQ0FBQWQsT0FBQSxHQUFBYSxRQUFBIn0=