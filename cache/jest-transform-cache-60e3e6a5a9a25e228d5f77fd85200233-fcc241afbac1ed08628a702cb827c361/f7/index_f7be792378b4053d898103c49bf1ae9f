55b01d41e52fc853154f2223ea2ce839
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = highlight;
exports.getChalk = getChalk;
exports.shouldHighlight = shouldHighlight;
var _jsTokens = require("js-tokens");
var _helperValidatorIdentifier = require("@babel/helper-validator-identifier");
var _chalk = require("chalk");
const sometimesKeywords = new Set(["as", "async", "from", "get", "of", "set"]);
function getDefs(chalk) {
  return {
    keyword: chalk.cyan,
    capitalized: chalk.yellow,
    jsxIdentifier: chalk.yellow,
    punctuator: chalk.yellow,
    number: chalk.magenta,
    string: chalk.green,
    regex: chalk.magenta,
    comment: chalk.grey,
    invalid: chalk.white.bgRed.bold
  };
}
const NEWLINE = /\r\n|[\n\r\u2028\u2029]/;
const BRACKET = /^[()[\]{}]$/;
let tokenize;
{
  const JSX_TAG = /^[a-z][\w-]*$/i;
  const getTokenType = function (token, offset, text) {
    if (token.type === "name") {
      if ((0, _helperValidatorIdentifier.isKeyword)(token.value) || (0, _helperValidatorIdentifier.isStrictReservedWord)(token.value, true) || sometimesKeywords.has(token.value)) {
        return "keyword";
      }
      if (JSX_TAG.test(token.value) && (text[offset - 1] === "<" || text.slice(offset - 2, offset) == "</")) {
        return "jsxIdentifier";
      }
      if (token.value[0] !== token.value[0].toLowerCase()) {
        return "capitalized";
      }
    }
    if (token.type === "punctuator" && BRACKET.test(token.value)) {
      return "bracket";
    }
    if (token.type === "invalid" && (token.value === "@" || token.value === "#")) {
      return "punctuator";
    }
    return token.type;
  };
  tokenize = function* (text) {
    let match;
    while (match = _jsTokens.default.exec(text)) {
      const token = _jsTokens.matchToToken(match);
      yield {
        type: getTokenType(token, match.index, text),
        value: token.value
      };
    }
  };
}
function highlightTokens(defs, text) {
  let highlighted = "";
  for (const {
    type,
    value
  } of tokenize(text)) {
    const colorize = defs[type];
    if (colorize) {
      highlighted += value.split(NEWLINE).map(str => colorize(str)).join("\n");
    } else {
      highlighted += value;
    }
  }
  return highlighted;
}
function shouldHighlight(options) {
  return !!_chalk.supportsColor || options.forceColor;
}
function getChalk(options) {
  return options.forceColor ? new _chalk.constructor({
    enabled: true,
    level: 1
  }) : _chalk;
}
function highlight(code, options = {}) {
  if (code !== "" && shouldHighlight(options)) {
    const chalk = getChalk(options);
    const defs = getDefs(chalk);
    return highlightTokens(defs, code);
  } else {
    return code;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJoaWdobGlnaHQiLCJnZXRDaGFsayIsInNob3VsZEhpZ2hsaWdodCIsIl9qc1Rva2VucyIsInJlcXVpcmUiLCJfaGVscGVyVmFsaWRhdG9ySWRlbnRpZmllciIsIl9jaGFsayIsInNvbWV0aW1lc0tleXdvcmRzIiwiU2V0IiwiZ2V0RGVmcyIsImNoYWxrIiwia2V5d29yZCIsImN5YW4iLCJjYXBpdGFsaXplZCIsInllbGxvdyIsImpzeElkZW50aWZpZXIiLCJwdW5jdHVhdG9yIiwibnVtYmVyIiwibWFnZW50YSIsInN0cmluZyIsImdyZWVuIiwicmVnZXgiLCJjb21tZW50IiwiZ3JleSIsImludmFsaWQiLCJ3aGl0ZSIsImJnUmVkIiwiYm9sZCIsIk5FV0xJTkUiLCJCUkFDS0VUIiwidG9rZW5pemUiLCJKU1hfVEFHIiwiZ2V0VG9rZW5UeXBlIiwidG9rZW4iLCJvZmZzZXQiLCJ0ZXh0IiwidHlwZSIsImlzS2V5d29yZCIsImlzU3RyaWN0UmVzZXJ2ZWRXb3JkIiwiaGFzIiwidGVzdCIsInNsaWNlIiwidG9Mb3dlckNhc2UiLCJtYXRjaCIsImV4ZWMiLCJtYXRjaFRvVG9rZW4iLCJpbmRleCIsImhpZ2hsaWdodFRva2VucyIsImRlZnMiLCJoaWdobGlnaHRlZCIsImNvbG9yaXplIiwic3BsaXQiLCJtYXAiLCJzdHIiLCJqb2luIiwib3B0aW9ucyIsInN1cHBvcnRzQ29sb3IiLCJmb3JjZUNvbG9yIiwiY29uc3RydWN0b3IiLCJlbmFibGVkIiwibGV2ZWwiLCJjb2RlIl0sInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBoaWdobGlnaHQ7XG5leHBvcnRzLmdldENoYWxrID0gZ2V0Q2hhbGs7XG5leHBvcnRzLnNob3VsZEhpZ2hsaWdodCA9IHNob3VsZEhpZ2hsaWdodDtcblxudmFyIF9qc1Rva2VucyA9IHJlcXVpcmUoXCJqcy10b2tlbnNcIik7XG5cbnZhciBfaGVscGVyVmFsaWRhdG9ySWRlbnRpZmllciA9IHJlcXVpcmUoXCJAYmFiZWwvaGVscGVyLXZhbGlkYXRvci1pZGVudGlmaWVyXCIpO1xuXG52YXIgX2NoYWxrID0gcmVxdWlyZShcImNoYWxrXCIpO1xuXG5jb25zdCBzb21ldGltZXNLZXl3b3JkcyA9IG5ldyBTZXQoW1wiYXNcIiwgXCJhc3luY1wiLCBcImZyb21cIiwgXCJnZXRcIiwgXCJvZlwiLCBcInNldFwiXSk7XG5cbmZ1bmN0aW9uIGdldERlZnMoY2hhbGspIHtcbiAgcmV0dXJuIHtcbiAgICBrZXl3b3JkOiBjaGFsay5jeWFuLFxuICAgIGNhcGl0YWxpemVkOiBjaGFsay55ZWxsb3csXG4gICAganN4SWRlbnRpZmllcjogY2hhbGsueWVsbG93LFxuICAgIHB1bmN0dWF0b3I6IGNoYWxrLnllbGxvdyxcbiAgICBudW1iZXI6IGNoYWxrLm1hZ2VudGEsXG4gICAgc3RyaW5nOiBjaGFsay5ncmVlbixcbiAgICByZWdleDogY2hhbGsubWFnZW50YSxcbiAgICBjb21tZW50OiBjaGFsay5ncmV5LFxuICAgIGludmFsaWQ6IGNoYWxrLndoaXRlLmJnUmVkLmJvbGRcbiAgfTtcbn1cblxuY29uc3QgTkVXTElORSA9IC9cXHJcXG58W1xcblxcclxcdTIwMjhcXHUyMDI5XS87XG5jb25zdCBCUkFDS0VUID0gL15bKClbXFxde31dJC87XG5sZXQgdG9rZW5pemU7XG57XG4gIGNvbnN0IEpTWF9UQUcgPSAvXlthLXpdW1xcdy1dKiQvaTtcblxuICBjb25zdCBnZXRUb2tlblR5cGUgPSBmdW5jdGlvbiAodG9rZW4sIG9mZnNldCwgdGV4dCkge1xuICAgIGlmICh0b2tlbi50eXBlID09PSBcIm5hbWVcIikge1xuICAgICAgaWYgKCgwLCBfaGVscGVyVmFsaWRhdG9ySWRlbnRpZmllci5pc0tleXdvcmQpKHRva2VuLnZhbHVlKSB8fCAoMCwgX2hlbHBlclZhbGlkYXRvcklkZW50aWZpZXIuaXNTdHJpY3RSZXNlcnZlZFdvcmQpKHRva2VuLnZhbHVlLCB0cnVlKSB8fCBzb21ldGltZXNLZXl3b3Jkcy5oYXModG9rZW4udmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBcImtleXdvcmRcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKEpTWF9UQUcudGVzdCh0b2tlbi52YWx1ZSkgJiYgKHRleHRbb2Zmc2V0IC0gMV0gPT09IFwiPFwiIHx8IHRleHQuc2xpY2Uob2Zmc2V0IC0gMiwgb2Zmc2V0KSA9PSBcIjwvXCIpKSB7XG4gICAgICAgIHJldHVybiBcImpzeElkZW50aWZpZXJcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKHRva2VuLnZhbHVlWzBdICE9PSB0b2tlbi52YWx1ZVswXS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIHJldHVybiBcImNhcGl0YWxpemVkXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRva2VuLnR5cGUgPT09IFwicHVuY3R1YXRvclwiICYmIEJSQUNLRVQudGVzdCh0b2tlbi52YWx1ZSkpIHtcbiAgICAgIHJldHVybiBcImJyYWNrZXRcIjtcbiAgICB9XG5cbiAgICBpZiAodG9rZW4udHlwZSA9PT0gXCJpbnZhbGlkXCIgJiYgKHRva2VuLnZhbHVlID09PSBcIkBcIiB8fCB0b2tlbi52YWx1ZSA9PT0gXCIjXCIpKSB7XG4gICAgICByZXR1cm4gXCJwdW5jdHVhdG9yXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuLnR5cGU7XG4gIH07XG5cbiAgdG9rZW5pemUgPSBmdW5jdGlvbiogKHRleHQpIHtcbiAgICBsZXQgbWF0Y2g7XG5cbiAgICB3aGlsZSAobWF0Y2ggPSBfanNUb2tlbnMuZGVmYXVsdC5leGVjKHRleHQpKSB7XG4gICAgICBjb25zdCB0b2tlbiA9IF9qc1Rva2Vucy5tYXRjaFRvVG9rZW4obWF0Y2gpO1xuXG4gICAgICB5aWVsZCB7XG4gICAgICAgIHR5cGU6IGdldFRva2VuVHlwZSh0b2tlbiwgbWF0Y2guaW5kZXgsIHRleHQpLFxuICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWVcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRUb2tlbnMoZGVmcywgdGV4dCkge1xuICBsZXQgaGlnaGxpZ2h0ZWQgPSBcIlwiO1xuXG4gIGZvciAoY29uc3Qge1xuICAgIHR5cGUsXG4gICAgdmFsdWVcbiAgfSBvZiB0b2tlbml6ZSh0ZXh0KSkge1xuICAgIGNvbnN0IGNvbG9yaXplID0gZGVmc1t0eXBlXTtcblxuICAgIGlmIChjb2xvcml6ZSkge1xuICAgICAgaGlnaGxpZ2h0ZWQgKz0gdmFsdWUuc3BsaXQoTkVXTElORSkubWFwKHN0ciA9PiBjb2xvcml6ZShzdHIpKS5qb2luKFwiXFxuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWdobGlnaHRlZCArPSB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaGlnaGxpZ2h0ZWQ7XG59XG5cbmZ1bmN0aW9uIHNob3VsZEhpZ2hsaWdodChvcHRpb25zKSB7XG4gIHJldHVybiAhIV9jaGFsay5zdXBwb3J0c0NvbG9yIHx8IG9wdGlvbnMuZm9yY2VDb2xvcjtcbn1cblxuZnVuY3Rpb24gZ2V0Q2hhbGsob3B0aW9ucykge1xuICByZXR1cm4gb3B0aW9ucy5mb3JjZUNvbG9yID8gbmV3IF9jaGFsay5jb25zdHJ1Y3Rvcih7XG4gICAgZW5hYmxlZDogdHJ1ZSxcbiAgICBsZXZlbDogMVxuICB9KSA6IF9jaGFsaztcbn1cblxuZnVuY3Rpb24gaGlnaGxpZ2h0KGNvZGUsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAoY29kZSAhPT0gXCJcIiAmJiBzaG91bGRIaWdobGlnaHQob3B0aW9ucykpIHtcbiAgICBjb25zdCBjaGFsayA9IGdldENoYWxrKG9wdGlvbnMpO1xuICAgIGNvbnN0IGRlZnMgPSBnZXREZWZzKGNoYWxrKTtcbiAgICByZXR1cm4gaGlnaGxpZ2h0VG9rZW5zKGRlZnMsIGNvZGUpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBjb2RlO1xuICB9XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaQSxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsT0FBTyxFQUFFLFlBQVksRUFBRTtFQUMzQ0MsS0FBSyxFQUFFO0FBQ1QsQ0FBQyxDQUFDO0FBQ0ZELE9BQU8sQ0FBQ0UsT0FBTyxHQUFHQyxTQUFTO0FBQzNCSCxPQUFPLENBQUNJLFFBQVEsR0FBR0EsUUFBUTtBQUMzQkosT0FBTyxDQUFDSyxlQUFlLEdBQUdBLGVBQWU7QUFFekMsSUFBSUMsU0FBUyxHQUFHQyxPQUFPLENBQUMsV0FBVyxDQUFDO0FBRXBDLElBQUlDLDBCQUEwQixHQUFHRCxPQUFPLENBQUMsb0NBQW9DLENBQUM7QUFFOUUsSUFBSUUsTUFBTSxHQUFHRixPQUFPLENBQUMsT0FBTyxDQUFDO0FBRTdCLE1BQU1HLGlCQUFpQixHQUFHLElBQUlDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFFOUUsU0FBU0MsT0FBT0EsQ0FBQ0MsS0FBSyxFQUFFO0VBQ3RCLE9BQU87SUFDTEMsT0FBTyxFQUFFRCxLQUFLLENBQUNFLElBQUk7SUFDbkJDLFdBQVcsRUFBRUgsS0FBSyxDQUFDSSxNQUFNO0lBQ3pCQyxhQUFhLEVBQUVMLEtBQUssQ0FBQ0ksTUFBTTtJQUMzQkUsVUFBVSxFQUFFTixLQUFLLENBQUNJLE1BQU07SUFDeEJHLE1BQU0sRUFBRVAsS0FBSyxDQUFDUSxPQUFPO0lBQ3JCQyxNQUFNLEVBQUVULEtBQUssQ0FBQ1UsS0FBSztJQUNuQkMsS0FBSyxFQUFFWCxLQUFLLENBQUNRLE9BQU87SUFDcEJJLE9BQU8sRUFBRVosS0FBSyxDQUFDYSxJQUFJO0lBQ25CQyxPQUFPLEVBQUVkLEtBQUssQ0FBQ2UsS0FBSyxDQUFDQyxLQUFLLENBQUNDO0VBQzdCLENBQUM7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