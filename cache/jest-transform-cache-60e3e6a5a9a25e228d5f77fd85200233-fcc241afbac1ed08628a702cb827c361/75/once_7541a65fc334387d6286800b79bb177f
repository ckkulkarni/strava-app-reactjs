946f2003190bbe56148323735ee11af6
"use strict";

var wrappy = require('wrappy');
module.exports = wrappy(once);
module.exports.strict = wrappy(onceStrict);
once.proto = once(function () {
  Object.defineProperty(Function.prototype, 'once', {
    value: function () {
      return once(this);
    },
    configurable: true
  });
  Object.defineProperty(Function.prototype, 'onceStrict', {
    value: function () {
      return onceStrict(this);
    },
    configurable: true
  });
});
function once(fn) {
  var f = function () {
    if (f.called) return f.value;
    f.called = true;
    return f.value = fn.apply(this, arguments);
  };
  f.called = false;
  return f;
}
function onceStrict(fn) {
  var f = function () {
    if (f.called) throw new Error(f.onceError);
    f.called = true;
    return f.value = fn.apply(this, arguments);
  };
  var name = fn.name || 'Function wrapped with `once`';
  f.onceError = name + " shouldn't be called more than once";
  f.called = false;
  return f;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cmFwcHkiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9uY2UiLCJzdHJpY3QiLCJvbmNlU3RyaWN0IiwicHJvdG8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIkZ1bmN0aW9uIiwicHJvdG90eXBlIiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJmbiIsImYiLCJjYWxsZWQiLCJhcHBseSIsImFyZ3VtZW50cyIsIkVycm9yIiwib25jZUVycm9yIiwibmFtZSJdLCJzb3VyY2VzIjpbIm9uY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHdyYXBweSA9IHJlcXVpcmUoJ3dyYXBweScpXG5tb2R1bGUuZXhwb3J0cyA9IHdyYXBweShvbmNlKVxubW9kdWxlLmV4cG9ydHMuc3RyaWN0ID0gd3JhcHB5KG9uY2VTdHJpY3QpXG5cbm9uY2UucHJvdG8gPSBvbmNlKGZ1bmN0aW9uICgpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZ1bmN0aW9uLnByb3RvdHlwZSwgJ29uY2UnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBvbmNlKHRoaXMpXG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSlcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRnVuY3Rpb24ucHJvdG90eXBlLCAnb25jZVN0cmljdCcsIHtcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIG9uY2VTdHJpY3QodGhpcylcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KVxufSlcblxuZnVuY3Rpb24gb25jZSAoZm4pIHtcbiAgdmFyIGYgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGYuY2FsbGVkKSByZXR1cm4gZi52YWx1ZVxuICAgIGYuY2FsbGVkID0gdHJ1ZVxuICAgIHJldHVybiBmLnZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG4gIGYuY2FsbGVkID0gZmFsc2VcbiAgcmV0dXJuIGZcbn1cblxuZnVuY3Rpb24gb25jZVN0cmljdCAoZm4pIHtcbiAgdmFyIGYgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGYuY2FsbGVkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGYub25jZUVycm9yKVxuICAgIGYuY2FsbGVkID0gdHJ1ZVxuICAgIHJldHVybiBmLnZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKVxuICB9XG4gIHZhciBuYW1lID0gZm4ubmFtZSB8fCAnRnVuY3Rpb24gd3JhcHBlZCB3aXRoIGBvbmNlYCdcbiAgZi5vbmNlRXJyb3IgPSBuYW1lICsgXCIgc2hvdWxkbid0IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZVwiXG4gIGYuY2FsbGVkID0gZmFsc2VcbiAgcmV0dXJuIGZcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDOUJDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSCxNQUFNLENBQUNJLElBQUksQ0FBQztBQUM3QkYsTUFBTSxDQUFDQyxPQUFPLENBQUNFLE1BQU0sR0FBR0wsTUFBTSxDQUFDTSxVQUFVLENBQUM7QUFFMUNGLElBQUksQ0FBQ0csS0FBSyxHQUFHSCxJQUFJLENBQUMsWUFBWTtFQUM1QkksTUFBTSxDQUFDQyxjQUFjLENBQUNDLFFBQVEsQ0FBQ0MsU0FBUyxFQUFFLE1BQU0sRUFBRTtJQUNoREMsS0FBSyxFQUFFLFNBQUFBLENBQUEsRUFBWTtNQUNqQixPQUFPUixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ25CLENBQUM7SUFDRFMsWUFBWSxFQUFFO0VBQ2hCLENBQUMsQ0FBQztFQUVGTCxNQUFNLENBQUNDLGNBQWMsQ0FBQ0MsUUFBUSxDQUFDQyxTQUFTLEVBQUUsWUFBWSxFQUFFO0lBQ3REQyxLQUFLLEVBQUUsU0FBQUEsQ0FBQSxFQUFZO01BQ2pCLE9BQU9OLFVBQVUsQ0FBQyxJQUFJLENBQUM7SUFDekIsQ0FBQztJQUNETyxZQUFZLEVBQUU7RUFDaEIsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDO0FBRUYsU0FBU1QsSUFBSUEsQ0FBRVUsRUFBRSxFQUFFO0VBQ2pCLElBQUlDLENBQUMsR0FBRyxTQUFBQSxDQUFBLEVBQVk7SUFDbEIsSUFBSUEsQ0FBQyxDQUFDQyxNQUFNLEVBQUUsT0FBT0QsQ0FBQyxDQUFDSCxLQUFLO0lBQzVCRyxDQUFDLENBQUNDLE1BQU0sR0FBRyxJQUFJO0lBQ2YsT0FBT0QsQ0FBQyxDQUFDSCxLQUFLLEdBQUdFLEVBQUUsQ0FBQ0csS0FBSyxDQUFDLElBQUksRUFBRUMsU0FBUyxDQUFDO0VBQzVDLENBQUM7RUFDREgsQ0FBQyxDQUFDQyxNQUFNLEdBQUcsS0FBSztFQUNoQixPQUFPRCxDQUFDO0FBQ1Y7QUFFQSxTQUFTVCxVQUFVQSxDQUFFUSxFQUFFLEVBQUU7RUFDdkIsSUFBSUMsQ0FBQyxHQUFHLFNBQUFBLENBQUEsRUFBWTtJQUNsQixJQUFJQSxDQUFDLENBQUNDLE1BQU0sRUFDVixNQUFNLElBQUlHLEtBQUssQ0FBQ0osQ0FBQyxDQUFDSyxTQUFTLENBQUM7SUFDOUJMLENBQUMsQ0FBQ0MsTUFBTSxHQUFHLElBQUk7SUFDZixPQUFPRCxDQUFDLENBQUNILEtBQUssR0FBR0UsRUFBRSxDQUFDRyxLQUFLLENBQUMsSUFBSSxFQUFFQyxTQUFTLENBQUM7RUFDNUMsQ0FBQztFQUNELElBQUlHLElBQUksR0FBR1AsRUFBRSxDQUFDTyxJQUFJLElBQUksOEJBQThCO0VBQ3BETixDQUFDLENBQUNLLFNBQVMsR0FBR0MsSUFBSSxHQUFHLHFDQUFxQztFQUMxRE4sQ0FBQyxDQUFDQyxNQUFNLEdBQUcsS0FBSztFQUNoQixPQUFPRCxDQUFDO0FBQ1YifQ==