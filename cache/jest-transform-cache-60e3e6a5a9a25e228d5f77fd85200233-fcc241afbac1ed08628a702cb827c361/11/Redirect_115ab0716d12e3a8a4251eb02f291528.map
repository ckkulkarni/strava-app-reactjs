{"version":3,"names":["_axios","_interopRequireDefault","require","_react","_interopRequireWildcard","_reactRedux","_stravaSlice","_material","_reactRouter","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Redirect","urlParams","URLSearchParams","window","location","search","REACT_APP_CLIENTID","process","env","REACT_APP_CLIENT_SECRET","code","navigation","useNavigate","dispatch","useDispatch","useEffect","axios","post","then","response","accessToken","data","access_token","userID","athlete","id","setAccessToken","setUserID","localStorage","setItem","catch","error","console","createElement","style","display","justifyContent","alignItems","height","CircularProgress","sx","color","size","_default","exports"],"sources":["Redirect.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { setAccessToken, setUserID } from \"../redux/reducer/stravaSlice\";\r\nimport { CircularProgress } from \"@mui/material\";\r\nimport { useNavigate } from \"react-router\";\r\nconst Redirect = () => {\r\n  const urlParams = new URLSearchParams(window.location.search);\r\n  const { REACT_APP_CLIENTID } = process.env;\r\n  const { REACT_APP_CLIENT_SECRET } = process.env;\r\n  const code = urlParams.get(\"code\");\r\n  const navigation = useNavigate();\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    if (code) {\r\n      axios\r\n        .post(\r\n          `https://www.strava.com/api/v3/oauth/token?client_id=${REACT_APP_CLIENTID}&client_secret=${REACT_APP_CLIENT_SECRET}&code=${code}&grant_type=authorization_code`\r\n        )\r\n        .then((response) => {\r\n          const accessToken = response.data.access_token;\r\n          const userID = response.data.athlete.id;\r\n          //    console.log(response.data.athlete.id);\r\n          if (accessToken) {\r\n            dispatch(setAccessToken(accessToken));\r\n            dispatch(setUserID(userID));\r\n            localStorage.setItem(\"access_token\", accessToken);\r\n\r\n            navigation(\"/activities\");\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"Error exchanging code for access token:\", error);\r\n        });\r\n    }\r\n  }, [code]);\r\n  return (\r\n    <div\r\n      style={{\r\n        display: \"flex\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        height: \"100vh\",\r\n      }}\r\n    >\r\n      <CircularProgress sx={{ color: \"primary.main\" }} size={64} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Redirect;\r\n"],"mappings":"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"}