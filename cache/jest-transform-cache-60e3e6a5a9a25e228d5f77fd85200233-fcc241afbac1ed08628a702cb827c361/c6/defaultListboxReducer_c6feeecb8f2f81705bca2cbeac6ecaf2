4a6df681616c18b689308971c8b49971
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = defaultListboxReducer;
var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));
var _useListbox = require("./useListbox.types");
const pageSize = 5;
function findValidOptionToHighlight(index, lookupDirection, options, focusDisabled, isOptionDisabled, wrapAround) {
  if (options.length === 0 || options.every((o, i) => isOptionDisabled(o, i))) {
    return -1;
  }
  let nextFocus = index;
  for (;;) {
    // No valid options found
    if (!wrapAround && lookupDirection === 'next' && nextFocus === options.length || !wrapAround && lookupDirection === 'previous' && nextFocus === -1) {
      return -1;
    }
    const nextFocusDisabled = focusDisabled ? false : isOptionDisabled(options[nextFocus], nextFocus);
    if (nextFocusDisabled) {
      nextFocus += lookupDirection === 'next' ? 1 : -1;
      if (wrapAround) {
        nextFocus = (nextFocus + options.length) % options.length;
      }
    } else {
      return nextFocus;
    }
  }
}
function getNewHighlightedOption(options, previouslyHighlightedOption, diff, highlightDisabledOptions, isOptionDisabled, disableListWrap, optionComparer) {
  var _options$nextIndex;
  const maxIndex = options.length - 1;
  const defaultHighlightedIndex = -1;
  const previouslyHighlightedIndex = previouslyHighlightedOption == null ? -1 : options.findIndex(option => optionComparer(option, previouslyHighlightedOption));
  let nextIndexCandidate;
  let lookupDirection;
  let wrapAround;
  switch (diff) {
    case 'reset':
      if (defaultHighlightedIndex === -1) {
        return null;
      }
      nextIndexCandidate = 0;
      lookupDirection = 'next';
      wrapAround = false;
      break;
    case 'start':
      nextIndexCandidate = 0;
      lookupDirection = 'next';
      wrapAround = false;
      break;
    case 'end':
      nextIndexCandidate = maxIndex;
      lookupDirection = 'previous';
      wrapAround = false;
      break;
    default:
      {
        const newIndex = previouslyHighlightedIndex + diff;
        wrapAround = !disableListWrap;
        if (newIndex < 0) {
          if (!wrapAround && previouslyHighlightedIndex !== -1 || Math.abs(diff) > 1) {
            nextIndexCandidate = 0;
            lookupDirection = 'next';
          } else {
            nextIndexCandidate = maxIndex;
            lookupDirection = 'previous';
          }
        } else if (newIndex > maxIndex) {
          if (!wrapAround || Math.abs(diff) > 1) {
            nextIndexCandidate = maxIndex;
            lookupDirection = 'previous';
          } else {
            nextIndexCandidate = 0;
            lookupDirection = 'next';
          }
        } else {
          nextIndexCandidate = newIndex;
          lookupDirection = diff >= 0 ? 'next' : 'previous';
        }
      }
  }
  const nextIndex = findValidOptionToHighlight(nextIndexCandidate, lookupDirection, options, highlightDisabledOptions, isOptionDisabled, wrapAround);
  return (_options$nextIndex = options[nextIndex]) != null ? _options$nextIndex : null;
}
function moveHighlight(previouslyHighlightedOption, diff, props) {
  const {
    options,
    isOptionDisabled,
    disableListWrap,
    disabledItemsFocusable,
    optionComparer
  } = props;
  return getNewHighlightedOption(options, previouslyHighlightedOption, diff, disabledItemsFocusable != null ? disabledItemsFocusable : false, isOptionDisabled != null ? isOptionDisabled : () => false, disableListWrap != null ? disableListWrap : false, optionComparer != null ? optionComparer : (o1, o2) => o1 === o2);
}
function toggleSelection(option, selectedOptions, selectionLimit, optionComparer) {
  if (selectionLimit === 0) {
    return [];
  }

  // Selection limit = 1 is a special case - we don't want to allow deselecting the option.
  if (selectionLimit === 1) {
    if (optionComparer(selectedOptions[0], option)) {
      return selectedOptions;
    }
    return [option];
  }

  // The toggled option is selected; remove it from the selection.
  if (selectedOptions.some(so => optionComparer(so, option))) {
    return selectedOptions.filter(so => !optionComparer(so, option));
  }

  // The toggled option is not selected and the selected array is shorter than the limit - add to the selection.
  if (selectionLimit === null || selectedOptions.length < selectionLimit) {
    return [...selectedOptions, option];
  }

  // Truncate the selection to the limit (discard items with lower indexes).
  const newSelection = selectedOptions.slice(selectedOptions.length - selectionLimit + 1);
  newSelection.push(option);
  return newSelection;
}
function handleOptionSelection(option, state, props) {
  const {
    optionComparer = (o, v) => o === v,
    isOptionDisabled = () => false,
    selectionLimit
  } = props;
  const {
    selectedValues
  } = state;
  const optionIndex = props.options.findIndex(o => props.optionComparer(option, o));
  if (isOptionDisabled(option, optionIndex)) {
    return state;
  }

  // if the option is already selected, remove it from the selection, otherwise add it
  const newSelectedValues = toggleSelection(option, selectedValues, selectionLimit, optionComparer);
  return {
    selectedValues: newSelectedValues,
    highlightedValue: option
  };
}
function handleKeyDown(event, state, parameters) {
  const previouslySelectedValue = state.highlightedValue;
  switch (event.key) {
    case 'Home':
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, 'start', parameters)
      });
    case 'End':
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, 'end', parameters)
      });
    case 'PageUp':
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, -pageSize, parameters)
      });
    case 'PageDown':
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, pageSize, parameters)
      });
    case 'ArrowUp':
      // TODO: extend current selection with Shift modifier
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, -1, parameters)
      });
    case 'ArrowDown':
      // TODO: extend current selection with Shift modifier
      return (0, _extends2.default)({}, state, {
        highlightedValue: moveHighlight(previouslySelectedValue, 1, parameters)
      });
    case 'Enter':
    case ' ':
      if (state.highlightedValue === null) {
        return state;
      }
      return handleOptionSelection(state.highlightedValue, state, parameters);
    default:
      break;
  }
  return state;
}
function handleBlur(state) {
  return (0, _extends2.default)({}, state, {
    highlightedValue: null
  });
}
const textCriteriaMatches = (nextFocus, searchString, stringifyOption) => {
  var _stringifyOption;
  const text = (_stringifyOption = stringifyOption(nextFocus)) == null ? void 0 : _stringifyOption.trim().toLowerCase();
  if (!text || text.length === 0) {
    // Make option not navigable if stringification fails or results in empty string.
    return false;
  }
  return text.indexOf(searchString) === 0;
};
function handleTextNavigation(state, searchString, props) {
  const {
    options,
    isOptionDisabled,
    disableListWrap,
    disabledItemsFocusable,
    optionComparer,
    optionStringifier
  } = props;
  const startWithCurrentOption = searchString.length > 1;
  let nextOption = startWithCurrentOption ? state.highlightedValue : getNewHighlightedOption(options, state.highlightedValue, 1, disabledItemsFocusable != null ? disabledItemsFocusable : false, isOptionDisabled != null ? isOptionDisabled : () => false, disableListWrap != null ? disableListWrap : false, optionComparer);

  // use `for` instead of `while` prevent infinite loop
  for (let index = 0; index < options.length; index += 1) {
    // Return un-mutated state if looped back to the currently highlighted value
    if (!nextOption || !startWithCurrentOption && state.highlightedValue === nextOption) {
      return state;
    }
    if (textCriteriaMatches(nextOption, searchString, optionStringifier) && (!isOptionDisabled(nextOption, options.indexOf(nextOption)) || disabledItemsFocusable)) {
      // The nextOption is the element to be highlighted
      return (0, _extends2.default)({}, state, {
        highlightedValue: nextOption
      });
    }
    // Move to the next element.
    nextOption = getNewHighlightedOption(options, nextOption, 1, disabledItemsFocusable != null ? disabledItemsFocusable : false, isOptionDisabled != null ? isOptionDisabled : () => false, disableListWrap != null ? disableListWrap : false, optionComparer);
  }

  // No option match text search criteria
  return state;
}
function handleOptionsChange(options, state, props) {
  var _options$find, _state$selectedValues;
  const {
    optionComparer
  } = props;
  const newHighlightedOption = state.highlightedValue == null ? null : (_options$find = options.find(option => optionComparer(option, state.highlightedValue))) != null ? _options$find : null;

  // exclude selected values that are no longer in the options
  const selectedValues = (_state$selectedValues = state.selectedValues) != null ? _state$selectedValues : [];
  const newSelectedValues = selectedValues.filter(selectedValue => options.some(option => optionComparer(option, selectedValue)));
  return {
    highlightedValue: newHighlightedOption,
    selectedValues: newSelectedValues
  };
}
function defaultListboxReducer(state, action) {
  const {
    type
  } = action;
  switch (type) {
    case _useListbox.ActionTypes.keyDown:
      return handleKeyDown(action.event, state, action.props);
    case _useListbox.ActionTypes.optionClick:
      return handleOptionSelection(action.option, state, action.props);
    case _useListbox.ActionTypes.blur:
      return handleBlur(state);
    case _useListbox.ActionTypes.setValue:
      return (0, _extends2.default)({}, state, {
        selectedValues: action.value
      });
    case _useListbox.ActionTypes.setHighlight:
      return (0, _extends2.default)({}, state, {
        highlightedValue: action.highlight
      });
    case _useListbox.ActionTypes.textNavigation:
      return handleTextNavigation(state, action.searchString, action.props);
    case _useListbox.ActionTypes.optionsChange:
      return handleOptionsChange(action.options, state, action.props);
    default:
      return state;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiZGVmYXVsdCIsImRlZmF1bHRMaXN0Ym94UmVkdWNlciIsIl9leHRlbmRzMiIsIl91c2VMaXN0Ym94IiwicGFnZVNpemUiLCJmaW5kVmFsaWRPcHRpb25Ub0hpZ2hsaWdodCIsImluZGV4IiwibG9va3VwRGlyZWN0aW9uIiwib3B0aW9ucyIsImZvY3VzRGlzYWJsZWQiLCJpc09wdGlvbkRpc2FibGVkIiwid3JhcEFyb3VuZCIsImxlbmd0aCIsImV2ZXJ5IiwibyIsImkiLCJuZXh0Rm9jdXMiLCJuZXh0Rm9jdXNEaXNhYmxlZCIsImdldE5ld0hpZ2hsaWdodGVkT3B0aW9uIiwicHJldmlvdXNseUhpZ2hsaWdodGVkT3B0aW9uIiwiZGlmZiIsImhpZ2hsaWdodERpc2FibGVkT3B0aW9ucyIsImRpc2FibGVMaXN0V3JhcCIsIm9wdGlvbkNvbXBhcmVyIiwiX29wdGlvbnMkbmV4dEluZGV4IiwibWF4SW5kZXgiLCJkZWZhdWx0SGlnaGxpZ2h0ZWRJbmRleCIsInByZXZpb3VzbHlIaWdobGlnaHRlZEluZGV4IiwiZmluZEluZGV4Iiwib3B0aW9uIiwibmV4dEluZGV4Q2FuZGlkYXRlIiwibmV3SW5kZXgiLCJNYXRoIiwiYWJzIiwibmV4dEluZGV4IiwibW92ZUhpZ2hsaWdodCIsInByb3BzIiwiZGlzYWJsZWRJdGVtc0ZvY3VzYWJsZSIsIm8xIiwibzIiLCJ0b2dnbGVTZWxlY3Rpb24iLCJzZWxlY3RlZE9wdGlvbnMiLCJzZWxlY3Rpb25MaW1pdCIsInNvbWUiLCJzbyIsImZpbHRlciIsIm5ld1NlbGVjdGlvbiIsInNsaWNlIiwicHVzaCIsImhhbmRsZU9wdGlvblNlbGVjdGlvbiIsInN0YXRlIiwidiIsInNlbGVjdGVkVmFsdWVzIiwib3B0aW9uSW5kZXgiLCJuZXdTZWxlY3RlZFZhbHVlcyIsImhpZ2hsaWdodGVkVmFsdWUiLCJoYW5kbGVLZXlEb3duIiwiZXZlbnQiLCJwYXJhbWV0ZXJzIiwicHJldmlvdXNseVNlbGVjdGVkVmFsdWUiLCJrZXkiLCJoYW5kbGVCbHVyIiwidGV4dENyaXRlcmlhTWF0Y2hlcyIsInNlYXJjaFN0cmluZyIsInN0cmluZ2lmeU9wdGlvbiIsIl9zdHJpbmdpZnlPcHRpb24iLCJ0ZXh0IiwidHJpbSIsInRvTG93ZXJDYXNlIiwiaW5kZXhPZiIsImhhbmRsZVRleHROYXZpZ2F0aW9uIiwib3B0aW9uU3RyaW5naWZpZXIiLCJzdGFydFdpdGhDdXJyZW50T3B0aW9uIiwibmV4dE9wdGlvbiIsImhhbmRsZU9wdGlvbnNDaGFuZ2UiLCJfb3B0aW9ucyRmaW5kIiwiX3N0YXRlJHNlbGVjdGVkVmFsdWVzIiwibmV3SGlnaGxpZ2h0ZWRPcHRpb24iLCJmaW5kIiwic2VsZWN0ZWRWYWx1ZSIsImFjdGlvbiIsInR5cGUiLCJBY3Rpb25UeXBlcyIsImtleURvd24iLCJvcHRpb25DbGljayIsImJsdXIiLCJzZXRWYWx1ZSIsInNldEhpZ2hsaWdodCIsImhpZ2hsaWdodCIsInRleHROYXZpZ2F0aW9uIiwib3B0aW9uc0NoYW5nZSJdLCJzb3VyY2VzIjpbImRlZmF1bHRMaXN0Ym94UmVkdWNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxudmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gZGVmYXVsdExpc3Rib3hSZWR1Y2VyO1xudmFyIF9leHRlbmRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXh0ZW5kc1wiKSk7XG52YXIgX3VzZUxpc3Rib3ggPSByZXF1aXJlKFwiLi91c2VMaXN0Ym94LnR5cGVzXCIpO1xuY29uc3QgcGFnZVNpemUgPSA1O1xuZnVuY3Rpb24gZmluZFZhbGlkT3B0aW9uVG9IaWdobGlnaHQoaW5kZXgsIGxvb2t1cERpcmVjdGlvbiwgb3B0aW9ucywgZm9jdXNEaXNhYmxlZCwgaXNPcHRpb25EaXNhYmxlZCwgd3JhcEFyb3VuZCkge1xuICBpZiAob3B0aW9ucy5sZW5ndGggPT09IDAgfHwgb3B0aW9ucy5ldmVyeSgobywgaSkgPT4gaXNPcHRpb25EaXNhYmxlZChvLCBpKSkpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgbGV0IG5leHRGb2N1cyA9IGluZGV4O1xuICBmb3IgKDs7KSB7XG4gICAgLy8gTm8gdmFsaWQgb3B0aW9ucyBmb3VuZFxuICAgIGlmICghd3JhcEFyb3VuZCAmJiBsb29rdXBEaXJlY3Rpb24gPT09ICduZXh0JyAmJiBuZXh0Rm9jdXMgPT09IG9wdGlvbnMubGVuZ3RoIHx8ICF3cmFwQXJvdW5kICYmIGxvb2t1cERpcmVjdGlvbiA9PT0gJ3ByZXZpb3VzJyAmJiBuZXh0Rm9jdXMgPT09IC0xKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGNvbnN0IG5leHRGb2N1c0Rpc2FibGVkID0gZm9jdXNEaXNhYmxlZCA/IGZhbHNlIDogaXNPcHRpb25EaXNhYmxlZChvcHRpb25zW25leHRGb2N1c10sIG5leHRGb2N1cyk7XG4gICAgaWYgKG5leHRGb2N1c0Rpc2FibGVkKSB7XG4gICAgICBuZXh0Rm9jdXMgKz0gbG9va3VwRGlyZWN0aW9uID09PSAnbmV4dCcgPyAxIDogLTE7XG4gICAgICBpZiAod3JhcEFyb3VuZCkge1xuICAgICAgICBuZXh0Rm9jdXMgPSAobmV4dEZvY3VzICsgb3B0aW9ucy5sZW5ndGgpICUgb3B0aW9ucy5sZW5ndGg7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXh0Rm9jdXM7XG4gICAgfVxuICB9XG59XG5mdW5jdGlvbiBnZXROZXdIaWdobGlnaHRlZE9wdGlvbihvcHRpb25zLCBwcmV2aW91c2x5SGlnaGxpZ2h0ZWRPcHRpb24sIGRpZmYsIGhpZ2hsaWdodERpc2FibGVkT3B0aW9ucywgaXNPcHRpb25EaXNhYmxlZCwgZGlzYWJsZUxpc3RXcmFwLCBvcHRpb25Db21wYXJlcikge1xuICB2YXIgX29wdGlvbnMkbmV4dEluZGV4O1xuICBjb25zdCBtYXhJbmRleCA9IG9wdGlvbnMubGVuZ3RoIC0gMTtcbiAgY29uc3QgZGVmYXVsdEhpZ2hsaWdodGVkSW5kZXggPSAtMTtcbiAgY29uc3QgcHJldmlvdXNseUhpZ2hsaWdodGVkSW5kZXggPSBwcmV2aW91c2x5SGlnaGxpZ2h0ZWRPcHRpb24gPT0gbnVsbCA/IC0xIDogb3B0aW9ucy5maW5kSW5kZXgob3B0aW9uID0+IG9wdGlvbkNvbXBhcmVyKG9wdGlvbiwgcHJldmlvdXNseUhpZ2hsaWdodGVkT3B0aW9uKSk7XG4gIGxldCBuZXh0SW5kZXhDYW5kaWRhdGU7XG4gIGxldCBsb29rdXBEaXJlY3Rpb247XG4gIGxldCB3cmFwQXJvdW5kO1xuICBzd2l0Y2ggKGRpZmYpIHtcbiAgICBjYXNlICdyZXNldCc6XG4gICAgICBpZiAoZGVmYXVsdEhpZ2hsaWdodGVkSW5kZXggPT09IC0xKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgbmV4dEluZGV4Q2FuZGlkYXRlID0gMDtcbiAgICAgIGxvb2t1cERpcmVjdGlvbiA9ICduZXh0JztcbiAgICAgIHdyYXBBcm91bmQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgIG5leHRJbmRleENhbmRpZGF0ZSA9IDA7XG4gICAgICBsb29rdXBEaXJlY3Rpb24gPSAnbmV4dCc7XG4gICAgICB3cmFwQXJvdW5kID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdlbmQnOlxuICAgICAgbmV4dEluZGV4Q2FuZGlkYXRlID0gbWF4SW5kZXg7XG4gICAgICBsb29rdXBEaXJlY3Rpb24gPSAncHJldmlvdXMnO1xuICAgICAgd3JhcEFyb3VuZCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgbmV3SW5kZXggPSBwcmV2aW91c2x5SGlnaGxpZ2h0ZWRJbmRleCArIGRpZmY7XG4gICAgICAgIHdyYXBBcm91bmQgPSAhZGlzYWJsZUxpc3RXcmFwO1xuICAgICAgICBpZiAobmV3SW5kZXggPCAwKSB7XG4gICAgICAgICAgaWYgKCF3cmFwQXJvdW5kICYmIHByZXZpb3VzbHlIaWdobGlnaHRlZEluZGV4ICE9PSAtMSB8fCBNYXRoLmFicyhkaWZmKSA+IDEpIHtcbiAgICAgICAgICAgIG5leHRJbmRleENhbmRpZGF0ZSA9IDA7XG4gICAgICAgICAgICBsb29rdXBEaXJlY3Rpb24gPSAnbmV4dCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5leHRJbmRleENhbmRpZGF0ZSA9IG1heEluZGV4O1xuICAgICAgICAgICAgbG9va3VwRGlyZWN0aW9uID0gJ3ByZXZpb3VzJztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV3SW5kZXggPiBtYXhJbmRleCkge1xuICAgICAgICAgIGlmICghd3JhcEFyb3VuZCB8fCBNYXRoLmFicyhkaWZmKSA+IDEpIHtcbiAgICAgICAgICAgIG5leHRJbmRleENhbmRpZGF0ZSA9IG1heEluZGV4O1xuICAgICAgICAgICAgbG9va3VwRGlyZWN0aW9uID0gJ3ByZXZpb3VzJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV4dEluZGV4Q2FuZGlkYXRlID0gMDtcbiAgICAgICAgICAgIGxvb2t1cERpcmVjdGlvbiA9ICduZXh0JztcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dEluZGV4Q2FuZGlkYXRlID0gbmV3SW5kZXg7XG4gICAgICAgICAgbG9va3VwRGlyZWN0aW9uID0gZGlmZiA+PSAwID8gJ25leHQnIDogJ3ByZXZpb3VzJztcbiAgICAgICAgfVxuICAgICAgfVxuICB9XG4gIGNvbnN0IG5leHRJbmRleCA9IGZpbmRWYWxpZE9wdGlvblRvSGlnaGxpZ2h0KG5leHRJbmRleENhbmRpZGF0ZSwgbG9va3VwRGlyZWN0aW9uLCBvcHRpb25zLCBoaWdobGlnaHREaXNhYmxlZE9wdGlvbnMsIGlzT3B0aW9uRGlzYWJsZWQsIHdyYXBBcm91bmQpO1xuICByZXR1cm4gKF9vcHRpb25zJG5leHRJbmRleCA9IG9wdGlvbnNbbmV4dEluZGV4XSkgIT0gbnVsbCA/IF9vcHRpb25zJG5leHRJbmRleCA6IG51bGw7XG59XG5mdW5jdGlvbiBtb3ZlSGlnaGxpZ2h0KHByZXZpb3VzbHlIaWdobGlnaHRlZE9wdGlvbiwgZGlmZiwgcHJvcHMpIHtcbiAgY29uc3Qge1xuICAgIG9wdGlvbnMsXG4gICAgaXNPcHRpb25EaXNhYmxlZCxcbiAgICBkaXNhYmxlTGlzdFdyYXAsXG4gICAgZGlzYWJsZWRJdGVtc0ZvY3VzYWJsZSxcbiAgICBvcHRpb25Db21wYXJlclxuICB9ID0gcHJvcHM7XG4gIHJldHVybiBnZXROZXdIaWdobGlnaHRlZE9wdGlvbihvcHRpb25zLCBwcmV2aW91c2x5SGlnaGxpZ2h0ZWRPcHRpb24sIGRpZmYsIGRpc2FibGVkSXRlbXNGb2N1c2FibGUgIT0gbnVsbCA/IGRpc2FibGVkSXRlbXNGb2N1c2FibGUgOiBmYWxzZSwgaXNPcHRpb25EaXNhYmxlZCAhPSBudWxsID8gaXNPcHRpb25EaXNhYmxlZCA6ICgpID0+IGZhbHNlLCBkaXNhYmxlTGlzdFdyYXAgIT0gbnVsbCA/IGRpc2FibGVMaXN0V3JhcCA6IGZhbHNlLCBvcHRpb25Db21wYXJlciAhPSBudWxsID8gb3B0aW9uQ29tcGFyZXIgOiAobzEsIG8yKSA9PiBvMSA9PT0gbzIpO1xufVxuZnVuY3Rpb24gdG9nZ2xlU2VsZWN0aW9uKG9wdGlvbiwgc2VsZWN0ZWRPcHRpb25zLCBzZWxlY3Rpb25MaW1pdCwgb3B0aW9uQ29tcGFyZXIpIHtcbiAgaWYgKHNlbGVjdGlvbkxpbWl0ID09PSAwKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgLy8gU2VsZWN0aW9uIGxpbWl0ID0gMSBpcyBhIHNwZWNpYWwgY2FzZSAtIHdlIGRvbid0IHdhbnQgdG8gYWxsb3cgZGVzZWxlY3RpbmcgdGhlIG9wdGlvbi5cbiAgaWYgKHNlbGVjdGlvbkxpbWl0ID09PSAxKSB7XG4gICAgaWYgKG9wdGlvbkNvbXBhcmVyKHNlbGVjdGVkT3B0aW9uc1swXSwgb3B0aW9uKSkge1xuICAgICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9ucztcbiAgICB9XG4gICAgcmV0dXJuIFtvcHRpb25dO1xuICB9XG5cbiAgLy8gVGhlIHRvZ2dsZWQgb3B0aW9uIGlzIHNlbGVjdGVkOyByZW1vdmUgaXQgZnJvbSB0aGUgc2VsZWN0aW9uLlxuICBpZiAoc2VsZWN0ZWRPcHRpb25zLnNvbWUoc28gPT4gb3B0aW9uQ29tcGFyZXIoc28sIG9wdGlvbikpKSB7XG4gICAgcmV0dXJuIHNlbGVjdGVkT3B0aW9ucy5maWx0ZXIoc28gPT4gIW9wdGlvbkNvbXBhcmVyKHNvLCBvcHRpb24pKTtcbiAgfVxuXG4gIC8vIFRoZSB0b2dnbGVkIG9wdGlvbiBpcyBub3Qgc2VsZWN0ZWQgYW5kIHRoZSBzZWxlY3RlZCBhcnJheSBpcyBzaG9ydGVyIHRoYW4gdGhlIGxpbWl0IC0gYWRkIHRvIHRoZSBzZWxlY3Rpb24uXG4gIGlmIChzZWxlY3Rpb25MaW1pdCA9PT0gbnVsbCB8fCBzZWxlY3RlZE9wdGlvbnMubGVuZ3RoIDwgc2VsZWN0aW9uTGltaXQpIHtcbiAgICByZXR1cm4gWy4uLnNlbGVjdGVkT3B0aW9ucywgb3B0aW9uXTtcbiAgfVxuXG4gIC8vIFRydW5jYXRlIHRoZSBzZWxlY3Rpb24gdG8gdGhlIGxpbWl0IChkaXNjYXJkIGl0ZW1zIHdpdGggbG93ZXIgaW5kZXhlcykuXG4gIGNvbnN0IG5ld1NlbGVjdGlvbiA9IHNlbGVjdGVkT3B0aW9ucy5zbGljZShzZWxlY3RlZE9wdGlvbnMubGVuZ3RoIC0gc2VsZWN0aW9uTGltaXQgKyAxKTtcbiAgbmV3U2VsZWN0aW9uLnB1c2gob3B0aW9uKTtcbiAgcmV0dXJuIG5ld1NlbGVjdGlvbjtcbn1cbmZ1bmN0aW9uIGhhbmRsZU9wdGlvblNlbGVjdGlvbihvcHRpb24sIHN0YXRlLCBwcm9wcykge1xuICBjb25zdCB7XG4gICAgb3B0aW9uQ29tcGFyZXIgPSAobywgdikgPT4gbyA9PT0gdixcbiAgICBpc09wdGlvbkRpc2FibGVkID0gKCkgPT4gZmFsc2UsXG4gICAgc2VsZWN0aW9uTGltaXRcbiAgfSA9IHByb3BzO1xuICBjb25zdCB7XG4gICAgc2VsZWN0ZWRWYWx1ZXNcbiAgfSA9IHN0YXRlO1xuICBjb25zdCBvcHRpb25JbmRleCA9IHByb3BzLm9wdGlvbnMuZmluZEluZGV4KG8gPT4gcHJvcHMub3B0aW9uQ29tcGFyZXIob3B0aW9uLCBvKSk7XG4gIGlmIChpc09wdGlvbkRpc2FibGVkKG9wdGlvbiwgb3B0aW9uSW5kZXgpKSB7XG4gICAgcmV0dXJuIHN0YXRlO1xuICB9XG5cbiAgLy8gaWYgdGhlIG9wdGlvbiBpcyBhbHJlYWR5IHNlbGVjdGVkLCByZW1vdmUgaXQgZnJvbSB0aGUgc2VsZWN0aW9uLCBvdGhlcndpc2UgYWRkIGl0XG4gIGNvbnN0IG5ld1NlbGVjdGVkVmFsdWVzID0gdG9nZ2xlU2VsZWN0aW9uKG9wdGlvbiwgc2VsZWN0ZWRWYWx1ZXMsIHNlbGVjdGlvbkxpbWl0LCBvcHRpb25Db21wYXJlcik7XG4gIHJldHVybiB7XG4gICAgc2VsZWN0ZWRWYWx1ZXM6IG5ld1NlbGVjdGVkVmFsdWVzLFxuICAgIGhpZ2hsaWdodGVkVmFsdWU6IG9wdGlvblxuICB9O1xufVxuZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudCwgc3RhdGUsIHBhcmFtZXRlcnMpIHtcbiAgY29uc3QgcHJldmlvdXNseVNlbGVjdGVkVmFsdWUgPSBzdGF0ZS5oaWdobGlnaHRlZFZhbHVlO1xuICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgIGNhc2UgJ0hvbWUnOlxuICAgICAgcmV0dXJuICgwLCBfZXh0ZW5kczIuZGVmYXVsdCkoe30sIHN0YXRlLCB7XG4gICAgICAgIGhpZ2hsaWdodGVkVmFsdWU6IG1vdmVIaWdobGlnaHQocHJldmlvdXNseVNlbGVjdGVkVmFsdWUsICdzdGFydCcsIHBhcmFtZXRlcnMpXG4gICAgICB9KTtcbiAgICBjYXNlICdFbmQnOlxuICAgICAgcmV0dXJuICgwLCBfZXh0ZW5kczIuZGVmYXVsdCkoe30sIHN0YXRlLCB7XG4gICAgICAgIGhpZ2hsaWdodGVkVmFsdWU6IG1vdmVIaWdobGlnaHQocHJldmlvdXNseVNlbGVjdGVkVmFsdWUsICdlbmQnLCBwYXJhbWV0ZXJzKVxuICAgICAgfSk7XG4gICAgY2FzZSAnUGFnZVVwJzpcbiAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBzdGF0ZSwge1xuICAgICAgICBoaWdobGlnaHRlZFZhbHVlOiBtb3ZlSGlnaGxpZ2h0KHByZXZpb3VzbHlTZWxlY3RlZFZhbHVlLCAtcGFnZVNpemUsIHBhcmFtZXRlcnMpXG4gICAgICB9KTtcbiAgICBjYXNlICdQYWdlRG93bic6XG4gICAgICByZXR1cm4gKDAsIF9leHRlbmRzMi5kZWZhdWx0KSh7fSwgc3RhdGUsIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRWYWx1ZTogbW92ZUhpZ2hsaWdodChwcmV2aW91c2x5U2VsZWN0ZWRWYWx1ZSwgcGFnZVNpemUsIHBhcmFtZXRlcnMpXG4gICAgICB9KTtcbiAgICBjYXNlICdBcnJvd1VwJzpcbiAgICAgIC8vIFRPRE86IGV4dGVuZCBjdXJyZW50IHNlbGVjdGlvbiB3aXRoIFNoaWZ0IG1vZGlmaWVyXG4gICAgICByZXR1cm4gKDAsIF9leHRlbmRzMi5kZWZhdWx0KSh7fSwgc3RhdGUsIHtcbiAgICAgICAgaGlnaGxpZ2h0ZWRWYWx1ZTogbW92ZUhpZ2hsaWdodChwcmV2aW91c2x5U2VsZWN0ZWRWYWx1ZSwgLTEsIHBhcmFtZXRlcnMpXG4gICAgICB9KTtcbiAgICBjYXNlICdBcnJvd0Rvd24nOlxuICAgICAgLy8gVE9ETzogZXh0ZW5kIGN1cnJlbnQgc2VsZWN0aW9uIHdpdGggU2hpZnQgbW9kaWZpZXJcbiAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBzdGF0ZSwge1xuICAgICAgICBoaWdobGlnaHRlZFZhbHVlOiBtb3ZlSGlnaGxpZ2h0KHByZXZpb3VzbHlTZWxlY3RlZFZhbHVlLCAxLCBwYXJhbWV0ZXJzKVxuICAgICAgfSk7XG4gICAgY2FzZSAnRW50ZXInOlxuICAgIGNhc2UgJyAnOlxuICAgICAgaWYgKHN0YXRlLmhpZ2hsaWdodGVkVmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhbmRsZU9wdGlvblNlbGVjdGlvbihzdGF0ZS5oaWdobGlnaHRlZFZhbHVlLCBzdGF0ZSwgcGFyYW1ldGVycyk7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBzdGF0ZTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUJsdXIoc3RhdGUpIHtcbiAgcmV0dXJuICgwLCBfZXh0ZW5kczIuZGVmYXVsdCkoe30sIHN0YXRlLCB7XG4gICAgaGlnaGxpZ2h0ZWRWYWx1ZTogbnVsbFxuICB9KTtcbn1cbmNvbnN0IHRleHRDcml0ZXJpYU1hdGNoZXMgPSAobmV4dEZvY3VzLCBzZWFyY2hTdHJpbmcsIHN0cmluZ2lmeU9wdGlvbikgPT4ge1xuICB2YXIgX3N0cmluZ2lmeU9wdGlvbjtcbiAgY29uc3QgdGV4dCA9IChfc3RyaW5naWZ5T3B0aW9uID0gc3RyaW5naWZ5T3B0aW9uKG5leHRGb2N1cykpID09IG51bGwgPyB2b2lkIDAgOiBfc3RyaW5naWZ5T3B0aW9uLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoIXRleHQgfHwgdGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAvLyBNYWtlIG9wdGlvbiBub3QgbmF2aWdhYmxlIGlmIHN0cmluZ2lmaWNhdGlvbiBmYWlscyBvciByZXN1bHRzIGluIGVtcHR5IHN0cmluZy5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHRleHQuaW5kZXhPZihzZWFyY2hTdHJpbmcpID09PSAwO1xufTtcbmZ1bmN0aW9uIGhhbmRsZVRleHROYXZpZ2F0aW9uKHN0YXRlLCBzZWFyY2hTdHJpbmcsIHByb3BzKSB7XG4gIGNvbnN0IHtcbiAgICBvcHRpb25zLFxuICAgIGlzT3B0aW9uRGlzYWJsZWQsXG4gICAgZGlzYWJsZUxpc3RXcmFwLFxuICAgIGRpc2FibGVkSXRlbXNGb2N1c2FibGUsXG4gICAgb3B0aW9uQ29tcGFyZXIsXG4gICAgb3B0aW9uU3RyaW5naWZpZXJcbiAgfSA9IHByb3BzO1xuICBjb25zdCBzdGFydFdpdGhDdXJyZW50T3B0aW9uID0gc2VhcmNoU3RyaW5nLmxlbmd0aCA+IDE7XG4gIGxldCBuZXh0T3B0aW9uID0gc3RhcnRXaXRoQ3VycmVudE9wdGlvbiA/IHN0YXRlLmhpZ2hsaWdodGVkVmFsdWUgOiBnZXROZXdIaWdobGlnaHRlZE9wdGlvbihvcHRpb25zLCBzdGF0ZS5oaWdobGlnaHRlZFZhbHVlLCAxLCBkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlICE9IG51bGwgPyBkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlIDogZmFsc2UsIGlzT3B0aW9uRGlzYWJsZWQgIT0gbnVsbCA/IGlzT3B0aW9uRGlzYWJsZWQgOiAoKSA9PiBmYWxzZSwgZGlzYWJsZUxpc3RXcmFwICE9IG51bGwgPyBkaXNhYmxlTGlzdFdyYXAgOiBmYWxzZSwgb3B0aW9uQ29tcGFyZXIpO1xuXG4gIC8vIHVzZSBgZm9yYCBpbnN0ZWFkIG9mIGB3aGlsZWAgcHJldmVudCBpbmZpbml0ZSBsb29wXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25zLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIC8vIFJldHVybiB1bi1tdXRhdGVkIHN0YXRlIGlmIGxvb3BlZCBiYWNrIHRvIHRoZSBjdXJyZW50bHkgaGlnaGxpZ2h0ZWQgdmFsdWVcbiAgICBpZiAoIW5leHRPcHRpb24gfHwgIXN0YXJ0V2l0aEN1cnJlbnRPcHRpb24gJiYgc3RhdGUuaGlnaGxpZ2h0ZWRWYWx1ZSA9PT0gbmV4dE9wdGlvbikge1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBpZiAodGV4dENyaXRlcmlhTWF0Y2hlcyhuZXh0T3B0aW9uLCBzZWFyY2hTdHJpbmcsIG9wdGlvblN0cmluZ2lmaWVyKSAmJiAoIWlzT3B0aW9uRGlzYWJsZWQobmV4dE9wdGlvbiwgb3B0aW9ucy5pbmRleE9mKG5leHRPcHRpb24pKSB8fCBkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlKSkge1xuICAgICAgLy8gVGhlIG5leHRPcHRpb24gaXMgdGhlIGVsZW1lbnQgdG8gYmUgaGlnaGxpZ2h0ZWRcbiAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBzdGF0ZSwge1xuICAgICAgICBoaWdobGlnaHRlZFZhbHVlOiBuZXh0T3B0aW9uXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gTW92ZSB0byB0aGUgbmV4dCBlbGVtZW50LlxuICAgIG5leHRPcHRpb24gPSBnZXROZXdIaWdobGlnaHRlZE9wdGlvbihvcHRpb25zLCBuZXh0T3B0aW9uLCAxLCBkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlICE9IG51bGwgPyBkaXNhYmxlZEl0ZW1zRm9jdXNhYmxlIDogZmFsc2UsIGlzT3B0aW9uRGlzYWJsZWQgIT0gbnVsbCA/IGlzT3B0aW9uRGlzYWJsZWQgOiAoKSA9PiBmYWxzZSwgZGlzYWJsZUxpc3RXcmFwICE9IG51bGwgPyBkaXNhYmxlTGlzdFdyYXAgOiBmYWxzZSwgb3B0aW9uQ29tcGFyZXIpO1xuICB9XG5cbiAgLy8gTm8gb3B0aW9uIG1hdGNoIHRleHQgc2VhcmNoIGNyaXRlcmlhXG4gIHJldHVybiBzdGF0ZTtcbn1cbmZ1bmN0aW9uIGhhbmRsZU9wdGlvbnNDaGFuZ2Uob3B0aW9ucywgc3RhdGUsIHByb3BzKSB7XG4gIHZhciBfb3B0aW9ucyRmaW5kLCBfc3RhdGUkc2VsZWN0ZWRWYWx1ZXM7XG4gIGNvbnN0IHtcbiAgICBvcHRpb25Db21wYXJlclxuICB9ID0gcHJvcHM7XG4gIGNvbnN0IG5ld0hpZ2hsaWdodGVkT3B0aW9uID0gc3RhdGUuaGlnaGxpZ2h0ZWRWYWx1ZSA9PSBudWxsID8gbnVsbCA6IChfb3B0aW9ucyRmaW5kID0gb3B0aW9ucy5maW5kKG9wdGlvbiA9PiBvcHRpb25Db21wYXJlcihvcHRpb24sIHN0YXRlLmhpZ2hsaWdodGVkVmFsdWUpKSkgIT0gbnVsbCA/IF9vcHRpb25zJGZpbmQgOiBudWxsO1xuXG4gIC8vIGV4Y2x1ZGUgc2VsZWN0ZWQgdmFsdWVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgb3B0aW9uc1xuICBjb25zdCBzZWxlY3RlZFZhbHVlcyA9IChfc3RhdGUkc2VsZWN0ZWRWYWx1ZXMgPSBzdGF0ZS5zZWxlY3RlZFZhbHVlcykgIT0gbnVsbCA/IF9zdGF0ZSRzZWxlY3RlZFZhbHVlcyA6IFtdO1xuICBjb25zdCBuZXdTZWxlY3RlZFZhbHVlcyA9IHNlbGVjdGVkVmFsdWVzLmZpbHRlcihzZWxlY3RlZFZhbHVlID0+IG9wdGlvbnMuc29tZShvcHRpb24gPT4gb3B0aW9uQ29tcGFyZXIob3B0aW9uLCBzZWxlY3RlZFZhbHVlKSkpO1xuICByZXR1cm4ge1xuICAgIGhpZ2hsaWdodGVkVmFsdWU6IG5ld0hpZ2hsaWdodGVkT3B0aW9uLFxuICAgIHNlbGVjdGVkVmFsdWVzOiBuZXdTZWxlY3RlZFZhbHVlc1xuICB9O1xufVxuZnVuY3Rpb24gZGVmYXVsdExpc3Rib3hSZWR1Y2VyKHN0YXRlLCBhY3Rpb24pIHtcbiAgY29uc3Qge1xuICAgIHR5cGVcbiAgfSA9IGFjdGlvbjtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBfdXNlTGlzdGJveC5BY3Rpb25UeXBlcy5rZXlEb3duOlxuICAgICAgcmV0dXJuIGhhbmRsZUtleURvd24oYWN0aW9uLmV2ZW50LCBzdGF0ZSwgYWN0aW9uLnByb3BzKTtcbiAgICBjYXNlIF91c2VMaXN0Ym94LkFjdGlvblR5cGVzLm9wdGlvbkNsaWNrOlxuICAgICAgcmV0dXJuIGhhbmRsZU9wdGlvblNlbGVjdGlvbihhY3Rpb24ub3B0aW9uLCBzdGF0ZSwgYWN0aW9uLnByb3BzKTtcbiAgICBjYXNlIF91c2VMaXN0Ym94LkFjdGlvblR5cGVzLmJsdXI6XG4gICAgICByZXR1cm4gaGFuZGxlQmx1cihzdGF0ZSk7XG4gICAgY2FzZSBfdXNlTGlzdGJveC5BY3Rpb25UeXBlcy5zZXRWYWx1ZTpcbiAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBzdGF0ZSwge1xuICAgICAgICBzZWxlY3RlZFZhbHVlczogYWN0aW9uLnZhbHVlXG4gICAgICB9KTtcbiAgICBjYXNlIF91c2VMaXN0Ym94LkFjdGlvblR5cGVzLnNldEhpZ2hsaWdodDpcbiAgICAgIHJldHVybiAoMCwgX2V4dGVuZHMyLmRlZmF1bHQpKHt9LCBzdGF0ZSwge1xuICAgICAgICBoaWdobGlnaHRlZFZhbHVlOiBhY3Rpb24uaGlnaGxpZ2h0XG4gICAgICB9KTtcbiAgICBjYXNlIF91c2VMaXN0Ym94LkFjdGlvblR5cGVzLnRleHROYXZpZ2F0aW9uOlxuICAgICAgcmV0dXJuIGhhbmRsZVRleHROYXZpZ2F0aW9uKHN0YXRlLCBhY3Rpb24uc2VhcmNoU3RyaW5nLCBhY3Rpb24ucHJvcHMpO1xuICAgIGNhc2UgX3VzZUxpc3Rib3guQWN0aW9uVHlwZXMub3B0aW9uc0NoYW5nZTpcbiAgICAgIHJldHVybiBoYW5kbGVPcHRpb25zQ2hhbmdlKGFjdGlvbi5vcHRpb25zLCBzdGF0ZSwgYWN0aW9uLnByb3BzKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICB9XG59Il0sIm1hcHBpbmdzIjoiQUFBQSxZQUFZOztBQUVaLElBQUlBLHNCQUFzQixHQUFHQyxPQUFPLENBQUMsOENBQThDLENBQUM7QUFDcEZDLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxPQUFPLEdBQUdDLHFCQUFxQjtBQUN2QyxJ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