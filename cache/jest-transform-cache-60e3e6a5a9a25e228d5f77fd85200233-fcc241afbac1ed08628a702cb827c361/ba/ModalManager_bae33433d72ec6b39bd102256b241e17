2a63f3596c025ce7d37b8931544700bc
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ariaHidden = ariaHidden;
exports.default = void 0;
var _utils = require("@mui/utils");
// Is a vertical scrollbar displayed?
function isOverflowing(container) {
  const doc = (0, _utils.unstable_ownerDocument)(container);
  if (doc.body === container) {
    return (0, _utils.unstable_ownerWindow)(container).innerWidth > doc.documentElement.clientWidth;
  }
  return container.scrollHeight > container.clientHeight;
}
function ariaHidden(element, show) {
  if (show) {
    element.setAttribute('aria-hidden', 'true');
  } else {
    element.removeAttribute('aria-hidden');
  }
}
function getPaddingRight(element) {
  return parseInt((0, _utils.unstable_ownerWindow)(element).getComputedStyle(element).paddingRight, 10) || 0;
}
function isAriaHiddenForbiddenOnElement(element) {
  // The forbidden HTML tags are the ones from ARIA specification that
  // can be children of body and can't have aria-hidden attribute.
  // cf. https://www.w3.org/TR/html-aria/#docconformance
  const forbiddenTagNames = ['TEMPLATE', 'SCRIPT', 'STYLE', 'LINK', 'MAP', 'META', 'NOSCRIPT', 'PICTURE', 'COL', 'COLGROUP', 'PARAM', 'SLOT', 'SOURCE', 'TRACK'];
  const isForbiddenTagName = forbiddenTagNames.indexOf(element.tagName) !== -1;
  const isInputHidden = element.tagName === 'INPUT' && element.getAttribute('type') === 'hidden';
  return isForbiddenTagName || isInputHidden;
}
function ariaHiddenSiblings(container, mountElement, currentElement, elementsToExclude, show) {
  const blacklist = [mountElement, currentElement, ...elementsToExclude];
  [].forEach.call(container.children, element => {
    const isNotExcludedElement = blacklist.indexOf(element) === -1;
    const isNotForbiddenElement = !isAriaHiddenForbiddenOnElement(element);
    if (isNotExcludedElement && isNotForbiddenElement) {
      ariaHidden(element, show);
    }
  });
}
function findIndexOf(items, callback) {
  let idx = -1;
  items.some((item, index) => {
    if (callback(item)) {
      idx = index;
      return true;
    }
    return false;
  });
  return idx;
}
function handleContainer(containerInfo, props) {
  const restoreStyle = [];
  const container = containerInfo.container;
  if (!props.disableScrollLock) {
    if (isOverflowing(container)) {
      // Compute the size before applying overflow hidden to avoid any scroll jumps.
      const scrollbarSize = (0, _utils.unstable_getScrollbarSize)((0, _utils.unstable_ownerDocument)(container));
      restoreStyle.push({
        value: container.style.paddingRight,
        property: 'padding-right',
        el: container
      });
      // Use computed style, here to get the real padding to add our scrollbar width.
      container.style.paddingRight = `${getPaddingRight(container) + scrollbarSize}px`;

      // .mui-fixed is a global helper.
      const fixedElements = (0, _utils.unstable_ownerDocument)(container).querySelectorAll('.mui-fixed');
      [].forEach.call(fixedElements, element => {
        restoreStyle.push({
          value: element.style.paddingRight,
          property: 'padding-right',
          el: element
        });
        element.style.paddingRight = `${getPaddingRight(element) + scrollbarSize}px`;
      });
    }
    let scrollContainer;
    if (container.parentNode instanceof DocumentFragment) {
      scrollContainer = (0, _utils.unstable_ownerDocument)(container).body;
    } else {
      // Improve Gatsby support
      // https://css-tricks.com/snippets/css/force-vertical-scrollbar/
      const parent = container.parentElement;
      const containerWindow = (0, _utils.unstable_ownerWindow)(container);
      scrollContainer = (parent == null ? void 0 : parent.nodeName) === 'HTML' && containerWindow.getComputedStyle(parent).overflowY === 'scroll' ? parent : container;
    }

    // Block the scroll even if no scrollbar is visible to account for mobile keyboard
    // screensize shrink.
    restoreStyle.push({
      value: scrollContainer.style.overflow,
      property: 'overflow',
      el: scrollContainer
    }, {
      value: scrollContainer.style.overflowX,
      property: 'overflow-x',
      el: scrollContainer
    }, {
      value: scrollContainer.style.overflowY,
      property: 'overflow-y',
      el: scrollContainer
    });
    scrollContainer.style.overflow = 'hidden';
  }
  const restore = () => {
    restoreStyle.forEach(({
      value,
      el,
      property
    }) => {
      if (value) {
        el.style.setProperty(property, value);
      } else {
        el.style.removeProperty(property);
      }
    });
  };
  return restore;
}
function getHiddenSiblings(container) {
  const hiddenSiblings = [];
  [].forEach.call(container.children, element => {
    if (element.getAttribute('aria-hidden') === 'true') {
      hiddenSiblings.push(element);
    }
  });
  return hiddenSiblings;
}
/**
 * @ignore - do not document.
 *
 * Proper state management for containers and the modals in those containers.
 * Simplified, but inspired by react-overlay's ModalManager class.
 * Used by the Modal to ensure proper styling of containers.
 */
class ModalManager {
  constructor() {
    this.containers = void 0;
    this.modals = void 0;
    this.modals = [];
    this.containers = [];
  }
  add(modal, container) {
    let modalIndex = this.modals.indexOf(modal);
    if (modalIndex !== -1) {
      return modalIndex;
    }
    modalIndex = this.modals.length;
    this.modals.push(modal);

    // If the modal we are adding is already in the DOM.
    if (modal.modalRef) {
      ariaHidden(modal.modalRef, false);
    }
    const hiddenSiblings = getHiddenSiblings(container);
    ariaHiddenSiblings(container, modal.mount, modal.modalRef, hiddenSiblings, true);
    const containerIndex = findIndexOf(this.containers, item => item.container === container);
    if (containerIndex !== -1) {
      this.containers[containerIndex].modals.push(modal);
      return modalIndex;
    }
    this.containers.push({
      modals: [modal],
      container,
      restore: null,
      hiddenSiblings
    });
    return modalIndex;
  }
  mount(modal, props) {
    const containerIndex = findIndexOf(this.containers, item => item.modals.indexOf(modal) !== -1);
    const containerInfo = this.containers[containerIndex];
    if (!containerInfo.restore) {
      containerInfo.restore = handleContainer(containerInfo, props);
    }
  }
  remove(modal, ariaHiddenState = true) {
    const modalIndex = this.modals.indexOf(modal);
    if (modalIndex === -1) {
      return modalIndex;
    }
    const containerIndex = findIndexOf(this.containers, item => item.modals.indexOf(modal) !== -1);
    const containerInfo = this.containers[containerIndex];
    containerInfo.modals.splice(containerInfo.modals.indexOf(modal), 1);
    this.modals.splice(modalIndex, 1);

    // If that was the last modal in a container, clean up the container.
    if (containerInfo.modals.length === 0) {
      // The modal might be closed before it had the chance to be mounted in the DOM.
      if (containerInfo.restore) {
        containerInfo.restore();
      }
      if (modal.modalRef) {
        // In case the modal wasn't in the DOM yet.
        ariaHidden(modal.modalRef, ariaHiddenState);
      }
      ariaHiddenSiblings(containerInfo.container, modal.mount, modal.modalRef, containerInfo.hiddenSiblings, false);
      this.containers.splice(containerIndex, 1);
    } else {
      // Otherwise make sure the next top modal is visible to a screen reader.
      const nextTop = containerInfo.modals[containerInfo.modals.length - 1];
      // as soon as a modal is adding its modalRef is undefined. it can't set
      // aria-hidden because the dom element doesn't exist either
      // when modal was unmounted before modalRef gets null
      if (nextTop.modalRef) {
        ariaHidden(nextTop.modalRef, false);
      }
    }
    return modalIndex;
  }
  isTopModal(modal) {
    return this.modals.length > 0 && this.modals[this.modals.length - 1] === modal;
  }
}
exports.default = ModalManager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImFyaWFIaWRkZW4iLCJkZWZhdWx0IiwiX3V0aWxzIiwicmVxdWlyZSIsImlzT3ZlcmZsb3dpbmciLCJjb250YWluZXIiLCJkb2MiLCJ1bnN0YWJsZV9vd25lckRvY3VtZW50IiwiYm9keSIsInVuc3RhYmxlX293bmVyV2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZWxlbWVudCIsInNob3ciLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJnZXRQYWRkaW5nUmlnaHQiLCJwYXJzZUludCIsImdldENvbXB1dGVkU3R5bGUiLCJwYWRkaW5nUmlnaHQiLCJpc0FyaWFIaWRkZW5Gb3JiaWRkZW5PbkVsZW1lbnQiLCJmb3JiaWRkZW5UYWdOYW1lcyIsImlzRm9yYmlkZGVuVGFnTmFtZSIsImluZGV4T2YiLCJ0YWdOYW1lIiwiaXNJbnB1dEhpZGRlbiIsImdldEF0dHJpYnV0ZSIsImFyaWFIaWRkZW5TaWJsaW5ncyIsIm1vdW50RWxlbWVudCIsImN1cnJlbnRFbGVtZW50IiwiZWxlbWVudHNUb0V4Y2x1ZGUiLCJibGFja2xpc3QiLCJmb3JFYWNoIiwiY2FsbCIsImNoaWxkcmVuIiwiaXNOb3RFeGNsdWRlZEVsZW1lbnQiLCJpc05vdEZvcmJpZGRlbkVsZW1lbnQiLCJmaW5kSW5kZXhPZiIsIml0ZW1zIiwiY2FsbGJhY2siLCJpZHgiLCJzb21lIiwiaXRlbSIsImluZGV4IiwiaGFuZGxlQ29udGFpbmVyIiwiY29udGFpbmVySW5mbyIsInByb3BzIiwicmVzdG9yZVN0eWxlIiwiZGlzYWJsZVNjcm9sbExvY2siLCJzY3JvbGxiYXJTaXplIiwidW5zdGFibGVfZ2V0U2Nyb2xsYmFyU2l6ZSIsInB1c2giLCJzdHlsZSIsInByb3BlcnR5IiwiZWwiLCJmaXhlZEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsInNjcm9sbENvbnRhaW5lciIsInBhcmVudE5vZGUiLCJEb2N1bWVudEZyYWdtZW50IiwicGFyZW50IiwicGFyZW50RWxlbWVudCIsImNvbnRhaW5lcldpbmRvdyIsIm5vZGVOYW1lIiwib3ZlcmZsb3dZIiwib3ZlcmZsb3ciLCJvdmVyZmxvd1giLCJyZXN0b3JlIiwic2V0UHJvcGVydHkiLCJyZW1vdmVQcm9wZXJ0eSIsImdldEhpZGRlblNpYmxpbmdzIiwiaGlkZGVuU2libGluZ3MiLCJNb2RhbE1hbmFnZXIiLCJjb25zdHJ1Y3RvciIsImNvbnRhaW5lcnMiLCJtb2RhbHMiLCJhZGQiLCJtb2RhbCIsIm1vZGFsSW5kZXgiLCJsZW5ndGgiLCJtb2RhbFJlZiIsIm1vdW50IiwiY29udGFpbmVySW5kZXgiLCJyZW1vdmUiLCJhcmlhSGlkZGVuU3RhdGUiLCJzcGxpY2UiLCJuZXh0VG9wIiwiaXNUb3BNb2RhbCJdLCJzb3VyY2VzIjpbIk1vZGFsTWFuYWdlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuYXJpYUhpZGRlbiA9IGFyaWFIaWRkZW47XG5leHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7XG52YXIgX3V0aWxzID0gcmVxdWlyZShcIkBtdWkvdXRpbHNcIik7XG4vLyBJcyBhIHZlcnRpY2FsIHNjcm9sbGJhciBkaXNwbGF5ZWQ/XG5mdW5jdGlvbiBpc092ZXJmbG93aW5nKGNvbnRhaW5lcikge1xuICBjb25zdCBkb2MgPSAoMCwgX3V0aWxzLnVuc3RhYmxlX293bmVyRG9jdW1lbnQpKGNvbnRhaW5lcik7XG4gIGlmIChkb2MuYm9keSA9PT0gY29udGFpbmVyKSB7XG4gICAgcmV0dXJuICgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJXaW5kb3cpKGNvbnRhaW5lcikuaW5uZXJXaWR0aCA+IGRvYy5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG4gIH1cbiAgcmV0dXJuIGNvbnRhaW5lci5zY3JvbGxIZWlnaHQgPiBjb250YWluZXIuY2xpZW50SGVpZ2h0O1xufVxuZnVuY3Rpb24gYXJpYUhpZGRlbihlbGVtZW50LCBzaG93KSB7XG4gIGlmIChzaG93KSB7XG4gICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nKTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0UGFkZGluZ1JpZ2h0KGVsZW1lbnQpIHtcbiAgcmV0dXJuIHBhcnNlSW50KCgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJXaW5kb3cpKGVsZW1lbnQpLmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucGFkZGluZ1JpZ2h0LCAxMCkgfHwgMDtcbn1cbmZ1bmN0aW9uIGlzQXJpYUhpZGRlbkZvcmJpZGRlbk9uRWxlbWVudChlbGVtZW50KSB7XG4gIC8vIFRoZSBmb3JiaWRkZW4gSFRNTCB0YWdzIGFyZSB0aGUgb25lcyBmcm9tIEFSSUEgc3BlY2lmaWNhdGlvbiB0aGF0XG4gIC8vIGNhbiBiZSBjaGlsZHJlbiBvZiBib2R5IGFuZCBjYW4ndCBoYXZlIGFyaWEtaGlkZGVuIGF0dHJpYnV0ZS5cbiAgLy8gY2YuIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sLWFyaWEvI2RvY2NvbmZvcm1hbmNlXG4gIGNvbnN0IGZvcmJpZGRlblRhZ05hbWVzID0gWydURU1QTEFURScsICdTQ1JJUFQnLCAnU1RZTEUnLCAnTElOSycsICdNQVAnLCAnTUVUQScsICdOT1NDUklQVCcsICdQSUNUVVJFJywgJ0NPTCcsICdDT0xHUk9VUCcsICdQQVJBTScsICdTTE9UJywgJ1NPVVJDRScsICdUUkFDSyddO1xuICBjb25zdCBpc0ZvcmJpZGRlblRhZ05hbWUgPSBmb3JiaWRkZW5UYWdOYW1lcy5pbmRleE9mKGVsZW1lbnQudGFnTmFtZSkgIT09IC0xO1xuICBjb25zdCBpc0lucHV0SGlkZGVuID0gZWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICdoaWRkZW4nO1xuICByZXR1cm4gaXNGb3JiaWRkZW5UYWdOYW1lIHx8IGlzSW5wdXRIaWRkZW47XG59XG5mdW5jdGlvbiBhcmlhSGlkZGVuU2libGluZ3MoY29udGFpbmVyLCBtb3VudEVsZW1lbnQsIGN1cnJlbnRFbGVtZW50LCBlbGVtZW50c1RvRXhjbHVkZSwgc2hvdykge1xuICBjb25zdCBibGFja2xpc3QgPSBbbW91bnRFbGVtZW50LCBjdXJyZW50RWxlbWVudCwgLi4uZWxlbWVudHNUb0V4Y2x1ZGVdO1xuICBbXS5mb3JFYWNoLmNhbGwoY29udGFpbmVyLmNoaWxkcmVuLCBlbGVtZW50ID0+IHtcbiAgICBjb25zdCBpc05vdEV4Y2x1ZGVkRWxlbWVudCA9IGJsYWNrbGlzdC5pbmRleE9mKGVsZW1lbnQpID09PSAtMTtcbiAgICBjb25zdCBpc05vdEZvcmJpZGRlbkVsZW1lbnQgPSAhaXNBcmlhSGlkZGVuRm9yYmlkZGVuT25FbGVtZW50KGVsZW1lbnQpO1xuICAgIGlmIChpc05vdEV4Y2x1ZGVkRWxlbWVudCAmJiBpc05vdEZvcmJpZGRlbkVsZW1lbnQpIHtcbiAgICAgIGFyaWFIaWRkZW4oZWxlbWVudCwgc2hvdyk7XG4gICAgfVxuICB9KTtcbn1cbmZ1bmN0aW9uIGZpbmRJbmRleE9mKGl0ZW1zLCBjYWxsYmFjaykge1xuICBsZXQgaWR4ID0gLTE7XG4gIGl0ZW1zLnNvbWUoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgaWYgKGNhbGxiYWNrKGl0ZW0pKSB7XG4gICAgICBpZHggPSBpbmRleDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH0pO1xuICByZXR1cm4gaWR4O1xufVxuZnVuY3Rpb24gaGFuZGxlQ29udGFpbmVyKGNvbnRhaW5lckluZm8sIHByb3BzKSB7XG4gIGNvbnN0IHJlc3RvcmVTdHlsZSA9IFtdO1xuICBjb25zdCBjb250YWluZXIgPSBjb250YWluZXJJbmZvLmNvbnRhaW5lcjtcbiAgaWYgKCFwcm9wcy5kaXNhYmxlU2Nyb2xsTG9jaykge1xuICAgIGlmIChpc092ZXJmbG93aW5nKGNvbnRhaW5lcikpIHtcbiAgICAgIC8vIENvbXB1dGUgdGhlIHNpemUgYmVmb3JlIGFwcGx5aW5nIG92ZXJmbG93IGhpZGRlbiB0byBhdm9pZCBhbnkgc2Nyb2xsIGp1bXBzLlxuICAgICAgY29uc3Qgc2Nyb2xsYmFyU2l6ZSA9ICgwLCBfdXRpbHMudW5zdGFibGVfZ2V0U2Nyb2xsYmFyU2l6ZSkoKDAsIF91dGlscy51bnN0YWJsZV9vd25lckRvY3VtZW50KShjb250YWluZXIpKTtcbiAgICAgIHJlc3RvcmVTdHlsZS5wdXNoKHtcbiAgICAgICAgdmFsdWU6IGNvbnRhaW5lci5zdHlsZS5wYWRkaW5nUmlnaHQsXG4gICAgICAgIHByb3BlcnR5OiAncGFkZGluZy1yaWdodCcsXG4gICAgICAgIGVsOiBjb250YWluZXJcbiAgICAgIH0pO1xuICAgICAgLy8gVXNlIGNvbXB1dGVkIHN0eWxlLCBoZXJlIHRvIGdldCB0aGUgcmVhbCBwYWRkaW5nIHRvIGFkZCBvdXIgc2Nyb2xsYmFyIHdpZHRoLlxuICAgICAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmdSaWdodCA9IGAke2dldFBhZGRpbmdSaWdodChjb250YWluZXIpICsgc2Nyb2xsYmFyU2l6ZX1weGA7XG5cbiAgICAgIC8vIC5tdWktZml4ZWQgaXMgYSBnbG9iYWwgaGVscGVyLlxuICAgICAgY29uc3QgZml4ZWRFbGVtZW50cyA9ICgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJEb2N1bWVudCkoY29udGFpbmVyKS5xdWVyeVNlbGVjdG9yQWxsKCcubXVpLWZpeGVkJyk7XG4gICAgICBbXS5mb3JFYWNoLmNhbGwoZml4ZWRFbGVtZW50cywgZWxlbWVudCA9PiB7XG4gICAgICAgIHJlc3RvcmVTdHlsZS5wdXNoKHtcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQsXG4gICAgICAgICAgcHJvcGVydHk6ICdwYWRkaW5nLXJpZ2h0JyxcbiAgICAgICAgICBlbDogZWxlbWVudFxuICAgICAgICB9KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBgJHtnZXRQYWRkaW5nUmlnaHQoZWxlbWVudCkgKyBzY3JvbGxiYXJTaXplfXB4YDtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgc2Nyb2xsQ29udGFpbmVyO1xuICAgIGlmIChjb250YWluZXIucGFyZW50Tm9kZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgIHNjcm9sbENvbnRhaW5lciA9ICgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJEb2N1bWVudCkoY29udGFpbmVyKS5ib2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJbXByb3ZlIEdhdHNieSBzdXBwb3J0XG4gICAgICAvLyBodHRwczovL2Nzcy10cmlja3MuY29tL3NuaXBwZXRzL2Nzcy9mb3JjZS12ZXJ0aWNhbC1zY3JvbGxiYXIvXG4gICAgICBjb25zdCBwYXJlbnQgPSBjb250YWluZXIucGFyZW50RWxlbWVudDtcbiAgICAgIGNvbnN0IGNvbnRhaW5lcldpbmRvdyA9ICgwLCBfdXRpbHMudW5zdGFibGVfb3duZXJXaW5kb3cpKGNvbnRhaW5lcik7XG4gICAgICBzY3JvbGxDb250YWluZXIgPSAocGFyZW50ID09IG51bGwgPyB2b2lkIDAgOiBwYXJlbnQubm9kZU5hbWUpID09PSAnSFRNTCcgJiYgY29udGFpbmVyV2luZG93LmdldENvbXB1dGVkU3R5bGUocGFyZW50KS5vdmVyZmxvd1kgPT09ICdzY3JvbGwnID8gcGFyZW50IDogY29udGFpbmVyO1xuICAgIH1cblxuICAgIC8vIEJsb2NrIHRoZSBzY3JvbGwgZXZlbiBpZiBubyBzY3JvbGxiYXIgaXMgdmlzaWJsZSB0byBhY2NvdW50IGZvciBtb2JpbGUga2V5Ym9hcmRcbiAgICAvLyBzY3JlZW5zaXplIHNocmluay5cbiAgICByZXN0b3JlU3R5bGUucHVzaCh7XG4gICAgICB2YWx1ZTogc2Nyb2xsQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93LFxuICAgICAgcHJvcGVydHk6ICdvdmVyZmxvdycsXG4gICAgICBlbDogc2Nyb2xsQ29udGFpbmVyXG4gICAgfSwge1xuICAgICAgdmFsdWU6IHNjcm9sbENvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1gsXG4gICAgICBwcm9wZXJ0eTogJ292ZXJmbG93LXgnLFxuICAgICAgZWw6IHNjcm9sbENvbnRhaW5lclxuICAgIH0sIHtcbiAgICAgIHZhbHVlOiBzY3JvbGxDb250YWluZXIuc3R5bGUub3ZlcmZsb3dZLFxuICAgICAgcHJvcGVydHk6ICdvdmVyZmxvdy15JyxcbiAgICAgIGVsOiBzY3JvbGxDb250YWluZXJcbiAgICB9KTtcbiAgICBzY3JvbGxDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgfVxuICBjb25zdCByZXN0b3JlID0gKCkgPT4ge1xuICAgIHJlc3RvcmVTdHlsZS5mb3JFYWNoKCh7XG4gICAgICB2YWx1ZSxcbiAgICAgIGVsLFxuICAgICAgcHJvcGVydHlcbiAgICB9KSA9PiB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3BlcnR5KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbiAgcmV0dXJuIHJlc3RvcmU7XG59XG5mdW5jdGlvbiBnZXRIaWRkZW5TaWJsaW5ncyhjb250YWluZXIpIHtcbiAgY29uc3QgaGlkZGVuU2libGluZ3MgPSBbXTtcbiAgW10uZm9yRWFjaC5jYWxsKGNvbnRhaW5lci5jaGlsZHJlbiwgZWxlbWVudCA9PiB7XG4gICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpID09PSAndHJ1ZScpIHtcbiAgICAgIGhpZGRlblNpYmxpbmdzLnB1c2goZWxlbWVudCk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGhpZGRlblNpYmxpbmdzO1xufVxuLyoqXG4gKiBAaWdub3JlIC0gZG8gbm90IGRvY3VtZW50LlxuICpcbiAqIFByb3BlciBzdGF0ZSBtYW5hZ2VtZW50IGZvciBjb250YWluZXJzIGFuZCB0aGUgbW9kYWxzIGluIHRob3NlIGNvbnRhaW5lcnMuXG4gKiBTaW1wbGlmaWVkLCBidXQgaW5zcGlyZWQgYnkgcmVhY3Qtb3ZlcmxheSdzIE1vZGFsTWFuYWdlciBjbGFzcy5cbiAqIFVzZWQgYnkgdGhlIE1vZGFsIHRvIGVuc3VyZSBwcm9wZXIgc3R5bGluZyBvZiBjb250YWluZXJzLlxuICovXG5jbGFzcyBNb2RhbE1hbmFnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRhaW5lcnMgPSB2b2lkIDA7XG4gICAgdGhpcy5tb2RhbHMgPSB2b2lkIDA7XG4gICAgdGhpcy5tb2RhbHMgPSBbXTtcbiAgICB0aGlzLmNvbnRhaW5lcnMgPSBbXTtcbiAgfVxuICBhZGQobW9kYWwsIGNvbnRhaW5lcikge1xuICAgIGxldCBtb2RhbEluZGV4ID0gdGhpcy5tb2RhbHMuaW5kZXhPZihtb2RhbCk7XG4gICAgaWYgKG1vZGFsSW5kZXggIT09IC0xKSB7XG4gICAgICByZXR1cm4gbW9kYWxJbmRleDtcbiAgICB9XG4gICAgbW9kYWxJbmRleCA9IHRoaXMubW9kYWxzLmxlbmd0aDtcbiAgICB0aGlzLm1vZGFscy5wdXNoKG1vZGFsKTtcblxuICAgIC8vIElmIHRoZSBtb2RhbCB3ZSBhcmUgYWRkaW5nIGlzIGFscmVhZHkgaW4gdGhlIERPTS5cbiAgICBpZiAobW9kYWwubW9kYWxSZWYpIHtcbiAgICAgIGFyaWFIaWRkZW4obW9kYWwubW9kYWxSZWYsIGZhbHNlKTtcbiAgICB9XG4gICAgY29uc3QgaGlkZGVuU2libGluZ3MgPSBnZXRIaWRkZW5TaWJsaW5ncyhjb250YWluZXIpO1xuICAgIGFyaWFIaWRkZW5TaWJsaW5ncyhjb250YWluZXIsIG1vZGFsLm1vdW50LCBtb2RhbC5tb2RhbFJlZiwgaGlkZGVuU2libGluZ3MsIHRydWUpO1xuICAgIGNvbnN0IGNvbnRhaW5lckluZGV4ID0gZmluZEluZGV4T2YodGhpcy5jb250YWluZXJzLCBpdGVtID0+IGl0ZW0uY29udGFpbmVyID09PSBjb250YWluZXIpO1xuICAgIGlmIChjb250YWluZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuY29udGFpbmVyc1tjb250YWluZXJJbmRleF0ubW9kYWxzLnB1c2gobW9kYWwpO1xuICAgICAgcmV0dXJuIG1vZGFsSW5kZXg7XG4gICAgfVxuICAgIHRoaXMuY29udGFpbmVycy5wdXNoKHtcbiAgICAgIG1vZGFsczogW21vZGFsXSxcbiAgICAgIGNvbnRhaW5lcixcbiAgICAgIHJlc3RvcmU6IG51bGwsXG4gICAgICBoaWRkZW5TaWJsaW5nc1xuICAgIH0pO1xuICAgIHJldHVybiBtb2RhbEluZGV4O1xuICB9XG4gIG1vdW50KG1vZGFsLCBwcm9wcykge1xuICAgIGNvbnN0IGNvbnRhaW5lckluZGV4ID0gZmluZEluZGV4T2YodGhpcy5jb250YWluZXJzLCBpdGVtID0+IGl0ZW0ubW9kYWxzLmluZGV4T2YobW9kYWwpICE9PSAtMSk7XG4gICAgY29uc3QgY29udGFpbmVySW5mbyA9IHRoaXMuY29udGFpbmVyc1tjb250YWluZXJJbmRleF07XG4gICAgaWYgKCFjb250YWluZXJJbmZvLnJlc3RvcmUpIHtcbiAgICAgIGNvbnRhaW5lckluZm8ucmVzdG9yZSA9IGhhbmRsZUNvbnRhaW5lcihjb250YWluZXJJbmZvLCBwcm9wcyk7XG4gICAgfVxuICB9XG4gIHJlbW92ZShtb2RhbCwgYXJpYUhpZGRlblN0YXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IG1vZGFsSW5kZXggPSB0aGlzLm1vZGFscy5pbmRleE9mKG1vZGFsKTtcbiAgICBpZiAobW9kYWxJbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBtb2RhbEluZGV4O1xuICAgIH1cbiAgICBjb25zdCBjb250YWluZXJJbmRleCA9IGZpbmRJbmRleE9mKHRoaXMuY29udGFpbmVycywgaXRlbSA9PiBpdGVtLm1vZGFscy5pbmRleE9mKG1vZGFsKSAhPT0gLTEpO1xuICAgIGNvbnN0IGNvbnRhaW5lckluZm8gPSB0aGlzLmNvbnRhaW5lcnNbY29udGFpbmVySW5kZXhdO1xuICAgIGNvbnRhaW5lckluZm8ubW9kYWxzLnNwbGljZShjb250YWluZXJJbmZvLm1vZGFscy5pbmRleE9mKG1vZGFsKSwgMSk7XG4gICAgdGhpcy5tb2RhbHMuc3BsaWNlKG1vZGFsSW5kZXgsIDEpO1xuXG4gICAgLy8gSWYgdGhhdCB3YXMgdGhlIGxhc3QgbW9kYWwgaW4gYSBjb250YWluZXIsIGNsZWFuIHVwIHRoZSBjb250YWluZXIuXG4gICAgaWYgKGNvbnRhaW5lckluZm8ubW9kYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gVGhlIG1vZGFsIG1pZ2h0IGJlIGNsb3NlZCBiZWZvcmUgaXQgaGFkIHRoZSBjaGFuY2UgdG8gYmUgbW91bnRlZCBpbiB0aGUgRE9NLlxuICAgICAgaWYgKGNvbnRhaW5lckluZm8ucmVzdG9yZSkge1xuICAgICAgICBjb250YWluZXJJbmZvLnJlc3RvcmUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChtb2RhbC5tb2RhbFJlZikge1xuICAgICAgICAvLyBJbiBjYXNlIHRoZSBtb2RhbCB3YXNuJ3QgaW4gdGhlIERPTSB5ZXQuXG4gICAgICAgIGFyaWFIaWRkZW4obW9kYWwubW9kYWxSZWYsIGFyaWFIaWRkZW5TdGF0ZSk7XG4gICAgICB9XG4gICAgICBhcmlhSGlkZGVuU2libGluZ3MoY29udGFpbmVySW5mby5jb250YWluZXIsIG1vZGFsLm1vdW50LCBtb2RhbC5tb2RhbFJlZiwgY29udGFpbmVySW5mby5oaWRkZW5TaWJsaW5ncywgZmFsc2UpO1xuICAgICAgdGhpcy5jb250YWluZXJzLnNwbGljZShjb250YWluZXJJbmRleCwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSBtYWtlIHN1cmUgdGhlIG5leHQgdG9wIG1vZGFsIGlzIHZpc2libGUgdG8gYSBzY3JlZW4gcmVhZGVyLlxuICAgICAgY29uc3QgbmV4dFRvcCA9IGNvbnRhaW5lckluZm8ubW9kYWxzW2NvbnRhaW5lckluZm8ubW9kYWxzLmxlbmd0aCAtIDFdO1xuICAgICAgLy8gYXMgc29vbiBhcyBhIG1vZGFsIGlzIGFkZGluZyBpdHMgbW9kYWxSZWYgaXMgdW5kZWZpbmVkLiBpdCBjYW4ndCBzZXRcbiAgICAgIC8vIGFyaWEtaGlkZGVuIGJlY2F1c2UgdGhlIGRvbSBlbGVtZW50IGRvZXNuJ3QgZXhpc3QgZWl0aGVyXG4gICAgICAvLyB3aGVuIG1vZGFsIHdhcyB1bm1vdW50ZWQgYmVmb3JlIG1vZGFsUmVmIGdldHMgbnVsbFxuICAgICAgaWYgKG5leHRUb3AubW9kYWxSZWYpIHtcbiAgICAgICAgYXJpYUhpZGRlbihuZXh0VG9wLm1vZGFsUmVmLCBmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtb2RhbEluZGV4O1xuICB9XG4gIGlzVG9wTW9kYWwobW9kYWwpIHtcbiAgICByZXR1cm4gdGhpcy5tb2RhbHMubGVuZ3RoID4gMCAmJiB0aGlzLm1vZGFsc1t0aGlzLm1vZGFscy5sZW5ndGggLSAxXSA9PT0gbW9kYWw7XG4gIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IE1vZGFsTWFuYWdlcjsiXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxVQUFVLEdBQUdBLFVBQVU7QUFDL0JGLE9BQU8sQ0FBQ0csT0FBTyxHQUFHLEtBQUssQ0FBQztBQUN4QixJQUFJQyxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFDbEM7QUFDQSxTQUFTQyxhQUFhQSxDQUFDQyxTQUFTLEVBQUU7RUFD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