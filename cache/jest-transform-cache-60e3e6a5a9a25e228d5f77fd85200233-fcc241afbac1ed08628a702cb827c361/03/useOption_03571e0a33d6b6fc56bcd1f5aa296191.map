{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","useOption","_extends2","React","_interopRequireWildcard","_utils","_SelectUnstyledContext","_useForcedRerendering","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","params","optionRef","optionRefParam","selectContext","useContext","SelectUnstyledContext","Error","getOptionProps","getOptionState","listboxRef","registerHighlightChangeHandler","registerSelectionChangeHandler","optionState","selected","highlighted","rerender","useEffect","updateSelectedState","selectedValues","Array","isArray","includes","updateHighlightedState","highlightedValue","useRef","handleRef","unstable_useForkRef","current","listboxClientRect","getBoundingClientRect","optionClientRect","top","scrollTop","bottom","getRootProps","otherHandlers","ref","index"],"sources":["useOption.js"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = useOption;\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\nvar React = _interopRequireWildcard(require(\"react\"));\nvar _utils = require(\"@mui/utils\");\nvar _SelectUnstyledContext = require(\"../SelectUnstyled/SelectUnstyledContext\");\nvar _useForcedRerendering = _interopRequireDefault(require(\"../utils/useForcedRerendering\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n/**\n *\n * API:\n *\n * - [useOption API](https://mui.com/base/api/use-option/)\n */\nfunction useOption(params) {\n  const {\n    value,\n    optionRef: optionRefParam\n  } = params;\n  const selectContext = React.useContext(_SelectUnstyledContext.SelectUnstyledContext);\n  if (!selectContext) {\n    throw new Error('Option must have access to the SelectUnstyledContext (i.e., be used inside a SelectUnstyled component).');\n  }\n  const {\n    getOptionProps,\n    getOptionState,\n    listboxRef,\n    registerHighlightChangeHandler,\n    registerSelectionChangeHandler\n  } = selectContext;\n  const optionState = getOptionState(value);\n  const {\n    selected,\n    highlighted\n  } = optionState;\n  const rerender = (0, _useForcedRerendering.default)();\n  React.useEffect(() => {\n    function updateSelectedState(selectedValues) {\n      if (!selected) {\n        if (Array.isArray(selectedValues)) {\n          if (selectedValues.includes(value)) {\n            rerender();\n          }\n        } else if (selectedValues === value) {\n          rerender();\n        }\n      } else if (Array.isArray(selectedValues)) {\n        if (!selectedValues.includes(value)) {\n          rerender();\n        }\n      } else if (selectedValues !== value) {\n        rerender();\n      }\n    }\n    return registerSelectionChangeHandler(updateSelectedState);\n  }, [registerSelectionChangeHandler, rerender, selected, value]);\n  React.useEffect(() => {\n    function updateHighlightedState(highlightedValue) {\n      if (highlightedValue === value && !highlighted) {\n        rerender();\n      } else if (highlightedValue !== value && highlighted) {\n        rerender();\n      }\n    }\n    return registerHighlightChangeHandler(updateHighlightedState);\n  }, [registerHighlightChangeHandler, rerender, value, highlighted]);\n  const optionRef = React.useRef(null);\n  const handleRef = (0, _utils.unstable_useForkRef)(optionRefParam, optionRef);\n  React.useEffect(() => {\n    // Scroll to the currently highlighted option\n    if (highlighted) {\n      if (!listboxRef.current || !optionRef.current) {\n        return;\n      }\n      const listboxClientRect = listboxRef.current.getBoundingClientRect();\n      const optionClientRect = optionRef.current.getBoundingClientRect();\n      if (optionClientRect.top < listboxClientRect.top) {\n        listboxRef.current.scrollTop -= listboxClientRect.top - optionClientRect.top;\n      } else if (optionClientRect.bottom > listboxClientRect.bottom) {\n        listboxRef.current.scrollTop += optionClientRect.bottom - listboxClientRect.bottom;\n      }\n    }\n  }, [highlighted, listboxRef]);\n  return {\n    getRootProps: (otherHandlers = {}) => (0, _extends2.default)({}, otherHandlers, getOptionProps(value, otherHandlers), {\n      ref: handleRef\n    }),\n    highlighted,\n    index: optionState.index,\n    selected\n  };\n}"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAA8C,CAAC;AACpFC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAC3CC,KAAK,EAAE;AACT,CAAC,CAAC;AACFD,OAAO,CAACE,OAAO,GAAGC,SAAS;AAC3B,IAAIC,SAAS,GAAGR,sBAAsB,CAACC,OAAO,CAAC,gCAAgC,CAAC,CAAC;AACjF,IAAIQ,KAAK,GAAGC,uBAAuB,CAACT,OAAO,CAAC,OAAO,CAAC,CAAC;AACrD,IAAIU,MAAM,GAAGV,OAAO,CAAC,YAAY,CAAC;AAClC,IAAIW,sBAAsB,GAAGX,OAAO,CAAC,yCAAyC,CAAC;AAC/E,IAAIY,qBAAqB,GAAGb,sBAAsB,CAACC,OAAO,CAAC,+BAA+B,CAAC,CAAC;AAC5F,SAASa,wBAAwBA,CAACC,WAAW,EAAE;EAAE,IAAI,OAAOC,OAAO,KAAK,UAAU,EAAE,OAAO,IAAI;EAAE,IAAIC,iBAAiB,GAAG,IAAID,OAAO,EAAE;EAAE,IAAIE,gBAAgB,GAAG,IAAIF,OAAO,EAAE;EAAE,OAAO,CAACF,wBAAwB,GAAG,SAAAA,CAAUC,WAAW,EAAE;IAAE,OAAOA,WAAW,GAAGG,gBAAgB,GAAGD,iBAAiB;EAAE,CAAC,EAAEF,WAAW,CAAC;AAAE;AACtT,SAASL,uBAAuBA,CAACS,GAAG,EAAEJ,WAAW,EAAE;EAAE,IAAI,CAACA,WAAW,IAAII,GAAG,IAAIA,GAAG,CAACC,UAAU,EAAE;IAAE,OAAOD,GAAG;EAAE;EAAE,IAAIA,GAAG,KAAK,IAAI,IAAI,OAAOA,GAAG,KAAK,QAAQ,IAAI,OAAOA,GAAG,KAAK,UAAU,EAAE;IAAE,OAAO;MAAEb,OAAO,EAAEa;IAAI,CAAC;EAAE;EAAE,IAAIE,KAAK,GAAGP,wBAAwB,CAACC,WAAW,CAAC;EAAE,IAAIM,KAAK,IAAIA,KAAK,CAACC,GAAG,CAACH,GAAG,CAAC,EAAE;IAAE,OAAOE,KAAK,CAACE,GAAG,CAACJ,GAAG,CAAC;EAAE;EAAE,IAAIK,MAAM,GAAG,CAAC,CAAC;EAAE,IAAIC,qBAAqB,GAAGvB,MAAM,CAACC,cAAc,IAAID,MAAM,CAACwB,wBAAwB;EAAE,KAAK,IAAIC,GAAG,IAAIR,GAAG,EAAE;IAAE,IAAIQ,GAAG,KAAK,SAAS,IAAIzB,MAAM,CAAC0B,SAAS,CAACC,cAAc,CAACC,IAAI,CAACX,GAAG,EAAEQ,GAAG,CAAC,EAAE;MAAE,IAAII,IAAI,GAAGN,qBAAqB,GAAGvB,MAAM,CAACwB,wBAAwB,CAACP,GAAG,EAAEQ,GAAG,CAAC,GAAG,IAAI;MAAE,IAAII,IAAI,KAAKA,IAAI,CAACR,GAAG,IAAIQ,IAAI,CAACC,GAAG,CAAC,EAAE;QAAE9B,MAAM,CAACC,cAAc,CAACqB,MAAM,EAAEG,GAAG,EAAEI,IAAI,CAAC;MAAE,CAAC,MAAM;QAAEP,MAAM,CAACG,GAAG,CAAC,GAAGR,GAAG,CAACQ,GAAG,CAAC;MAAE;IAAE;EAAE;EAAEH,MAAM,CAAClB,OAAO,GAAGa,GAAG;EAAE,IAAIE,KAAK,EAAE;IAAEA,KAAK,CAACW,GAAG,CAACb,GAAG,EAAEK,MAAM,CAAC;EAAE;EAAE,OAAOA,MAAM;AAAE;AACnyB;AACA;AACA;AACA;AACA;AACA;AACA,SAASjB,SAASA,CAAC0B,MAAM,EAAE;EACzB,MAAM;IACJ5B,KAAK;IACL6B,SAAS,EAAEC;EACb,CAAC,GAAGF,MAAM;EACV,MAAMG,aAAa,GAAG3B,KAAK,CAAC4B,UAAU,CAACzB,sBAAsB,CAAC0B,qBAAqB,CAAC;EACpF,IAAI,CAACF,aAAa,EAAE;IAClB,MAAM,IAAIG,KAAK,CAAC,yGAAyG,CAAC;EAC5H;EACA,MAAM;IACJC,cAAc;IACdC,cAAc;IACdC,UAAU;IACVC,8BAA8B;IAC9BC;EACF,CAAC,GAAGR,aAAa;EACjB,MAAMS,WAAW,GAAGJ,cAAc,CAACpC,KAAK,CAAC;EACzC,MAAM;IACJyC,QAAQ;IACRC;EACF,CAAC,GAAGF,WAAW;EACf,MAAMG,QAAQ,GAAG,CAAC,CAAC,EAAEnC,qBAAqB,CAACP,OAAO,GAAG;EACrDG,KAAK,CAACwC,SAAS,CAAC,MAAM;IACpB,SAASC,mBAAmBA,CAACC,cAAc,EAAE;MAC3C,IAAI,CAACL,QAAQ,EAAE;QACb,IAAIM,KAAK,CAACC,OAAO,CAACF,cAAc,CAAC,EAAE;UACjC,IAAIA,cAAc,CAACG,QAAQ,CAACjD,KAAK,CAAC,EAAE;YAClC2C,QAAQ,EAAE;UACZ;QACF,CAAC,MAAM,IAAIG,cAAc,KAAK9C,KAAK,EAAE;UACnC2C,QAAQ,EAAE;QACZ;MACF,CAAC,MAAM,IAAII,KAAK,CAACC,OAAO,CAACF,cAAc,CAAC,EAAE;QACxC,IAAI,CAACA,cAAc,CAACG,QAAQ,CAACjD,KAAK,CAAC,EAAE;UACnC2C,QAAQ,EAAE;QACZ;MACF,CAAC,MAAM,IAAIG,cAAc,KAAK9C,KAAK,EAAE;QACnC2C,QAAQ,EAAE;MACZ;IACF;IACA,OAAOJ,8BAA8B,CAACM,mBAAmB,CAAC;EAC5D,CAAC,EAAE,CAACN,8BAA8B,EAAEI,QAAQ,EAAEF,QAAQ,EAAEzC,KAAK,CAAC,CAAC;EAC/DI,KAAK,CAACwC,SAAS,CAAC,MAAM;IACpB,SAASM,sBAAsBA,CAACC,gBAAgB,EAAE;MAChD,IAAIA,gBAAgB,KAAKnD,KAAK,IAAI,CAAC0C,WAAW,EAAE;QAC9CC,QAAQ,EAAE;MACZ,CAAC,MAAM,IAAIQ,gBAAgB,KAAKnD,KAAK,IAAI0C,WAAW,EAAE;QACpDC,QAAQ,EAAE;MACZ;IACF;IACA,OAAOL,8BAA8B,CAACY,sBAAsB,CAAC;EAC/D,CAAC,EAAE,CAACZ,8BAA8B,EAAEK,QAAQ,EAAE3C,KAAK,EAAE0C,WAAW,CAAC,CAAC;EAClE,MAAMb,SAAS,GAAGzB,KAAK,CAACgD,MAAM,CAAC,IAAI,CAAC;EACpC,MAAMC,SAAS,GAAG,CAAC,CAAC,EAAE/C,MAAM,CAACgD,mBAAmB,EAAExB,cAAc,EAAED,SAAS,CAAC;EAC5EzB,KAAK,CAACwC,SAAS,CAAC,MAAM;IACpB;IACA,IAAIF,WAAW,EAAE;MACf,IAAI,CAACL,UAAU,CAACkB,OAAO,IAAI,CAAC1B,SAAS,CAAC0B,OAAO,EAAE;QAC7C;MACF;MACA,MAAMC,iBAAiB,GAAGnB,UAAU,CAACkB,OAAO,CAACE,qBAAqB,EAAE;MACpE,MAAMC,gBAAgB,GAAG7B,SAAS,CAAC0B,OAAO,CAACE,qBAAqB,EAAE;MAClE,IAAIC,gBAAgB,CAACC,GAAG,GAAGH,iBAAiB,CAACG,GAAG,EAAE;QAChDtB,UAAU,CAACkB,OAAO,CAACK,SAAS,IAAIJ,iBAAiB,CAACG,GAAG,GAAGD,gBAAgB,CAACC,GAAG;MAC9E,CAAC,MAAM,IAAID,gBAAgB,CAACG,MAAM,GAAGL,iBAAiB,CAACK,MAAM,EAAE;QAC7DxB,UAAU,CAACkB,OAAO,CAACK,SAAS,IAAIF,gBAAgB,CAACG,MAAM,GAAGL,iBAAiB,CAACK,MAAM;MACpF;IACF;EACF,CAAC,EAAE,CAACnB,WAAW,EAAEL,UAAU,CAAC,CAAC;EAC7B,OAAO;IACLyB,YAAY,EAAEA,CAACC,aAAa,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE5D,SAAS,CAACF,OAAO,EAAE,CAAC,CAAC,EAAE8D,aAAa,EAAE5B,cAAc,CAACnC,KAAK,EAAE+D,aAAa,CAAC,EAAE;MACpHC,GAAG,EAAEX;IACP,CAAC,CAAC;IACFX,WAAW;IACXuB,KAAK,EAAEzB,WAAW,CAACyB,KAAK;IACxBxB;EACF,CAAC;AACH"}