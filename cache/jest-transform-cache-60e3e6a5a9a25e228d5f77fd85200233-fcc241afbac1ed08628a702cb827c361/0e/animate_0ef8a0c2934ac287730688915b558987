d5783d2bf22bab1122661ba8189b292f
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = animate;
function easeInOutSin(time) {
  return (1 + Math.sin(Math.PI * time - Math.PI / 2)) / 2;
}
function animate(property, element, to, options = {}, cb = () => {}) {
  const {
    ease = easeInOutSin,
    duration = 300 // standard
  } = options;
  let start = null;
  const from = element[property];
  let cancelled = false;
  const cancel = () => {
    cancelled = true;
  };
  const step = timestamp => {
    if (cancelled) {
      cb(new Error('Animation cancelled'));
      return;
    }
    if (start === null) {
      start = timestamp;
    }
    const time = Math.min(1, (timestamp - start) / duration);
    element[property] = ease(time) * (to - from) + from;
    if (time >= 1) {
      requestAnimationFrame(() => {
        cb(null);
      });
      return;
    }
    requestAnimationFrame(step);
  };
  if (from === to) {
    cb(new Error('Element already at target position'));
    return cancel;
  }
  requestAnimationFrame(step);
  return cancel;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImRlZmF1bHQiLCJhbmltYXRlIiwiZWFzZUluT3V0U2luIiwidGltZSIsIk1hdGgiLCJzaW4iLCJQSSIsInByb3BlcnR5IiwiZWxlbWVudCIsInRvIiwib3B0aW9ucyIsImNiIiwiZWFzZSIsImR1cmF0aW9uIiwic3RhcnQiLCJmcm9tIiwiY2FuY2VsbGVkIiwiY2FuY2VsIiwic3RlcCIsInRpbWVzdGFtcCIsIkVycm9yIiwibWluIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIl0sInNvdXJjZXMiOlsiYW5pbWF0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGFuaW1hdGU7XG5mdW5jdGlvbiBlYXNlSW5PdXRTaW4odGltZSkge1xuICByZXR1cm4gKDEgKyBNYXRoLnNpbihNYXRoLlBJICogdGltZSAtIE1hdGguUEkgLyAyKSkgLyAyO1xufVxuZnVuY3Rpb24gYW5pbWF0ZShwcm9wZXJ0eSwgZWxlbWVudCwgdG8sIG9wdGlvbnMgPSB7fSwgY2IgPSAoKSA9PiB7fSkge1xuICBjb25zdCB7XG4gICAgZWFzZSA9IGVhc2VJbk91dFNpbixcbiAgICBkdXJhdGlvbiA9IDMwMCAvLyBzdGFuZGFyZFxuICB9ID0gb3B0aW9ucztcbiAgbGV0IHN0YXJ0ID0gbnVsbDtcbiAgY29uc3QgZnJvbSA9IGVsZW1lbnRbcHJvcGVydHldO1xuICBsZXQgY2FuY2VsbGVkID0gZmFsc2U7XG4gIGNvbnN0IGNhbmNlbCA9ICgpID0+IHtcbiAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICB9O1xuICBjb25zdCBzdGVwID0gdGltZXN0YW1wID0+IHtcbiAgICBpZiAoY2FuY2VsbGVkKSB7XG4gICAgICBjYihuZXcgRXJyb3IoJ0FuaW1hdGlvbiBjYW5jZWxsZWQnKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChzdGFydCA9PT0gbnVsbCkge1xuICAgICAgc3RhcnQgPSB0aW1lc3RhbXA7XG4gICAgfVxuICAgIGNvbnN0IHRpbWUgPSBNYXRoLm1pbigxLCAodGltZXN0YW1wIC0gc3RhcnQpIC8gZHVyYXRpb24pO1xuICAgIGVsZW1lbnRbcHJvcGVydHldID0gZWFzZSh0aW1lKSAqICh0byAtIGZyb20pICsgZnJvbTtcbiAgICBpZiAodGltZSA+PSAxKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICBjYihudWxsKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG4gIH07XG4gIGlmIChmcm9tID09PSB0bykge1xuICAgIGNiKG5ldyBFcnJvcignRWxlbWVudCBhbHJlYWR5IGF0IHRhcmdldCBwb3NpdGlvbicpKTtcbiAgICByZXR1cm4gY2FuY2VsO1xuICB9XG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcbiAgcmV0dXJuIGNhbmNlbDtcbn0iXSwibWFwcGluZ3MiOiJBQUFBLFlBQVk7O0FBRVpBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFDQyxPQUFPLEVBQUUsWUFBWSxFQUFFO0VBQzNDQyxLQUFLLEVBQUU7QUFDVCxDQUFDLENBQUM7QUFDRkQsT0FBTyxDQUFDRSxPQUFPLEdBQUdDLE9BQU87QUFDekIsU0FBU0MsWUFBWUEsQ0FBQ0MsSUFBSSxFQUFFO0VBQzFCLE9BQU8sQ0FBQyxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDRCxJQUFJLENBQUNFLEVBQUUsR0FBR0gsSUFBSSxHQUFHQyxJQUFJLENBQUNFLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ3pEO0FBQ0EsU0FBU0wsT0FBT0EsQ0FBQ00sUUFBUSxFQUFFQyxPQUFPLEVBQUVDLEVBQUUsRUFBRUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxFQUFFQyxFQUFFLEdBQUdBLENBQUEsS0FBTSxDQUFDLENBQUMsRUFBRTtFQUNuRSxNQUFNO0lBQ0pDLElBQUksR0FBR1YsWUFBWTtJQUNuQlcsUUFBUSxHQUFHLEdBQUcsQ0FBQztFQUNqQixDQUFDLEdBQUdILE9BQU87RUFDWCxJQUFJSSxLQUFLLEdBQUcsSUFBSTtFQUNoQixNQUFNQyxJQUFJLEdBQUdQLE9BQU8sQ0FBQ0QsUUFBUSxDQUFDO0VBQzlCLElBQUlTLFNBQVMsR0FBRyxLQUFLO0VBQ3JCLE1BQU1DLE1BQU0sR0FBR0EsQ0FBQSxLQUFNO0lBQ25CRCxTQUFTLEdBQUcsSUFBSTtFQUNsQixDQUFDO0VBQ0QsTUFBTUUsSUFBSSxHQUFHQyxTQUFTLElBQUk7SUFDeEIsSUFBSUgsU0FBUyxFQUFFO01BQ2JMLEVBQUUsQ0FBQyxJQUFJUyxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQztNQUNwQztJQUNGO0lBQ0EsSUFBSU4sS0FBSyxLQUFLLElBQUksRUFBRTtNQUNsQkEsS0FBSyxHQUFHSyxTQUFTO0lBQ25CO0lBQ0EsTUFBTWhCLElBQUksR0FBR0MsSUFBSSxDQUFDaUIsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDRixTQUFTLEdBQUdMLEtBQUssSUFBSUQsUUFBUSxDQUFDO0lBQ3hETCxPQUFPLENBQUNELFFBQVEsQ0FBQyxHQUFHSyxJQUFJLENBQUNULElBQUksQ0FBQyxJQUFJTSxFQUFFLEdBQUdNLElBQUksQ0FBQyxHQUFHQSxJQUFJO0lBQ25ELElBQUlaLElBQUksSUFBSSxDQUFDLEVBQUU7TUFDYm1CLHFCQUFxQixDQUFDLE1BQU07UUFDMUJYLEVBQUUsQ0FBQyxJQUFJLENBQUM7TUFDVixDQUFDLENBQUM7TUFDRjtJQUNGO0lBQ0FXLHFCQUFxQixDQUFDSixJQUFJLENBQUM7RUFDN0IsQ0FBQztFQUNELElBQUlILElBQUksS0FBS04sRUFBRSxFQUFFO0lBQ2ZFLEVBQUUsQ0FBQyxJQUFJUyxLQUFLLENBQUMsb0NBQW9DLENBQUMsQ0FBQztJQUNuRCxPQUFPSCxNQUFNO0VBQ2Y7RUFDQUsscUJBQXFCLENBQUNKLElBQUksQ0FBQztFQUMzQixPQUFPRCxNQUFNO0FBQ2YifQ==